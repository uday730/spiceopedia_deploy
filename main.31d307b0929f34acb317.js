(self.webpackChunkspiceopedia=self.webpackChunkspiceopedia||[]).push([[179],{255:It=>{function Ae(R){return Promise.resolve().then(()=>{var x=new Error("Cannot find module '"+R+"'");throw x.code="MODULE_NOT_FOUND",x})}Ae.keys=()=>[],Ae.resolve=Ae,Ae.id=255,It.exports=Ae},583:(It,Ae,R)=>{"use strict";R.d(Ae,{mr:()=>le,ez:()=>vi,K0:()=>F,Do:()=>Pe,V_:()=>j,Ye:()=>Oe,S$:()=>we,b0:()=>re,lw:()=>w,EM:()=>yr,JF:()=>ur,w_:()=>b,bD:()=>mr,q:()=>k,Mx:()=>s,HT:()=>Z});var x=R(639);let m=null;function k(){return m}function Z(C){m||(m=C)}class b{}const F=new x.OlP("DocumentToken");let w=(()=>{class C{historyGo(S){throw new Error("Not implemented")}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=(0,x.Yz7)({factory:N,token:C,providedIn:"platform"}),C})();function N(){return(0,x.LFG)(L)}const j=new x.OlP("Location Initialized");let L=(()=>{class C extends w{constructor(S){super(),this._doc=S,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(S){const X=k().getGlobalEventTarget(this._doc,"window");return X.addEventListener("popstate",S,!1),()=>X.removeEventListener("popstate",S)}onHashChange(S){const X=k().getGlobalEventTarget(this._doc,"window");return X.addEventListener("hashchange",S,!1),()=>X.removeEventListener("hashchange",S)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(S){this.location.pathname=S}pushState(S,X,ve){Q()?this._history.pushState(S,X,ve):this.location.hash=ve}replaceState(S,X,ve){Q()?this._history.replaceState(S,X,ve):this.location.hash=ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(S=0){this._history.go(S)}getState(){return this._history.state}}return C.\u0275fac=function(S){return new(S||C)(x.LFG(F))},C.\u0275prov=(0,x.Yz7)({factory:J,token:C,providedIn:"platform"}),C})();function Q(){return!!window.history.pushState}function J(){return new L((0,x.LFG)(F))}function W(C,V){if(0==C.length)return V;if(0==V.length)return C;let S=0;return C.endsWith("/")&&S++,V.startsWith("/")&&S++,2==S?C+V.substring(1):1==S?C+V:C+"/"+V}function G(C){const V=C.match(/#|\?|$/),S=V&&V.index||C.length;return C.slice(0,S-("/"===C[S-1]?1:0))+C.slice(S)}function Y(C){return C&&"?"!==C[0]?"?"+C:C}let we=(()=>{class C{historyGo(S){throw new Error("Not implemented")}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275prov=(0,x.Yz7)({factory:fe,token:C,providedIn:"root"}),C})();function fe(C){const V=(0,x.LFG)(F).location;return new re((0,x.LFG)(w),V&&V.origin||"")}const le=new x.OlP("appBaseHref");let re=(()=>{class C extends we{constructor(S,X){if(super(),this._platformLocation=S,this._removeListenerFns=[],null==X&&(X=this._platformLocation.getBaseHrefFromDOM()),null==X)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=X}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}prepareExternalUrl(S){return W(this._baseHref,S)}path(S=!1){const X=this._platformLocation.pathname+Y(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&S?`${X}${ve}`:X}pushState(S,X,ve,Te){const je=this.prepareExternalUrl(ve+Y(Te));this._platformLocation.pushState(S,X,je)}replaceState(S,X,ve,Te){const je=this.prepareExternalUrl(ve+Y(Te));this._platformLocation.replaceState(S,X,je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(S=0){var X,ve;null===(ve=(X=this._platformLocation).historyGo)||void 0===ve||ve.call(X,S)}}return C.\u0275fac=function(S){return new(S||C)(x.LFG(w),x.LFG(le,8))},C.\u0275prov=x.Yz7({token:C,factory:C.\u0275fac}),C})(),Pe=(()=>{class C extends we{constructor(S,X){super(),this._platformLocation=S,this._baseHref="",this._removeListenerFns=[],null!=X&&(this._baseHref=X)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}path(S=!1){let X=this._platformLocation.hash;return null==X&&(X="#"),X.length>0?X.substring(1):X}prepareExternalUrl(S){const X=W(this._baseHref,S);return X.length>0?"#"+X:X}pushState(S,X,ve,Te){let je=this.prepareExternalUrl(ve+Y(Te));0==je.length&&(je=this._platformLocation.pathname),this._platformLocation.pushState(S,X,je)}replaceState(S,X,ve,Te){let je=this.prepareExternalUrl(ve+Y(Te));0==je.length&&(je=this._platformLocation.pathname),this._platformLocation.replaceState(S,X,je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(S=0){var X,ve;null===(ve=(X=this._platformLocation).historyGo)||void 0===ve||ve.call(X,S)}}return C.\u0275fac=function(S){return new(S||C)(x.LFG(w),x.LFG(le,8))},C.\u0275prov=x.Yz7({token:C,factory:C.\u0275fac}),C})(),Oe=(()=>{class C{constructor(S,X){this._subject=new x.vpe,this._urlChangeListeners=[],this._platformStrategy=S;const ve=this._platformStrategy.getBaseHref();this._platformLocation=X,this._baseHref=G(ze(ve)),this._platformStrategy.onPopState(Te=>{this._subject.emit({url:this.path(!0),pop:!0,state:Te.state,type:Te.type})})}path(S=!1){return this.normalize(this._platformStrategy.path(S))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(S,X=""){return this.path()==this.normalize(S+Y(X))}normalize(S){return C.stripTrailingSlash(function(C,V){return C&&V.startsWith(C)?V.substring(C.length):V}(this._baseHref,ze(S)))}prepareExternalUrl(S){return S&&"/"!==S[0]&&(S="/"+S),this._platformStrategy.prepareExternalUrl(S)}go(S,X="",ve=null){this._platformStrategy.pushState(ve,"",S,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+Y(X)),ve)}replaceState(S,X="",ve=null){this._platformStrategy.replaceState(ve,"",S,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+Y(X)),ve)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(S=0){var X,ve;null===(ve=(X=this._platformStrategy).historyGo)||void 0===ve||ve.call(X,S)}onUrlChange(S){this._urlChangeListeners.push(S),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(X=>{this._notifyUrlChangeListeners(X.url,X.state)}))}_notifyUrlChangeListeners(S="",X){this._urlChangeListeners.forEach(ve=>ve(S,X))}subscribe(S,X,ve){return this._subject.subscribe({next:S,error:X,complete:ve})}}return C.\u0275fac=function(S){return new(S||C)(x.LFG(we),x.LFG(w))},C.normalizeQueryParams=Y,C.joinWithSlash=W,C.stripTrailingSlash=G,C.\u0275prov=(0,x.Yz7)({factory:Ve,token:C,providedIn:"root"}),C})();function Ve(){return new Oe((0,x.LFG)(we),(0,x.LFG)(w))}function ze(C){return C.replace(/\/index.html$/,"")}var Et=(()=>((Et=Et||{})[Et.Zero=0]="Zero",Et[Et.One=1]="One",Et[Et.Two=2]="Two",Et[Et.Few=3]="Few",Et[Et.Many=4]="Many",Et[Et.Other=5]="Other",Et))();const xe=x.kL8;class Ht{}let Qt=(()=>{class C extends Ht{constructor(S){super(),this.locale=S}getPluralCategory(S,X){switch(xe(X||this.locale)(S)){case Et.Zero:return"zero";case Et.One:return"one";case Et.Two:return"two";case Et.Few:return"few";case Et.Many:return"many";default:return"other"}}}return C.\u0275fac=function(S){return new(S||C)(x.LFG(x.soG))},C.\u0275prov=x.Yz7({token:C,factory:C.\u0275fac}),C})();function s(C,V){V=encodeURIComponent(V);for(const S of C.split(";")){const X=S.indexOf("="),[ve,Te]=-1==X?[S,""]:[S.slice(0,X),S.slice(X+1)];if(ve.trim()===V)return decodeURIComponent(Te)}return null}let vi=(()=>{class C{}return C.\u0275fac=function(S){return new(S||C)},C.\u0275mod=x.oAB({type:C}),C.\u0275inj=x.cJS({providers:[{provide:Ht,useClass:Qt}]}),C})();const mr="browser";let yr=(()=>{class C{}return C.\u0275prov=(0,x.Yz7)({token:C,providedIn:"root",factory:()=>new vr((0,x.LFG)(F),window)}),C})();class vr{constructor(V,S){this.document=V,this.window=S,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const S=function(C,V){const S=C.getElementById(V)||C.getElementsByName(V)[0];if(S)return S;if("function"==typeof C.createTreeWalker&&C.body&&(C.body.createShadowRoot||C.body.attachShadow)){const X=C.createTreeWalker(C.body,NodeFilter.SHOW_ELEMENT);let ve=X.currentNode;for(;ve;){const Te=ve.shadowRoot;if(Te){const je=Te.getElementById(V)||Te.querySelector(`[name="${V}"]`);if(je)return je}ve=X.nextNode()}}return null}(this.document,V);S&&(this.scrollToElement(S),this.attemptFocus(S))}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const S=this.window.history;S&&S.scrollRestoration&&(S.scrollRestoration=V)}}scrollToElement(V){const S=V.getBoundingClientRect(),X=S.left+this.window.pageXOffset,ve=S.top+this.window.pageYOffset,Te=this.offset();this.window.scrollTo(X-Te[0],ve-Te[1])}attemptFocus(V){return V.focus(),this.document.activeElement===V}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=qt(this.window.history)||qt(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch(V){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(V){return!1}}}function qt(C){return Object.getOwnPropertyDescriptor(C,"scrollRestoration")}class ur{}},639:(It,Ae,R)=>{"use strict";R.d(Ae,{deG:()=>$,tb:()=>Dy,AFp:()=>wy,ip1:()=>kd,CZH:()=>Ls,hGG:()=>bD,z2F:()=>Ba,sBO:()=>o1,Sil:()=>Va,_Vd:()=>Ro,EJc:()=>xy,SBq:()=>Ni,qLn:()=>as,vpe:()=>Oi,gxx:()=>hs,tBr:()=>rs,XFs:()=>Je,OlP:()=>D,zs3:()=>Xt,ZZ4:()=>Bu,aQg:()=>Hu,soG:()=>Xu,YKP:()=>ym,v3s:()=>XS,h0i:()=>Po,PXZ:()=>zS,R0b:()=>Ur,FiY:()=>qi,Lbi:()=>Sy,g9A:()=>Cy,Qsj:()=>Kw,FYo:()=>Vu,JOm:()=>Ti,Tiy:()=>ud,q3G:()=>In,tp0:()=>uo,EAV:()=>rD,Rgc:()=>Ia,dDg:()=>Ry,DyG:()=>Or,GfV:()=>cm,s_b:()=>qu,ifc:()=>yt,eFA:()=>Ly,G48:()=>VS,_c5:()=>hD,VLi:()=>US,c2e:()=>Fy,zSh:()=>ma,wAp:()=>ft,vHH:()=>Ve,EiD:()=>Af,mCW:()=>ua,qzn:()=>ss,JVY:()=>$0,pB0:()=>z0,eBb:()=>q0,L6k:()=>K0,LAX:()=>W0,cg1:()=>Xl,Tjo:()=>dD,kL8:()=>Pg,yhl:()=>Ef,dqk:()=>ct,sIi:()=>_a,CqO:()=>zl,QGY:()=>Wl,F4k:()=>jp,RDi:()=>Te,AaK:()=>Y,z3N:()=>Wi,TTD:()=>ar,xp6:()=>hh,uIk:()=>Ll,Suo:()=>ey,Xpm:()=>Vr,lG2:()=>Tr,Yz7:()=>xe,cJS:()=>Ge,oAB:()=>Br,Yjl:()=>yi,Y36:()=>Ea,_UZ:()=>Np,qZA:()=>ql,TgZ:()=>Kl,Ikx:()=>Ql,LFG:()=>Vn,$8M:()=>na,NdJ:()=>Gl,CRH:()=>ty,Q6J:()=>Hl,DdM:()=>qm,iGM:()=>Xm,LSH:()=>zc,kYT:()=>Nt,_uU:()=>fg,hij:()=>Mu});var x=R(574),m=R(869),k=R(282),oe=R(693),b=R(709),F=R(319),w=R(441);var L=R(307);function Q(){return new b.xQ}function W(e){for(let t in e)if(e[t]===W)return t;throw Error("Could not find renamed property on target object.")}function Y(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Y).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const fe=W({__forward_ref__:W});function le(e){return e.__forward_ref__=le,e.toString=function(){return Y(this())},e}function re(e){return function(e){return"function"==typeof e&&e.hasOwnProperty(fe)&&e.__forward_ref__===le}(e)?e():e}class Ve extends Error{constructor(t,n){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(t,n)),this.code=t}}function He(e){return"string"==typeof e?e:null==e?"":String(e)}function Xe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():He(e)}function ot(e,t){const n=t?` in ${t}`:"";throw new Ve("201",`No provider for ${Xe(e)} found${n}`)}function P(e,t){null==e&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function xe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ge(e){return{providers:e.providers||[],imports:e.imports||[]}}function pt(e){return wt(e,Dn)||wt(e,$t)}function wt(e,t){return e.hasOwnProperty(t)?e[t]:null}function yn(e){return e&&(e.hasOwnProperty(Ze)||e.hasOwnProperty(vt))?e[Ze]:null}const Dn=W({\u0275prov:W}),Ze=W({\u0275inj:W}),$t=W({ngInjectableDef:W}),vt=W({ngInjectorDef:W});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Kt;function nt(e){const t=Kt;return Kt=e,t}function an(e,t,n){const r=pt(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Je.Optional?null:void 0!==t?t:void ot(Y(e),"Injector")}function vn(e){return{toString:e}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),yt=(()=>((yt=yt||{})[yt.Emulated=0]="Emulated",yt[yt.None=2]="None",yt[yt.ShadowDom=3]="ShadowDom",yt))();const Ir="undefined"!=typeof globalThis&&globalThis,ut="undefined"!=typeof window&&window,Vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,nr="undefined"!=typeof global&&global,ct=Ir||nr||ut||Vt,Zn={},Tt=[],pr=W({\u0275cmp:W}),dn=W({\u0275dir:W}),On=W({\u0275pipe:W}),Ar=W({\u0275mod:W}),pi=W({\u0275loc:W}),Pn=W({\u0275fac:W}),rr=W({__NG_ELEMENT_ID__:W});let gi=0;function Vr(e){return vn(()=>{const n={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Tt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||yt.Emulated,id:"c",styles:e.styles||Tt,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,o=e.features,u=e.pipes;return r.id+=gi++,r.inputs=Sr(e.inputs,n),r.outputs=Sr(e.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Cr):null,r.pipeDefs=u?()=>("function"==typeof u?u():u).map(Fn):null,r})}function Cr(e){return fn(e)||function(e){return e[dn]||null}(e)}function Fn(e){return function(e){return e[On]||null}(e)}const lt={};function Br(e){return vn(()=>{const t={type:e.type,bootstrap:e.bootstrap||Tt,declarations:e.declarations||Tt,imports:e.imports||Tt,exports:e.exports||Tt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(lt[e.id]=e.type),t})}function Nt(e,t){return vn(()=>{const n=Mn(e,!0);n.declarations=t.declarations||Tt,n.imports=t.imports||Tt,n.exports=t.exports||Tt})}function Sr(e,t){if(null==e)return Zn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Tr=Vr;function yi(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function fn(e){return e[pr]||null}function Mn(e,t){const n=e[Ar]||null;if(!n&&!0===t)throw new Error(`Type ${Y(e)} does not have '\u0275mod' property.`);return n}const y=11;function $e(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ne(e){return Array.isArray(e)&&!0===e[1]}function _t(e){return 0!=(8&e.flags)}function qe(e){return 2==(2&e.flags)}function Qe(e){return 1==(1&e.flags)}function Ct(e){return null!==e.template}function zt(e){return 0!=(512&e[2])}function hn(e,t){return e.hasOwnProperty(Pn)?e[Pn]:null}class Dr{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ar(){return Yt}function Yt(e){return e.type.prototype.ngOnChanges&&(e.setInput=vr),yr}function yr(){const e=Kr(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Zn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function vr(e,t,n,r){const i=Kr(e)||function(e,t){return e[qt]=t}(e,{previous:Zn,current:null}),o=i.current||(i.current={}),u=i.previous,l=this.declaredInputs[n],p=u[l];o[l]=new Dr(p&&p.currentValue,t,u===Zn),e[r]=t}ar.ngInherit=!0;const qt="__ngSimpleChanges__";function Kr(e){return e[qt]||null}let ve;function Te(e){ve=e}function st(e){return!!e.listen}const Jt={createRenderer:(e,t)=>void 0!==ve?ve:"undefined"!=typeof document?document:void 0};function Rt(e){for(;Array.isArray(e);)e=e[0];return e}function bn(e,t){return Rt(t[e.index])}function Wr(e,t){return e.data[t]}function $n(e,t){const n=t[e];return $e(n)?n:n[0]}function po(e){return 4==(4&e[2])}function $s(e){return 128==(128&e[2])}function Fr(e,t){return null==t?null:e[t]}function Qi(e){e[18]=0}function Lo(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const gt={lFrame:Xa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qs(){return gt.bindingsEnabled}function Le(){return gt.lFrame.lView}function Ot(){return gt.lFrame.tView}function kn(){let e=Ga();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ga(){return gt.lFrame.currentTNode}function kr(e,t){const n=gt.lFrame;n.currentTNode=e,n.isParent=t}function Uo(){return gt.lFrame.isParent}function go(){return gt.isInCheckNoChangesMode}function Bo(e){gt.isInCheckNoChangesMode=e}function Xi(){return gt.lFrame.bindingIndex++}function Ho(e,t){const n=gt.lFrame;n.bindingIndex=n.bindingRootIndex=e,zs(t)}function zs(e){gt.lFrame.currentDirectiveIndex=e}function Ja(){return gt.lFrame.currentQueryIndex}function Ui(e){gt.lFrame.currentQueryIndex=e}function mc(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Za(e,t,n){if(n&Je.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&Je.Host||(i=mc(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=gt.lFrame=Qa();return r.currentTNode=t,r.lView=e,!0}function Ei(e){const t=Qa(),n=e[1];gt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Qa(){const e=gt.lFrame,t=null===e?null:e.child;return null===t?Xa(e):t}function Xa(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function eu(){const e=gt.lFrame;return gt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const tu=eu;function $o(){const e=eu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function er(){return gt.lFrame.selectedIndex}function wi(e){gt.lFrame.selectedIndex=e}function pn(){const e=gt.lFrame;return Wr(e.tView,e.selectedIndex)}function Gs(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:l,ngAfterViewInit:p,ngAfterViewChecked:_,ngOnDestroy:I}=o;u&&(e.contentHooks||(e.contentHooks=[])).push(-n,u),l&&((e.contentHooks||(e.contentHooks=[])).push(n,l),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,l)),p&&(e.viewHooks||(e.viewHooks=[])).push(-n,p),_&&((e.viewHooks||(e.viewHooks=[])).push(n,_),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,_)),null!=I&&(e.destroyHooks||(e.destroyHooks=[])).push(n,I)}}function mo(e,t,n){Ys(e,t,3,n)}function yo(e,t,n,r){(3&e[2])===n&&Ys(e,t,n,r)}function Ko(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ys(e,t,n,r){const o=null!=r?r:-1,u=t.length-1;let l=0;for(let p=void 0!==r?65535&e[18]:0;p<u;p++)if("number"==typeof t[p+1]){if(l=t[p],null!=r&&l>=r)break}else t[p]<0&&(e[18]+=65536),(l<o||-1==o)&&(Sc(e,n,t,p),e[18]=(4294901760&e[18])+p+2),p++}function Sc(e,t,n,r){const i=n[r]<0,o=n[r+1],l=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class vo{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function qo(e,t,n){const r=st(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const u=n[i++],l=n[i++],p=n[i++];r?e.setAttribute(t,l,p,u):t.setAttributeNS(u,l,p)}else{const u=o,l=n[++i];Zs(u)?r&&e.setProperty(t,u,l):r?e.setAttribute(t,u,l):t.setAttribute(u,l),i++}}return i}function Bi(e){return 3===e||4===e||6===e}function Zs(e){return 64===e.charCodeAt(0)}function Wo(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||iu(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function iu(e,t,n,r,i){let o=0,u=e.length;if(-1===t)u=-1;else for(;o<e.length;){const l=e[o++];if("number"==typeof l){if(l===t){u=-1;break}if(l>t){u=o-1;break}}}for(;o<e.length;){const l=e[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==u&&(e.splice(u,0,t),o=u+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function ou(e){return-1!==e}function Hi(e){return 32767&e}function to(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Kn=!0;function zo(e){const t=Kn;return Kn=e,t}let no=0;function bo(e,t){const n=Xs(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Eo(r.data,e),Eo(t,null),Eo(r.blueprint,null));const i=wo(e,t),o=e.injectorIndex;if(ou(i)){const u=Hi(i),l=to(i,t),p=l[1].data;for(let _=0;_<8;_++)t[o+_]=l[u+_]|p[u+_]}return t[o+8]=i,o}function Eo(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Xs(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function wo(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const o=i[1],u=o.type;if(r=2===u?o.declTNode:1===u?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Yo(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(rr)&&(r=n[rr]),null==r&&(r=n[rr]=no++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function ea(e,t,n){if(n&Je.Optional)return e;ot(t,"NodeInjector")}function Jo(e,t,n,r){if(n&Je.Optional&&void 0===r&&(r=null),0==(n&(Je.Self|Je.Host))){const i=e[9],o=nt(void 0);try{return i?i.get(t,r,n&Je.Optional):an(t,r,n&Je.Optional)}finally{nt(o)}}return ea(r,t,n)}function Pc(e,t,n,r=Je.Default,i){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(rr)?e[rr]:void 0;return"number"==typeof t?t>=0?255&t:au:t}(n);if("function"==typeof o){if(!Za(t,e,r))return r&Je.Host?ea(i,n,r):Jo(t,n,r,i);try{const u=o(r);if(null!=u||r&Je.Optional)return u;ot(n)}finally{tu()}}else if("number"==typeof o){let u=null,l=Xs(e,t),p=-1,_=r&Je.Host?t[16][6]:null;for((-1===l||r&Je.SkipSelf)&&(p=-1===l?wo(e,t):t[l+8],-1!==p&&cu(r,!1)?(u=t[1],l=Hi(p),t=to(p,t)):l=-1);-1!==l;){const I=t[1];if(uu(o,l,I.data)){const z=Mc(l,t,n,u,r,_);if(z!==Si)return z}p=t[l+8],-1!==p&&cu(r,t[1].data[l+8]===_)&&uu(o,l,t)?(u=I,l=Hi(p),t=to(p,t)):l=-1}}}return Jo(t,n,r,i)}const Si={};function au(){return new ro(kn(),Le())}function Mc(e,t,n,r,i,o){const u=t[1],l=u.data[e+8],I=Zo(l,u,n,null==r?qe(l)&&Kn:r!=u&&0!=(3&l.type),i&Je.Host&&o===l);return null!==I?Co(t,u,I,l):Si}function Zo(e,t,n,r,i){const o=e.providerIndexes,u=t.data,l=1048575&o,p=e.directiveStart,I=o>>20,ee=i?l+I:e.directiveEnd;for(let me=r?l:l+I;me<ee;me++){const Ce=u[me];if(me<p&&n===Ce||me>=p&&Ce.type===n)return me}if(i){const me=u[p];if(me&&Ct(me)&&me.type===n)return p}return null}function Co(e,t,n,r){let i=e[n];const o=t.data;if(function(e){return e instanceof vo}(i)){const u=i;u.resolving&&function(e,t){throw new Ve("200",`Circular dependency in DI detected for ${e}`)}(Xe(o[n]));const l=zo(u.canSeeViewProviders);u.resolving=!0;const p=u.injectImpl?nt(u.injectImpl):null;Za(e,r,Je.Default);try{i=e[n]=u.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const u=Yt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==p&&nt(p),zo(l),u.resolving=!1,tu()}}return i}function uu(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function cu(e,t){return!(e&Je.Self||e&Je.Host&&t)}class ro{constructor(t,n){this._tNode=t,this._lView=n}get(t,n){return Pc(this._tNode,this._lView,t,void 0,n)}}function na(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Bi(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(kn(),e)}const Di="__parameters__";function $i(e,t,n){return vn(()=>{const r=function(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const u=new i(...o);return l.annotation=u,l;function l(p,_,I){const z=p.hasOwnProperty(Di)?p[Di]:Object.defineProperty(p,Di,{value:[]})[Di];for(;z.length<=I;)z.push(null);return(z[I]=z[I]||[]).push(u),p}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class D{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=xe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $=new D("AnalyzeForEntryComponents"),Or=Function;function Gr(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Gr(r,t)):t!==e&&t.push(r)}return t}function xi(e,t){e.forEach(n=>Array.isArray(n)?xi(n,t):t(n))}function du(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Do(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const ia={},Lc="__NG_DI_FLAG__",ts="ngTempTokenPath",S0=/\n/gm,jc="__source",Uc=W({provide:String,useValue:W});let oa;function ns(e){const t=oa;return oa=e,t}function F0(e,t=Je.Default){if(void 0===oa)throw new Error("inject() must be called from an injection context");return null===oa?an(e,void 0,t):oa.get(e,t&Je.Optional?null:void 0,t)}function Vn(e,t=Je.Default){return(Kt||F0)(re(e),t)}function Fo(e){const t=[];for(let n=0;n<e.length;n++){const r=re(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=Je.Default;for(let u=0;u<r.length;u++){const l=r[u],p=x0(l);"number"==typeof p?-1===p?i=l.token:o|=p:i=l}t.push(Vn(i,o))}else t.push(Vn(r))}return t}function sa(e,t){return e[Lc]=t,e.prototype[Lc]=t,e}function x0(e){return e[Lc]}function hf(e,t,n,r){const i=e[ts];throw t[jc]&&i.unshift(t[jc]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=Y(t);if(Array.isArray(t))i=t.map(Y).join(" -> ");else if("object"==typeof t){let o=[];for(let u in t)if(t.hasOwnProperty(u)){let l=t[u];o.push(u+":"+("string"==typeof l?JSON.stringify(l):Y(l)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(S0,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[ts]=null,e}const rs=sa($i("Inject",e=>({token:e})),-1),qi=sa($i("Optional"),8),uo=sa($i("SkipSelf"),4);let gu;function os(e){var t;return(null===(t=function(){if(void 0===gu&&(gu=null,ct.trustedTypes))try{gu=ct.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return gu}())||void 0===t?void 0:t.createHTML(e))||e}class xo{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class j0 extends xo{getTypeName(){return"HTML"}}class U0 extends xo{getTypeName(){return"Style"}}class V0 extends xo{getTypeName(){return"Script"}}class B0 extends xo{getTypeName(){return"URL"}}class H0 extends xo{getTypeName(){return"ResourceURL"}}function Wi(e){return e instanceof xo?e.changingThisBreaksApplicationSecurity:e}function ss(e,t){const n=Ef(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Ef(e){return e instanceof xo&&e.getTypeName()||null}function $0(e){return new j0(e)}function K0(e){return new U0(e)}function q0(e){return new V0(e)}function W0(e){return new B0(e)}function z0(e){return new H0(e)}class G0{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(os(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch(n){return null}}}class Y0{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const r=this.inertDocument.createElement("body");n.appendChild(r)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=os(t),n;const r=this.inertDocument.createElement("body");return r.innerHTML=os(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(t){const n=t.attributes;for(let i=n.length-1;0<i;i--){const u=n.item(i).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&t.removeAttribute(u)}let r=t.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const Z0=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Q0=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ua(e){return(e=String(e)).match(Z0)||e.match(Q0)?e:"unsafe:"+e}function Ii(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function ca(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const Sf=Ii("area,br,col,hr,img,wbr"),Df=Ii("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ff=Ii("rp,rt"),$c=ca(Sf,ca(Df,Ii("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ca(Ff,Ii("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ca(Ff,Df)),Kc=Ii("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qc=Ii("srcset"),xf=ca(Kc,qc,Ii("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ii("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),X0=Ii("script,style,template");class ev{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!$c.hasOwnProperty(n))return this.sanitizedSomething=!0,!X0.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),u=o.name,l=u.toLowerCase();if(!xf.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let p=o.value;Kc[l]&&(p=ua(p)),qc[l]&&(e=p,p=(e=String(e)).split(",").map(t=>ua(t.trim())).join(", ")),this.buf.push(" ",u,'="',If(p),'"')}var e;return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();$c.hasOwnProperty(n)&&!Sf.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(If(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const tv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nv=/([^\#-~ |!])/g;function If(e){return e.replace(/&/g,"&amp;").replace(tv,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nv,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yu;function Af(e,t){let n=null;try{yu=yu||function(e){const t=new Y0(e);return function(){try{return!!(new window.DOMParser).parseFromString(os(""),"text/html")}catch(e){return!1}}()?new G0(t):t}(e);let r=t?String(t):"";n=yu.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=yu.getInertBodyElement(r)}while(r!==o);return os((new ev).sanitizeChildren(Wc(n)||n))}finally{if(n){const r=Wc(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Wc(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var In=(()=>((In=In||{})[In.NONE=0]="NONE",In[In.HTML=1]="HTML",In[In.STYLE=2]="STYLE",In[In.SCRIPT=3]="SCRIPT",In[In.URL=4]="URL",In[In.RESOURCE_URL=5]="RESOURCE_URL",In))();function zc(e){const t=function(){const e=Le();return e&&e[12]}();return t?t.sanitize(In.URL,e)||"":ss(e,"URL")?Wi(e):ua(He(e))}const Pf="__ngContext__";function lr(e,t){e[Pf]=t}function Yc(e){const t=function(e){return e[Pf]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function vu(e){return e.ngOriginalError}function bv(e,...t){e.error(...t)}class as{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=this._findContext(t),i=(e=t)&&e.ngErrorLogger||bv;var e;i(this._console,"ERROR",t),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?t.ngDebugContext||this._findContext(vu(t)):null}_findOriginalError(t){let n=t&&vu(t);for(;n&&vu(n);)n=vu(n);return n||null}}const Bf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ct))();function Ai(e){return e instanceof Function?e():e}var Ti=(()=>((Ti=Ti||{})[Ti.Important=1]="Important",Ti[Ti.DashCase=2]="DashCase",Ti))();function Qc(e,t){return undefined(e,t)}function fa(e){const t=e[3];return Ne(t)?t[3]:t}function Xc(e){return Wf(e[13])}function el(e){return Wf(e[4])}function Wf(e){for(;null!==e&&!Ne(e);)e=e[4];return e}function cs(e,t,n,r,i){if(null!=r){let o,u=!1;Ne(r)?o=r:$e(r)&&(u=!0,r=r[0]);const l=Rt(r);0===e&&null!==n?null==i?Qf(t,n,l):Io(t,n,l,i||null,!0):1===e&&null!==n?Io(t,n,l,i||null,!0):2===e?function(e,t,n){const r=bu(e,t);r&&function(e,t,n,r){st(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,l,u):3===e&&t.destroyNode(l),null!=o&&function(e,t,n,r,i){const o=n[7];o!==Rt(n)&&cs(t,e,r,o,i);for(let l=10;l<n.length;l++){const p=n[l];ha(p[1],p,e,t,r,o)}}(t,e,o,n,i)}}function nl(e,t,n){return st(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Gf(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Lo(i,-1)),n.splice(r,1)}function rl(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Gf(i,r),t>0&&(e[n-1][4]=r[4]);const o=Do(e,10+t);!function(e,t){ha(e,t,t[y],2,null,null),t[0]=null,t[6]=null}(r[1],r);const u=o[19];null!==u&&u.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Yf(e,t){if(!(256&t[2])){const n=t[y];st(n)&&n.destroyNode&&ha(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return il(e[1],e);for(;t;){let n=null;if($e(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)$e(t)&&il(t[1],t),t=t[3];null===t&&(t=e),$e(t)&&il(t[1],t),n=t&&t[4]}t=n}}(t)}}function il(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof vo)){const o=n[r+1];if(Array.isArray(o))for(let u=0;u<o.length;u+=2){const l=i[o[u]],p=o[u+1];try{p.call(l)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const u=n[o+1],l="function"==typeof u?u(t):Rt(t[u]),p=r[i=n[o+2]],_=n[o+3];"boolean"==typeof _?l.removeEventListener(n[o],p,_):_>=0?r[i=_]():r[i=-_].unsubscribe(),o+=2}else{const u=r[i=n[o+1]];n[o].call(u)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&st(t[y])&&t[y].destroy();const n=t[17];if(null!==n&&Ne(t[3])){n!==t[3]&&Gf(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Jf(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===yt.None||i===yt.Emulated)return null}return bn(r,n)}(e,t.parent,n)}function Io(e,t,n,r,i){st(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Qf(e,t,n){st(e)?e.appendChild(t,n):t.appendChild(n)}function Xf(e,t,n,r,i){null!==r?Io(e,t,n,r,i):Qf(e,t,n)}function bu(e,t){return st(e)?e.parentNode(t):t.parentNode}let nh=function(e,t,n){return 40&e.type?bn(e,n):null};function Eu(e,t,n,r){const i=Jf(e,r,t),o=t[y],l=function(e,t,n){return nh(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let p=0;p<n.length;p++)Xf(o,i,n[p],l,!1);else Xf(o,i,n,l,!1)}function wu(e,t){if(null!==t){const n=t.type;if(3&n)return bn(t,e);if(4&n)return sl(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return wu(e,r);{const i=e[t.index];return Ne(i)?sl(-1,i):Rt(i)}}if(32&n)return Qc(t,e)()||Rt(e[t.index]);{const r=ih(e,t);return null!==r?Array.isArray(r)?r[0]:wu(fa(e[16]),r):wu(e,t.next)}}return null}function ih(e,t){return null!==t?e[16][6].projection[t.projection]:null}function sl(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return wu(r,i)}return t[7]}function al(e,t,n,r,i,o,u){for(;null!=n;){const l=r[n.index],p=n.type;if(u&&0===t&&(l&&lr(Rt(l),r),n.flags|=4),64!=(64&n.flags))if(8&p)al(e,t,n.child,r,i,o,!1),cs(t,e,i,l,o);else if(32&p){const _=Qc(n,r);let I;for(;I=_();)cs(t,e,i,I,o);cs(t,e,i,l,o)}else 16&p?sh(e,t,r,n,i,o):cs(t,e,i,l,o);n=u?n.projectionNext:n.next}}function ha(e,t,n,r,i,o){al(n,r,e.firstChild,t,i,o,!1)}function sh(e,t,n,r,i,o){const u=n[16],p=u[6].projection[r.projection];if(Array.isArray(p))for(let _=0;_<p.length;_++)cs(t,e,i,p[_],o);else al(e,t,p,u[3],i,o,!0)}function ah(e,t,n){st(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ul(e,t,n){st(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function uh(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const ch="ng-template";function Wv(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==uh(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function lh(e){return 4===e.type&&e.value!==ch}function zv(e,t,n){return t===(4!==e.type||n?e.value:ch)}function Gv(e,t,n){let r=4;const i=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(Bi(e[t]))return t;return e.length}(i);let u=!1;for(let l=0;l<t.length;l++){const p=t[l];if("number"!=typeof p){if(!u)if(4&r){if(r=2|1&r,""!==p&&!zv(e,p,n)||""===p&&1===t.length){if(ri(r))return!1;u=!0}}else{const _=8&r?p:t[++l];if(8&r&&null!==e.attrs){if(!Wv(e.attrs,_,n)){if(ri(r))return!1;u=!0}continue}const z=Yv(8&r?"class":p,i,lh(e),n);if(-1===z){if(ri(r))return!1;u=!0;continue}if(""!==_){let ee;ee=z>o?"":i[z+1].toLowerCase();const me=8&r?ee:null;if(me&&-1!==uh(me,_,0)||2&r&&_!==ee){if(ri(r))return!1;u=!0}}}}else{if(!u&&!ri(r)&&!ri(p))return!1;if(u&&ri(p))continue;u=!1,r=p|1&r}}return ri(r)||u}function ri(e){return 0==(1&e)}function Yv(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const u=t[i];if(u===e)return i;if(3===u||6===u)o=!0;else{if(1===u||2===u){let l=t[++i];for(;"string"==typeof l;)l=t[++i];continue}if(4===u)break;if(0===u){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function dh(e,t,n=!1){for(let r=0;r<t.length;r++)if(Gv(e,t[r],n))return!0;return!1}function fh(e,t){return e?":not("+t.trim()+")":t}function e_(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let u=e[n];if("string"==typeof u)if(2&r){const l=e[++n];i+="["+u+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+u:4&r&&(i+=" "+u);else""!==i&&!ri(u)&&(t+=fh(o,i),i=""),r=u,o=o||!ri(r);n++}return""!==i&&(t+=fh(o,i)),t}const St={};function hh(e){ph(Ot(),Le(),er()+e,go())}function ph(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&mo(t,o,n)}else{const o=e.preOrderHooks;null!==o&&yo(t,o,0,n)}wi(n)}function Sh(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const u=e.data[o];Ui(i),u.contentQueries(2,t[o],o)}}}function pa(e,t,n,r,i,o,u,l,p,_){const I=t.blueprint.slice();return I[0]=i,I[2]=140|r,Qi(I),I[3]=I[15]=e,I[8]=n,I[10]=u||e&&e[10],I[y]=l||e&&e[y],I[12]=p||e&&e[12]||null,I[9]=_||e&&e[9]||null,I[6]=o,I[16]=2==t.type?e[16]:I,I}function ls(e,t,n,r,i){let o=e.data[t];if(null===o)o=function(e,t,n,r,i){const o=Ga(),u=Uo(),p=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=p),null!==o&&(u?null==o.child&&null!==p.parent&&(o.child=p):null===o.next&&(o.next=p)),p}(e,t,n,r,i),gt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const u=function(){const e=gt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===u?-1:u.injectorIndex}return kr(o,!0),o}function ds(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ga(e,t,n){Ei(t);try{const r=e.viewQuery;null!==r&&xl(1,r,n);const i=e.template;null!==i&&Dh(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Sh(e,t),e.staticViewQueries&&xl(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)M_(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,$o()}}function fs(e,t,n,r){const i=t[2];if(256==(256&i))return;Ei(t);const o=go();try{Qi(t),function(e){gt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Dh(e,t,n,2,r);const u=3==(3&i);if(!o)if(u){const _=e.preOrderCheckHooks;null!==_&&mo(t,_,null)}else{const _=e.preOrderHooks;null!==_&&yo(t,_,0,null),Ko(t,0)}if(function(e){for(let t=Xc(e);null!==t;t=el(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&Lo(o,1),i[2]|=1024}}}(t),function(e){for(let t=Xc(e);null!==t;t=el(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];$s(r)&&fs(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Sh(e,t),!o)if(u){const _=e.contentCheckHooks;null!==_&&mo(t,_)}else{const _=e.contentHooks;null!==_&&yo(t,_,1),Ko(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)wi(~i);else{const o=i,u=n[++r],l=n[++r];Ho(u,o),l(2,t[o])}}}finally{wi(-1)}}(e,t);const l=e.components;null!==l&&function(e,t){for(let n=0;n<t.length;n++)P_(e,t[n])}(t,l);const p=e.viewQuery;if(null!==p&&xl(2,p,r),!o)if(u){const _=e.viewCheckHooks;null!==_&&mo(t,_)}else{const _=e.viewHooks;null!==_&&yo(t,_,2),Ko(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Lo(t[3],-1))}finally{$o()}}function h_(e,t,n,r){const i=t[10],o=!go(),u=po(t);try{o&&!u&&i.begin&&i.begin(),u&&ga(e,t,r),fs(e,t,n,r)}finally{o&&!u&&i.end&&i.end()}}function Dh(e,t,n,r,i){const o=er(),u=2&r;try{wi(-1),u&&t.length>20&&ph(e,t,20,go()),n(r,i)}finally{wi(o)}}function xh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Fu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Fu(e,t,n,r,i,o,u,l,p,_){const I=20+r,z=I+i,ee=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:St);return n}(I,z),me="function"==typeof _?_():_;return ee[1]={type:e,blueprint:ee,template:n,queries:null,viewQuery:l,declTNode:t,data:ee.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:p,consts:me,incompleteFirstPass:!1}}function Th(e,t,n,r){const i=Vh(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Bh(e).push(r,i.length-1))}function Rh(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function jr(e,t,n,r,i,o,u,l){const p=bn(t,n);let I,_=t.inputs;!l&&null!=_&&(I=_[r])?(Kh(e,n,I,r,i),qe(t)&&function(e,t){const n=$n(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=u?u(i,t.value||"",r):i,st(o)?o.setProperty(p,r,i):Zs(r)||(p.setProperty?p.setProperty(r,i):p[r]=i))}function Mh(e,t,n,r,i,o){const u=o.hostBindings;if(u){let l=e.hostBindingOpCodes;null===l&&(l=e.hostBindingOpCodes=[]);const p=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(l)!=p&&l.push(p),l.push(r,i,u)}}function kh(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Nh(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function F_(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ct(t)&&(n[""]=e)}}function Oh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Lh(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=hn(i.type)),u=new vo(o,Ct(i),null);e.blueprint[r]=u,n[r]=u,Mh(e,t,0,r,ds(e,n,i.hostVars,St),i)}function x_(e,t,n){const r=bn(t,e),i=xh(n),o=e[10],u=xu(e,pa(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=u}function Ri(e,t,n,r,i,o){const u=bn(e,t);!function(e,t,n,r,i,o,u){if(null==o)st(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const l=null==u?He(o):u(o,r||"",i);st(e)?e.setAttribute(t,i,l,n):n?t.setAttributeNS(n,i,l):t.setAttribute(i,l)}}(t[y],u,o,e.value,n,r,i)}function I_(e,t,n,r,i,o){const u=o[t];if(null!==u){const l=r.setInput;for(let p=0;p<u.length;){const _=u[p++],I=u[p++],z=u[p++];null!==l?r.setInput(n,z,_,I):n[I]=z}}}function A_(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function P_(e,t){const n=$n(t,e);if($s(n)){const r=n[1];80&n[2]?fs(r,n,r.template,n[8]):n[5]>0&&Cl(n)}}function Cl(e){for(let r=Xc(e);null!==r;r=el(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const u=o[1];fs(u,o,u.template,o[8])}else o[5]>0&&Cl(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=$n(n[r],e);$s(i)&&i[5]>0&&Cl(i)}}function M_(e,t){const n=$n(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),ga(r,n,n[8])}function xu(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Sl(e){for(;e;){e[2]|=64;const t=fa(e);if(zt(e)&&!t)return e;e=t}return null}function Fl(e,t,n){const r=t[10];r.begin&&r.begin();try{fs(e,t,e.template,n)}catch(i){throw $h(t,i),i}finally{r.end&&r.end()}}function Uh(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Yc(n),i=r[1];h_(i,r,i.template,n)}}(e[8])}function xl(e,t,n){Ui(0),t(e,n)}const j_=(()=>Promise.resolve(null))();function Vh(e){return e[7]||(e[7]=[])}function Bh(e){return e.cleanup||(e.cleanup=[])}function $h(e,t){const n=e[9],r=n?n.get(as,null):null;r&&r.handleError(t)}function Kh(e,t,n,r,i){for(let o=0;o<n.length;){const u=n[o++],l=n[o++],p=t[u],_=e.data[u];null!==_.setInput?_.setInput(p,i,r,l):p[l]=i}}function Yi(e,t,n){const r=function(e,t){return Rt(t[e])}(t,e);!function(e,t,n){st(e)?e.setValue(t,n):t.textContent=n}(e[y],r,n)}function Iu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let u=0;u<t.length;u++){const l=t[u];"number"==typeof l?o=l:1==o?i=we(i,l):2==o&&(r=we(r,l+": "+t[++u]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const hs=new D("INJECTOR",-1);class qh{get(t,n=ia){if(n===ia){const r=new Error(`NullInjectorError: No provider for ${Y(t)}!`);throw r.name="NullInjectorError",r}return n}}const ma=new D("Set Injector scope."),ya={},B_={};let Il;function Wh(){return void 0===Il&&(Il=new qh),Il}function zh(e,t=null,n=null,r){return new $_(e,n,t||Wh(),r)}class $_{constructor(t,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&xi(n,l=>this.processProvider(l,t,n)),xi([t],l=>this.processInjectorType(l,[],o)),this.records.set(hs,ps(void 0,this));const u=this.records.get(ma);this.scope=null!=u?u.value:null,this.source=i||("object"==typeof t?null:Y(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=ia,r=Je.Default){this.assertNotDestroyed();const i=ns(this),o=nt(void 0);try{if(!(r&Je.SkipSelf)){let l=this.records.get(t);if(void 0===l){const p=("function"==typeof(e=t)||"object"==typeof e&&e instanceof D)&&pt(t);l=p&&this.injectableDefInScope(p)?ps(Al(t),ya):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&Je.Self?Wh():this.parent).get(t,n=r&Je.Optional&&n===ia?null:n)}catch(u){if("NullInjectorError"===u.name){if((u[ts]=u[ts]||[]).unshift(Y(t)),i)throw u;return hf(u,t,"R3InjectorError",this.source)}throw u}finally{nt(o),ns(i)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,i)=>t.push(Y(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,r){if(!(t=re(t)))return!1;let i=yn(t);const o=null==i&&t.ngModule||void 0,u=void 0===o?t:o,l=-1!==r.indexOf(u);if(void 0!==o&&(i=yn(o)),null==i)return!1;if(null!=i.imports&&!l){let I;r.push(u);try{xi(i.imports,z=>{this.processInjectorType(z,n,r)&&(void 0===I&&(I=[]),I.push(z))})}finally{}if(void 0!==I)for(let z=0;z<I.length;z++){const{ngModule:ee,providers:me}=I[z];xi(me,Ce=>this.processProvider(Ce,ee,me||Tt))}}this.injectorDefTypes.add(u);const p=hn(u)||(()=>new u);this.records.set(u,ps(p,ya));const _=i.providers;if(null!=_&&!l){const I=t;xi(_,z=>this.processProvider(z,I,_))}return void 0!==o&&void 0!==t.providers}processProvider(t,n,r){let i=gs(t=re(t))?t:re(t&&t.provide);const o=Yh(e=t)?ps(void 0,e.useValue):ps(function(e,t,n){let r;if(gs(e)){const i=re(e);return hn(i)||Al(i)}if(Yh(e))r=()=>re(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Fo(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Vn(re(e.useExisting));else{const i=re(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return hn(i)||Al(i);r=()=>new i(...Fo(e.deps))}return r}(e),ya);var e;if(gs(t)||!0!==t.multi)this.records.get(i);else{let u=this.records.get(i);u||(u=ps(void 0,ya,!0),u.factory=()=>Fo(u.multi),this.records.set(i,u)),i=t,u.multi.push(t)}this.records.set(i,o)}hydrate(t,n){return n.value===ya&&(n.value=B_,n.value=n.factory()),"object"==typeof n.value&&n.value&&null!==(e=n.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(n.value),n.value;var e}injectableDefInScope(t){if(!t.providedIn)return!1;const n=re(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Al(e){const t=pt(e),n=null!==t?t.factory:hn(e);if(null!==n)return n;if(e instanceof D)throw new Error(`Token ${Y(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const r=function(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?");throw new Error(`Can't resolve all parameters for ${Y(e)}: (${r.join(", ")}).`)}const n=function(e){const t=e&&(e[Dn]||e[$t]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ps(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Yh(e){return null!==e&&"object"==typeof e&&Uc in e}function gs(e){return"function"==typeof e}const Jh=function(e,t,n){return function(e,t=null,n=null,r){const i=zh(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class Xt{static create(t,n){return Array.isArray(t)?Jh(t,n,""):Jh(t.providers,t.parent,t.name||"")}}function lb(e,t){Gs(Yc(e)[1],kn())}Xt.THROW_IF_NOT_FOUND=ia,Xt.NULL=new qh,Xt.\u0275prov=xe({token:Xt,providedIn:"any",factory:()=>Vn(hs)}),Xt.__NG_ELEMENT_ID__=-1;let Au=null;function ms(){if(!Au){const e=ct.Symbol;if(e&&e.iterator)Au=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Au=r)}}}return Au}function _a(e){return!!Ol(e)&&(Array.isArray(e)||!(e instanceof Map)&&ms()in e)}function Ol(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function dr(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ll(e,t,n,r){const i=Le();return dr(i,Xi(),t)&&(Ot(),Ri(pn(),i,e,t,n,r)),Ll}function Ea(e,t=Je.Default){const n=Le();return null===n?Vn(e,t):Pc(kn(),n,re(e),t)}function Hl(e,t,n){const r=Le();return dr(r,Xi(),t)&&jr(Ot(),pn(),r,e,t,r[y],n,!1),Hl}function $l(e,t,n,r,i){const u=i?"class":"style";Kh(e,n,t.inputs[u],u,r)}function Kl(e,t,n,r){const i=Le(),o=Ot(),u=20+e,l=i[y],p=i[u]=nl(l,t,gt.lFrame.currentNamespace),_=o.firstCreatePass?function(e,t,n,r,i,o,u){const l=t.consts,_=ls(t,e,2,i,Fr(l,o));return function(e,t,n,r){let i=!1;if(qs()){const o=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const u=r[o];dh(n,u.selectors,!1)&&(i||(i=[]),Yo(bo(n,t),e,u.type),Ct(u)?(Nh(e,n),i.unshift(u)):i.push(u))}return i}(e,t,n),u=null===r?null:{"":-1};if(null!==o){i=!0,Oh(n,e.data.length,o.length);for(let I=0;I<o.length;I++){const z=o[I];z.providersResolver&&z.providersResolver(z)}let l=!1,p=!1,_=ds(e,t,o.length,null);for(let I=0;I<o.length;I++){const z=o[I];n.mergedAttrs=Wo(n.mergedAttrs,z.hostAttrs),Lh(e,n,t,_,z),F_(_,z,u),null!==z.contentQueries&&(n.flags|=8),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(n.flags|=128);const ee=z.type.prototype;!l&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),l=!0),!p&&(ee.ngOnChanges||ee.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),p=!0),_++}!function(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,u=[];let l=null,p=null;for(let _=t.directiveStart;_<r;_++){const I=i[_],z=I.inputs,ee=null===o||lh(t)?null:A_(z,o);u.push(ee),l=Rh(z,_,l),p=Rh(I.outputs,_,p)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=u,t.inputs=l,t.outputs=p}(e,n)}u&&function(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new Ve("301",`Export of name '${t[i+1]}' not found!`);r.push(t[i],o)}}}(n,r,u)}n.mergedAttrs=Wo(n.mergedAttrs,n.attrs)}(t,n,_,Fr(l,u)),null!==_.attrs&&Iu(_,_.attrs,!1),null!==_.mergedAttrs&&Iu(_,_.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,_),_}(u,o,i,0,t,n,r):o.data[u];kr(_,!0);const I=_.mergedAttrs;null!==I&&qo(l,p,I);const z=_.classes;null!==z&&ul(l,p,z);const ee=_.styles;null!==ee&&ah(l,p,ee),64!=(64&_.flags)&&Eu(o,i,p,_),0===gt.lFrame.elementDepthCount&&lr(p,i),gt.lFrame.elementDepthCount++,Qe(_)&&(function(e,t,n){!qs()||(function(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||bo(n,t),lr(r,t);const u=n.initialInputs;for(let l=i;l<o;l++){const p=e.data[l],_=Ct(p);_&&x_(t,n,p);const I=Co(t,e,l,n);lr(I,t),null!==u&&I_(0,l-i,I,p,0,u),_&&($n(n.index,t)[8]=I)}}(e,t,n,bn(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,u=n.index,l=gt.lFrame.currentDirectiveIndex;try{wi(u);for(let p=r;p<i;p++){const _=e.data[p],I=t[p];zs(p),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&kh(_,I)}}finally{wi(-1),zs(l)}}(e,t,n))}(o,i,_),function(e,t,n){if(_t(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const u=e.data[o];u.contentQueries&&u.contentQueries(1,n[o],o)}}}(o,_,i)),null!==r&&function(e,t,n=bn){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const u=r[o+1],l=-1===u?n(t,e):e[u];e[i++]=l}}}(i,_)}function ql(){let e=kn();Uo()?gt.lFrame.isParent=!1:(e=e.parent,kr(e,!1));const t=e;gt.lFrame.elementDepthCount--;const n=Ot();n.firstCreatePass&&(Gs(n,e),_t(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&$l(n,t,Le(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&$l(n,t,Le(),t.stylesWithoutHost,!1)}function Np(e,t,n,r){Kl(e,t,n,r),ql()}function Wl(e){return!!e&&"function"==typeof e.then}function jp(e){return!!e&&"function"==typeof e.subscribe}const zl=jp;function Gl(e,t,n,r){const i=Le(),o=Ot(),u=kn();return function(e,t,n,r,i,o,u,l){const p=Qe(r),I=e.firstCreatePass&&Bh(e),z=t[8],ee=Vh(t);let me=!0;if(3&r.type||l){const De=bn(r,t),Ue=l?l(De):De,ke=ee.length,rt=l?mt=>l(Rt(mt[r.index])):r.index;if(st(n)){let mt=null;if(!l&&p&&(mt=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const u=i[o];if(u===n&&i[o+1]===r){const l=t[7],p=i[o+2];return l.length>p?l[p]:null}"string"==typeof u&&(o+=2)}return null}(e,t,i,r.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=o,mt.__ngLastListenerFn__=o,me=!1;else{o=Yl(r,t,z,o,!1);const kt=n.listen(Ue,i,o);ee.push(o,kt),I&&I.push(i,rt,ke,ke+1)}}else o=Yl(r,t,z,o,!0),Ue.addEventListener(i,o,u),ee.push(o),I&&I.push(i,rt,ke,u)}else o=Yl(r,t,z,o,!1);const Ce=r.outputs;let Ie;if(me&&null!==Ce&&(Ie=Ce[i])){const De=Ie.length;if(De)for(let Ue=0;Ue<De;Ue+=2){const Wn=t[Ie[Ue]][Ie[Ue+1]].subscribe(o),Xr=ee.length;ee.push(o,Wn),I&&I.push(i,r.index,Xr,-(Xr+1))}}}(o,i,i[y],u,e,t,!!n,r),Gl}function Bp(e,t,n,r){try{return!1!==n(r)}catch(i){return $h(e,i),!1}}function Yl(e,t,n,r,i){return function o(u){if(u===Function)return r;const l=2&e.flags?$n(e.index,t):t;0==(32&t[2])&&Sl(l);let p=Bp(t,0,r,u),_=o.__ngNextListenerFn__;for(;_;)p=Bp(t,0,_,u)&&p,_=_.__ngNextListenerFn__;return i&&!1===p&&(u.preventDefault(),u.returnValue=!1),p}}function fg(e,t=""){const n=Le(),r=Ot(),i=e+20,o=r.firstCreatePass?ls(r,i,1,t,null):r.data[i],u=n[i]=function(e,t){return st(e)?e.createText(t):e.createTextNode(t)}(n[y],t);Eu(r,n,u,o),kr(o,!1)}function Mu(e,t,n){const r=Le(),i=function(e,t,n,r){return dr(e,Xi(),n)?t+He(n)+r:St}(r,e,t,n);return i!==St&&Yi(r,er(),i),Mu}function Ql(e,t,n){const r=Le();return dr(r,Xi(),t)&&jr(Ot(),pn(),r,e,t,r[y],n,!0),Ql}const To=void 0;var UE=["en",[["a","p"],["AM","PM"],To],[["AM","PM"],To,To],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],To,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],To,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",To,"{1} 'at' {0}",To],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Is={};function Xl(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Mg(t);if(n)return n;const r=t.split("-")[0];if(n=Mg(r),n)return n;if("en"===r)return UE;throw new Error(`Missing locale data for the locale "${e}".`)}function Pg(e){return Xl(e)[ft.PluralCase]}function Mg(e){return e in Is||(Is[e]=ct.ng&&ct.ng.common&&ct.ng.common.locales&&ct.ng.common.locales[e]),Is[e]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const ku="en-US";let kg=ku;function ed(e){P(e,"Expected localeId to be defined"),"string"==typeof e&&(kg=e.toLowerCase().replace(/_/g,"-"))}class om{}const am="ngComponent";class Vw{resolveComponentFactory(t){throw function(e){const t=Error(`No component factory found for ${Y(e)}. Did you add it to @NgModule.entryComponents?`);return t[am]=e,t}(t)}}class Ro{}function Uu(...e){}function Ts(e,t){return new Ni(bn(e,t))}Ro.NULL=new Vw;const $w=function(){return Ts(kn(),Le())};let Ni=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=$w,e})();function um(e){return e instanceof Ni?e.nativeElement:e}class Vu{}let Kw=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ww(),e})();const Ww=function(){const e=Le(),n=$n(kn().index,e);return function(e){return e[y]}($e(n)?n:e)};let ud=(()=>{class e{}return e.\u0275prov=xe({token:e,providedIn:"root",factory:()=>null}),e})();class cm{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const lm=new cm("12.2.4");class dm{constructor(){}supports(t){return _a(t)}create(t){return new Jw(t)}}const Yw=(e,t)=>t;class Jw{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Yw}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const u=!r||n&&n.currentIndex<hm(r,i,o)?n:r,l=hm(u,i,o),p=u.currentIndex;if(u===r)i--,r=r._nextRemoved;else if(n=n._next,null==u.previousIndex)i++;else{o||(o=[]);const _=l-i,I=p-i;if(_!=I){for(let ee=0;ee<_;ee++){const me=ee<o.length?o[ee]:o[ee]=0,Ce=me+ee;I<=Ce&&Ce<_&&(o[ee]=me+1)}o[u.previousIndex]=I-_}}l!==p&&t(u,l,p)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!_a(t))throw new Error(`Error trying to diff '${Y(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,u,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)o=t[l],u=this._trackByFn(l,o),null!==n&&Object.is(n.trackById,u)?(r&&(n=this._verifyReinsertion(n,o,u,l)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,u,l),r=!0),n=n._next}else i=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ms()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,l=>{u=this._trackByFn(i,l),null!==n&&Object.is(n.trackById,u)?(r&&(n=this._verifyReinsertion(n,l,u,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)):(n=this._mismatch(n,l,u,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Zw(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new fm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Zw{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qw{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class fm{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new Qw,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hm(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class pm{constructor(){}supports(t){return t instanceof Map||Ol(t)}create(){return new Xw}}class Xw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Ol(t)))throw new Error(`Error trying to diff '${Y(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const o=i._prev,u=i._next;return o&&(o._next=u),u&&(u._prev=o),i._next=null,i._prev=null,i}const r=new e1(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class e1{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gm(){return new Bu([new dm])}let Bu=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||gm()),deps:[[e,new uo,new qi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(e){return e.name||typeof e}(n)}'`)}}return e.\u0275prov=xe({token:e,providedIn:"root",factory:gm}),e})();function mm(){return new Hu([new pm])}let Hu=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||mm()),deps:[[e,new uo,new qi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return e.\u0275prov=xe({token:e,providedIn:"root",factory:mm}),e})();function $u(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Rt(o)),Ne(o))for(let l=10;l<o.length;l++){const p=o[l],_=p[1].firstChild;null!==_&&$u(p[1],p,_,r)}const u=n.type;if(8&u)$u(e,t,n.child,r);else if(32&u){const l=Qc(n,t);let p;for(;p=l();)r.push(p)}else if(16&u){const l=ih(t,n);if(Array.isArray(l))r.push(...l);else{const p=fa(t[16]);$u(p[1],p,l,r,!0)}}n=i?n.projectionNext:n.next}return r}class xa{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return $u(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ne(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(rl(t,r),Do(n,r))}this._attachedToViewContainer=!1}Yf(this._lView[1],this._lView)}onDestroy(t){Th(this._lView[1],this._lView,null,t)}markForCheck(){Sl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Bo(!0);try{Fl(e,t,n)}finally{Bo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ha(this._lView[1],t=this._lView,t[y],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class n1 extends xa{constructor(t){super(t),this._view=t}detectChanges(){Uh(this._view)}checkNoChanges(){!function(e){Bo(!0);try{Uh(e)}finally{Bo(!1)}}(this._view)}get context(){return null}}const i1=function(e){return function(e,t,n){if(qe(e)&&!n){const r=$n(e.index,t);return new xa(r,r)}return 47&e.type?new xa(t[16],t):null}(kn(),Le(),16==(16&e))};let o1=(()=>{class e{}return e.__NG_ELEMENT_ID__=i1,e})();const u1=[new pm],l1=new Bu([new dm]),d1=new Hu(u1),h1=function(){return Ku(kn(),Le())};let Ia=(()=>{class e{}return e.__NG_ELEMENT_ID__=h1,e})();const p1=Ia,g1=class extends p1{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t){const n=this._declarationTContainer.tViews,r=pa(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),ga(n,r,t),new xa(r)}};function Ku(e,t){return 4&e.type?new g1(t,e,Ts(e,t)):null}class Po{}class ym{}const v1=function(){return bm(kn(),Le())};let qu=(()=>{class e{}return e.__NG_ELEMENT_ID__=v1,e})();const b1=qu,vm=class extends b1{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ts(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const t=wo(this._hostTNode,this._hostLView);if(ou(t)){const n=to(t,this._hostLView),r=Hi(t);return new ro(n[1].data[r+8],n)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=_m(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){const i=t.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(t,n,r,i,o){const u=r||this.parentInjector;if(!o&&null==t.ngModule&&u){const p=u.get(Po,null);p&&(o=p)}const l=t.create(u,i,void 0,o);return this.insert(l.hostView,n),l}insert(t,n){const r=t._lView,i=r[1];if(Ne(r[3])){const I=this.indexOf(t);if(-1!==I)this.detach(I);else{const z=r[3],ee=new vm(z,z[6],z[3]);ee.detach(ee.indexOf(t))}}const o=this._adjustIndex(n),u=this._lContainer;!function(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],du(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const u=t[17];null!==u&&n!==u&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(u,t);const l=t[19];null!==l&&l.insertView(e),t[2]|=128}(i,r,u,o);const l=sl(o,u),p=r[y],_=bu(p,u[7]);return null!==_&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,ha(e,r,n,1,i,o)}(i,u[6],p,r,_,l),t.attachToViewContainerRef(),du(cd(u),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=_m(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=rl(this._lContainer,n);r&&(Do(cd(this._lContainer),n),Yf(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=rl(this._lContainer,n);return r&&null!=Do(cd(this._lContainer),n)?new xa(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function _m(e){return e[8]}function cd(e){return e[8]||(e[8]=[])}function bm(e,t){let n;const r=t[e.index];if(Ne(r))n=r;else{let i;if(8&e.type)i=Rt(r);else{const o=t[y];i=o.createComment("");const u=bn(e,t);Io(o,bu(o,u),i,function(e,t){return st(e)?e.nextSibling(t):t.nextSibling}(o,u),!1)}t[e.index]=n=function(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}(r,t,i,e),xu(t,n)}return new vm(n,e,t)}const ks={};class Vm extends Ro{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=fn(t);return new Hm(n,this.ngModule)}}function Bm(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const mC=new D("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bf});class Hm extends om{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=t.selectors.map(e_).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Bm(this.componentDef.inputs)}get outputs(){return Bm(this.componentDef.outputs)}create(t,n,r,i){const o=(i=i||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const o=e.get(n,ks,i);return o!==ks||r===ks?o:t.get(n,r,i)}}}(t,i.injector):t,u=o.get(Vu,Jt),l=o.get(ud,null),p=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",I=r?function(e,t,n){if(st(e))return e.selectRootElement(t,n===yt.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(p,r,this.componentDef.encapsulation):nl(u.createRenderer(null,this.componentDef),_,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(_)),z=this.componentDef.onPush?576:528,ee=function(e,t){return{components:[],scheduler:e||Bf,clean:j_,playerHandler:t||null,flags:0}}(),me=Fu(0,null,null,1,0,null,null,null,null,null),Ce=pa(null,me,ee,z,null,null,u,p,l,o);let Ie,De;Ei(Ce);try{const Ue=function(e,t,n,r,i,o){const u=n[1];n[20]=e;const p=ls(u,20,2,"#host",null),_=p.mergedAttrs=t.hostAttrs;null!==_&&(Iu(p,_,!0),null!==e&&(qo(i,e,_),null!==p.classes&&ul(i,e,p.classes),null!==p.styles&&ah(i,e,p.styles)));const I=r.createRenderer(e,t),z=pa(n,xh(t),null,t.onPush?64:16,n[20],p,r,I,o||null,null);return u.firstCreatePass&&(Yo(bo(p,n),u,t.type),Nh(u,p),Oh(p,n.length,1)),xu(n,z),n[20]=z}(I,this.componentDef,Ce,u,p);if(I)if(r)qo(p,I,["ng-version",lm.full]);else{const{attrs:ke,classes:rt}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!ri(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);ke&&qo(p,I,ke),rt&&rt.length>0&&ul(p,I,rt.join(" "))}if(De=Wr(me,20),void 0!==n){const ke=De.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const mt=n[rt];ke.push(null!=mt?Array.from(mt):null)}}Ie=function(e,t,n,r,i){const o=n[1],u=function(e,t,n){const r=kn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Lh(e,r,t,ds(e,t,1,null),n));const i=Co(t,e,r.directiveStart,r);lr(i,t);const o=bn(r,t);return o&&lr(o,t),i}(o,n,t);if(r.components.push(u),e[8]=u,i&&i.forEach(p=>p(u,t)),t.contentQueries){const p=kn();t.contentQueries(1,u,p.directiveStart)}const l=kn();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(wi(l.index),Mh(n[1],l,0,l.directiveStart,l.directiveEnd,t),kh(t,u)),u}(Ue,this.componentDef,Ce,ee,[lb]),ga(me,Ce,null)}finally{$o()}return new _C(this.componentType,Ie,Ts(De,Ce),Ce,De)}}class _C extends class{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new n1(i),this.componentType=t}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ns=new Map;class wC extends Po{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Vm(this);const r=Mn(t),i=t[pi]||null;i&&ed(i),this._bootstrapComponents=Ai(r.bootstrap),this._r3Injector=zh(t,n,[{provide:Po,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],Y(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Xt.THROW_IF_NOT_FOUND,r=Je.Default){return t===Xt||t===Po||t===hs?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class wd extends ym{constructor(t){super(),this.moduleType=t,null!==Mn(t)&&function(e){const t=new Set;!function n(r){const i=Mn(r,!0),o=i.id;null!==o&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${Y(t)} vs ${Y(t.name)}`)}(o,Ns.get(o),r),Ns.set(o,r));const u=Ai(i.imports);for(const l of u)t.has(l)||(t.add(l),n(l))}(e)}(t)}create(t){return new wC(this.moduleType,t)}}function qm(e,t,n){const r=function(){const e=gt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}()+e,i=Le();return i[r]===St?function(e,t,n){return e[t]=n}(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Cd(e){return t=>{setTimeout(e,void 0,t)}}const Oi=class extends b.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var i,o,u;let l=t,p=n||(()=>null),_=r;if(t&&"object"==typeof t){const z=t;l=null===(i=z.next)||void 0===i?void 0:i.bind(z),p=null===(o=z.error)||void 0===o?void 0:o.bind(z),_=null===(u=z.complete)||void 0===u?void 0:u.bind(z)}this.__isAsync&&(p=Cd(p),l&&(l=Cd(l)),_&&(_=Cd(_)));const I=super.subscribe({next:l,error:p,complete:_});return t instanceof F.w&&t.add(I),I}};function VC(){return this._results[ms()]()}class Ju{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ms(),r=Ju.prototype;r[n]||(r[n]=VC)}get changes(){return this._changes||(this._changes=new Oi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=Gr(t);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Sd{constructor(t){this.queryList=t,this.matches=null}clone(){return new Sd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const u=n.getByIndex(o);i.push(this.queries[u.indexInDeclarationView].clone())}return new Dd(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==iy(t,n).matches&&this.queries[n].setDirty()}}class Zm{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class Fd{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new Fd(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class xd{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new xd(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,$C(n,o)),this.matchTNodeWithReadOption(t,n,Zo(n,t,o,!1,!1))}else r===Ia?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Zo(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ni||i===qu||i===Ia&&4&n.type)this.addMatch(n.index,-2);else{const o=Zo(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function $C(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function qC(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Ts(e,t):4&e.type?Ku(e,t):null}(t,e):-2===n?function(e,t,n){return n===Ni?Ts(t,e):n===Ia?Ku(t,e):n===qu?bm(t,e):void 0}(e,t,r):Co(e,e[1],n,t)}function Qm(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const o=e.data,u=n.matches,l=[];for(let p=0;p<u.length;p+=2){const _=u[p];l.push(_<0?null:qC(t,o[_],u[p+1],n.metadata.read))}i.matches=l}return i.matches}function Id(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const u=Qm(e,t,i,n);for(let l=0;l<o.length;l+=2){const p=o[l];if(p>0)r.push(u[l/2]);else{const _=o[l+1],I=t[-p];for(let z=10;z<I.length;z++){const ee=I[z];ee[17]===ee[3]&&Id(ee[1],ee,_,r)}if(null!==I[9]){const z=I[9];for(let ee=0;ee<z.length;ee++){const me=z[ee];Id(me[1],me,_,r)}}}}}return r}function Xm(e){const t=Le(),n=Ot(),r=Ja();Ui(r+1);const i=iy(n,r);if(e.dirty&&po(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Id(n,t,r,[]):Qm(n,t,i,r);e.reset(o,um),e.notifyOnChanges()}return!0}return!1}function ey(e,t,n,r){const i=Ot();if(i.firstCreatePass){const o=kn();(function(e,t,n){null===e.queries&&(e.queries=new Fd),e.queries.track(new xd(t,n))})(i,new Zm(t,n,r),o.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function(e,t,n){const r=new Ju(4==(4&n));Th(e,t,r,r.destroy),null===t[19]&&(t[19]=new Dd),t[19].queries.push(new Sd(r))}(i,Le(),n)}function ty(){return e=Le(),t=Ja(),e[19].queries[t].queryList;var e,t}function iy(e,t){return e.queries.getByIndex(t)}const kd=new D("Application Initializer");let Ls=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Uu,this.reject=Uu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Wl(o))n.push(o);else if(zl(o)){const u=new Promise((l,p)=>{o.subscribe({complete:l,error:p})});n.push(u)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Vn(kd,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();const wy=new D("AppId"),CS={provide:wy,useFactory:function(){return`${Nd()}${Nd()}${Nd()}`},deps:[]};function Nd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cy=new D("Platform Initializer"),Sy=new D("Platform ID"),Dy=new D("appBootstrapListener");let Fy=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();const Xu=new D("LocaleId"),xy=new D("DefaultCurrencyCode");class DS{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const Od=function(e){return new wd(e)},FS=Od,xS=function(e){return Promise.resolve(Od(e))},Iy=function(e){const t=Od(e),r=Ai(Mn(e).declarations).reduce((i,o)=>{const u=fn(o);return u&&i.push(new Hm(u)),i},[]);return new DS(t,r)},IS=Iy,AS=function(e){return Promise.resolve(Iy(e))};let Va=(()=>{class e{constructor(){this.compileModuleSync=FS,this.compileModuleAsync=xS,this.compileModuleAndAllComponentsSync=IS,this.compileModuleAndAllComponentsAsync=AS}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();const PS=(()=>Promise.resolve(0))();function Ld(e){"undefined"==typeof Zone?PS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ur{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oi(!1),this.onMicrotaskEmpty=new Oi(!1),this.onStable=new Oi(!1),this.onError=new Oi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let e=ct.requestAnimationFrame,t=ct.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ct,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ud(e),e.isCheckStableRunning=!0,jd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ud(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,u,l)=>{try{return Ay(e),n.invokeTask(i,o,u,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Ty(e)}},onInvoke:(n,r,i,o,u,l,p)=>{try{return Ay(e),n.invoke(i,o,u,l,p)}finally{e.shouldCoalesceRunChangeDetection&&t(),Ty(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Ud(e),jd(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ur.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ur.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,u=o.scheduleEventTask("NgZoneEvent: "+i,t,kS,Uu,Uu);try{return o.runTask(u,n,r)}finally{o.cancelTask(u)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const kS={};function jd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ud(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Ay(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ty(e){e._nesting--,jd(e)}class LS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oi,this.onMicrotaskEmpty=new Oi,this.onStable=new Oi,this.onError=new Oi}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}let Ry=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ur.assertNotInAngularZone(),Ld(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ld(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Vn(Ur))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})(),Py=(()=>{class e{constructor(){this._applications=new Map,Vd.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Vd.findTestabilityInTree(this,n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();class jS{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}function US(e){Vd=e}let Vd=new jS,My=!0,ky=!1;function VS(){if(ky)throw new Error("Cannot enable prod mode after platform setup.");My=!1}let di;const Oy=new D("AllowMultipleToken");class zS{constructor(t,n){this.name=t,this.token=n}}function Ly(e,t,n=[]){const r=`Platform: ${t}`,i=new D(r);return(o=[])=>{let u=jy();if(!u||u.injector.get(Oy,!1))if(e)e(n.concat(o).concat({provide:i,useValue:!0}));else{const l=n.concat(o).concat({provide:i,useValue:!0},{provide:ma,useValue:"platform"});!function(e){if(di&&!di.destroyed&&!di.injector.get(Oy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");di=e.get(Uy);const t=e.get(Cy,null);t&&t.forEach(n=>n())}(Xt.create({providers:l,name:r}))}return function(e){const t=jy();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function jy(){return di&&!di.destroyed?di:null}let Uy=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const l=function(e,t){let n;return n="noop"===e?new LS:("zone.js"===e?void 0:e)||new Ur({enableLongStackTrace:(ky=!0,My),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),p=[{provide:Ur,useValue:l}];return l.run(()=>{const _=Xt.create({providers:p,parent:this.injector,name:n.moduleType.name}),I=n.create(_),z=I.injector.get(as,null);if(!z)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return l.runOutsideAngular(()=>{const ee=l.onError.subscribe({next:me=>{z.handleError(me)}});I.onDestroy(()=>{Bd(this._modules,I),ee.unsubscribe()})}),function(e,t,n){try{const r=n();return Wl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(z,l,()=>{const ee=I.injector.get(Ls);return ee.runInitializers(),ee.donePromise.then(()=>(ed(I.injector.get(Xu,ku)||ku),this._moduleDoBootstrap(I),I))})})}bootstrapModule(n,r=[]){const i=Vy({},r);return function(e,t,n){const r=new wd(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Ba);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Y(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Vn(Xt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();function Vy(e,t){return Array.isArray(t)?t.reduce(Vy,e):Object.assign(Object.assign({},e),t)}let Ba=(()=>{class e{constructor(n,r,i,o,u){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new x.y(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),p=new x.y(_=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Ur.assertNotInAngularZone(),Ld(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{Ur.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{I.unsubscribe(),z.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return(0,m.K)(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof x.y?e[0]:(0,k.J)(t)((0,oe.n)(e,n))}(l,p.pipe(e=>(0,L.x)()(function(e,t){return function(r){let i;i="function"==typeof e?e:function(){return e};const o=Object.create(r,w.N);return o.source=r,o.subjectFactory=i,o}}(Q)(e))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof om?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(e){return e.isBoundToModule}(i)?void 0:this._injector.get(Po),l=i.create(Xt.NULL,[],r||i.selector,o),p=l.location.nativeElement,_=l.injector.get(Ry,null),I=_&&l.injector.get(Py);return _&&I&&I.registerApplication(p,_),l.onDestroy(()=>{this.detachView(l.hostView),Bd(this.components,l),I&&I.unregisterApplication(p)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Bd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Dy,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(Vn(Ur),Vn(Xt),Vn(as),Vn(Ro),Vn(Ls))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();function Bd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class XS{}class tD{}const nD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let rD=(()=>{class e{constructor(n,r){this._compiler=n,this._config=r||nD}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),R(255)(r).then(o=>o[i]).then(o=>Ky(o,r,i)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(n){let[r,i]=n.split("#"),o="NgFactory";return void 0===i&&(i="default",o=""),R(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(u=>u[i+o]).then(u=>Ky(u,r,i))}}return e.\u0275fac=function(n){return new(n||e)(Vn(Va),Vn(tD,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();function Ky(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const dD=function(e){return null},hD=Ly(null,"core",[{provide:Sy,useValue:"unknown"},{provide:Uy,deps:[Xt]},{provide:Py,deps:[]},{provide:Fy,deps:[]}]),vD=[{provide:Ba,useClass:Ba,deps:[Ur,Xt,as,Ro,Ls]},{provide:mC,deps:[Ur],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:Ls,useClass:Ls,deps:[[new qi,kd]]},{provide:Va,useClass:Va,deps:[]},CS,{provide:Bu,useFactory:function(){return l1},deps:[]},{provide:Hu,useFactory:function(){return d1},deps:[]},{provide:Xu,useFactory:function(e){return ed(e=e||"undefined"!=typeof $localize&&$localize.locale||ku),e},deps:[[new rs(Xu),new qi,new uo]]},{provide:xy,useValue:"USD"}];let bD=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Vn(Ba))},e.\u0275mod=Br({type:e}),e.\u0275inj=Ge({providers:vD}),e})()},353:(It,Ae,R)=>{"use strict";R.d(Ae,{gz:()=>or,F0:()=>Kn,yS:()=>_o,Bz:()=>kc,lC:()=>Eo});var x=R(583),m=R(639),k=R(869),oe=R(693),Z=R(87);function b(...g){let f=g[g.length-1];return(0,k.K)(f)?(g.pop(),(0,Z.r)(g,f)):(0,oe.n)(g)}var F=R(709),w=R(971);class N extends F.xQ{constructor(f){super(),this._value=f}get value(){return this.getValue()}_subscribe(f){const d=super._subscribe(f);return d&&!d.closed&&f.next(this._value),d}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w.N;return this._value}next(f){super.next(this._value=f)}}var j=R(796),L=R(393);class Q extends L.L{notifyNext(f,d,v,D,$){this.destination.next(d)}notifyError(f,d){this.destination.error(f)}notifyComplete(f){this.destination.complete()}}class J extends L.L{constructor(f,d,v){super(),this.parent=f,this.outerValue=d,this.outerIndex=v,this.index=0}_next(f){this.parent.notifyNext(this.outerValue,f,this.outerIndex,this.index++,this)}_error(f){this.parent.notifyError(f,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var W=R(444),G=R(574);function Y(g,f,d,v,D=new J(g,d,v)){if(!D.closed)return f instanceof G.y?f.subscribe(D):(0,W.s)(f)(D)}const we={};class le{constructor(f){this.resultSelector=f}call(f,d){return d.subscribe(new re(f,this.resultSelector))}}class re extends Q{constructor(f,d){super(f),this.resultSelector=d,this.active=0,this.values=[],this.observables=[]}_next(f){this.values.push(we),this.observables.push(f)}_complete(){const f=this.observables,d=f.length;if(0===d)this.destination.complete();else{this.active=d,this.toRespond=d;for(let v=0;v<d;v++)this.add(Y(this,f[v],void 0,v))}}notifyComplete(f){0==(this.active-=1)&&this.destination.complete()}notifyNext(f,d,v){const D=this.values,de=this.toRespond?D[v]===we?--this.toRespond:this.toRespond:0;D[v]=d,0===de&&(this.resultSelector?this._tryResultSelector(D):this.destination.next(D.slice()))}_tryResultSelector(f){let d;try{d=this.resultSelector.apply(this,f)}catch(v){return void this.destination.error(v)}this.destination.next(d)}}const Oe=(()=>{function g(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return g.prototype=Object.create(Error.prototype),g})();var Ve=R(282);function ze(...g){return(0,Ve.J)(1)(b(...g))}var He=R(402);const Xe=new G.y(g=>g.complete());function Et(g){return g?function(g){return new G.y(f=>g.schedule(()=>f.complete()))}(g):Xe}function tt(g){return new G.y(f=>{let d;try{d=g()}catch(D){return void f.error(D)}return(d?(0,He.D)(d):Et()).subscribe(f)})}var ot=R(441),Re=R(2),ht=R(345);function At(g,f){return"function"==typeof f?d=>d.pipe(At((v,D)=>(0,He.D)(g(v,D)).pipe((0,Re.U)(($,de)=>f(v,$,D,de))))):d=>d.lift(new En(g))}class En{constructor(f){this.project=f}call(f,d){return d.subscribe(new Ut(f,this.project))}}class Ut extends ht.Ds{constructor(f,d){super(f),this.project=d,this.index=0}_next(f){let d;const v=this.index++;try{d=this.project(f,v)}catch(D){return void this.destination.error(D)}this._innerSub(d)}_innerSub(f){const d=this.innerSubscription;d&&d.unsubscribe();const v=new ht.IY(this),D=this.destination;D.add(v),this.innerSubscription=(0,ht.ft)(f,v),this.innerSubscription!==v&&D.add(this.innerSubscription)}_complete(){const{innerSubscription:f}=this;(!f||f.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(f){this.destination.next(f)}}const Sn=(()=>{function g(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return g.prototype=Object.create(Error.prototype),g})();function Jn(g){return f=>0===g?Et():f.lift(new zn(g))}class zn{constructor(f){if(this.total=f,this.total<0)throw new Sn}call(f,d){return d.subscribe(new en(f,this.total))}}class en extends L.L{constructor(f,d){super(f),this.total=d,this.count=0}_next(f){const d=this.total,v=++this.count;v<=d&&(this.destination.next(f),v===d&&(this.destination.complete(),this.unsubscribe()))}}function Wt(g,f){let d=!1;return arguments.length>=2&&(d=!0),function(D){return D.lift(new he(g,f,d))}}class he{constructor(f,d,v=!1){this.accumulator=f,this.seed=d,this.hasSeed=v}call(f,d){return d.subscribe(new P(f,this.accumulator,this.seed,this.hasSeed))}}class P extends L.L{constructor(f,d,v,D){super(f),this.accumulator=d,this._seed=v,this.hasSeed=D,this.index=0}get seed(){return this._seed}set seed(f){this.hasSeed=!0,this._seed=f}_next(f){if(this.hasSeed)return this._tryNext(f);this.seed=f,this.destination.next(f)}_tryNext(f){const d=this.index++;let v;try{v=this.accumulator(this.seed,f,d)}catch(D){this.destination.error(D)}this.seed=v,this.destination.next(v)}}function A(g,f){return function(v){return v.lift(new ge(g,f))}}class ge{constructor(f,d){this.predicate=f,this.thisArg=d}call(f,d){return d.subscribe(new _e(f,this.predicate,this.thisArg))}}class _e extends L.L{constructor(f,d,v){super(f),this.predicate=d,this.thisArg=v,this.count=0}_next(f){let d;try{d=this.predicate.call(this.thisArg,f,this.count++)}catch(v){return void this.destination.error(v)}d&&this.destination.next(f)}}function Se(g){return function(d){const v=new xe(g),D=d.lift(v);return v.caught=D}}class xe{constructor(f){this.selector=f}call(f,d){return d.subscribe(new We(f,this.selector,this.caught))}}class We extends ht.Ds{constructor(f,d,v){super(f),this.selector=d,this.caught=v}error(f){if(!this.isStopped){let d;try{d=this.selector(f,this.caught)}catch($){return void super.error($)}this._unsubscribeAndRecycle();const v=new ht.IY(this);this.add(v);const D=(0,ht.ft)(d,v);D!==v&&this.add(D)}}}var Ge=R(773);function pt(g,f){return(0,Ge.zg)(g,f,1)}function wt(g){return function(d){return 0===g?Et():d.lift(new Ft(g))}}class Ft{constructor(f){if(this.total=f,this.total<0)throw new Sn}call(f,d){return d.subscribe(new nn(f,this.total))}}class nn extends L.L{constructor(f,d){super(f),this.total=d,this.ring=new Array,this.count=0}_next(f){const d=this.ring,v=this.total,D=this.count++;d.length<v?d.push(f):d[D%v]=f}_complete(){const f=this.destination;let d=this.count;if(d>0){const v=this.count>=this.total?this.total:this.count,D=this.ring;for(let $=0;$<v;$++){const de=d++%v;f.next(D[de])}}f.complete()}}function yn(g=$t){return f=>f.lift(new Dn(g))}class Dn{constructor(f){this.errorFactory=f}call(f,d){return d.subscribe(new Ze(f,this.errorFactory))}}class Ze extends L.L{constructor(f,d){super(f),this.errorFactory=d,this.hasValue=!1}_next(f){this.hasValue=!0,this.destination.next(f)}_complete(){if(this.hasValue)return this.destination.complete();{let f;try{f=this.errorFactory()}catch(d){f=d}this.destination.error(f)}}}function $t(){return new Oe}function vt(g=null){return f=>f.lift(new Je(g))}class Je{constructor(f){this.defaultValue=f}call(f,d){return d.subscribe(new Kt(f,this.defaultValue))}}class Kt extends L.L{constructor(f,d){super(f),this.defaultValue=d,this.isEmpty=!0}_next(f){this.isEmpty=!1,this.destination.next(f)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var K=R(487);function an(g,f){const d=arguments.length>=2;return v=>v.pipe(g?A((D,$)=>g(D,$,v)):K.y,Jn(1),d?vt(f):yn(()=>new Oe))}function Be(){}var vn=R(105);function Lt(g,f,d){return function(D){return D.lift(new Nn(g,f,d))}}class Nn{constructor(f,d,v){this.nextOrObserver=f,this.error=d,this.complete=v}call(f,d){return d.subscribe(new tr(f,this.nextOrObserver,this.error,this.complete))}}class tr extends L.L{constructor(f,d,v,D){super(f),this._tapNext=Be,this._tapError=Be,this._tapComplete=Be,this._tapError=v||Be,this._tapComplete=D||Be,(0,vn.m)(d)?(this._context=this,this._tapNext=d):d&&(this._context=d,this._tapNext=d.next||Be,this._tapError=d.error||Be,this._tapComplete=d.complete||Be)}_next(f){try{this._tapNext.call(this._context,f)}catch(d){return void this.destination.error(d)}this.destination.next(f)}_error(f){try{this._tapError.call(this._context,f)}catch(d){return void this.destination.error(d)}this.destination.error(f)}_complete(){try{this._tapComplete.call(this._context)}catch(f){return void this.destination.error(f)}return this.destination.complete()}}var yt=R(319);class ut{constructor(f){this.callback=f}call(f,d){return d.subscribe(new Vt(f,this.callback))}}class Vt extends L.L{constructor(f,d){super(f),this.add(new yt.w(d))}}var nr=R(307);class ct{constructor(f,d){this.id=f,this.url=d}}class ln extends ct{constructor(f,d,v="imperative",D=null){super(f,d),this.navigationTrigger=v,this.restoredState=D}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rn extends ct{constructor(f,d,v){super(f,d),this.urlAfterRedirects=v}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zn extends ct{constructor(f,d,v){super(f,d),this.reason=v}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tt extends ct{constructor(f,d,v){super(f,d),this.error=v}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pr extends ct{constructor(f,d,v,D){super(f,d),this.urlAfterRedirects=v,this.state=D}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dn extends ct{constructor(f,d,v,D){super(f,d),this.urlAfterRedirects=v,this.state=D}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On extends ct{constructor(f,d,v,D,$){super(f,d),this.urlAfterRedirects=v,this.state=D,this.shouldActivate=$}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ar extends ct{constructor(f,d,v,D){super(f,d),this.urlAfterRedirects=v,this.state=D}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends ct{constructor(f,d,v,D){super(f,d),this.urlAfterRedirects=v,this.state=D}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pn{constructor(f){this.route=f}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rr{constructor(f){this.route=f}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gi{constructor(f){this.snapshot=f}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vr{constructor(f){this.snapshot=f}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mi{constructor(f){this.snapshot=f}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cr{constructor(f){this.snapshot=f}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fn{constructor(f,d,v){this.routerEvent=f,this.position=d,this.anchor=v}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class Br{constructor(f){this.params=f||{}}has(f){return Object.prototype.hasOwnProperty.call(this.params,f)}get(f){if(this.has(f)){const d=this.params[f];return Array.isArray(d)?d[0]:d}return null}getAll(f){if(this.has(f)){const d=this.params[f];return Array.isArray(d)?d:[d]}return[]}get keys(){return Object.keys(this.params)}}function Nt(g){return new Br(g)}const Sr="ngNavigationCancelingError";function Tr(g){const f=Error("NavigationCancelingError: "+g);return f[Sr]=!0,f}function fn(g,f,d){const v=d.path.split("/");if(v.length>g.length||"full"===d.pathMatch&&(f.hasChildren()||v.length<g.length))return null;const D={};for(let $=0;$<v.length;$++){const de=v[$],Ee=g[$];if(de.startsWith(":"))D[de.substring(1)]=Ee;else if(de!==Ee.path)return null}return{consumed:g.slice(0,v.length),posParams:D}}function wn(g,f){const d=g?Object.keys(g):void 0,v=f?Object.keys(f):void 0;if(!d||!v||d.length!=v.length)return!1;let D;for(let $=0;$<d.length;$++)if(D=d[$],!Mn(g[D],f[D]))return!1;return!0}function Mn(g,f){if(Array.isArray(g)&&Array.isArray(f)){if(g.length!==f.length)return!1;const d=[...g].sort(),v=[...f].sort();return d.every((D,$)=>v[$]===D)}return g===f}function ei(g){return Array.prototype.concat.apply([],g)}function Ln(g){return g.length>0?g[g.length-1]:null}function et(g,f){for(const d in g)g.hasOwnProperty(d)&&f(g[d],d)}function xt(g){return(0,m.CqO)(g)?g:(0,m.QGY)(g)?(0,He.D)(Promise.resolve(g)):b(g)}const ir={exact:function c(g,f,d){if(!ue(g.segments,f.segments)||!B(g.segments,f.segments,d)||g.numberOfChildren!==f.numberOfChildren)return!1;for(const v in f.children)if(!g.children[v]||!c(g.children[v],f.children[v],d))return!1;return!0},subset:y},Qt={exact:function(g,f){return wn(g,f)},subset:function(g,f){return Object.keys(f).length<=Object.keys(g).length&&Object.keys(f).every(d=>Mn(g[d],f[d]))},ignored:()=>!0};function a(g,f,d){return ir[d.paths](g.root,f.root,d.matrixParams)&&Qt[d.queryParams](g.queryParams,f.queryParams)&&!("exact"===d.fragment&&g.fragment!==f.fragment)}function y(g,f,d){return T(g,f,f.segments,d)}function T(g,f,d,v){if(g.segments.length>d.length){const D=g.segments.slice(0,d.length);return!(!ue(D,d)||f.hasChildren()||!B(D,d,v))}if(g.segments.length===d.length){if(!ue(g.segments,d)||!B(g.segments,d,v))return!1;for(const D in f.children)if(!g.children[D]||!y(g.children[D],f.children[D],v))return!1;return!0}{const D=d.slice(0,g.segments.length),$=d.slice(g.segments.length);return!!(ue(g.segments,D)&&B(g.segments,D,v)&&g.children[lt])&&T(g.children[lt],f,$,v)}}function B(g,f,d){return f.every((v,D)=>Qt[d](g[D].parameters,v.parameters))}class ie{constructor(f,d,v){this.root=f,this.queryParams=d,this.fragment=v}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nt(this.queryParams)),this._queryParamMap}toString(){return H.serialize(this)}}class q{constructor(f,d){this.segments=f,this.children=d,this.parent=null,et(d,(v,D)=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return M(this)}}class te{constructor(f,d){this.path=f,this.parameters=d}get parameterMap(){return this._parameterMap||(this._parameterMap=Nt(this.parameters)),this._parameterMap}toString(){return Ne(this)}}function ue(g,f){return g.length===f.length&&g.every((d,v)=>d.path===f[v].path)}class pe{}class O{parse(f){const d=new Un(f);return new ie(d.parseRootSegment(),d.parseQueryParams(),d.parseFragment())}serialize(f){var g;return`${`/${E(f.root,!0)}`}${function(g){const f=Object.keys(g).map(d=>{const v=g[d];return Array.isArray(v)?v.map(D=>`${ne(d)}=${ne(D)}`).join("&"):`${ne(d)}=${ne(v)}`}).filter(d=>!!d);return f.length?`?${f.join("&")}`:""}(f.queryParams)}${"string"==typeof f.fragment?`#${g=f.fragment,encodeURI(g)}`:""}`}}const H=new O;function M(g){return g.segments.map(f=>Ne(f)).join("/")}function E(g,f){if(!g.hasChildren())return M(g);if(f){const d=g.children[lt]?E(g.children[lt],!1):"",v=[];return et(g.children,(D,$)=>{$!==lt&&v.push(`${$}:${E(D,!1)}`)}),v.length>0?`${d}(${v.join("//")})`:d}{const d=function(g,f){let d=[];return et(g.children,(v,D)=>{D===lt&&(d=d.concat(f(v,D)))}),et(g.children,(v,D)=>{D!==lt&&(d=d.concat(f(v,D)))}),d}(g,(v,D)=>D===lt?[E(g.children[lt],!1)]:[`${D}:${E(v,!1)}`]);return 1===Object.keys(g.children).length&&null!=g.children[lt]?`${M(g)}/${d[0]}`:`${M(g)}/(${d.join("//")})`}}function U(g){return encodeURIComponent(g).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ne(g){return U(g).replace(/%3B/gi,";")}function be(g){return U(g).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fe(g){return decodeURIComponent(g)}function $e(g){return Fe(g.replace(/\+/g,"%20"))}function Ne(g){return`${be(g.path)}${function(g){return Object.keys(g).map(f=>`;${be(f)}=${be(g[f])}`).join("")}(g.parameters)}`}const Qe=/^[^\/()?;=#]+/;function Ct(g){const f=g.match(Qe);return f?f[0]:""}const zt=/^[^=?&#]+/,jn=/^[^?&#]+/;class Un{constructor(f){this.url=f,this.remaining=f}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){const f={};if(this.consumeOptional("?"))do{this.parseQueryParam(f)}while(this.consumeOptional("&"));return f}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const f=[];for(this.peekStartsWith("(")||f.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),f.push(this.parseSegment());let d={};this.peekStartsWith("/(")&&(this.capture("/"),d=this.parseParens(!0));let v={};return this.peekStartsWith("(")&&(v=this.parseParens(!1)),(f.length>0||Object.keys(d).length>0)&&(v[lt]=new q(f,d)),v}parseSegment(){const f=Ct(this.remaining);if(""===f&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(f),new te(Fe(f),this.parseMatrixParams())}parseMatrixParams(){const f={};for(;this.consumeOptional(";");)this.parseParam(f);return f}parseParam(f){const d=Ct(this.remaining);if(!d)return;this.capture(d);let v="";if(this.consumeOptional("=")){const D=Ct(this.remaining);D&&(v=D,this.capture(v))}f[Fe(d)]=Fe(v)}parseQueryParam(f){const d=function(g){const f=g.match(zt);return f?f[0]:""}(this.remaining);if(!d)return;this.capture(d);let v="";if(this.consumeOptional("=")){const de=function(g){const f=g.match(jn);return f?f[0]:""}(this.remaining);de&&(v=de,this.capture(v))}const D=$e(d),$=$e(v);if(f.hasOwnProperty(D)){let de=f[D];Array.isArray(de)||(de=[de],f[D]=de),de.push($)}else f[D]=$}parseParens(f){const d={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const v=Ct(this.remaining),D=this.remaining[v.length];if("/"!==D&&")"!==D&&";"!==D)throw new Error(`Cannot parse url '${this.url}'`);let $;v.indexOf(":")>-1?($=v.substr(0,v.indexOf(":")),this.capture($),this.capture(":")):f&&($=lt);const de=this.parseChildren();d[$]=1===Object.keys(de).length?de[lt]:new q([],de),this.consumeOptional("//")}return d}peekStartsWith(f){return this.remaining.startsWith(f)}consumeOptional(f){return!!this.peekStartsWith(f)&&(this.remaining=this.remaining.substring(f.length),!0)}capture(f){if(!this.consumeOptional(f))throw new Error(`Expected "${f}".`)}}class rn{constructor(f){this._root=f}get root(){return this._root.value}parent(f){const d=this.pathFromRoot(f);return d.length>1?d[d.length-2]:null}children(f){const d=un(f,this._root);return d?d.children.map(v=>v.value):[]}firstChild(f){const d=un(f,this._root);return d&&d.children.length>0?d.children[0].value:null}siblings(f){const d=_n(f,this._root);return d.length<2?[]:d[d.length-2].children.map(D=>D.value).filter(D=>D!==f)}pathFromRoot(f){return _n(f,this._root).map(d=>d.value)}}function un(g,f){if(g===f.value)return f;for(const d of f.children){const v=un(g,d);if(v)return v}return null}function _n(g,f){if(g===f.value)return[f];for(const d of f.children){const v=_n(g,d);if(v.length)return v.unshift(f),v}return[]}class tn{constructor(f,d){this.value=f,this.children=d}toString(){return`TreeNode(${this.value})`}}function gr(g){const f={};return g&&g.children.forEach(d=>f[d.value.outlet]=d),f}class Hr extends rn{constructor(f,d){super(f),this.snapshot=d,mr(this,f)}toString(){return this.snapshot.toString()}}function ti(g,f){const d=function(g,f){const de=new Bn([],{},{},"",{},lt,f,null,g.root,-1,{});return new vi("",new tn(de,[]))}(g,f),v=new N([new te("",{})]),D=new N({}),$=new N({}),de=new N({}),Ee=new N(""),Me=new or(v,D,de,Ee,$,lt,f,d.root);return Me.snapshot=d.root,new Hr(new tn(Me,[]),d)}class or{constructor(f,d,v,D,$,de,Ee,Me){this.url=f,this.params=d,this.queryParams=v,this.fragment=D,this.data=$,this.outlet=de,this.component=Ee,this._futureSnapshot=Me}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Re.U)(f=>Nt(f)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Re.U)(f=>Nt(f)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rr(g,f="emptyOnly"){const d=g.pathFromRoot;let v=0;if("always"!==f)for(v=d.length-1;v>=1;){const D=d[v],$=d[v-1];if(D.routeConfig&&""===D.routeConfig.path)v--;else{if($.component)break;v--}}return function(g){return g.reduce((f,d)=>({params:Object.assign(Object.assign({},f.params),d.params),data:Object.assign(Object.assign({},f.data),d.data),resolve:Object.assign(Object.assign({},f.resolve),d._resolvedData)}),{params:{},data:{},resolve:{}})}(d.slice(v))}class Bn{constructor(f,d,v,D,$,de,Ee,Me,Ye,dt,Pt){this.url=f,this.params=d,this.queryParams=v,this.fragment=D,this.data=$,this.outlet=de,this.component=Ee,this.routeConfig=Me,this._urlSegment=Ye,this._lastPathIndex=dt,this._resolve=Pt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(v=>v.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vi extends rn{constructor(f,d){super(d),this.url=f,mr(this,d)}toString(){return Pr(this._root)}}function mr(g,f){f.value._routerState=g,f.children.forEach(d=>mr(g,d))}function Pr(g){const f=g.children.length>0?` { ${g.children.map(Pr).join(", ")} } `:"";return`${g.value}${f}`}function $r(g){if(g.snapshot){const f=g.snapshot,d=g._futureSnapshot;g.snapshot=d,wn(f.queryParams,d.queryParams)||g.queryParams.next(d.queryParams),f.fragment!==d.fragment&&g.fragment.next(d.fragment),wn(f.params,d.params)||g.params.next(d.params),function(g,f){if(g.length!==f.length)return!1;for(let d=0;d<g.length;++d)if(!wn(g[d],f[d]))return!1;return!0}(f.url,d.url)||g.url.next(d.url),wn(f.data,d.data)||g.data.next(d.data)}else g.snapshot=g._futureSnapshot,g.data.next(g._futureSnapshot.data)}function _i(g,f){return wn(g.params,f.params)&&function(g,f){return ue(g,f)&&g.every((d,v)=>wn(d.parameters,f[v].parameters))}(g.url,f.url)&&!(!g.parent!=!f.parent)&&(!g.parent||_i(g.parent,f.parent))}function hn(g,f,d){if(d&&g.shouldReuseRoute(f.value,d.value.snapshot)){const v=d.value;v._futureSnapshot=f.value;const D=function(g,f,d){return f.children.map(v=>{for(const D of d.children)if(g.shouldReuseRoute(v.value,D.value.snapshot))return hn(g,v,D);return hn(g,v)})}(g,f,d);return new tn(v,D)}{if(g.shouldAttach(f.value)){const $=g.retrieve(f.value);if(null!==$){const de=$.route;return Dr(f,de),de}}const v=function(g){return new or(new N(g.url),new N(g.params),new N(g.queryParams),new N(g.fragment),new N(g.data),g.outlet,g.component,g)}(f.value),D=f.children.map($=>hn(g,$));return new tn(v,D)}}function Dr(g,f){if(g.value.routeConfig!==f.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(g.children.length!==f.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");f.value._futureSnapshot=g.value;for(let d=0;d<g.children.length;++d)Dr(g.children[d],f.children[d])}function vr(g){return"object"==typeof g&&null!=g&&!g.outlets&&!g.segmentPath}function qt(g){return"object"==typeof g&&null!=g&&g.outlets}function Kr(g,f,d,v,D){let $={};return v&&et(v,(de,Ee)=>{$[Ee]=Array.isArray(de)?de.map(Me=>`${Me}`):`${de}`}),new ie(d.root===g?f:Mr(d.root,g,f),$,D)}function Mr(g,f,d){const v={};return et(g.children,(D,$)=>{v[$]=D===f?d:Mr(D,f,d)}),new q(g.segments,v)}class ur{constructor(f,d,v){if(this.isAbsolute=f,this.numberOfDoubleDots=d,this.commands=v,f&&v.length>0&&vr(v[0]))throw new Error("Root segment cannot have matrix parameters");const D=v.find(qt);if(D&&D!==Ln(v))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class V{constructor(f,d,v){this.segmentGroup=f,this.processChildren=d,this.index=v}}function Te(g,f,d){if(g||(g=new q([],{})),0===g.segments.length&&g.hasChildren())return je(g,f,d);const v=function(g,f,d){let v=0,D=f;const $={match:!1,pathIndex:0,commandIndex:0};for(;D<g.segments.length;){if(v>=d.length)return $;const de=g.segments[D],Ee=d[v];if(qt(Ee))break;const Me=`${Ee}`,Ye=v<d.length-1?d[v+1]:null;if(D>0&&void 0===Me)break;if(Me&&Ye&&"object"==typeof Ye&&void 0===Ye.outlets){if(!Mt(Me,Ye,de))return $;v+=2}else{if(!Mt(Me,{},de))return $;v++}D++}return{match:!0,pathIndex:D,commandIndex:v}}(g,f,d),D=d.slice(v.commandIndex);if(v.match&&v.pathIndex<g.segments.length){const $=new q(g.segments.slice(0,v.pathIndex),{});return $.children[lt]=new q(g.segments.slice(v.pathIndex),g.children),je($,0,D)}return v.match&&0===D.length?new q(g.segments,{}):v.match&&!g.hasChildren()?st(g,f,d):v.match?je(g,0,D):st(g,f,d)}function je(g,f,d){if(0===d.length)return new q(g.segments,{});{const v=function(g){return qt(g[0])?g[0].outlets:{[lt]:g}}(d),D={};return et(v,($,de)=>{"string"==typeof $&&($=[$]),null!==$&&(D[de]=Te(g.children[de],f,$))}),et(g.children,($,de)=>{void 0===v[de]&&(D[de]=$)}),new q(g.segments,D)}}function st(g,f,d){const v=g.segments.slice(0,f);let D=0;for(;D<d.length;){const $=d[D];if(qt($)){const Me=on($.outlets);return new q(v,Me)}if(0===D&&vr(d[0])){v.push(new te(g.segments[f].path,Jt(d[0]))),D++;continue}const de=qt($)?$.outlets[lt]:`${$}`,Ee=D<d.length-1?d[D+1]:null;de&&Ee&&vr(Ee)?(v.push(new te(de,Jt(Ee))),D+=2):(v.push(new te(de,{})),D++)}return new q(v,{})}function on(g){const f={};return et(g,(d,v)=>{"string"==typeof d&&(d=[d]),null!==d&&(f[v]=st(new q([],{}),0,d))}),f}function Jt(g){const f={};return et(g,(d,v)=>f[v]=`${d}`),f}function Mt(g,f,d){return g==d.path&&wn(f,d.parameters)}class sn{constructor(f,d,v,D){this.routeReuseStrategy=f,this.futureState=d,this.currState=v,this.forwardEvent=D}activate(f){const d=this.futureState._root,v=this.currState?this.currState._root:null;this.deactivateChildRoutes(d,v,f),$r(this.futureState.root),this.activateChildRoutes(d,v,f)}deactivateChildRoutes(f,d,v){const D=gr(d);f.children.forEach($=>{const de=$.value.outlet;this.deactivateRoutes($,D[de],v),delete D[de]}),et(D,($,de)=>{this.deactivateRouteAndItsChildren($,v)})}deactivateRoutes(f,d,v){const D=f.value,$=d?d.value:null;if(D===$)if(D.component){const de=v.getContext(D.outlet);de&&this.deactivateChildRoutes(f,d,de.children)}else this.deactivateChildRoutes(f,d,v);else $&&this.deactivateRouteAndItsChildren(d,v)}deactivateRouteAndItsChildren(f,d){this.routeReuseStrategy.shouldDetach(f.value.snapshot)?this.detachAndStoreRouteSubtree(f,d):this.deactivateRouteAndOutlet(f,d)}detachAndStoreRouteSubtree(f,d){const v=d.getContext(f.value.outlet);if(v&&v.outlet){const D=v.outlet.detach(),$=v.children.onOutletDeactivated();this.routeReuseStrategy.store(f.value.snapshot,{componentRef:D,route:f,contexts:$})}}deactivateRouteAndOutlet(f,d){const v=d.getContext(f.value.outlet),D=v&&f.value.component?v.children:d,$=gr(f);for(const de of Object.keys($))this.deactivateRouteAndItsChildren($[de],D);v&&v.outlet&&(v.outlet.deactivate(),v.children.onOutletDeactivated(),v.attachRef=null,v.resolver=null,v.route=null)}activateChildRoutes(f,d,v){const D=gr(d);f.children.forEach($=>{this.activateRoutes($,D[$.value.outlet],v),this.forwardEvent(new Cr($.value.snapshot))}),f.children.length&&this.forwardEvent(new Vr(f.value.snapshot))}activateRoutes(f,d,v){const D=f.value,$=d?d.value:null;if($r(D),D===$)if(D.component){const de=v.getOrCreateContext(D.outlet);this.activateChildRoutes(f,d,de.children)}else this.activateChildRoutes(f,d,v);else if(D.component){const de=v.getOrCreateContext(D.outlet);if(this.routeReuseStrategy.shouldAttach(D.snapshot)){const Ee=this.routeReuseStrategy.retrieve(D.snapshot);this.routeReuseStrategy.store(D.snapshot,null),de.children.onOutletReAttached(Ee.contexts),de.attachRef=Ee.componentRef,de.route=Ee.route.value,de.outlet&&de.outlet.attach(Ee.componentRef,Ee.route.value),Hn(Ee.route)}else{const Ee=function(g){for(let f=g.parent;f;f=f.parent){const d=f.routeConfig;if(d&&d._loadedConfig)return d._loadedConfig;if(d&&d.component)return null}return null}(D.snapshot),Me=Ee?Ee.module.componentFactoryResolver:null;de.attachRef=null,de.route=D,de.resolver=Me,de.outlet&&de.outlet.activateWith(D,Me),this.activateChildRoutes(f,null,de.children)}}else this.activateChildRoutes(f,null,v)}}function Hn(g){$r(g.value),g.children.forEach(Hn)}class bn{constructor(f,d){this.routes=f,this.module=d}}function _r(g){return"function"==typeof g}function Qn(g){return g instanceof ie}const Fr=Symbol("INITIAL_VALUE");function Qi(){return At(g=>function(...g){let f,d;return(0,k.K)(g[g.length-1])&&(d=g.pop()),"function"==typeof g[g.length-1]&&(f=g.pop()),1===g.length&&(0,j.k)(g[0])&&(g=g[0]),(0,oe.n)(g,d).lift(new le(f))}(g.map(f=>f.pipe(Jn(1),function(...g){const f=g[g.length-1];return(0,k.K)(f)?(g.pop(),d=>ze(g,d,f)):d=>ze(g,d)}(Fr)))).pipe(Wt((f,d)=>{let v=!1;return d.reduce((D,$,de)=>D!==Fr?D:($===Fr&&(v=!0),v||!1!==$&&de!==d.length-1&&!Qn($)?D:$),f)},Fr),A(f=>f!==Fr),(0,Re.U)(f=>Qn(f)?f:!0===f),Jn(1)))}let Lo=(()=>{class g{}return g.\u0275fac=function(d){return new(d||g)},g.\u0275cmp=m.Xpm({type:g,selectors:[["ng-component"]],decls:1,vars:0,template:function(d,v){1&d&&m._UZ(0,"router-outlet")},directives:function(){return[Eo]},encapsulation:2}),g})();function gt(g,f=""){for(let d=0;d<g.length;d++){const v=g[d];uf(v,dc(f,v))}}function uf(g,f){g.children&&gt(g.children,f)}function dc(g,f){return f?g||f.path?g&&!f.path?`${g}/`:!g&&f.path?f.path:`${g}/${f.path}`:"":g}function Ks(g){const f=g.children&&g.children.map(Ks),d=f?Object.assign(Object.assign({},g),{children:f}):Object.assign({},g);return!d.component&&(f||d.loadChildren)&&d.outlet&&d.outlet!==lt&&(d.component=Lo),d}function xr(g){return g.outlet||lt}function qs(g,f){const d=g.filter(v=>xr(v)===f);return d.push(...g.filter(v=>xr(v)!==f)),d}const za={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function jo(g,f,d){var v;if(""===f.path)return"full"===f.pathMatch&&(g.hasChildren()||d.length>0)?Object.assign({},za):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const $=(f.matcher||fn)(d,g,f);if(!$)return Object.assign({},za);const de={};et($.posParams,(Me,Ye)=>{de[Ye]=Me.path});const Ee=$.consumed.length>0?Object.assign(Object.assign({},de),$.consumed[$.consumed.length-1].parameters):de;return{matched:!0,consumedSegments:$.consumed,lastChild:$.consumed.length,parameters:Ee,positionalParamSegments:null!==(v=$.posParams)&&void 0!==v?v:{}}}function Le(g,f,d,v,D="corrected"){if(d.length>0&&function(g,f,d){return d.some(v=>bi(g,f,v)&&xr(v)!==lt)}(g,d,v)){const de=new q(f,function(g,f,d,v){const D={};D[lt]=v,v._sourceSegment=g,v._segmentIndexShift=f.length;for(const $ of d)if(""===$.path&&xr($)!==lt){const de=new q([],{});de._sourceSegment=g,de._segmentIndexShift=f.length,D[xr($)]=de}return D}(g,f,v,new q(d,g.children)));return de._sourceSegment=g,de._segmentIndexShift=f.length,{segmentGroup:de,slicedSegments:[]}}if(0===d.length&&function(g,f,d){return d.some(v=>bi(g,f,v))}(g,d,v)){const de=new q(g.segments,function(g,f,d,v,D,$){const de={};for(const Ee of v)if(bi(g,d,Ee)&&!D[xr(Ee)]){const Me=new q([],{});Me._sourceSegment=g,Me._segmentIndexShift="legacy"===$?g.segments.length:f.length,de[xr(Ee)]=Me}return Object.assign(Object.assign({},D),de)}(g,f,d,v,g.children,D));return de._sourceSegment=g,de._segmentIndexShift=f.length,{segmentGroup:de,slicedSegments:d}}const $=new q(g.segments,g.children);return $._sourceSegment=g,$._segmentIndexShift=f.length,{segmentGroup:$,slicedSegments:d}}function bi(g,f,d){return(!(g.hasChildren()||f.length>0)||"full"!==d.pathMatch)&&""===d.path}function kr(g,f,d,v){return!!(xr(g)===v||v!==lt&&bi(f,d,g))&&("**"===g.path||jo(f,g,d).matched)}function Uo(g,f,d){return 0===f.length&&!g.children[d]}class ji{constructor(f){this.segmentGroup=f||null}}class hc{constructor(f){this.urlTree=f}}function Vo(g){return new G.y(f=>f.error(new ji(g)))}function go(g){return new G.y(f=>f.error(new hc(g)))}function Bo(g){return new G.y(f=>f.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${g}'`)))}class Ya{constructor(f,d,v,D,$){this.configLoader=d,this.urlSerializer=v,this.urlTree=D,this.config=$,this.allowRedirects=!0,this.ngModule=f.get(m.h0i)}apply(){const f=Le(this.urlTree.root,[],[],this.config).segmentGroup,d=new q(f.segments,f.children);return this.expandSegmentGroup(this.ngModule,this.config,d,lt).pipe((0,Re.U)($=>this.createUrlTree(Nr($),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Se($=>{if($ instanceof hc)return this.allowRedirects=!1,this.match($.urlTree);throw $ instanceof ji?this.noMatchError($):$}))}match(f){return this.expandSegmentGroup(this.ngModule,this.config,f.root,lt).pipe((0,Re.U)(D=>this.createUrlTree(Nr(D),f.queryParams,f.fragment))).pipe(Se(D=>{throw D instanceof ji?this.noMatchError(D):D}))}noMatchError(f){return new Error(`Cannot match any routes. URL Segment: '${f.segmentGroup}'`)}createUrlTree(f,d,v){const D=f.segments.length>0?new q([],{[lt]:f}):f;return new ie(D,d,v)}expandSegmentGroup(f,d,v,D){return 0===v.segments.length&&v.hasChildren()?this.expandChildren(f,d,v).pipe((0,Re.U)($=>new q([],$))):this.expandSegment(f,v,d,v.segments,D,!0)}expandChildren(f,d,v){const D=[];for(const $ of Object.keys(v.children))"primary"===$?D.unshift($):D.push($);return(0,He.D)(D).pipe(pt($=>{const de=v.children[$],Ee=qs(d,$);return this.expandSegmentGroup(f,Ee,de,$).pipe((0,Re.U)(Me=>({segment:Me,outlet:$})))}),Wt(($,de)=>($[de.outlet]=de.segment,$),{}),function(g,f){const d=arguments.length>=2;return v=>v.pipe(g?A((D,$)=>g(D,$,v)):K.y,wt(1),d?vt(f):yn(()=>new Oe))}())}expandSegment(f,d,v,D,$,de){return(0,He.D)(v).pipe(pt(Ee=>this.expandSegmentAgainstRoute(f,d,v,Ee,D,$,de).pipe(Se(Ye=>{if(Ye instanceof ji)return b(null);throw Ye}))),an(Ee=>!!Ee),Se((Ee,Me)=>{if(Ee instanceof Oe||"EmptyError"===Ee.name){if(Uo(d,D,$))return b(new q([],{}));throw new ji(d)}throw Ee}))}expandSegmentAgainstRoute(f,d,v,D,$,de,Ee){return kr(D,d,$,de)?void 0===D.redirectTo?this.matchSegmentAgainstRoute(f,d,D,$,de):Ee&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(f,d,v,D,$,de):Vo(d):Vo(d)}expandSegmentAgainstRouteUsingRedirect(f,d,v,D,$,de){return"**"===D.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(f,v,D,de):this.expandRegularSegmentAgainstRouteUsingRedirect(f,d,v,D,$,de)}expandWildCardWithParamsAgainstRouteUsingRedirect(f,d,v,D){const $=this.applyRedirectCommands([],v.redirectTo,{});return v.redirectTo.startsWith("/")?go($):this.lineralizeSegments(v,$).pipe((0,Ge.zg)(de=>{const Ee=new q(de,{});return this.expandSegment(f,Ee,d,de,D,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(f,d,v,D,$,de){const{matched:Ee,consumedSegments:Me,lastChild:Ye,positionalParamSegments:dt}=jo(d,D,$);if(!Ee)return Vo(d);const Pt=this.applyRedirectCommands(Me,D.redirectTo,dt);return D.redirectTo.startsWith("/")?go(Pt):this.lineralizeSegments(D,Pt).pipe((0,Ge.zg)(gn=>this.expandSegment(f,d,v,gn.concat($.slice(Ye)),de,!1)))}matchSegmentAgainstRoute(f,d,v,D,$){if("**"===v.path)return v.loadChildren?(v._loadedConfig?b(v._loadedConfig):this.configLoader.load(f.injector,v)).pipe((0,Re.U)(gn=>(v._loadedConfig=gn,new q(D,{})))):b(new q(D,{}));const{matched:de,consumedSegments:Ee,lastChild:Me}=jo(d,v,D);if(!de)return Vo(d);const Ye=D.slice(Me);return this.getChildConfig(f,v,D).pipe((0,Ge.zg)(Pt=>{const gn=Pt.module,Bt=Pt.routes,{segmentGroup:Ki,slicedSegments:Fi}=Le(d,Ee,Ye,Bt),cr=new q(Ki.segments,Ki.children);if(0===Fi.length&&cr.hasChildren())return this.expandChildren(gn,Bt,cr).pipe((0,Re.U)(so=>new q(Ee,so)));if(0===Bt.length&&0===Fi.length)return b(new q(Ee,{}));const Xo=xr(v)===$;return this.expandSegment(gn,cr,Bt,Fi,Xo?lt:$,!0).pipe((0,Re.U)(Or=>new q(Ee.concat(Or.segments),Or.children)))}))}getChildConfig(f,d,v){return d.children?b(new bn(d.children,f)):d.loadChildren?void 0!==d._loadedConfig?b(d._loadedConfig):this.runCanLoadGuards(f.injector,d,v).pipe((0,Ge.zg)(D=>{return D?this.configLoader.load(f.injector,d).pipe((0,Re.U)($=>(d._loadedConfig=$,$))):(g=d,new G.y(f=>f.error(Tr(`Cannot load children because the guard of the route "path: '${g.path}'" returned false`))));var g})):b(new bn([],f))}runCanLoadGuards(f,d,v){const D=d.canLoad;return D&&0!==D.length?b(D.map(de=>{const Ee=f.get(de);let Me;if((g=Ee)&&_r(g.canLoad))Me=Ee.canLoad(d,v);else{if(!_r(Ee))throw new Error("Invalid CanLoad guard");Me=Ee(d,v)}var g;return xt(Me)})).pipe(Qi(),Lt(de=>{if(!Qn(de))return;const Ee=Tr(`Redirecting to "${this.urlSerializer.serialize(de)}"`);throw Ee.url=de,Ee}),(0,Re.U)(de=>!0===de)):b(!0)}lineralizeSegments(f,d){let v=[],D=d.root;for(;;){if(v=v.concat(D.segments),0===D.numberOfChildren)return b(v);if(D.numberOfChildren>1||!D.children[lt])return Bo(f.redirectTo);D=D.children[lt]}}applyRedirectCommands(f,d,v){return this.applyRedirectCreatreUrlTree(d,this.urlSerializer.parse(d),f,v)}applyRedirectCreatreUrlTree(f,d,v,D){const $=this.createSegmentGroup(f,d.root,v,D);return new ie($,this.createQueryParams(d.queryParams,this.urlTree.queryParams),d.fragment)}createQueryParams(f,d){const v={};return et(f,(D,$)=>{if("string"==typeof D&&D.startsWith(":")){const Ee=D.substring(1);v[$]=d[Ee]}else v[$]=D}),v}createSegmentGroup(f,d,v,D){const $=this.createSegments(f,d.segments,v,D);let de={};return et(d.children,(Ee,Me)=>{de[Me]=this.createSegmentGroup(f,Ee,v,D)}),new q($,de)}createSegments(f,d,v,D){return d.map($=>$.path.startsWith(":")?this.findPosParam(f,$,D):this.findOrReturn($,v))}findPosParam(f,d,v){const D=v[d.path.substring(1)];if(!D)throw new Error(`Cannot redirect to '${f}'. Cannot find '${d.path}'.`);return D}findOrReturn(f,d){let v=0;for(const D of d){if(D.path===f.path)return d.splice(v),D;v++}return f}}function Nr(g){const f={};for(const v of Object.keys(g.children)){const $=Nr(g.children[v]);($.segments.length>0||$.hasChildren())&&(f[v]=$)}return function(g){if(1===g.numberOfChildren&&g.children[lt]){const f=g.children[lt];return new q(g.segments.concat(f.segments),f.children)}return g}(new q(g.segments,f))}class Ws{constructor(f){this.path=f,this.route=this.path[this.path.length-1]}}class Ho{constructor(f,d){this.component=f,this.route=d}}function gc(g,f,d){const v=g._root;return Ui(v,f?f._root:null,d,[v.value])}function eo(g,f,d){const v=function(g){if(!g)return null;for(let f=g.parent;f;f=f.parent){const d=f.routeConfig;if(d&&d._loadedConfig)return d._loadedConfig}return null}(f);return(v?v.module.injector:d).get(g)}function Ui(g,f,d,v,D={canDeactivateChecks:[],canActivateChecks:[]}){const $=gr(f);return g.children.forEach(de=>{(function(g,f,d,v,D={canDeactivateChecks:[],canActivateChecks:[]}){const $=g.value,de=f?f.value:null,Ee=d?d.getContext(g.value.outlet):null;if(de&&$.routeConfig===de.routeConfig){const Me=function(g,f,d){if("function"==typeof d)return d(g,f);switch(d){case"pathParamsChange":return!ue(g.url,f.url);case"pathParamsOrQueryParamsChange":return!ue(g.url,f.url)||!wn(g.queryParams,f.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_i(g,f)||!wn(g.queryParams,f.queryParams);case"paramsChange":default:return!_i(g,f)}}(de,$,$.routeConfig.runGuardsAndResolvers);Me?D.canActivateChecks.push(new Ws(v)):($.data=de.data,$._resolvedData=de._resolvedData),Ui(g,f,$.component?Ee?Ee.children:null:d,v,D),Me&&Ee&&Ee.outlet&&Ee.outlet.isActivated&&D.canDeactivateChecks.push(new Ho(Ee.outlet.component,de))}else de&&Ei(f,Ee,D),D.canActivateChecks.push(new Ws(v)),Ui(g,null,$.component?Ee?Ee.children:null:d,v,D)})(de,$[de.value.outlet],d,v.concat([de.value]),D),delete $[de.value.outlet]}),et($,(de,Ee)=>Ei(de,d.getContext(Ee),D)),D}function Ei(g,f,d){const v=gr(g),D=g.value;et(v,($,de)=>{Ei($,D.component?f?f.children.getContext(de):null:f,d)}),d.canDeactivateChecks.push(new Ho(D.component&&f&&f.outlet&&f.outlet.isActivated?f.outlet.component:null,D))}class wi{}function pn(g){return new G.y(f=>f.error(g))}class bc{constructor(f,d,v,D,$,de){this.rootComponentType=f,this.config=d,this.urlTree=v,this.url=D,this.paramsInheritanceStrategy=$,this.relativeLinkResolution=de}recognize(){const f=Le(this.urlTree.root,[],[],this.config.filter(de=>void 0===de.redirectTo),this.relativeLinkResolution).segmentGroup,d=this.processSegmentGroup(this.config,f,lt);if(null===d)return null;const v=new Bn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),D=new tn(v,d),$=new vi(this.url,D);return this.inheritParamsAndData($._root),$}inheritParamsAndData(f){const d=f.value,v=Rr(d,this.paramsInheritanceStrategy);d.params=Object.freeze(v.params),d.data=Object.freeze(v.data),f.children.forEach(D=>this.inheritParamsAndData(D))}processSegmentGroup(f,d,v){return 0===d.segments.length&&d.hasChildren()?this.processChildren(f,d):this.processSegment(f,d,d.segments,v)}processChildren(f,d){const v=[];for(const $ of Object.keys(d.children)){const de=d.children[$],Ee=qs(f,$),Me=this.processSegmentGroup(Ee,de,$);if(null===Me)return null;v.push(...Me)}const D=nu(v);return D.sort((f,d)=>f.value.outlet===lt?-1:d.value.outlet===lt?1:f.value.outlet.localeCompare(d.value.outlet)),D}processSegment(f,d,v,D){for(const $ of f){const de=this.processSegmentAgainstRoute($,d,v,D);if(null!==de)return de}return Uo(d,v,D)?[]:null}processSegmentAgainstRoute(f,d,v,D){if(f.redirectTo||!kr(f,d,v,D))return null;let $,de=[],Ee=[];if("**"===f.path){const Bt=v.length>0?Ln(v).parameters:{};$=new Bn(v,Bt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(f),xr(f),f.component,f,mo(d),yo(d)+v.length,Ys(f))}else{const Bt=jo(d,f,v);if(!Bt.matched)return null;de=Bt.consumedSegments,Ee=v.slice(Bt.lastChild),$=new Bn(de,Bt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(f),xr(f),f.component,f,mo(d),yo(d)+de.length,Ys(f))}const Me=(g=f).children?g.children:g.loadChildren?g._loadedConfig.routes:[],{segmentGroup:Ye,slicedSegments:dt}=Le(d,de,Ee,Me.filter(Bt=>void 0===Bt.redirectTo),this.relativeLinkResolution);var g;if(0===dt.length&&Ye.hasChildren()){const Bt=this.processChildren(Me,Ye);return null===Bt?null:[new tn($,Bt)]}if(0===Me.length&&0===dt.length)return[new tn($,[])];const Pt=xr(f)===D,gn=this.processSegment(Me,Ye,dt,Pt?lt:D);return null===gn?null:[new tn($,gn)]}}function Cc(g){const f=g.value.routeConfig;return f&&""===f.path&&void 0===f.redirectTo}function nu(g){const f=[],d=new Set;for(const v of g){if(!Cc(v)){f.push(v);continue}const D=f.find($=>v.value.routeConfig===$.value.routeConfig);void 0!==D?(D.children.push(...v.children),d.add(D)):f.push(v)}for(const v of d){const D=nu(v.children);f.push(new tn(v.value,D))}return f.filter(v=>!d.has(v))}function mo(g){let f=g;for(;f._sourceSegment;)f=f._sourceSegment;return f}function yo(g){let f=g,d=f._segmentIndexShift?f._segmentIndexShift:0;for(;f._sourceSegment;)f=f._sourceSegment,d+=f._segmentIndexShift?f._segmentIndexShift:0;return d-1}function Ko(g){return g.data||{}}function Ys(g){return g.resolve||{}}function Vi(g){return At(f=>{const d=g(f);return d?(0,He.D)(d).pipe((0,Re.U)(()=>f)):b(f)})}class Ic extends class{shouldDetach(f){return!1}store(f,d){}shouldAttach(f){return!1}retrieve(f){return null}shouldReuseRoute(f,d){return f.routeConfig===d.routeConfig}}{}const ru=new m.OlP("ROUTES");class Ac{constructor(f,d,v,D){this.loader=f,this.compiler=d,this.onLoadStartListener=v,this.onLoadEndListener=D}load(f,d){if(d._loader$)return d._loader$;this.onLoadStartListener&&this.onLoadStartListener(d);const D=this.loadModuleFactory(d.loadChildren).pipe((0,Re.U)($=>{this.onLoadEndListener&&this.onLoadEndListener(d);const de=$.create(f);return new bn(ei(de.injector.get(ru,void 0,m.XFs.Self|m.XFs.Optional)).map(Ks),de)}),Se($=>{throw d._loader$=void 0,$}));return d._loader$=new ot.c(D,()=>new F.xQ).pipe((0,nr.x)()),d._loader$}loadModuleFactory(f){return"string"==typeof f?(0,He.D)(this.loader.load(f)):xt(f()).pipe((0,Ge.zg)(d=>d instanceof m.YKP?b(d):(0,He.D)(this.compiler.compileModuleAsync(d))))}}class qo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Bi,this.attachRef=null}}class Bi{constructor(){this.contexts=new Map}onChildOutletCreated(f,d){const v=this.getOrCreateContext(f);v.outlet=d,this.contexts.set(f,v)}onChildOutletDestroyed(f){const d=this.getContext(f);d&&(d.outlet=null)}onOutletDeactivated(){const f=this.contexts;return this.contexts=new Map,f}onOutletReAttached(f){this.contexts=f}getOrCreateContext(f){let d=this.getContext(f);return d||(d=new qo,this.contexts.set(f,d)),d}getContext(f){return this.contexts.get(f)||null}}class Wo{shouldProcessUrl(f){return!0}extract(f){return f}merge(f,d){return f}}function iu(g){throw g}function ou(g,f,d){return f.parse("/")}function Hi(g,f){return b(null)}const Tc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},to={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kn=(()=>{class g{constructor(d,v,D,$,de,Ee,Me,Ye){this.rootComponentType=d,this.urlSerializer=v,this.rootContexts=D,this.location=$,this.config=Ye,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new F.xQ,this.errorHandler=iu,this.malformedUriErrorHandler=ou,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hi,afterPreactivation:Hi},this.urlHandlingStrategy=new Wo,this.routeReuseStrategy=new Ic,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=de.get(m.h0i),this.console=de.get(m.c2e);const gn=de.get(m.R0b);this.isNgZoneEnabled=gn instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(Ye),this.currentUrlTree=new ie(new q([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ac(Ee,Me,Bt=>this.triggerEvent(new Pn(Bt)),Bt=>this.triggerEvent(new rr(Bt))),this.routerState=ti(this.currentUrlTree,this.rootComponentType),this.transitions=new N({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var d;return null===(d=this.location.getState())||void 0===d?void 0:d.\u0275routerPageId}setupNavigations(d){const v=this.events;return d.pipe(A(D=>0!==D.id),(0,Re.U)(D=>Object.assign(Object.assign({},D),{extractedUrl:this.urlHandlingStrategy.extract(D.rawUrl)})),At(D=>{let $=!1,de=!1;return b(D).pipe(Lt(Ee=>{this.currentNavigation={id:Ee.id,initialUrl:Ee.currentRawUrl,extractedUrl:Ee.extractedUrl,trigger:Ee.source,extras:Ee.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),At(Ee=>{const Me=!this.navigated||Ee.extractedUrl.toString()!==this.browserUrlTree.toString(),Ye=("reload"===this.onSameUrlNavigation||Me)&&this.urlHandlingStrategy.shouldProcessUrl(Ee.rawUrl);if(Qs(Ee.source)&&(this.browserUrlTree=Ee.rawUrl),Ye)return b(Ee).pipe(At(dt=>{const Pt=this.transitions.getValue();return v.next(new ln(dt.id,this.serializeUrl(dt.extractedUrl),dt.source,dt.restoredState)),Pt!==this.transitions.getValue()?Xe:Promise.resolve(dt)}),function(g,f,d,v){return At(D=>function(g,f,d,v,D){return new Ya(g,f,d,v,D).apply()}(g,f,d,D.extractedUrl,v).pipe((0,Re.U)($=>Object.assign(Object.assign({},D),{urlAfterRedirects:$}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Lt(dt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:dt.urlAfterRedirects})}),function(g,f,d,v,D){return(0,Ge.zg)($=>function(g,f,d,v,D="emptyOnly",$="legacy"){try{const de=new bc(g,f,d,v,D,$).recognize();return null===de?pn(new wi):b(de)}catch(de){return pn(de)}}(g,f,$.urlAfterRedirects,d($.urlAfterRedirects),v,D).pipe((0,Re.U)(de=>Object.assign(Object.assign({},$),{targetSnapshot:de}))))}(this.rootComponentType,this.config,dt=>this.serializeUrl(dt),this.paramsInheritanceStrategy,this.relativeLinkResolution),Lt(dt=>{"eager"===this.urlUpdateStrategy&&(dt.extras.skipLocationChange||this.setBrowserUrl(dt.urlAfterRedirects,dt),this.browserUrlTree=dt.urlAfterRedirects);const Pt=new pr(dt.id,this.serializeUrl(dt.extractedUrl),this.serializeUrl(dt.urlAfterRedirects),dt.targetSnapshot);v.next(Pt)}));if(Me&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Pt,extractedUrl:gn,source:Bt,restoredState:Ki,extras:Fi}=Ee,cr=new ln(Pt,this.serializeUrl(gn),Bt,Ki);v.next(cr);const Xo=ti(gn,this.rootComponentType).snapshot;return b(Object.assign(Object.assign({},Ee),{targetSnapshot:Xo,urlAfterRedirects:gn,extras:Object.assign(Object.assign({},Fi),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ee.rawUrl,this.browserUrlTree=Ee.urlAfterRedirects,Ee.resolve(null),Xe}),Vi(Ee=>{const{targetSnapshot:Me,id:Ye,extractedUrl:dt,rawUrl:Pt,extras:{skipLocationChange:gn,replaceUrl:Bt}}=Ee;return this.hooks.beforePreactivation(Me,{navigationId:Ye,appliedUrlTree:dt,rawUrlTree:Pt,skipLocationChange:!!gn,replaceUrl:!!Bt})}),Lt(Ee=>{const Me=new dn(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot);this.triggerEvent(Me)}),(0,Re.U)(Ee=>Object.assign(Object.assign({},Ee),{guards:gc(Ee.targetSnapshot,Ee.currentSnapshot,this.rootContexts)})),function(g,f){return(0,Ge.zg)(d=>{const{targetSnapshot:v,currentSnapshot:D,guards:{canActivateChecks:$,canDeactivateChecks:de}}=d;return 0===de.length&&0===$.length?b(Object.assign(Object.assign({},d),{guardsResult:!0})):function(g,f,d,v){return(0,He.D)(g).pipe((0,Ge.zg)(D=>function(g,f,d,v,D){const $=f&&f.routeConfig?f.routeConfig.canDeactivate:null;return $&&0!==$.length?b($.map(Ee=>{const Me=eo(Ee,f,D);let Ye;if(function(g){return g&&_r(g.canDeactivate)}(Me))Ye=xt(Me.canDeactivate(g,f,d,v));else{if(!_r(Me))throw new Error("Invalid CanDeactivate guard");Ye=xt(Me(g,f,d,v))}return Ye.pipe(an())})).pipe(Qi()):b(!0)}(D.component,D.route,d,f,v)),an(D=>!0!==D,!0))}(de,v,D,g).pipe((0,Ge.zg)(Ee=>Ee&&function(g){return"boolean"==typeof g}(Ee)?function(g,f,d,v){return(0,He.D)(f).pipe(pt(D=>ze(function(g,f){return null!==g&&f&&f(new gi(g)),b(!0)}(D.route.parent,v),function(g,f){return null!==g&&f&&f(new mi(g)),b(!0)}(D.route,v),function(g,f,d){const v=f[f.length-1],$=f.slice(0,f.length-1).reverse().map(de=>function(g){const f=g.routeConfig?g.routeConfig.canActivateChild:null;return f&&0!==f.length?{node:g,guards:f}:null}(de)).filter(de=>null!==de).map(de=>tt(()=>b(de.guards.map(Me=>{const Ye=eo(Me,de.node,d);let dt;if(function(g){return g&&_r(g.canActivateChild)}(Ye))dt=xt(Ye.canActivateChild(v,g));else{if(!_r(Ye))throw new Error("Invalid CanActivateChild guard");dt=xt(Ye(v,g))}return dt.pipe(an())})).pipe(Qi())));return b($).pipe(Qi())}(g,D.path,d),function(g,f,d){const v=f.routeConfig?f.routeConfig.canActivate:null;return v&&0!==v.length?b(v.map($=>tt(()=>{const de=eo($,f,d);let Ee;if(function(g){return g&&_r(g.canActivate)}(de))Ee=xt(de.canActivate(f,g));else{if(!_r(de))throw new Error("Invalid CanActivate guard");Ee=xt(de(f,g))}return Ee.pipe(an())}))).pipe(Qi()):b(!0)}(g,D.route,d))),an(D=>!0!==D,!0))}(v,$,g,f):b(Ee)),(0,Re.U)(Ee=>Object.assign(Object.assign({},d),{guardsResult:Ee})))})}(this.ngModule.injector,Ee=>this.triggerEvent(Ee)),Lt(Ee=>{if(Qn(Ee.guardsResult)){const Ye=Tr(`Redirecting to "${this.serializeUrl(Ee.guardsResult)}"`);throw Ye.url=Ee.guardsResult,Ye}const Me=new On(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot,!!Ee.guardsResult);this.triggerEvent(Me)}),A(Ee=>!!Ee.guardsResult||(this.restoreHistory(Ee),this.cancelNavigationTransition(Ee,""),!1)),Vi(Ee=>{if(Ee.guards.canActivateChecks.length)return b(Ee).pipe(Lt(Me=>{const Ye=new Ar(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(Ye)}),At(Me=>{let Ye=!1;return b(Me).pipe(function(g,f){return(0,Ge.zg)(d=>{const{targetSnapshot:v,guards:{canActivateChecks:D}}=d;if(!D.length)return b(d);let $=0;return(0,He.D)(D).pipe(pt(de=>function(g,f,d,v){return function(g,f,d,v){const D=Object.keys(g);if(0===D.length)return b({});const $={};return(0,He.D)(D).pipe((0,Ge.zg)(de=>function(g,f,d,v){const D=eo(g,f,v);return xt(D.resolve?D.resolve(f,d):D(f,d))}(g[de],f,d,v).pipe(Lt(Ee=>{$[de]=Ee}))),wt(1),(0,Ge.zg)(()=>Object.keys($).length===D.length?b($):Xe))}(g._resolve,g,f,v).pipe((0,Re.U)($=>(g._resolvedData=$,g.data=Object.assign(Object.assign({},g.data),Rr(g,d).resolve),null)))}(de.route,v,g,f)),Lt(()=>$++),wt(1),(0,Ge.zg)(de=>$===D.length?b(d):Xe))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Lt({next:()=>Ye=!0,complete:()=>{Ye||(this.restoreHistory(Me),this.cancelNavigationTransition(Me,"At least one route resolver didn't emit any value."))}}))}),Lt(Me=>{const Ye=new pi(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(Ye)}))}),Vi(Ee=>{const{targetSnapshot:Me,id:Ye,extractedUrl:dt,rawUrl:Pt,extras:{skipLocationChange:gn,replaceUrl:Bt}}=Ee;return this.hooks.afterPreactivation(Me,{navigationId:Ye,appliedUrlTree:dt,rawUrlTree:Pt,skipLocationChange:!!gn,replaceUrl:!!Bt})}),(0,Re.U)(Ee=>{const Me=function(g,f,d){const v=hn(g,f._root,d?d._root:void 0);return new Hr(v,f)}(this.routeReuseStrategy,Ee.targetSnapshot,Ee.currentRouterState);return Object.assign(Object.assign({},Ee),{targetRouterState:Me})}),Lt(Ee=>{this.currentUrlTree=Ee.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,Ee.rawUrl),this.routerState=Ee.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ee.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ee),this.browserUrlTree=Ee.urlAfterRedirects)}),((g,f,d)=>(0,Re.U)(v=>(new sn(f,v.targetRouterState,v.currentRouterState,d).activate(g),v)))(this.rootContexts,this.routeReuseStrategy,Ee=>this.triggerEvent(Ee)),Lt({next(){$=!0},complete(){$=!0}}),function(g){return f=>f.lift(new ut(g))}(()=>{if(!$&&!de){const Ee=`Navigation ID ${D.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(D),this.cancelNavigationTransition(D,Ee)):this.cancelNavigationTransition(D,Ee)}this.currentNavigation=null}),Se(Ee=>{if(de=!0,function(g){return g&&g[Sr]}(Ee)){const Me=Qn(Ee.url);Me||(this.navigated=!0,this.restoreHistory(D,!0));const Ye=new Zn(D.id,this.serializeUrl(D.extractedUrl),Ee.message);v.next(Ye),Me?setTimeout(()=>{const dt=this.urlHandlingStrategy.merge(Ee.url,this.rawUrlTree),Pt={skipLocationChange:D.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qs(D.source)};this.scheduleNavigation(dt,"imperative",null,Pt,{resolve:D.resolve,reject:D.reject,promise:D.promise})},0):D.resolve(!1)}else{this.restoreHistory(D,!0);const Me=new Tt(D.id,this.serializeUrl(D.extractedUrl),Ee);v.next(Me);try{D.resolve(this.errorHandler(Ee))}catch(Ye){D.reject(Ye)}}return Xe}))}))}resetRootComponentType(d){this.rootComponentType=d,this.routerState.root.component=this.rootComponentType}getTransition(){const d=this.transitions.value;return d.urlAfterRedirects=this.browserUrlTree,d}setTransition(d){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),d))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(d=>{const v=this.extractLocationChangeInfoFromEvent(d);this.shouldScheduleNavigation(this.lastLocationChangeInfo,v)&&setTimeout(()=>{const{source:D,state:$,urlTree:de}=v,Ee={replaceUrl:!0};if($){const Me=Object.assign({},$);delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&(Ee.state=Me)}this.scheduleNavigation(de,D,$,Ee)},0),this.lastLocationChangeInfo=v}))}extractLocationChangeInfoFromEvent(d){var v;return{source:"popstate"===d.type?"popstate":"hashchange",urlTree:this.parseUrl(d.url),state:(null===(v=d.state)||void 0===v?void 0:v.navigationId)?d.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(d,v){if(!d)return!0;const D=v.urlTree.toString()===d.urlTree.toString();return v.transitionId!==d.transitionId||!D||!("hashchange"===v.source&&"popstate"===d.source||"popstate"===v.source&&"hashchange"===d.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(d){this.events.next(d)}resetConfig(d){gt(d),this.config=d.map(Ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(d,v={}){const{relativeTo:D,queryParams:$,fragment:de,queryParamsHandling:Ee,preserveFragment:Me}=v,Ye=D||this.routerState.root,dt=Me?this.currentUrlTree.fragment:de;let Pt=null;switch(Ee){case"merge":Pt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),$);break;case"preserve":Pt=this.currentUrlTree.queryParams;break;default:Pt=$||null}return null!==Pt&&(Pt=this.removeEmptyProps(Pt)),function(g,f,d,v,D){if(0===d.length)return Kr(f.root,f.root,f,v,D);const $=function(g){if("string"==typeof g[0]&&1===g.length&&"/"===g[0])return new ur(!0,0,g);let f=0,d=!1;const v=g.reduce((D,$,de)=>{if("object"==typeof $&&null!=$){if($.outlets){const Ee={};return et($.outlets,(Me,Ye)=>{Ee[Ye]="string"==typeof Me?Me.split("/"):Me}),[...D,{outlets:Ee}]}if($.segmentPath)return[...D,$.segmentPath]}return"string"!=typeof $?[...D,$]:0===de?($.split("/").forEach((Ee,Me)=>{0==Me&&"."===Ee||(0==Me&&""===Ee?d=!0:".."===Ee?f++:""!=Ee&&D.push(Ee))}),D):[...D,$]},[]);return new ur(d,f,v)}(d);if($.toRoot())return Kr(f.root,new q([],{}),f,v,D);const de=function(g,f,d){if(g.isAbsolute)return new V(f.root,!0,0);if(-1===d.snapshot._lastPathIndex){const $=d.snapshot._urlSegment;return new V($,$===f.root,0)}const v=vr(g.commands[0])?0:1;return function(g,f,d){let v=g,D=f,$=d;for(;$>D;){if($-=D,v=v.parent,!v)throw new Error("Invalid number of '../'");D=v.segments.length}return new V(v,!1,D-$)}(d.snapshot._urlSegment,d.snapshot._lastPathIndex+v,g.numberOfDoubleDots)}($,f,g),Ee=de.processChildren?je(de.segmentGroup,de.index,$.commands):Te(de.segmentGroup,de.index,$.commands);return Kr(de.segmentGroup,Ee,f,v,D)}(Ye,this.currentUrlTree,d,Pt,null!=dt?dt:null)}navigateByUrl(d,v={skipLocationChange:!1}){const D=Qn(d)?d:this.parseUrl(d),$=this.urlHandlingStrategy.merge(D,this.rawUrlTree);return this.scheduleNavigation($,"imperative",null,v)}navigate(d,v={skipLocationChange:!1}){return function(g){for(let f=0;f<g.length;f++){const d=g[f];if(null==d)throw new Error(`The requested path contains ${d} segment at index ${f}`)}}(d),this.navigateByUrl(this.createUrlTree(d,v),v)}serializeUrl(d){return this.urlSerializer.serialize(d)}parseUrl(d){let v;try{v=this.urlSerializer.parse(d)}catch(D){v=this.malformedUriErrorHandler(D,this.urlSerializer,d)}return v}isActive(d,v){let D;if(D=!0===v?Object.assign({},Tc):!1===v?Object.assign({},to):v,Qn(d))return a(this.currentUrlTree,d,D);const $=this.parseUrl(d);return a(this.currentUrlTree,$,D)}removeEmptyProps(d){return Object.keys(d).reduce((v,D)=>{const $=d[D];return null!=$&&(v[D]=$),v},{})}processNavigations(){this.navigations.subscribe(d=>{this.navigated=!0,this.lastSuccessfulId=d.id,this.currentPageId=d.targetPageId,this.events.next(new Rn(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,d.resolve(!0)},d=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(d,v,D,$,de){var Ee,Me;if(this.disposed)return Promise.resolve(!1);const Ye=this.getTransition(),dt=Qs(v)&&Ye&&!Qs(Ye.source),Bt=(this.lastSuccessfulId===Ye.id||this.currentNavigation?Ye.rawUrl:Ye.urlAfterRedirects).toString()===d.toString();if(dt&&Bt)return Promise.resolve(!0);let Ki,Fi,cr;de?(Ki=de.resolve,Fi=de.reject,cr=de.promise):cr=new Promise((Or,so)=>{Ki=Or,Fi=so});const Xo=++this.navigationId;let cn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(D=this.location.getState()),cn=D&&D.\u0275routerPageId?D.\u0275routerPageId:$.replaceUrl||$.skipLocationChange?null!==(Ee=this.browserPageId)&&void 0!==Ee?Ee:0:(null!==(Me=this.browserPageId)&&void 0!==Me?Me:0)+1):cn=0,this.setTransition({id:Xo,targetPageId:cn,source:v,restoredState:D,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:d,extras:$,resolve:Ki,reject:Fi,promise:cr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),cr.catch(Or=>Promise.reject(Or))}setBrowserUrl(d,v){const D=this.urlSerializer.serialize(d),$=Object.assign(Object.assign({},v.extras.state),this.generateNgRouterState(v.id,v.targetPageId));this.location.isCurrentPathEqualTo(D)||v.extras.replaceUrl?this.location.replaceState(D,"",$):this.location.go(D,"",$)}restoreHistory(d,v=!1){var D,$;if("computed"===this.canceledNavigationResolution){const de=this.currentPageId-d.targetPageId;"popstate"!==d.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(D=this.currentNavigation)||void 0===D?void 0:D.finalUrl)||0===de?this.currentUrlTree===(null===($=this.currentNavigation)||void 0===$?void 0:$.finalUrl)&&0===de&&(this.resetState(d),this.browserUrlTree=d.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(de)}else"replace"===this.canceledNavigationResolution&&(v&&this.resetState(d),this.resetUrlToCurrentUrlTree())}resetState(d){this.routerState=d.currentRouterState,this.currentUrlTree=d.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,d.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(d,v){const D=new Zn(d.id,this.serializeUrl(d.extractedUrl),v);this.triggerEvent(D),d.resolve(!1)}generateNgRouterState(d,v){return"computed"===this.canceledNavigationResolution?{navigationId:d,\u0275routerPageId:v}:{navigationId:d}}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(m.DyG),m.LFG(pe),m.LFG(Bi),m.LFG(x.Ye),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})();function Qs(g){return"imperative"!==g}let _o=(()=>{class g{constructor(d,v,D){this.router=d,this.route=v,this.locationStrategy=D,this.commands=[],this.onChanges=new F.xQ,this.subscription=d.events.subscribe($=>{$ instanceof Rn&&this.updateTargetUrlAndHref()})}set routerLink(d){this.commands=null!=d?Array.isArray(d)?d:[d]:[]}ngOnChanges(d){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(d,v,D,$,de){if(0!==d||v||D||$||de||"string"==typeof this.target&&"_self"!=this.target)return!0;const Ee={skipLocationChange:no(this.skipLocationChange),replaceUrl:no(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ee),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:no(this.preserveFragment)})}}return g.\u0275fac=function(d){return new(d||g)(m.Y36(Kn),m.Y36(or),m.Y36(x.S$))},g.\u0275dir=m.lG2({type:g,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(d,v){1&d&&m.NdJ("click",function($){return v.onClick($.button,$.ctrlKey,$.shiftKey,$.altKey,$.metaKey)}),2&d&&(m.Ikx("href",v.href,m.LSH),m.uIk("target",v.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[m.TTD]}),g})();function no(g){return""===g||!!g}let Eo=(()=>{class g{constructor(d,v,D,$,de){this.parentContexts=d,this.location=v,this.resolver=D,this.changeDetector=de,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=$||lt,d.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const d=this.parentContexts.getContext(this.name);d&&d.route&&(d.attachRef?this.attach(d.attachRef,d.route):this.activateWith(d.route,d.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const d=this.activated;return this.activated=null,this._activatedRoute=null,d}attach(d,v){this.activated=d,this._activatedRoute=v,this.location.insert(d.hostView)}deactivate(){if(this.activated){const d=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(d)}}activateWith(d,v){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=d;const de=(v=v||this.resolver).resolveComponentFactory(d._futureSnapshot.routeConfig.component),Ee=this.parentContexts.getOrCreateContext(this.name).children,Me=new Xs(d,Ee,this.location.injector);this.activated=this.location.createComponent(de,this.location.length,Me),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return g.\u0275fac=function(d){return new(d||g)(m.Y36(Bi),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},g.\u0275dir=m.lG2({type:g,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),g})();class Xs{constructor(f,d,v){this.route=f,this.childContexts=d,this.parent=v}get(f,d){return f===or?this.route:f===Bi?this.childContexts:this.parent.get(f,d)}}class wo{}class su{preload(f,d){return b(null)}}let ea=(()=>{class g{constructor(d,v,D,$,de){this.router=d,this.injector=$,this.preloadingStrategy=de,this.loader=new Ac(v,D,Ye=>d.triggerEvent(new Pn(Ye)),Ye=>d.triggerEvent(new rr(Ye)))}setUpPreloading(){this.subscription=this.router.events.pipe(A(d=>d instanceof Rn),pt(()=>this.preload())).subscribe(()=>{})}preload(){const d=this.injector.get(m.h0i);return this.processRoutes(d,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(d,v){const D=[];for(const $ of v)if($.loadChildren&&!$.canLoad&&$._loadedConfig){const de=$._loadedConfig;D.push(this.processRoutes(de.module,de.routes))}else $.loadChildren&&!$.canLoad?D.push(this.preloadConfig(d,$)):$.children&&D.push(this.processRoutes(d,$.children));return(0,He.D)(D).pipe((0,Ve.J)(),(0,Re.U)($=>{}))}preloadConfig(d,v){return this.preloadingStrategy.preload(v,()=>(v._loadedConfig?b(v._loadedConfig):this.loader.load(d.injector,v)).pipe((0,Ge.zg)($=>(v._loadedConfig=$,this.processRoutes($.module,$.routes)))))}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(Kn),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(wo))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})(),Jo=(()=>{class g{constructor(d,v,D={}){this.router=d,this.viewportScroller=v,this.options=D,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},D.scrollPositionRestoration=D.scrollPositionRestoration||"disabled",D.anchorScrolling=D.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(d=>{d instanceof ln?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=d.navigationTrigger,this.restoredId=d.restoredState?d.restoredState.navigationId:0):d instanceof Rn&&(this.lastId=d.id,this.scheduleScrollEvent(d,this.router.parseUrl(d.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(d=>{d instanceof Fn&&(d.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(d.position):d.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(d.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(d,v){this.router.triggerEvent(new Fn(d,"popstate"===this.lastSource?this.store[this.restoredId]:null,v))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(Kn),m.LFG(x.EM),m.LFG(void 0))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})();const Si=new m.OlP("ROUTER_CONFIGURATION"),au=new m.OlP("ROUTER_FORROOT_GUARD"),Zo=[x.Ye,{provide:pe,useClass:O},{provide:Kn,useFactory:function(g,f,d,v,D,$,de,Ee={},Me,Ye){const dt=new Kn(null,g,f,d,v,D,$,ei(de));return Me&&(dt.urlHandlingStrategy=Me),Ye&&(dt.routeReuseStrategy=Ye),function(g,f){g.errorHandler&&(f.errorHandler=g.errorHandler),g.malformedUriErrorHandler&&(f.malformedUriErrorHandler=g.malformedUriErrorHandler),g.onSameUrlNavigation&&(f.onSameUrlNavigation=g.onSameUrlNavigation),g.paramsInheritanceStrategy&&(f.paramsInheritanceStrategy=g.paramsInheritanceStrategy),g.relativeLinkResolution&&(f.relativeLinkResolution=g.relativeLinkResolution),g.urlUpdateStrategy&&(f.urlUpdateStrategy=g.urlUpdateStrategy)}(Ee,dt),Ee.enableTracing&&dt.events.subscribe(Pt=>{var gn,Bt;null===(gn=console.group)||void 0===gn||gn.call(console,`Router Event: ${Pt.constructor.name}`),console.log(Pt.toString()),console.log(Pt),null===(Bt=console.groupEnd)||void 0===Bt||Bt.call(console)}),dt},deps:[pe,Bi,x.Ye,m.zs3,m.v3s,m.Sil,ru,Si,[class{},new m.FiY],[class{},new m.FiY]]},Bi,{provide:or,useFactory:function(g){return g.routerState.root},deps:[Kn]},{provide:m.v3s,useClass:m.EAV},ea,su,class{preload(f,d){return d().pipe(Se(()=>b(null)))}},{provide:Si,useValue:{enableTracing:!1}}];function Co(){return new m.PXZ("Router",Kn)}let kc=(()=>{class g{constructor(d,v){}static forRoot(d,v){return{ngModule:g,providers:[Zo,lu(d),{provide:au,useFactory:ro,deps:[[Kn,new m.FiY,new m.tp0]]},{provide:Si,useValue:v||{}},{provide:x.S$,useFactory:cu,deps:[x.lw,[new m.tBr(x.mr),new m.FiY],Si]},{provide:Jo,useFactory:uu,deps:[Kn,x.EM,Si]},{provide:wo,useExisting:v&&v.preloadingStrategy?v.preloadingStrategy:su},{provide:m.PXZ,multi:!0,useFactory:Co},[Di,{provide:m.ip1,multi:!0,useFactory:oo,deps:[Di]},{provide:Qo,useFactory:So,deps:[Di]},{provide:m.tb,multi:!0,useExisting:Qo}]]}}static forChild(d){return{ngModule:g,providers:[lu(d)]}}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(au,8),m.LFG(Kn,8))},g.\u0275mod=m.oAB({type:g}),g.\u0275inj=m.cJS({}),g})();function uu(g,f,d){return d.scrollOffset&&f.setOffset(d.scrollOffset),new Jo(g,f,d)}function cu(g,f,d={}){return d.useHash?new x.Do(g,f):new x.b0(g,f)}function ro(g){return"guarded"}function lu(g){return[{provide:m.deG,multi:!0,useValue:g},{provide:ru,multi:!0,useValue:g}]}let Di=(()=>{class g{constructor(d){this.injector=d,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new F.xQ}appInitializer(){return this.injector.get(x.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let v=null;const D=new Promise(Ee=>v=Ee),$=this.injector.get(Kn),de=this.injector.get(Si);return"disabled"===de.initialNavigation?($.setUpLocationChangeListener(),v(!0)):"enabled"===de.initialNavigation||"enabledBlocking"===de.initialNavigation?($.hooks.afterPreactivation=()=>this.initNavigation?b(null):(this.initNavigation=!0,v(!0),this.resultOfPreactivationDone),$.initialNavigation()):v(!0),D})}bootstrapListener(d){const v=this.injector.get(Si),D=this.injector.get(ea),$=this.injector.get(Jo),de=this.injector.get(Kn),Ee=this.injector.get(m.z2F);d===Ee.components[0]&&(("enabledNonBlocking"===v.initialNavigation||void 0===v.initialNavigation)&&de.initialNavigation(),D.setUpPreloading(),$.init(),de.resetRootComponentType(Ee.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(m.zs3))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})();function oo(g){return g.appInitializer.bind(g)}function So(g){return g.bootstrapListener.bind(g)}const Qo=new m.OlP("Router Initializer")},0:function(It){It.exports=function(Ae){var R={};function x(m){if(R[m])return R[m].exports;var k=R[m]={i:m,l:!1,exports:{}};return Ae[m].call(k.exports,k,k.exports,x),k.l=!0,k.exports}return x.m=Ae,x.c=R,x.d=function(m,k,oe){x.o(m,k)||Object.defineProperty(m,k,{enumerable:!0,get:oe})},x.r=function(m){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},x.t=function(m,k){if(1&k&&(m=x(m)),8&k||4&k&&"object"==typeof m&&m&&m.__esModule)return m;var oe=Object.create(null);if(x.r(oe),Object.defineProperty(oe,"default",{enumerable:!0,value:m}),2&k&&"string"!=typeof m)for(var Z in m)x.d(oe,Z,function(b){return m[b]}.bind(null,Z));return oe},x.n=function(m){var k=m&&m.__esModule?function(){return m.default}:function(){return m};return x.d(k,"a",k),k},x.o=function(m,k){return Object.prototype.hasOwnProperty.call(m,k)},x.p="",x(x.s=22)}([function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var m=function(){function b(F,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,w,N){return w&&b(F.prototype,w),N&&b(F,N),F}}(),k={debug:function(){},info:function(){},warn:function(){},error:function(){}},oe=void 0,Z=void 0;(R.Log=function(){function b(){!function(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}(this,b)}return b.reset=function(){Z=3,oe=k},b.debug=function(){if(Z>=4){for(var w=arguments.length,N=Array(w),j=0;j<w;j++)N[j]=arguments[j];oe.debug.apply(oe,Array.from(N))}},b.info=function(){if(Z>=3){for(var w=arguments.length,N=Array(w),j=0;j<w;j++)N[j]=arguments[j];oe.info.apply(oe,Array.from(N))}},b.warn=function(){if(Z>=2){for(var w=arguments.length,N=Array(w),j=0;j<w;j++)N[j]=arguments[j];oe.warn.apply(oe,Array.from(N))}},b.error=function(){if(Z>=1){for(var w=arguments.length,N=Array(w),j=0;j<w;j++)N[j]=arguments[j];oe.error.apply(oe,Array.from(N))}},m(b,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return Z},set:function(w){if(!(0<=w&&w<=4))throw new Error("Invalid log level");Z=w}},{key:"logger",get:function(){return oe},set:function(w){if(!w.debug&&w.info&&(w.debug=w.info),!(w.debug&&w.info&&w.warn&&w.error))throw new Error("Invalid logger");oe=w}}]),b}()).reset()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var m=function(){function b(F,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,w,N){return w&&b(F.prototype,w),N&&b(F,N),F}}(),k={setInterval:function(b){function F(w,N){return b.apply(this,arguments)}return F.toString=function(){return b.toString()},F}(function(b,F){return setInterval(b,F)}),clearInterval:function(b){function F(w){return b.apply(this,arguments)}return F.toString=function(){return b.toString()},F}(function(b){return clearInterval(b)})},oe=!1,Z=null;R.Global=function(){function b(){!function(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}(this,b)}return b._testing=function(){oe=!0},b.setXMLHttpRequest=function(w){Z=w},m(b,null,[{key:"location",get:function(){if(!oe)return location}},{key:"localStorage",get:function(){if(!oe&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!oe&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!oe&&"undefined"!=typeof window)return Z||XMLHttpRequest}},{key:"timer",get:function(){if(!oe)return k}}]),b}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.MetadataService=void 0;var m=function(){function F(w,N){for(var j=0;j<N.length;j++){var L=N[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,N,j){return N&&F(w.prototype,N),j&&F(w,j),w}}(),k=x(0),oe=x(7);function Z(F,w){if(!(F instanceof w))throw new TypeError("Cannot call a class as a function")}var b=".well-known/openid-configuration";R.MetadataService=function(){function F(w){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.JsonService;if(Z(this,F),!w)throw k.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=w,this._jsonService=new N(["application/jwk-set+json"])}return F.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},F.prototype.getMetadata=function(){var N=this;return this._settings.metadata?(k.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(k.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(j){return k.Log.debug("MetadataService.getMetadata: json received"),N._settings.metadata=Object.assign({},N._settings.metadataSeed||{},j),N._settings.metadata})):(k.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},F.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},F.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},F.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},F.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},F.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},F.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},F.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},F.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},F.prototype._getMetadataProperty=function(N){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k.Log.debug("MetadataService.getMetadataProperty for: "+N),this.getMetadata().then(function(L){if(k.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===L[N]){if(!0===j)return void k.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+N);throw k.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+N),new Error("Metadata does not contain property "+N)}return L[N]})},F.prototype.getSigningKeys=function(){var N=this;return this._settings.signingKeys?(k.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(j){return k.Log.debug("MetadataService.getSigningKeys: jwks_uri received",j),N._jsonService.getJson(j).then(function(L){if(k.Log.debug("MetadataService.getSigningKeys: key set received",L),!L.keys)throw k.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return N._settings.signingKeys=L.keys,N._settings.signingKeys})})},m(F,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(b)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=b))),this._metadataUrl}}]),F}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.UrlUtility=void 0;var m=x(0),k=x(1);R.UrlUtility=function(){function oe(){!function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.addQueryParam=function(b,F,w){return b.indexOf("?")<0&&(b+="?"),"?"!==b[b.length-1]&&(b+="&"),b+=encodeURIComponent(F),(b+="=")+encodeURIComponent(w)},oe.parseUrlFragment=function(b){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof b&&(b=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.Global).location.href);var N=b.lastIndexOf(F);N>=0&&(b=b.substr(N+1)),"?"===F&&(N=b.indexOf("#"))>=0&&(b=b.substr(0,N));for(var j,L={},Q=/([^&=]+)=([^&]*)/g,J=0;j=Q.exec(b);)if(L[decodeURIComponent(j[1])]=decodeURIComponent(j[2].replace(/\+/g," ")),J++>50)return m.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",b),{error:"Response exceeded expected number of parameters"};for(var W in L)return L;return{}},oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.JoseUtil=void 0;var Z,m=x(26),k=(Z=x(33))&&Z.__esModule?Z:{default:Z};R.JoseUtil=(0,k.default)({jws:m.jws,KeyUtil:m.KeyUtil,X509:m.X509,crypto:m.crypto,hextob64u:m.hextob64u,b64tohex:m.b64tohex,AllowedSigningAlgs:m.AllowedSigningAlgs})},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.OidcClientSettings=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(W){return typeof W}:function(W){return W&&"function"==typeof Symbol&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},k=function(){function W(G,Y){for(var we=0;we<Y.length;we++){var fe=Y[we];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(G,fe.key,fe)}}return function(G,Y,we){return Y&&W(G.prototype,Y),we&&W(G,we),G}}(),oe=x(0),Z=x(23),b=x(6),F=x(24),w=x(2);function N(W,G){if(!(W instanceof G))throw new TypeError("Cannot call a class as a function")}var j=".well-known/openid-configuration",L="id_token",Q="openid",J="client_secret_post";R.OidcClientSettings=function(){function W(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Y=G.authority,we=G.metadataUrl,fe=G.metadata,le=G.signingKeys,re=G.metadataSeed,Pe=G.client_id,Oe=G.client_secret,Ve=G.response_type,ye=void 0===Ve?L:Ve,ze=G.scope,He=void 0===ze?Q:ze,Xe=G.redirect_uri,Et=G.post_logout_redirect_uri,at=G.client_authentication,tt=void 0===at?J:at,ot=G.prompt,Re=G.display,ht=G.max_age,At=G.ui_locales,En=G.acr_values,Ut=G.resource,Tn=G.response_mode,Sn=G.filterProtocolClaims,Jn=void 0===Sn||Sn,zn=G.loadUserInfo,en=void 0===zn||zn,mn=G.staleStateAge,Wt=void 0===mn?900:mn,he=G.clockSkew,P=void 0===he?300:he,A=G.clockService,ge=void 0===A?new Z.ClockService:A,_e=G.userInfoJwtIssuer,Se=void 0===_e?"OP":_e,xe=G.mergeClaims,We=void 0!==xe&&xe,Ge=G.stateStore,pt=void 0===Ge?new b.WebStorageStateStore:Ge,wt=G.ResponseValidatorCtor,Ft=void 0===wt?F.ResponseValidator:wt,nn=G.MetadataServiceCtor,yn=void 0===nn?w.MetadataService:nn,Dn=G.extraQueryParams,Ze=void 0===Dn?{}:Dn,$t=G.extraTokenParams,vt=void 0===$t?{}:$t;N(this,W),this._authority=Y,this._metadataUrl=we,this._metadata=fe,this._metadataSeed=re,this._signingKeys=le,this._client_id=Pe,this._client_secret=Oe,this._response_type=ye,this._scope=He,this._redirect_uri=Xe,this._post_logout_redirect_uri=Et,this._client_authentication=tt,this._prompt=ot,this._display=Re,this._max_age=ht,this._ui_locales=At,this._acr_values=En,this._resource=Ut,this._response_mode=Tn,this._filterProtocolClaims=!!Jn,this._loadUserInfo=!!en,this._staleStateAge=Wt,this._clockSkew=P,this._clockService=ge,this._userInfoJwtIssuer=Se,this._mergeClaims=!!We,this._stateStore=pt,this._validator=new Ft(this),this._metadataService=new yn(this),this._extraQueryParams="object"===(void 0===Ze?"undefined":m(Ze))?Ze:{},this._extraTokenParams="object"===(void 0===vt?"undefined":m(vt))?vt:{}}return W.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},k(W,[{key:"client_id",get:function(){return this._client_id},set:function(Y){if(this._client_id)throw oe.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=Y}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(Y){if(this._authority)throw oe.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=Y}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(j)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=j)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(Y){this._metadata=Y}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(Y){this._metadataSeed=Y}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(Y){this._signingKeys=Y}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(Y){this._extraQueryParams="object"===(void 0===Y?"undefined":m(Y))?Y:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(Y){this._extraTokenParams="object"===(void 0===Y?"undefined":m(Y))?Y:{}}}]),W}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.WebStorageStateStore=void 0;var m=x(0),k=x(1);function oe(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}R.WebStorageStateStore=function(){function Z(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=b.prefix,w=void 0===F?"oidc.":F,N=b.store,j=void 0===N?k.Global.localStorage:N;oe(this,Z),this._store=j,this._prefix=w}return Z.prototype.set=function(F,w){return m.Log.debug("WebStorageStateStore.set",F),this._store.setItem(F=this._prefix+F,w),Promise.resolve()},Z.prototype.get=function(F){m.Log.debug("WebStorageStateStore.get",F);var w=this._store.getItem(F=this._prefix+F);return Promise.resolve(w)},Z.prototype.remove=function(F){m.Log.debug("WebStorageStateStore.remove",F);var w=this._store.getItem(F=this._prefix+F);return this._store.removeItem(F),Promise.resolve(w)},Z.prototype.getAllKeys=function(){m.Log.debug("WebStorageStateStore.getAllKeys");for(var F=[],w=0;w<this._store.length;w++){var N=this._store.key(w);0===N.indexOf(this._prefix)&&F.push(N.substr(this._prefix.length))}return Promise.resolve(F)},Z}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.JsonService=void 0;var m=x(0),k=x(1);function oe(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}R.JsonService=function(){function Z(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.Global.XMLHttpRequest,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;oe(this,Z),this._contentTypes=b&&Array.isArray(b)?b.slice():[],this._contentTypes.push("application/json"),w&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=F,this._jwtHandler=w}return Z.prototype.getJson=function(F,w){var N=this;if(!F)throw m.Log.error("JsonService.getJson: No url passed"),new Error("url");return m.Log.debug("JsonService.getJson, url: ",F),new Promise(function(j,L){var Q=new N._XMLHttpRequest;Q.open("GET",F);var J=N._contentTypes,W=N._jwtHandler;Q.onload=function(){if(m.Log.debug("JsonService.getJson: HTTP response received, status",Q.status),200===Q.status){var G=Q.getResponseHeader("Content-Type");if(G){var Y=J.find(function(we){if(G.startsWith(we))return!0});if("application/jwt"==Y)return void W(Q).then(j,L);if(Y)try{return void j(JSON.parse(Q.responseText))}catch(we){return m.Log.error("JsonService.getJson: Error parsing JSON response",we.message),void L(we)}}L(Error("Invalid response Content-Type: "+G+", from URL: "+F))}else L(Error(Q.statusText+" ("+Q.status+")"))},Q.onerror=function(){m.Log.error("JsonService.getJson: network error"),L(Error("Network Error"))},w&&(m.Log.debug("JsonService.getJson: token passed, setting Authorization header"),Q.setRequestHeader("Authorization","Bearer "+w)),Q.send()})},Z.prototype.postForm=function(F,w,N){var j=this;if(!F)throw m.Log.error("JsonService.postForm: No url passed"),new Error("url");return m.Log.debug("JsonService.postForm, url: ",F),new Promise(function(L,Q){var J=new j._XMLHttpRequest;J.open("POST",F);var W=j._contentTypes;J.onload=function(){if(m.Log.debug("JsonService.postForm: HTTP response received, status",J.status),200!==J.status){if(400===J.status&&(le=J.getResponseHeader("Content-Type"))&&W.find(function(re){if(le.startsWith(re))return!0}))try{var fe=JSON.parse(J.responseText);if(fe&&fe.error)return m.Log.error("JsonService.postForm: Error from server: ",fe.error),void Q(new Error(fe.error))}catch(re){return m.Log.error("JsonService.postForm: Error parsing JSON response",re.message),void Q(re)}Q(Error(J.statusText+" ("+J.status+")"))}else{var le;if((le=J.getResponseHeader("Content-Type"))&&W.find(function(re){if(le.startsWith(re))return!0}))try{return void L(JSON.parse(J.responseText))}catch(re){return m.Log.error("JsonService.postForm: Error parsing JSON response",re.message),void Q(re)}Q(Error("Invalid response Content-Type: "+le+", from URL: "+F))}},J.onerror=function(){m.Log.error("JsonService.postForm: network error"),Q(Error("Network Error"))};var G="";for(var Y in w){var we=w[Y];we&&(G.length>0&&(G+="&"),G+=encodeURIComponent(Y),G+="=",G+=encodeURIComponent(we))}J.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==N&&J.setRequestHeader("Authorization","Basic "+btoa(N)),J.send(G)})},Z}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SigninRequest=void 0;var m=x(0),k=x(3),oe=x(13);R.SigninRequest=function(){function Z(b){var F=b.url,w=b.client_id,N=b.redirect_uri,j=b.response_type,L=b.scope,Q=b.authority,J=b.data,W=b.prompt,G=b.display,Y=b.max_age,we=b.ui_locales,fe=b.id_token_hint,le=b.login_hint,re=b.acr_values,Pe=b.resource,Oe=b.response_mode,Ve=b.request,ye=b.request_uri,ze=b.extraQueryParams,He=b.request_type,Xe=b.client_secret,Et=b.extraTokenParams,at=b.skipUserInfo;if(function(Ut,Tn){if(!(Ut instanceof Tn))throw new TypeError("Cannot call a class as a function")}(this,Z),!F)throw m.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!w)throw m.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!N)throw m.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!j)throw m.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!L)throw m.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!Q)throw m.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var tt=Z.isOidc(j),ot=Z.isCode(j);Oe||(Oe=Z.isCode(j)?"query":null),this.state=new oe.SigninState({nonce:tt,data:J,client_id:w,authority:Q,redirect_uri:N,code_verifier:ot,request_type:He,response_mode:Oe,client_secret:Xe,scope:L,extraTokenParams:Et,skipUserInfo:at}),F=k.UrlUtility.addQueryParam(F,"client_id",w),F=k.UrlUtility.addQueryParam(F,"redirect_uri",N),F=k.UrlUtility.addQueryParam(F,"response_type",j),F=k.UrlUtility.addQueryParam(F,"scope",L),F=k.UrlUtility.addQueryParam(F,"state",this.state.id),tt&&(F=k.UrlUtility.addQueryParam(F,"nonce",this.state.nonce)),ot&&(F=k.UrlUtility.addQueryParam(F,"code_challenge",this.state.code_challenge),F=k.UrlUtility.addQueryParam(F,"code_challenge_method","S256"));var Re={prompt:W,display:G,max_age:Y,ui_locales:we,id_token_hint:fe,login_hint:le,acr_values:re,resource:Pe,request:Ve,request_uri:ye,response_mode:Oe};for(var ht in Re)Re[ht]&&(F=k.UrlUtility.addQueryParam(F,ht,Re[ht]));for(var At in ze)F=k.UrlUtility.addQueryParam(F,At,ze[At]);this.url=F}return Z.isOidc=function(F){return!!F.split(/\s+/g).filter(function(w){return"id_token"===w})[0]},Z.isOAuth=function(F){return!!F.split(/\s+/g).filter(function(w){return"token"===w})[0]},Z.isCode=function(F){return!!F.split(/\s+/g).filter(function(w){return"code"===w})[0]},Z}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.State=void 0;var F,m=function(){function b(F,w){for(var N=0;N<w.length;N++){var j=w[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,w,N){return w&&b(F.prototype,w),N&&b(F,N),F}}(),k=x(0),oe=(F=x(14))&&F.__esModule?F:{default:F};function Z(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}R.State=function(){function b(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=F.id,N=F.data,j=F.created,L=F.request_type;Z(this,b),this._id=w||(0,oe.default)(),this._data=N,this._created="number"==typeof j&&j>0?j:parseInt(Date.now()/1e3),this._request_type=L}return b.prototype.toStorageString=function(){return k.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},b.fromStorageString=function(w){return k.Log.debug("State.fromStorageString"),new b(JSON.parse(w))},b.clearStaleState=function(w,N){var j=Date.now()/1e3-N;return w.getAllKeys().then(function(L){k.Log.debug("State.clearStaleState: got keys",L);for(var Q=[],J=function(we){var fe=L[we];G=w.get(fe).then(function(le){var re=!1;if(le)try{var Pe=b.fromStorageString(le);k.Log.debug("State.clearStaleState: got item from key: ",fe,Pe.created),Pe.created<=j&&(re=!0)}catch(Oe){k.Log.error("State.clearStaleState: Error parsing state for key",fe,Oe.message),re=!0}else k.Log.debug("State.clearStaleState: no item in storage for key: ",fe),re=!0;if(re)return k.Log.debug("State.clearStaleState: removed item for key: ",fe),w.remove(fe)}),Q.push(G)},W=0;W<L.length;W++){var G;J(W)}return k.Log.debug("State.clearStaleState: waiting on promise count:",Q.length),Promise.all(Q)})},m(b,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),b}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.OidcClient=void 0;var m=function(){function J(W,G){for(var Y=0;Y<G.length;Y++){var we=G[Y];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(W,we.key,we)}}return function(W,G,Y){return G&&J(W.prototype,G),Y&&J(W,Y),W}}(),k=x(0),oe=x(5),Z=x(12),b=x(8),F=x(34),w=x(35),N=x(36),j=x(13),L=x(9);function Q(J,W){if(!(J instanceof W))throw new TypeError("Cannot call a class as a function")}R.OidcClient=function(){function J(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q(this,J),this._settings=W instanceof oe.OidcClientSettings?W:new oe.OidcClientSettings(W)}return J.prototype.createSigninRequest=function(){var G=this,Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},we=Y.response_type,fe=Y.scope,le=Y.redirect_uri,re=Y.data,Pe=Y.state,Oe=Y.prompt,Ve=Y.display,ye=Y.max_age,ze=Y.ui_locales,He=Y.id_token_hint,Xe=Y.login_hint,Et=Y.acr_values,at=Y.resource,tt=Y.request,ot=Y.request_uri,Re=Y.response_mode,ht=Y.extraQueryParams,At=Y.extraTokenParams,En=Y.request_type,Ut=Y.skipUserInfo,Tn=arguments[1];k.Log.debug("OidcClient.createSigninRequest");var Sn=this._settings.client_id;fe=fe||this._settings.scope,le=le||this._settings.redirect_uri,Oe=Oe||this._settings.prompt,Ve=Ve||this._settings.display,ye=ye||this._settings.max_age,ze=ze||this._settings.ui_locales,Et=Et||this._settings.acr_values,at=at||this._settings.resource,Re=Re||this._settings.response_mode,ht=ht||this._settings.extraQueryParams,At=At||this._settings.extraTokenParams;var Jn=this._settings.authority;return b.SigninRequest.isCode(we=we||this._settings.response_type)&&"code"!==we?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(zn){k.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",zn);var en=new b.SigninRequest({url:zn,client_id:Sn,redirect_uri:le,response_type:we,scope:fe,data:re||Pe,authority:Jn,prompt:Oe,display:Ve,max_age:ye,ui_locales:ze,id_token_hint:He,login_hint:Xe,acr_values:Et,resource:at,request:tt,request_uri:ot,extraQueryParams:ht,extraTokenParams:At,request_type:En,response_mode:Re,client_secret:G._settings.client_secret,skipUserInfo:Ut}),mn=en.state;return(Tn=Tn||G._stateStore).set(mn.id,mn.toStorageString()).then(function(){return en})})},J.prototype.readSigninResponseState=function(G,Y){var we=arguments.length>2&&void 0!==arguments[2]&&arguments[2];k.Log.debug("OidcClient.readSigninResponseState");var fe="query"===this._settings.response_mode||!this._settings.response_mode&&b.SigninRequest.isCode(this._settings.response_type),re=new F.SigninResponse(G,fe?"?":"#");return re.state?(Y=Y||this._stateStore,(we?Y.remove.bind(Y):Y.get.bind(Y))(re.state).then(function(Oe){if(!Oe)throw k.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:j.SigninState.fromStorageString(Oe),response:re}})):(k.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},J.prototype.processSigninResponse=function(G,Y){var we=this;return k.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(G,Y,!0).then(function(fe){var le=fe.state,re=fe.response;return k.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),we._validator.validateSigninResponse(le,re)})},J.prototype.createSignoutRequest=function(){var G=this,Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},we=Y.id_token_hint,fe=Y.data,le=Y.state,re=Y.post_logout_redirect_uri,Pe=Y.extraQueryParams,Oe=Y.request_type,Ve=arguments[1];return k.Log.debug("OidcClient.createSignoutRequest"),re=re||this._settings.post_logout_redirect_uri,Pe=Pe||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ye){if(!ye)throw k.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");k.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ye);var ze=new w.SignoutRequest({url:ye,id_token_hint:we,post_logout_redirect_uri:re,data:fe||le,extraQueryParams:Pe,request_type:Oe}),He=ze.state;return He&&(k.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(Ve=Ve||G._stateStore).set(He.id,He.toStorageString())),ze})},J.prototype.readSignoutResponseState=function(G,Y){var we=arguments.length>2&&void 0!==arguments[2]&&arguments[2];k.Log.debug("OidcClient.readSignoutResponseState");var fe=new N.SignoutResponse(G);if(!fe.state)return k.Log.debug("OidcClient.readSignoutResponseState: No state in response"),fe.error?(k.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",fe.error),Promise.reject(new Z.ErrorResponse(fe))):Promise.resolve({state:void 0,response:fe});var le=fe.state;return Y=Y||this._stateStore,(we?Y.remove.bind(Y):Y.get.bind(Y))(le).then(function(Pe){if(!Pe)throw k.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:L.State.fromStorageString(Pe),response:fe}})},J.prototype.processSignoutResponse=function(G,Y){var we=this;return k.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(G,Y,!0).then(function(fe){var le=fe.state,re=fe.response;return le?(k.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),we._validator.validateSignoutResponse(le,re)):(k.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),re)})},J.prototype.clearStaleState=function(G){return k.Log.debug("OidcClient.clearStaleState"),L.State.clearStaleState(G=G||this._stateStore,this.settings.staleStateAge)},m(J,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),J}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.TokenClient=void 0;var m=x(7),k=x(2),oe=x(0);function Z(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}R.TokenClient=function(){function b(F){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.JsonService,N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.MetadataService;if(Z(this,b),!F)throw oe.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=F,this._jsonService=new w,this._metadataService=new N(this._settings)}return b.prototype.exchangeCode=function(){var w=this,N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).grant_type=N.grant_type||"authorization_code",N.client_id=N.client_id||this._settings.client_id,N.client_secret=N.client_secret||this._settings.client_secret,N.redirect_uri=N.redirect_uri||this._settings.redirect_uri;var j=void 0,L=N._client_authentication||this._settings._client_authentication;return delete N._client_authentication,N.code?N.redirect_uri?N.code_verifier?N.client_id?N.client_secret||"client_secret_basic"!=L?("client_secret_basic"==L&&(j=N.client_id+":"+N.client_secret,delete N.client_id,delete N.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(Q){return oe.Log.debug("TokenClient.exchangeCode: Received token endpoint"),w._jsonService.postForm(Q,N,j).then(function(J){return oe.Log.debug("TokenClient.exchangeCode: response received"),J})})):(oe.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(oe.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(oe.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(oe.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(oe.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},b.prototype.exchangeRefreshToken=function(){var w=this,N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).grant_type=N.grant_type||"refresh_token",N.client_id=N.client_id||this._settings.client_id,N.client_secret=N.client_secret||this._settings.client_secret;var j=void 0,L=N._client_authentication||this._settings._client_authentication;return delete N._client_authentication,N.refresh_token?N.client_id?("client_secret_basic"==L&&(j=N.client_id+":"+N.client_secret,delete N.client_id,delete N.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(Q){return oe.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),w._jsonService.postForm(Q,N,j).then(function(J){return oe.Log.debug("TokenClient.exchangeRefreshToken: response received"),J})})):(oe.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(oe.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},b}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ErrorResponse=void 0;var m=x(0);function k(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}function oe(Z,b){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?Z:b}R.ErrorResponse=function(Z){function b(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=F.error,N=F.error_description,j=F.error_uri,L=F.state,Q=F.session_state;if(k(this,b),!w)throw m.Log.error("No error passed to ErrorResponse"),new Error("error");var J=oe(this,Z.call(this,N||w));return J.name="ErrorResponse",J.error=w,J.error_description=N,J.error_uri=j,J.state=L,J.session_state=Q,J}return function(w,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}(b,Z),b}(Error)},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SigninState=void 0;var j,m=function(){function N(j,L){for(var Q=0;Q<L.length;Q++){var J=L[Q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(j,J.key,J)}}return function(j,L,Q){return L&&N(j.prototype,L),Q&&N(j,Q),j}}(),k=x(0),oe=x(9),Z=x(4),b=(j=x(14))&&j.__esModule?j:{default:j};function F(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function w(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?N:j}R.SigninState=function(N){function j(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Q=L.nonce,J=L.authority,W=L.client_id,G=L.redirect_uri,Y=L.code_verifier,we=L.response_mode,fe=L.client_secret,le=L.scope,re=L.extraTokenParams,Pe=L.skipUserInfo;F(this,j);var Oe=w(this,N.call(this,arguments[0]));if(!0===Q?Oe._nonce=(0,b.default)():Q&&(Oe._nonce=Q),!0===Y?Oe._code_verifier=(0,b.default)()+(0,b.default)()+(0,b.default)():Y&&(Oe._code_verifier=Y),Oe.code_verifier){var Ve=Z.JoseUtil.hashString(Oe.code_verifier,"SHA256");Oe._code_challenge=Z.JoseUtil.hexToBase64Url(Ve)}return Oe._redirect_uri=G,Oe._authority=J,Oe._client_id=W,Oe._response_mode=we,Oe._client_secret=fe,Oe._scope=le,Oe._extraTokenParams=re,Oe._skipUserInfo=Pe,Oe}return function(Q,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function, not "+typeof J);Q.prototype=Object.create(J&&J.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,J):Q.__proto__=J)}(j,N),j.prototype.toStorageString=function(){return k.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},j.fromStorageString=function(Q){return k.Log.debug("SigninState.fromStorageString"),new j(JSON.parse(Q))},m(j,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),j}(oe.State)},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){return("undefined"!=m&&null!==m&&void 0!==m.getRandomValues?k:oe)().replace(/-/g,"")};var m="undefined"!=typeof window?window.crypto||window.msCrypto:null;function k(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(Z){return(Z^m.getRandomValues(new Uint8Array(1))[0]&15>>Z/4).toString(16)})}function oe(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(Z){return(Z^16*Math.random()>>Z/4).toString(16)})}Ae.exports=R.default},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.User=void 0;var m=function(){function oe(Z,b){for(var F=0;F<b.length;F++){var w=b[F];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(Z,w.key,w)}}return function(Z,b,F){return b&&oe(Z.prototype,b),F&&oe(Z,F),Z}}(),k=x(0);R.User=function(){function oe(Z){var b=Z.id_token,F=Z.session_state,w=Z.access_token,N=Z.refresh_token,j=Z.token_type,L=Z.scope,Q=Z.profile,J=Z.expires_at,W=Z.state;(function(Y,we){if(!(Y instanceof we))throw new TypeError("Cannot call a class as a function")})(this,oe),this.id_token=b,this.session_state=F,this.access_token=w,this.refresh_token=N,this.token_type=j,this.scope=L,this.profile=Q,this.expires_at=J,this.state=W}return oe.prototype.toStorageString=function(){return k.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},oe.fromStorageString=function(b){return k.Log.debug("User.fromStorageString"),new oe(JSON.parse(b))},m(oe,[{key:"expires_in",get:function(){if(this.expires_at){var b=parseInt(Date.now()/1e3);return this.expires_at-b}},set:function(b){var F=parseInt(b);if("number"==typeof F&&F>0){var w=parseInt(Date.now()/1e3);this.expires_at=w+F}}},{key:"expired",get:function(){var b=this.expires_in;if(void 0!==b)return b<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AccessTokenEvents=void 0;var m=x(0),k=x(46);function oe(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}R.AccessTokenEvents=function(){function Z(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},F=b.accessTokenExpiringNotificationTime,w=void 0===F?60:F,N=b.accessTokenExpiringTimer,j=void 0===N?new k.Timer("Access token expiring"):N,L=b.accessTokenExpiredTimer,Q=void 0===L?new k.Timer("Access token expired"):L;oe(this,Z),this._accessTokenExpiringNotificationTime=w,this._accessTokenExpiring=j,this._accessTokenExpired=Q}return Z.prototype.load=function(F){if(F.access_token&&void 0!==F.expires_in){var w=F.expires_in;if(m.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",w),w>0){var N=w-this._accessTokenExpiringNotificationTime;N<=0&&(N=1),m.Log.debug("AccessTokenEvents.load: registering expiring timer in:",N),this._accessTokenExpiring.init(N)}else m.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var j=w+1;m.Log.debug("AccessTokenEvents.load: registering expired timer in:",j),this._accessTokenExpired.init(j)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},Z.prototype.unload=function(){m.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},Z.prototype.addAccessTokenExpiring=function(F){this._accessTokenExpiring.addHandler(F)},Z.prototype.removeAccessTokenExpiring=function(F){this._accessTokenExpiring.removeHandler(F)},Z.prototype.addAccessTokenExpired=function(F){this._accessTokenExpired.addHandler(F)},Z.prototype.removeAccessTokenExpired=function(F){this._accessTokenExpired.removeHandler(F)},Z}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Event=void 0;var m=x(0);R.Event=function(){function k(oe){(function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")})(this,k),this._name=oe,this._callbacks=[]}return k.prototype.addHandler=function(Z){this._callbacks.push(Z)},k.prototype.removeHandler=function(Z){var b=this._callbacks.findIndex(function(F){return F===Z});b>=0&&this._callbacks.splice(b,1)},k.prototype.raise=function(){m.Log.debug("Event: Raising event: "+this._name);for(var Z=0;Z<this._callbacks.length;Z++){var b;(b=this._callbacks)[Z].apply(b,arguments)}},k}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SessionMonitor=void 0;var m=function(){function F(w,N){for(var j=0;j<N.length;j++){var L=N[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}return function(w,N,j){return N&&F(w.prototype,N),j&&F(w,j),w}}(),k=x(0),oe=x(19),Z=x(1);function b(F,w){if(!(F instanceof w))throw new TypeError("Cannot call a class as a function")}R.SessionMonitor=function(){function F(w){var N=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.CheckSessionIFrame,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Global.timer;if(b(this,F),!w)throw k.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=w,this._CheckSessionIFrameCtor=j,this._timer=L,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(Q){Q?N._start(Q):N._settings.monitorAnonymousSession&&N._userManager.querySessionStatus().then(function(J){var W={session_state:J.session_state};J.sub&&J.sid&&(W.profile={sub:J.sub,sid:J.sid}),N._start(W)}).catch(function(J){k.Log.error("SessionMonitor ctor: error from querySessionStatus:",J.message)})}).catch(function(Q){k.Log.error("SessionMonitor ctor: error from getUser:",Q.message)}))}return F.prototype._start=function(N){var j=this,L=N.session_state;L&&(N.profile?(this._sub=N.profile.sub,this._sid=N.profile.sid,k.Log.debug("SessionMonitor._start: session_state:",L,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,k.Log.debug("SessionMonitor._start: session_state:",L,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(L):this._metadataService.getCheckSessionIframe().then(function(Q){if(Q){k.Log.debug("SessionMonitor._start: Initializing check session iframe");var J=j._client_id,W=j._checkSessionInterval,G=j._stopCheckSessionOnError;j._checkSessionIFrame=new j._CheckSessionIFrameCtor(j._callback.bind(j),J,Q,W,G),j._checkSessionIFrame.load().then(function(){j._checkSessionIFrame.start(L)})}else k.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(Q){k.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",Q.message)}))},F.prototype._stop=function(){var N=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(k.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var j=this._timer.setInterval(function(){N._timer.clearInterval(j),N._userManager.querySessionStatus().then(function(L){var Q={session_state:L.session_state};L.sub&&L.sid&&(Q.profile={sub:L.sub,sid:L.sid}),N._start(Q)}).catch(function(L){k.Log.error("SessionMonitor: error from querySessionStatus:",L.message)})},1e3)},F.prototype._callback=function(){var N=this;this._userManager.querySessionStatus().then(function(j){var L=!0;j?j.sub===N._sub?(L=!1,N._checkSessionIFrame.start(j.session_state),j.sid===N._sid?k.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",j.session_state):(k.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",j.session_state),N._userManager.events._raiseUserSessionChanged())):k.Log.debug("SessionMonitor._callback: Different subject signed into OP:",j.sub):k.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),L&&(N._sub?(k.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),N._userManager.events._raiseUserSignedOut()):(k.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),N._userManager.events._raiseUserSignedIn()))}).catch(function(j){N._sub&&(k.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",j.message),N._userManager.events._raiseUserSignedOut())})},m(F,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),F}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CheckSessionIFrame=void 0;var m=x(0);function k(oe,Z){if(!(oe instanceof Z))throw new TypeError("Cannot call a class as a function")}R.CheckSessionIFrame=function(){function oe(Z,b,F,w){var N=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];k(this,oe),this._callback=Z,this._client_id=b,this._url=F,this._interval=w||2e3,this._stopOnError=N;var j=F.indexOf("/",F.indexOf("//")+2);this._frame_origin=F.substr(0,j),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=F}return oe.prototype.load=function(){var b=this;return new Promise(function(F){b._frame.onload=function(){F()},window.document.body.appendChild(b._frame),b._boundMessageEvent=b._message.bind(b),window.addEventListener("message",b._boundMessageEvent,!1)})},oe.prototype._message=function(b){b.origin===this._frame_origin&&b.source===this._frame.contentWindow&&("error"===b.data?(m.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===b.data?(m.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):m.Log.debug("CheckSessionIFrame: "+b.data+" message from check session op iframe"))},oe.prototype.start=function(b){var F=this;if(this._session_state!==b){m.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=b;var w=function(){F._frame.contentWindow.postMessage(F._client_id+" "+F._session_state,F._frame_origin)};w(),this._timer=window.setInterval(w,this._interval)}},oe.prototype.stop=function(){this._session_state=null,this._timer&&(m.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.TokenRevocationClient=void 0;var m=x(0),k=x(2),oe=x(1);function Z(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}var b="access_token",F="refresh_token";R.TokenRevocationClient=function(){function w(N){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.Global.XMLHttpRequest,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.MetadataService;if(Z(this,w),!N)throw m.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=N,this._XMLHttpRequestCtor=j,this._metadataService=new L(this._settings)}return w.prototype.revoke=function(j,L){var Q=this,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!j)throw m.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(J!==b&&J!=F)throw m.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(W){if(W)return m.Log.debug("TokenRevocationClient.revoke: Revoking "+J),Q._revoke(W,Q._settings.client_id,Q._settings.client_secret,j,J);if(L)throw m.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},w.prototype._revoke=function(j,L,Q,J,W){var G=this;return new Promise(function(Y,we){var fe=new G._XMLHttpRequestCtor;fe.open("POST",j),fe.onload=function(){m.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",fe.status),200===fe.status?Y():we(Error(fe.statusText+" ("+fe.status+")"))},fe.onerror=function(){m.Log.debug("TokenRevocationClient.revoke: Network Error."),we("Network Error")};var le="client_id="+encodeURIComponent(L);Q&&(le+="&client_secret="+encodeURIComponent(Q)),le+="&token_type_hint="+encodeURIComponent(W),le+="&token="+encodeURIComponent(J),fe.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),fe.send(le)})},w}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CordovaPopupWindow=void 0;var m=function(){function oe(Z,b){for(var F=0;F<b.length;F++){var w=b[F];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(Z,w.key,w)}}return function(Z,b,F){return b&&oe(Z.prototype,b),F&&oe(Z,F),Z}}(),k=x(0);R.CordovaPopupWindow=function(){function oe(Z){var b=this;(function(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")})(this,oe),this._promise=new Promise(function(F,w){b._resolve=F,b._reject=w}),this.features=Z.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=Z.popupWindowTarget||"_blank",this.redirect_uri=Z.startUrl,k.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return oe.prototype._isInAppBrowserInstalled=function(b){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(F){return b.hasOwnProperty(F)})},oe.prototype.navigate=function(b){if(b&&b.url){if(!window.cordova)return this._error("cordova is undefined");var F=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(F))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(b.url,this.target,this.features),this._popup?(k.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},oe.prototype._loadStartCallback=function(b){0===b.url.indexOf(this.redirect_uri)&&this._success({url:b.url})},oe.prototype._exitCallback=function(b){this._error(b)},oe.prototype._success=function(b){this._cleanup(),k.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(b)},oe.prototype._error=function(b){this._cleanup(),k.Log.error(b),this._reject(new Error(b))},oe.prototype.close=function(){this._cleanup()},oe.prototype._cleanup=function(){this._popup&&(k.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},m(oe,[{key:"promise",get:function(){return this._promise}}]),oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var m=x(0),k=x(10),oe=x(5),Z=x(6),b=x(37),F=x(38),w=x(16),N=x(2),j=x(48),L=x(49),Q=x(19),J=x(20),W=x(18),G=x(1),Y=x(15),we=x(50);R.default={Version:we.Version,Log:m.Log,OidcClient:k.OidcClient,OidcClientSettings:oe.OidcClientSettings,WebStorageStateStore:Z.WebStorageStateStore,InMemoryWebStorage:b.InMemoryWebStorage,UserManager:F.UserManager,AccessTokenEvents:w.AccessTokenEvents,MetadataService:N.MetadataService,CordovaPopupNavigator:j.CordovaPopupNavigator,CordovaIFrameNavigator:L.CordovaIFrameNavigator,CheckSessionIFrame:Q.CheckSessionIFrame,TokenRevocationClient:J.TokenRevocationClient,SessionMonitor:W.SessionMonitor,Global:G.Global,User:Y.User},Ae.exports=R.default},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ClockService=function(){function m(){!function(oe,Z){if(!(oe instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,m)}return m.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},m}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ResponseValidator=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},k=x(0),oe=x(2),Z=x(25),b=x(11),F=x(12),w=x(4);function N(L,Q){if(!(L instanceof Q))throw new TypeError("Cannot call a class as a function")}var j=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];R.ResponseValidator=function(){function L(Q){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.MetadataService,W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.UserInfoService,G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.JoseUtil,Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b.TokenClient;if(N(this,L),!Q)throw k.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=Q,this._metadataService=new J(this._settings),this._userInfoService=new W(this._settings),this._joseUtil=G,this._tokenClient=new Y(this._settings)}return L.prototype.validateSigninResponse=function(J,W){var G=this;return k.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(J,W).then(function(Y){return k.Log.debug("ResponseValidator.validateSigninResponse: state processed"),G._validateTokens(J,Y).then(function(we){return k.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),G._processClaims(J,we).then(function(fe){return k.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),fe})})})},L.prototype.validateSignoutResponse=function(J,W){return J.id!==W.state?(k.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(k.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),W.state=J.data,W.error?(k.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",W.error),Promise.reject(new F.ErrorResponse(W))):Promise.resolve(W))},L.prototype._processSigninParams=function(J,W){if(J.id!==W.state)return k.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!J.client_id)return k.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!J.authority)return k.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==J.authority)return k.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=J.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==J.client_id)return k.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=J.client_id;return k.Log.debug("ResponseValidator._processSigninParams: state validated"),W.state=J.data,W.error?(k.Log.warn("ResponseValidator._processSigninParams: Response was error",W.error),Promise.reject(new F.ErrorResponse(W))):J.nonce&&!W.id_token?(k.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!J.nonce&&W.id_token?(k.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):J.code_verifier&&!W.code?(k.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!J.code_verifier&&W.code?(k.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(W.scope||(W.scope=J.scope),Promise.resolve(W))},L.prototype._processClaims=function(J,W){var G=this;if(W.isOpenIdConnect){if(k.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),W.profile=this._filterProtocolClaims(W.profile),!0!==J.skipUserInfo&&this._settings.loadUserInfo&&W.access_token)return k.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(W.access_token).then(function(Y){return k.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),Y.sub!==W.profile.sub?(k.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(W.profile=G._mergeClaims(W.profile,Y),k.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",W.profile),W)});k.Log.debug("ResponseValidator._processClaims: not loading user info")}else k.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(W)},L.prototype._mergeClaims=function(J,W){var G=Object.assign({},J);for(var Y in W){var we=W[Y];Array.isArray(we)||(we=[we]);for(var fe=0;fe<we.length;fe++){var le=we[fe];G[Y]?Array.isArray(G[Y])?G[Y].indexOf(le)<0&&G[Y].push(le):G[Y]!==le&&(G[Y]="object"===(void 0===le?"undefined":m(le))&&this._settings.mergeClaims?this._mergeClaims(G[Y],le):[G[Y],le]):G[Y]=le}}return G},L.prototype._filterProtocolClaims=function(J){k.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",J);var W=Object.assign({},J);return this._settings._filterProtocolClaims?(j.forEach(function(G){delete W[G]}),k.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",W)):k.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),W},L.prototype._validateTokens=function(J,W){return W.code?(k.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(J,W)):W.id_token?W.access_token?(k.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(J,W)):(k.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(J,W)):(k.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(W))},L.prototype._processCode=function(J,W){var G=this,Y={client_id:J.client_id,client_secret:J.client_secret,code:W.code,redirect_uri:J.redirect_uri,code_verifier:J.code_verifier};return J.extraTokenParams&&"object"===m(J.extraTokenParams)&&Object.assign(Y,J.extraTokenParams),this._tokenClient.exchangeCode(Y).then(function(we){for(var fe in we)W[fe]=we[fe];return W.id_token?(k.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),G._validateIdTokenAttributes(J,W)):(k.Log.debug("ResponseValidator._processCode: token response successful, returning response"),W)})},L.prototype._validateIdTokenAttributes=function(J,W){var G=this;return this._metadataService.getIssuer().then(function(Y){var we=J.client_id,fe=G._settings.clockSkew;return k.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",fe),G._settings.getEpochTime().then(function(le){return G._joseUtil.validateJwtAttributes(W.id_token,Y,we,fe,le).then(function(re){return J.nonce&&J.nonce!==re.nonce?(k.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):re.sub?(W.profile=re,W):(k.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},L.prototype._validateIdTokenAndAccessToken=function(J,W){var G=this;return this._validateIdToken(J,W).then(function(Y){return G._validateAccessToken(Y)})},L.prototype._getSigningKeyForJwt=function(J){var W=this;return this._metadataService.getSigningKeys().then(function(G){var Y=J.header.kid;if(!G)return k.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));k.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var we=void 0;if(Y)we=G.filter(function(fe){return fe.kid===Y})[0];else{if((G=W._filterByAlg(G,J.header.alg)).length>1)return k.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));we=G[0]}return Promise.resolve(we)})},L.prototype._getSigningKeyForJwtWithSingleRetry=function(J){var W=this;return this._getSigningKeyForJwt(J).then(function(G){return G?Promise.resolve(G):(W._metadataService.resetSigningKeys(),W._getSigningKeyForJwt(J))})},L.prototype._validateIdToken=function(J,W){var G=this;if(!J.nonce)return k.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var Y=this._joseUtil.parseJwt(W.id_token);return Y&&Y.header&&Y.payload?J.nonce!==Y.payload.nonce?(k.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(we){return k.Log.debug("ResponseValidator._validateIdToken: Received issuer"),G._getSigningKeyForJwtWithSingleRetry(Y).then(function(fe){if(!fe)return k.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var le=J.client_id,re=G._settings.clockSkew;return k.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",re),G._joseUtil.validateJwt(W.id_token,fe,we,le,re).then(function(){return k.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),Y.payload.sub?(W.profile=Y.payload,W):(k.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(k.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",Y),Promise.reject(new Error("Failed to parse id_token")))},L.prototype._filterByAlg=function(J,W){var G=null;if(W.startsWith("RS"))G="RSA";else if(W.startsWith("PS"))G="PS";else{if(!W.startsWith("ES"))return k.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",W),[];G="EC"}return k.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",G),J=J.filter(function(Y){return Y.kty===G}),k.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",G,J.length),J},L.prototype._validateAccessToken=function(J){if(!J.profile)return k.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!J.profile.at_hash)return k.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!J.id_token)return k.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var W=this._joseUtil.parseJwt(J.id_token);if(!W||!W.header)return k.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",W),Promise.reject(new Error("Failed to parse id_token"));var G=W.header.alg;if(!G||5!==G.length)return k.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",G),Promise.reject(new Error("Unsupported alg: "+G));var Y=G.substr(2,3);if(!Y)return k.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",G,Y),Promise.reject(new Error("Unsupported alg: "+G));if(256!==(Y=parseInt(Y))&&384!==Y&&512!==Y)return k.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",G,Y),Promise.reject(new Error("Unsupported alg: "+G));var we="sha"+Y,fe=this._joseUtil.hashString(J.access_token,we);if(!fe)return k.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",we),Promise.reject(new Error("Failed to validate at_hash"));var le=fe.substr(0,fe.length/2),re=this._joseUtil.hexToBase64Url(le);return re!==J.profile.at_hash?(k.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",re,J.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(k.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(J))},L}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.UserInfoService=void 0;var m=x(7),k=x(2),oe=x(0),Z=x(4);function b(F,w){if(!(F instanceof w))throw new TypeError("Cannot call a class as a function")}R.UserInfoService=function(){function F(w){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.JsonService,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.MetadataService,L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.JoseUtil;if(b(this,F),!w)throw oe.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=w,this._jsonService=new N(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new j(this._settings),this._joseUtil=L}return F.prototype.getClaims=function(N){var j=this;return N?this._metadataService.getUserInfoEndpoint().then(function(L){return oe.Log.debug("UserInfoService.getClaims: received userinfo url",L),j._jsonService.getJson(L,N).then(function(Q){return oe.Log.debug("UserInfoService.getClaims: claims received",Q),Q})}):(oe.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},F.prototype._getClaimsFromJwt=function(N){var j=this;try{var L=this._joseUtil.parseJwt(N.responseText);if(!L||!L.header||!L.payload)return oe.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",L),Promise.reject(new Error("Failed to parse id_token"));var Q=L.header.kid,J=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":J=this._metadataService.getIssuer();break;case"ANY":J=Promise.resolve(L.payload.iss);break;default:J=Promise.resolve(this._settings.userInfoJwtIssuer)}return J.then(function(W){return oe.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+W),j._metadataService.getSigningKeys().then(function(G){if(!G)return oe.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));oe.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var Y=void 0;if(Q)Y=G.filter(function(le){return le.kid===Q})[0];else{if((G=j._filterByAlg(G,L.header.alg)).length>1)return oe.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));Y=G[0]}if(!Y)return oe.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var we=j._settings.client_id,fe=j._settings.clockSkew;return oe.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",fe),j._joseUtil.validateJwt(N.responseText,Y,W,we,fe,void 0,!0).then(function(){return oe.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),L.payload})})})}catch(W){return oe.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",W.message),void reject(W)}},F.prototype._filterByAlg=function(N,j){var L=null;if(j.startsWith("RS"))L="RSA";else if(j.startsWith("PS"))L="PS";else{if(!j.startsWith("ES"))return oe.Log.debug("UserInfoService._filterByAlg: alg not supported: ",j),[];L="EC"}return oe.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",L),N=N.filter(function(Q){return Q.kty===L}),oe.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",L,N.length),N},F}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AllowedSigningAlgs=R.b64tohex=R.hextob64u=R.crypto=R.X509=R.KeyUtil=R.jws=void 0;var m=x(27);R.jws=m.jws,R.KeyUtil=m.KEYUTIL,R.X509=m.X509,R.crypto=m.crypto,R.hextob64u=m.hextob64u,R.b64tohex=m.b64tohex,R.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(Ae,R,x){"use strict";(function(m){Object.defineProperty(R,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},oe={userAgent:!1},Z={};if(void 0===b)var b={};b.lang={extend:function(s,c,h){if(!c||!s)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var y=function(){};if(y.prototype=c.prototype,s.prototype=new y,s.prototype.constructor=s,s.superclass=c.prototype,c.prototype.constructor==Object.prototype.constructor&&(c.prototype.constructor=c),h){var T;for(T in h)s.prototype[T]=h[T];var B=function(){},ie=["toString","valueOf"];try{/MSIE/.test(oe.userAgent)&&(B=function(te,ae){for(T=0;T<ie.length;T+=1){var ue=ie[T],ce=ae[ue];"function"==typeof ce&&ce!=Object.prototype[ue]&&(te[ue]=ce)}})}catch(q){}B(s.prototype,h)}}};var F,w,N,j,L,Q,J,W,G,Y,we,s,c,h,y,fe=fe||(F=Math,N=(w={}).lib={},j=N.Base=function(){function a(){}return{extend:function(c){a.prototype=this;var h=new a;return c&&h.mixIn(c),h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var h in c)c.hasOwnProperty(h)&&(this[h]=c[h]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),L=N.WordArray=j.extend({init:function(s,c){s=this.words=s||[],this.sigBytes=null!=c?c:4*s.length},toString:function(s){return(s||J).stringify(this)},concat:function(s){var c=this.words,h=s.words,y=this.sigBytes,T=s.sigBytes;if(this.clamp(),y%4)for(var B=0;B<T;B++)c[y+B>>>2]|=(h[B>>>2]>>>24-B%4*8&255)<<24-(y+B)%4*8;else for(B=0;B<T;B+=4)c[y+B>>>2]=h[B>>>2];return this.sigBytes+=T,this},clamp:function(){var s=this.words,c=this.sigBytes;s[c>>>2]&=4294967295<<32-c%4*8,s.length=F.ceil(c/4)},clone:function(){var s=j.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var c=[],h=0;h<s;h+=4)c.push(4294967296*F.random()|0);return new L.init(c,s)}}),Q=w.enc={},J=Q.Hex={stringify:function(s){for(var c=s.words,h=s.sigBytes,y=[],T=0;T<h;T++){var B=c[T>>>2]>>>24-T%4*8&255;y.push((B>>>4).toString(16)),y.push((15&B).toString(16))}return y.join("")},parse:function(s){for(var c=s.length,h=[],y=0;y<c;y+=2)h[y>>>3]|=parseInt(s.substr(y,2),16)<<24-y%8*4;return new L.init(h,c/2)}},W=Q.Latin1={stringify:function(s){for(var c=s.words,h=s.sigBytes,y=[],T=0;T<h;T++)y.push(String.fromCharCode(c[T>>>2]>>>24-T%4*8&255));return y.join("")},parse:function(s){for(var c=s.length,h=[],y=0;y<c;y++)h[y>>>2]|=(255&s.charCodeAt(y))<<24-y%4*8;return new L.init(h,c)}},G=Q.Utf8={stringify:function(s){try{return decodeURIComponent(escape(W.stringify(s)))}catch(c){throw new Error("Malformed UTF-8 data")}},parse:function(s){return W.parse(unescape(encodeURIComponent(s)))}},Y=N.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new L.init,this._nDataBytes=0},_append:function(s){"string"==typeof s&&(s=G.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var c=this._data,h=c.words,y=c.sigBytes,T=this.blockSize,B=y/(4*T),ie=(B=s?F.ceil(B):F.max((0|B)-this._minBufferSize,0))*T,q=F.min(4*ie,y);if(ie){for(var te=0;te<ie;te+=T)this._doProcessBlock(h,te);var ae=h.splice(0,ie);c.sigBytes-=q}return new L.init(ae,q)},clone:function(){var s=j.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0}),N.Hasher=Y.extend({cfg:j.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){Y.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){return s&&this._append(s),this._doFinalize()},blockSize:16,_createHelper:function(s){return function(c,h){return new s.init(h).finalize(c)}},_createHmacHelper:function(s){return function(c,h){return new we.HMAC.init(s,h).finalize(c)}}}),we=w.algo={},w);c=(s=fe).lib,h=c.Base,y=c.WordArray,(s=s.x64={}).Word=h.extend({init:function(B,ie){this.high=B,this.low=ie}}),s.WordArray=h.extend({init:function(B,ie){B=this.words=B||[],this.sigBytes=null!=ie?ie:8*B.length},toX32:function(){for(var B=this.words,ie=B.length,q=[],te=0;te<ie;te++){var ae=B[te];q.push(ae.high),q.push(ae.low)}return y.create(q,this.sigBytes)},clone:function(){for(var B=h.clone.call(this),ie=B.words=this.words.slice(0),q=ie.length,te=0;te<q;te++)ie[te]=ie[te].clone();return B}}),function(){var s=fe.lib.WordArray;fe.enc.Base64={stringify:function(h){var y=h.words,T=h.sigBytes,B=this._map;h.clamp(),h=[];for(var ie=0;ie<T;ie+=3)for(var q=(y[ie>>>2]>>>24-ie%4*8&255)<<16|(y[ie+1>>>2]>>>24-(ie+1)%4*8&255)<<8|y[ie+2>>>2]>>>24-(ie+2)%4*8&255,te=0;4>te&&ie+.75*te<T;te++)h.push(B.charAt(q>>>6*(3-te)&63));if(y=B.charAt(64))for(;h.length%4;)h.push(y);return h.join("")},parse:function(h){var y=h.length,T=this._map;(B=T.charAt(64))&&-1!=(B=h.indexOf(B))&&(y=B);for(var B=[],ie=0,q=0;q<y;q++)if(q%4){var te=T.indexOf(h.charAt(q-1))<<q%4*2,ae=T.indexOf(h.charAt(q))>>>6-q%4*2;B[ie>>>2]|=(te|ae)<<24-ie%4*8,ie++}return s.create(B,ie)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){for(var s=fe,c=(y=s.lib).WordArray,h=y.Hasher,y=s.algo,T=[],B=[],ie=function(H){return 4294967296*(H-(0|H))|0},q=2,te=0;64>te;){var ae;e:{for(var ue=a.sqrt(ae=q),ce=2;ce<=ue;ce++)if(!(ae%ce)){ae=!1;break e}ae=!0}ae&&(8>te&&(T[te]=ie(a.pow(q,.5))),B[te]=ie(a.pow(q,1/3)),te++),q++}var pe=[];y=y.SHA256=h.extend({_doReset:function(){this._hash=new c.init(T.slice(0))},_doProcessBlock:function(H,M){for(var E=this._hash.words,U=E[0],ne=E[1],se=E[2],be=E[3],Fe=E[4],$e=E[5],Ne=E[6],_t=E[7],qe=0;64>qe;qe++){if(16>qe)pe[qe]=0|H[M+qe];else{var Qe=pe[qe-15],Ct=pe[qe-2];pe[qe]=((Qe<<25|Qe>>>7)^(Qe<<14|Qe>>>18)^Qe>>>3)+pe[qe-7]+((Ct<<15|Ct>>>17)^(Ct<<13|Ct>>>19)^Ct>>>10)+pe[qe-16]}Qe=_t+((Fe<<26|Fe>>>6)^(Fe<<21|Fe>>>11)^(Fe<<7|Fe>>>25))+(Fe&$e^~Fe&Ne)+B[qe]+pe[qe],Ct=((U<<30|U>>>2)^(U<<19|U>>>13)^(U<<10|U>>>22))+(U&ne^U&se^ne&se),_t=Ne,Ne=$e,$e=Fe,Fe=be+Qe|0,be=se,se=ne,ne=U,U=Qe+Ct|0}E[0]=E[0]+U|0,E[1]=E[1]+ne|0,E[2]=E[2]+se|0,E[3]=E[3]+be|0,E[4]=E[4]+Fe|0,E[5]=E[5]+$e|0,E[6]=E[6]+Ne|0,E[7]=E[7]+_t|0},_doFinalize:function(){var H=this._data,M=H.words,E=8*this._nDataBytes,U=8*H.sigBytes;return M[U>>>5]|=128<<24-U%32,M[14+(U+64>>>9<<4)]=a.floor(E/4294967296),M[15+(U+64>>>9<<4)]=E,H.sigBytes=4*M.length,this._process(),this._hash},clone:function(){var H=h.clone.call(this);return H._hash=this._hash.clone(),H}}),s.SHA256=h._createHelper(y),s.HmacSHA256=h._createHmacHelper(y)}(Math),function(){function a(){return h.create.apply(h,arguments)}for(var s=fe,c=s.lib.Hasher,h=(T=s.x64).Word,y=T.WordArray,T=s.algo,B=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],ie=[],q=0;80>q;q++)ie[q]=a();T=T.SHA512=c.extend({_doReset:function(){this._hash=new y.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(ae,ue){for(var ce=(ne=this._hash.words)[0],pe=ne[1],O=ne[2],H=ne[3],M=ne[4],E=ne[5],U=ne[6],ne=ne[7],se=ce.high,be=ce.low,Fe=pe.high,$e=pe.low,Ne=O.high,_t=O.low,qe=H.high,Qe=H.low,Ct=M.high,zt=M.low,Gt=E.high,jn=E.low,xn=U.high,Un=U.low,rn=ne.high,un=ne.low,_n=se,tn=be,gr=Fe,Hr=$e,ti=Ne,ni=_t,or=qe,Rr=Qe,sr=Ct,Bn=zt,vi=Gt,mr=jn,Pr=xn,$r=Un,_i=rn,Li=un,hn=0;80>hn;hn++){var Dr=ie[hn];if(16>hn)var ar=Dr.high=0|ae[ue+2*hn],Yt=Dr.low=0|ae[ue+2*hn+1];else{ar=((Yt=(ar=ie[hn-15]).high)>>>1|(yr=ar.low)<<31)^(Yt>>>8|yr<<24)^Yt>>>7;var yr=(yr>>>1|Yt<<31)^(yr>>>8|Yt<<24)^(yr>>>7|Yt<<25),vr=((Yt=(vr=ie[hn-2]).high)>>>19|(qt=vr.low)<<13)^(Yt<<3|qt>>>29)^Yt>>>6,qt=(qt>>>19|Yt<<13)^(qt<<3|Yt>>>29)^(qt>>>6|Yt<<26),Kr=(Yt=ie[hn-7]).high,Mr=(ur=ie[hn-16]).high,ur=ur.low;ar=(ar=(ar=ar+Kr+((Yt=yr+Yt.low)>>>0<yr>>>0?1:0))+vr+((Yt+=qt)>>>0<qt>>>0?1:0))+Mr+((Yt+=ur)>>>0<ur>>>0?1:0),Dr.high=ar,Dr.low=Yt}Kr=sr&vi^~sr&Pr,ur=Bn&mr^~Bn&$r,Dr=_n&gr^_n&ti^gr&ti;var C=tn&Hr^tn&ni^Hr&ni,V=(yr=(_n>>>28|tn<<4)^(_n<<30|tn>>>2)^(_n<<25|tn>>>7),vr=(tn>>>28|_n<<4)^(tn<<30|_n>>>2)^(tn<<25|_n>>>7),(qt=B[hn]).high),S=qt.low;Mr=_i+((sr>>>14|Bn<<18)^(sr>>>18|Bn<<14)^(sr<<23|Bn>>>9))+((qt=Li+((Bn>>>14|sr<<18)^(Bn>>>18|sr<<14)^(Bn<<23|sr>>>9)))>>>0<Li>>>0?1:0),_i=Pr,Li=$r,Pr=vi,$r=mr,vi=sr,mr=Bn,sr=or+(Mr=(Mr=(Mr=Mr+Kr+((qt+=ur)>>>0<ur>>>0?1:0))+V+((qt+=S)>>>0<S>>>0?1:0))+ar+((qt+=Yt)>>>0<Yt>>>0?1:0))+((Bn=Rr+qt|0)>>>0<Rr>>>0?1:0)|0,or=ti,Rr=ni,ti=gr,ni=Hr,gr=_n,Hr=tn,_n=Mr+(Dr=yr+Dr+((Yt=vr+C)>>>0<vr>>>0?1:0))+((tn=qt+Yt|0)>>>0<qt>>>0?1:0)|0}be=ce.low=be+tn,ce.high=se+_n+(be>>>0<tn>>>0?1:0),$e=pe.low=$e+Hr,pe.high=Fe+gr+($e>>>0<Hr>>>0?1:0),_t=O.low=_t+ni,O.high=Ne+ti+(_t>>>0<ni>>>0?1:0),Qe=H.low=Qe+Rr,H.high=qe+or+(Qe>>>0<Rr>>>0?1:0),zt=M.low=zt+Bn,M.high=Ct+sr+(zt>>>0<Bn>>>0?1:0),jn=E.low=jn+mr,E.high=Gt+vi+(jn>>>0<mr>>>0?1:0),Un=U.low=Un+$r,U.high=xn+Pr+(Un>>>0<$r>>>0?1:0),un=ne.low=un+Li,ne.high=rn+_i+(un>>>0<Li>>>0?1:0)},_doFinalize:function(){var ae=this._data,ue=ae.words,ce=8*this._nDataBytes,pe=8*ae.sigBytes;return ue[pe>>>5]|=128<<24-pe%32,ue[30+(pe+128>>>10<<5)]=Math.floor(ce/4294967296),ue[31+(pe+128>>>10<<5)]=ce,ae.sigBytes=4*ue.length,this._process(),this._hash.toX32()},clone:function(){var ae=c.clone.call(this);return ae._hash=this._hash.clone(),ae},blockSize:32}),s.SHA512=c._createHelper(T),s.HmacSHA512=c._createHmacHelper(T)}(),function(){var a=fe,s=(y=a.x64).Word,c=y.WordArray,h=(y=a.algo).SHA512,y=y.SHA384=h.extend({_doReset:function(){this._hash=new c.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var B=h._doFinalize.call(this);return B.sigBytes-=16,B}});a.SHA384=h._createHelper(y),a.HmacSHA384=h._createHmacHelper(y)}();var le,re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Pe(a){var s,c,h="";for(s=0;s+3<=a.length;s+=3)c=parseInt(a.substring(s,s+3),16),h+=re.charAt(c>>6)+re.charAt(63&c);for(s+1==a.length?(c=parseInt(a.substring(s,s+1),16),h+=re.charAt(c<<2)):s+2==a.length&&(c=parseInt(a.substring(s,s+2),16),h+=re.charAt(c>>2)+re.charAt((3&c)<<4));(3&h.length)>0;)h+="=";return h}function Oe(a){var s,c,h,y="",T=0;for(s=0;s<a.length&&"="!=a.charAt(s);++s)(h=re.indexOf(a.charAt(s)))<0||(0==T?(y+=at(h>>2),c=3&h,T=1):1==T?(y+=at(c<<2|h>>4),c=15&h,T=2):2==T?(y+=at(c),y+=at(h>>2),c=3&h,T=3):(y+=at(c<<2|h>>4),y+=at(15&h),T=0));return 1==T&&(y+=at(c<<2)),y}function Ve(a){var s,c=Oe(a),h=new Array;for(s=0;2*s<c.length;++s)h[s]=parseInt(c.substring(2*s,2*s+2),16);return h}function ye(a,s,c){null!=a&&("number"==typeof a?this.fromNumber(a,s,c):this.fromString(a,null==s&&"string"!=typeof a?256:s))}function ze(){return new ye(null)}"Microsoft Internet Explorer"==oe.appName?(ye.prototype.am=function(s,c,h,y,T,B){for(var ie=32767&c,q=c>>15;--B>=0;){var te=32767&this[s],ae=this[s++]>>15,ue=q*te+ae*ie;T=((te=ie*te+((32767&ue)<<15)+h[y]+(1073741823&T))>>>30)+(ue>>>15)+q*ae+(T>>>30),h[y++]=1073741823&te}return T},le=30):"Netscape"!=oe.appName?(ye.prototype.am=function(s,c,h,y,T,B){for(;--B>=0;){var ie=c*this[s++]+h[y]+T;T=Math.floor(ie/67108864),h[y++]=67108863&ie}return T},le=26):(ye.prototype.am=function(s,c,h,y,T,B){for(var ie=16383&c,q=c>>14;--B>=0;){var te=16383&this[s],ae=this[s++]>>14,ue=q*te+ae*ie;T=((te=ie*te+((16383&ue)<<14)+h[y]+T)>>28)+(ue>>14)+q*ae,h[y++]=268435455&te}return T},le=28),ye.prototype.DB=le,ye.prototype.DM=(1<<le)-1,ye.prototype.DV=1<<le,ye.prototype.FV=Math.pow(2,52),ye.prototype.F1=52-le,ye.prototype.F2=2*le-52;var He,Xe,Et=new Array;for(He="0".charCodeAt(0),Xe=0;Xe<=9;++Xe)Et[He++]=Xe;for(He="a".charCodeAt(0),Xe=10;Xe<36;++Xe)Et[He++]=Xe;for(He="A".charCodeAt(0),Xe=10;Xe<36;++Xe)Et[He++]=Xe;function at(a){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(a)}function tt(a,s){var c=Et[a.charCodeAt(s)];return null==c?-1:c}function ot(a){var s=ze();return s.fromInt(a),s}function Re(a){var s,c=1;return 0!=(s=a>>>16)&&(a=s,c+=16),0!=(s=a>>8)&&(a=s,c+=8),0!=(s=a>>4)&&(a=s,c+=4),0!=(s=a>>2)&&(a=s,c+=2),0!=(s=a>>1)&&(a=s,c+=1),c}function ht(a){this.m=a}function At(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function En(a,s){return a&s}function Ut(a,s){return a|s}function Tn(a,s){return a^s}function Sn(a,s){return a&~s}function Jn(a){if(0==a)return-1;var s=0;return 0==(65535&a)&&(a>>=16,s+=16),0==(255&a)&&(a>>=8,s+=8),0==(15&a)&&(a>>=4,s+=4),0==(3&a)&&(a>>=2,s+=2),0==(1&a)&&++s,s}function zn(a){for(var s=0;0!=a;)a&=a-1,++s;return s}function en(){}function mn(a){return a}function Wt(a){this.r2=ze(),this.q3=ze(),ye.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}ht.prototype.convert=function(s){return s.s<0||s.compareTo(this.m)>=0?s.mod(this.m):s},ht.prototype.revert=function(s){return s},ht.prototype.reduce=function(s){s.divRemTo(this.m,null,s)},ht.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h),this.reduce(h)},ht.prototype.sqrTo=function(s,c){s.squareTo(c),this.reduce(c)},At.prototype.convert=function(s){var c=ze();return s.abs().dlShiftTo(this.m.t,c),c.divRemTo(this.m,null,c),s.s<0&&c.compareTo(ye.ZERO)>0&&this.m.subTo(c,c),c},At.prototype.revert=function(s){var c=ze();return s.copyTo(c),this.reduce(c),c},At.prototype.reduce=function(s){for(;s.t<=this.mt2;)s[s.t++]=0;for(var c=0;c<this.m.t;++c){var h=32767&s[c],y=h*this.mpl+((h*this.mph+(s[c]>>15)*this.mpl&this.um)<<15)&s.DM;for(s[h=c+this.m.t]+=this.m.am(0,y,s,c,0,this.m.t);s[h]>=s.DV;)s[h]-=s.DV,s[++h]++}s.clamp(),s.drShiftTo(this.m.t,s),s.compareTo(this.m)>=0&&s.subTo(this.m,s)},At.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h),this.reduce(h)},At.prototype.sqrTo=function(s,c){s.squareTo(c),this.reduce(c)},ye.prototype.copyTo=function(s){for(var c=this.t-1;c>=0;--c)s[c]=this[c];s.t=this.t,s.s=this.s},ye.prototype.fromInt=function(s){this.t=1,this.s=s<0?-1:0,s>0?this[0]=s:s<-1?this[0]=s+this.DV:this.t=0},ye.prototype.fromString=function(s,c){var h;if(16==c)h=4;else if(8==c)h=3;else if(256==c)h=8;else if(2==c)h=1;else if(32==c)h=5;else{if(4!=c)return void this.fromRadix(s,c);h=2}this.t=0,this.s=0;for(var y=s.length,T=!1,B=0;--y>=0;){var ie=8==h?255&s[y]:tt(s,y);ie<0?"-"==s.charAt(y)&&(T=!0):(T=!1,0==B?this[this.t++]=ie:B+h>this.DB?(this[this.t-1]|=(ie&(1<<this.DB-B)-1)<<B,this[this.t++]=ie>>this.DB-B):this[this.t-1]|=ie<<B,(B+=h)>=this.DB&&(B-=this.DB))}8==h&&0!=(128&s[0])&&(this.s=-1,B>0&&(this[this.t-1]|=(1<<this.DB-B)-1<<B)),this.clamp(),T&&ye.ZERO.subTo(this,this)},ye.prototype.clamp=function(){for(var s=this.s&this.DM;this.t>0&&this[this.t-1]==s;)--this.t},ye.prototype.dlShiftTo=function(s,c){var h;for(h=this.t-1;h>=0;--h)c[h+s]=this[h];for(h=s-1;h>=0;--h)c[h]=0;c.t=this.t+s,c.s=this.s},ye.prototype.drShiftTo=function(s,c){for(var h=s;h<this.t;++h)c[h-s]=this[h];c.t=Math.max(this.t-s,0),c.s=this.s},ye.prototype.lShiftTo=function(s,c){var h,y=s%this.DB,T=this.DB-y,B=(1<<T)-1,ie=Math.floor(s/this.DB),q=this.s<<y&this.DM;for(h=this.t-1;h>=0;--h)c[h+ie+1]=this[h]>>T|q,q=(this[h]&B)<<y;for(h=ie-1;h>=0;--h)c[h]=0;c[ie]=q,c.t=this.t+ie+1,c.s=this.s,c.clamp()},ye.prototype.rShiftTo=function(s,c){c.s=this.s;var h=Math.floor(s/this.DB);if(h>=this.t)c.t=0;else{var y=s%this.DB,T=this.DB-y,B=(1<<y)-1;c[0]=this[h]>>y;for(var ie=h+1;ie<this.t;++ie)c[ie-h-1]|=(this[ie]&B)<<T,c[ie-h]=this[ie]>>y;y>0&&(c[this.t-h-1]|=(this.s&B)<<T),c.t=this.t-h,c.clamp()}},ye.prototype.subTo=function(s,c){for(var h=0,y=0,T=Math.min(s.t,this.t);h<T;)y+=this[h]-s[h],c[h++]=y&this.DM,y>>=this.DB;if(s.t<this.t){for(y-=s.s;h<this.t;)y+=this[h],c[h++]=y&this.DM,y>>=this.DB;y+=this.s}else{for(y+=this.s;h<s.t;)y-=s[h],c[h++]=y&this.DM,y>>=this.DB;y-=s.s}c.s=y<0?-1:0,y<-1?c[h++]=this.DV+y:y>0&&(c[h++]=y),c.t=h,c.clamp()},ye.prototype.multiplyTo=function(s,c){var h=this.abs(),y=s.abs(),T=h.t;for(c.t=T+y.t;--T>=0;)c[T]=0;for(T=0;T<y.t;++T)c[T+h.t]=h.am(0,y[T],c,T,0,h.t);c.s=0,c.clamp(),this.s!=s.s&&ye.ZERO.subTo(c,c)},ye.prototype.squareTo=function(s){for(var c=this.abs(),h=s.t=2*c.t;--h>=0;)s[h]=0;for(h=0;h<c.t-1;++h){var y=c.am(h,c[h],s,2*h,0,1);(s[h+c.t]+=c.am(h+1,2*c[h],s,2*h+1,y,c.t-h-1))>=c.DV&&(s[h+c.t]-=c.DV,s[h+c.t+1]=1)}s.t>0&&(s[s.t-1]+=c.am(h,c[h],s,2*h,0,1)),s.s=0,s.clamp()},ye.prototype.divRemTo=function(s,c,h){var y=s.abs();if(!(y.t<=0)){var T=this.abs();if(T.t<y.t)return null!=c&&c.fromInt(0),void(null!=h&&this.copyTo(h));null==h&&(h=ze());var B=ze(),ie=this.s,q=s.s,te=this.DB-Re(y[y.t-1]);te>0?(y.lShiftTo(te,B),T.lShiftTo(te,h)):(y.copyTo(B),T.copyTo(h));var ae=B.t,ue=B[ae-1];if(0!=ue){var ce=ue*(1<<this.F1)+(ae>1?B[ae-2]>>this.F2:0),pe=this.FV/ce,O=(1<<this.F1)/ce,H=1<<this.F2,M=h.t,E=M-ae,U=null==c?ze():c;for(B.dlShiftTo(E,U),h.compareTo(U)>=0&&(h[h.t++]=1,h.subTo(U,h)),ye.ONE.dlShiftTo(ae,U),U.subTo(B,B);B.t<ae;)B[B.t++]=0;for(;--E>=0;){var ne=h[--M]==ue?this.DM:Math.floor(h[M]*pe+(h[M-1]+H)*O);if((h[M]+=B.am(0,ne,h,E,0,ae))<ne)for(B.dlShiftTo(E,U),h.subTo(U,h);h[M]<--ne;)h.subTo(U,h)}null!=c&&(h.drShiftTo(ae,c),ie!=q&&ye.ZERO.subTo(c,c)),h.t=ae,h.clamp(),te>0&&h.rShiftTo(te,h),ie<0&&ye.ZERO.subTo(h,h)}}},ye.prototype.invDigit=function(){if(this.t<1)return 0;var s=this[0];if(0==(1&s))return 0;var c=3&s;return(c=(c=(c=(c=c*(2-(15&s)*c)&15)*(2-(255&s)*c)&255)*(2-((65535&s)*c&65535))&65535)*(2-s*c%this.DV)%this.DV)>0?this.DV-c:-c},ye.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ye.prototype.exp=function(s,c){if(s>4294967295||s<1)return ye.ONE;var h=ze(),y=ze(),T=c.convert(this),B=Re(s)-1;for(T.copyTo(h);--B>=0;)if(c.sqrTo(h,y),(s&1<<B)>0)c.mulTo(y,T,h);else{var ie=h;h=y,y=ie}return c.revert(h)},ye.prototype.toString=function(s){if(this.s<0)return"-"+this.negate().toString(s);var c;if(16==s)c=4;else if(8==s)c=3;else if(2==s)c=1;else if(32==s)c=5;else{if(4!=s)return this.toRadix(s);c=2}var h,y=(1<<c)-1,T=!1,B="",ie=this.t,q=this.DB-ie*this.DB%c;if(ie-- >0)for(q<this.DB&&(h=this[ie]>>q)>0&&(T=!0,B=at(h));ie>=0;)q<c?(h=(this[ie]&(1<<q)-1)<<c-q,h|=this[--ie]>>(q+=this.DB-c)):(h=this[ie]>>(q-=c)&y,q<=0&&(q+=this.DB,--ie)),h>0&&(T=!0),T&&(B+=at(h));return T?B:"0"},ye.prototype.negate=function(){var s=ze();return ye.ZERO.subTo(this,s),s},ye.prototype.abs=function(){return this.s<0?this.negate():this},ye.prototype.compareTo=function(s){var c=this.s-s.s;if(0!=c)return c;var h=this.t;if(0!=(c=h-s.t))return this.s<0?-c:c;for(;--h>=0;)if(0!=(c=this[h]-s[h]))return c;return 0},ye.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Re(this[this.t-1]^this.s&this.DM)},ye.prototype.mod=function(s){var c=ze();return this.abs().divRemTo(s,null,c),this.s<0&&c.compareTo(ye.ZERO)>0&&s.subTo(c,c),c},ye.prototype.modPowInt=function(s,c){var h;return h=s<256||c.isEven()?new ht(c):new At(c),this.exp(s,h)},ye.ZERO=ot(0),ye.ONE=ot(1),en.prototype.convert=mn,en.prototype.revert=mn,en.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h)},en.prototype.sqrTo=function(s,c){s.squareTo(c)},Wt.prototype.convert=function(s){if(s.s<0||s.t>2*this.m.t)return s.mod(this.m);if(s.compareTo(this.m)<0)return s;var c=ze();return s.copyTo(c),this.reduce(c),c},Wt.prototype.revert=function(s){return s},Wt.prototype.reduce=function(s){for(s.drShiftTo(this.m.t-1,this.r2),s.t>this.m.t+1&&(s.t=this.m.t+1,s.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);s.compareTo(this.r2)<0;)s.dAddOffset(1,this.m.t+1);for(s.subTo(this.r2,s);s.compareTo(this.m)>=0;)s.subTo(this.m,s)},Wt.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h),this.reduce(h)},Wt.prototype.sqrTo=function(s,c){s.squareTo(c),this.reduce(c)};var ge,_e,Se,he=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],P=(1<<26)/he[he.length-1];function A(){this.i=0,this.j=0,this.S=new Array}function xe(){!function(s){_e[Se++]^=255&s,_e[Se++]^=s>>8&255,_e[Se++]^=s>>16&255,_e[Se++]^=s>>24&255,Se>=256&&(Se-=256)}((new Date).getTime())}if(ye.prototype.chunkSize=function(s){return Math.floor(Math.LN2*this.DB/Math.log(s))},ye.prototype.toRadix=function(s){if(null==s&&(s=10),0==this.signum()||s<2||s>36)return"0";var c=this.chunkSize(s),h=Math.pow(s,c),y=ot(h),T=ze(),B=ze(),ie="";for(this.divRemTo(y,T,B);T.signum()>0;)ie=(h+B.intValue()).toString(s).substr(1)+ie,T.divRemTo(y,T,B);return B.intValue().toString(s)+ie},ye.prototype.fromRadix=function(s,c){this.fromInt(0),null==c&&(c=10);for(var h=this.chunkSize(c),y=Math.pow(c,h),T=!1,B=0,ie=0,q=0;q<s.length;++q){var te=tt(s,q);te<0?"-"==s.charAt(q)&&0==this.signum()&&(T=!0):(ie=c*ie+te,++B>=h&&(this.dMultiply(y),this.dAddOffset(ie,0),B=0,ie=0))}B>0&&(this.dMultiply(Math.pow(c,B)),this.dAddOffset(ie,0)),T&&ye.ZERO.subTo(this,this)},ye.prototype.fromNumber=function(s,c,h){if("number"==typeof c)if(s<2)this.fromInt(1);else for(this.fromNumber(s,h),this.testBit(s-1)||this.bitwiseTo(ye.ONE.shiftLeft(s-1),Ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>s&&this.subTo(ye.ONE.shiftLeft(s-1),this);else{var y=new Array,T=7&s;y.length=1+(s>>3),c.nextBytes(y),T>0?y[0]&=(1<<T)-1:y[0]=0,this.fromString(y,256)}},ye.prototype.bitwiseTo=function(s,c,h){var y,T,B=Math.min(s.t,this.t);for(y=0;y<B;++y)h[y]=c(this[y],s[y]);if(s.t<this.t){for(T=s.s&this.DM,y=B;y<this.t;++y)h[y]=c(this[y],T);h.t=this.t}else{for(T=this.s&this.DM,y=B;y<s.t;++y)h[y]=c(T,s[y]);h.t=s.t}h.s=c(this.s,s.s),h.clamp()},ye.prototype.changeBit=function(s,c){var h=ye.ONE.shiftLeft(s);return this.bitwiseTo(h,c,h),h},ye.prototype.addTo=function(s,c){for(var h=0,y=0,T=Math.min(s.t,this.t);h<T;)y+=this[h]+s[h],c[h++]=y&this.DM,y>>=this.DB;if(s.t<this.t){for(y+=s.s;h<this.t;)y+=this[h],c[h++]=y&this.DM,y>>=this.DB;y+=this.s}else{for(y+=this.s;h<s.t;)y+=s[h],c[h++]=y&this.DM,y>>=this.DB;y+=s.s}c.s=y<0?-1:0,y>0?c[h++]=y:y<-1&&(c[h++]=this.DV+y),c.t=h,c.clamp()},ye.prototype.dMultiply=function(s){this[this.t]=this.am(0,s-1,this,0,0,this.t),++this.t,this.clamp()},ye.prototype.dAddOffset=function(s,c){if(0!=s){for(;this.t<=c;)this[this.t++]=0;for(this[c]+=s;this[c]>=this.DV;)this[c]-=this.DV,++c>=this.t&&(this[this.t++]=0),++this[c]}},ye.prototype.multiplyLowerTo=function(s,c,h){var y,T=Math.min(this.t+s.t,c);for(h.s=0,h.t=T;T>0;)h[--T]=0;for(y=h.t-this.t;T<y;++T)h[T+this.t]=this.am(0,s[T],h,T,0,this.t);for(y=Math.min(s.t,c);T<y;++T)this.am(0,s[T],h,T,0,c-T);h.clamp()},ye.prototype.multiplyUpperTo=function(s,c,h){--c;var y=h.t=this.t+s.t-c;for(h.s=0;--y>=0;)h[y]=0;for(y=Math.max(c-this.t,0);y<s.t;++y)h[this.t+y-c]=this.am(c-y,s[y],h,0,0,this.t+y-c);h.clamp(),h.drShiftTo(1,h)},ye.prototype.modInt=function(s){if(s<=0)return 0;var c=this.DV%s,h=this.s<0?s-1:0;if(this.t>0)if(0==c)h=this[0]%s;else for(var y=this.t-1;y>=0;--y)h=(c*h+this[y])%s;return h},ye.prototype.millerRabin=function(s){var c=this.subtract(ye.ONE),h=c.getLowestSetBit();if(h<=0)return!1;var y=c.shiftRight(h);(s=s+1>>1)>he.length&&(s=he.length);for(var T=ze(),B=0;B<s;++B){T.fromInt(he[Math.floor(Math.random()*he.length)]);var ie=T.modPow(y,this);if(0!=ie.compareTo(ye.ONE)&&0!=ie.compareTo(c)){for(var q=1;q++<h&&0!=ie.compareTo(c);)if(0==(ie=ie.modPowInt(2,this)).compareTo(ye.ONE))return!1;if(0!=ie.compareTo(c))return!1}}return!0},ye.prototype.clone=function(){var s=ze();return this.copyTo(s),s},ye.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ye.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ye.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ye.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ye.prototype.toByteArray=function(){var s=this.t,c=new Array;c[0]=this.s;var h,y=this.DB-s*this.DB%8,T=0;if(s-- >0)for(y<this.DB&&(h=this[s]>>y)!=(this.s&this.DM)>>y&&(c[T++]=h|this.s<<this.DB-y);s>=0;)y<8?(h=(this[s]&(1<<y)-1)<<8-y,h|=this[--s]>>(y+=this.DB-8)):(h=this[s]>>(y-=8)&255,y<=0&&(y+=this.DB,--s)),0!=(128&h)&&(h|=-256),0==T&&(128&this.s)!=(128&h)&&++T,(T>0||h!=this.s)&&(c[T++]=h);return c},ye.prototype.equals=function(s){return 0==this.compareTo(s)},ye.prototype.min=function(s){return this.compareTo(s)<0?this:s},ye.prototype.max=function(s){return this.compareTo(s)>0?this:s},ye.prototype.and=function(s){var c=ze();return this.bitwiseTo(s,En,c),c},ye.prototype.or=function(s){var c=ze();return this.bitwiseTo(s,Ut,c),c},ye.prototype.xor=function(s){var c=ze();return this.bitwiseTo(s,Tn,c),c},ye.prototype.andNot=function(s){var c=ze();return this.bitwiseTo(s,Sn,c),c},ye.prototype.not=function(){for(var s=ze(),c=0;c<this.t;++c)s[c]=this.DM&~this[c];return s.t=this.t,s.s=~this.s,s},ye.prototype.shiftLeft=function(s){var c=ze();return s<0?this.rShiftTo(-s,c):this.lShiftTo(s,c),c},ye.prototype.shiftRight=function(s){var c=ze();return s<0?this.lShiftTo(-s,c):this.rShiftTo(s,c),c},ye.prototype.getLowestSetBit=function(){for(var s=0;s<this.t;++s)if(0!=this[s])return s*this.DB+Jn(this[s]);return this.s<0?this.t*this.DB:-1},ye.prototype.bitCount=function(){for(var s=0,c=this.s&this.DM,h=0;h<this.t;++h)s+=zn(this[h]^c);return s},ye.prototype.testBit=function(s){var c=Math.floor(s/this.DB);return c>=this.t?0!=this.s:0!=(this[c]&1<<s%this.DB)},ye.prototype.setBit=function(s){return this.changeBit(s,Ut)},ye.prototype.clearBit=function(s){return this.changeBit(s,Sn)},ye.prototype.flipBit=function(s){return this.changeBit(s,Tn)},ye.prototype.add=function(s){var c=ze();return this.addTo(s,c),c},ye.prototype.subtract=function(s){var c=ze();return this.subTo(s,c),c},ye.prototype.multiply=function(s){var c=ze();return this.multiplyTo(s,c),c},ye.prototype.divide=function(s){var c=ze();return this.divRemTo(s,c,null),c},ye.prototype.remainder=function(s){var c=ze();return this.divRemTo(s,null,c),c},ye.prototype.divideAndRemainder=function(s){var c=ze(),h=ze();return this.divRemTo(s,c,h),new Array(c,h)},ye.prototype.modPow=function(s,c){var h,y,T=s.bitLength(),B=ot(1);if(T<=0)return B;h=T<18?1:T<48?3:T<144?4:T<768?5:6,y=T<8?new ht(c):c.isEven()?new Wt(c):new At(c);var ie=new Array,q=3,te=h-1,ae=(1<<h)-1;if(ie[1]=y.convert(this),h>1){var ue=ze();for(y.sqrTo(ie[1],ue);q<=ae;)ie[q]=ze(),y.mulTo(ue,ie[q-2],ie[q]),q+=2}var ce,pe,O=s.t-1,H=!0,M=ze();for(T=Re(s[O])-1;O>=0;){for(T>=te?ce=s[O]>>T-te&ae:(ce=(s[O]&(1<<T+1)-1)<<te-T,O>0&&(ce|=s[O-1]>>this.DB+T-te)),q=h;0==(1&ce);)ce>>=1,--q;if((T-=q)<0&&(T+=this.DB,--O),H)ie[ce].copyTo(B),H=!1;else{for(;q>1;)y.sqrTo(B,M),y.sqrTo(M,B),q-=2;q>0?y.sqrTo(B,M):(pe=B,B=M,M=pe),y.mulTo(M,ie[ce],B)}for(;O>=0&&0==(s[O]&1<<T);)y.sqrTo(B,M),pe=B,B=M,M=pe,--T<0&&(T=this.DB-1,--O)}return y.revert(B)},ye.prototype.modInverse=function(s){var c=s.isEven();if(this.isEven()&&c||0==s.signum())return ye.ZERO;for(var h=s.clone(),y=this.clone(),T=ot(1),B=ot(0),ie=ot(0),q=ot(1);0!=h.signum();){for(;h.isEven();)h.rShiftTo(1,h),c?(T.isEven()&&B.isEven()||(T.addTo(this,T),B.subTo(s,B)),T.rShiftTo(1,T)):B.isEven()||B.subTo(s,B),B.rShiftTo(1,B);for(;y.isEven();)y.rShiftTo(1,y),c?(ie.isEven()&&q.isEven()||(ie.addTo(this,ie),q.subTo(s,q)),ie.rShiftTo(1,ie)):q.isEven()||q.subTo(s,q),q.rShiftTo(1,q);h.compareTo(y)>=0?(h.subTo(y,h),c&&T.subTo(ie,T),B.subTo(q,B)):(y.subTo(h,y),c&&ie.subTo(T,ie),q.subTo(B,q))}return 0!=y.compareTo(ye.ONE)?ye.ZERO:q.compareTo(s)>=0?q.subtract(s):q.signum()<0?(q.addTo(s,q),q.signum()<0?q.add(s):q):q},ye.prototype.pow=function(s){return this.exp(s,new en)},ye.prototype.gcd=function(s){var c=this.s<0?this.negate():this.clone(),h=s.s<0?s.negate():s.clone();if(c.compareTo(h)<0){var y=c;c=h,h=y}var T=c.getLowestSetBit(),B=h.getLowestSetBit();if(B<0)return c;for(T<B&&(B=T),B>0&&(c.rShiftTo(B,c),h.rShiftTo(B,h));c.signum()>0;)(T=c.getLowestSetBit())>0&&c.rShiftTo(T,c),(T=h.getLowestSetBit())>0&&h.rShiftTo(T,h),c.compareTo(h)>=0?(c.subTo(h,c),c.rShiftTo(1,c)):(h.subTo(c,h),h.rShiftTo(1,h));return B>0&&h.lShiftTo(B,h),h},ye.prototype.isProbablePrime=function(s){var c,h=this.abs();if(1==h.t&&h[0]<=he[he.length-1]){for(c=0;c<he.length;++c)if(h[0]==he[c])return!0;return!1}if(h.isEven())return!1;for(c=1;c<he.length;){for(var y=he[c],T=c+1;T<he.length&&y<P;)y*=he[T++];for(y=h.modInt(y);c<T;)if(y%he[c++]==0)return!1}return h.millerRabin(s)},ye.prototype.square=function(){var s=ze();return this.squareTo(s),s},A.prototype.init=function(s){var c,h,y;for(c=0;c<256;++c)this.S[c]=c;for(h=0,c=0;c<256;++c)y=this.S[c],this.S[c]=this.S[h=h+this.S[c]+s[c%s.length]&255],this.S[h]=y;this.i=0,this.j=0},A.prototype.next=function(){var s;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,s=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=s,this.S[s+this.S[this.i]&255]},null==_e){var We;if(_e=new Array,Se=0,void 0!==Z&&(void 0!==Z.crypto||void 0!==Z.msCrypto)){var Ge=Z.crypto||Z.msCrypto;if(Ge.getRandomValues){var pt=new Uint8Array(32);for(Ge.getRandomValues(pt),We=0;We<32;++We)_e[Se++]=pt[We]}else if("Netscape"==oe.appName&&oe.appVersion<"5"){var wt=Z.crypto.random(32);for(We=0;We<wt.length;++We)_e[Se++]=255&wt.charCodeAt(We)}}for(;Se<256;)We=Math.floor(65536*Math.random()),_e[Se++]=We>>>8,_e[Se++]=255&We;Se=0,xe()}function Ft(){if(null==ge){for(xe(),(ge=new A).init(_e),Se=0;Se<_e.length;++Se)_e[Se]=0;Se=0}return ge.next()}function nn(){}function yn(a,s){return new ye(a,s)}function Dn(a,s,c){for(var h="",y=0;h.length<s;)h+=c(String.fromCharCode.apply(String,a.concat([(4278190080&y)>>24,(16711680&y)>>16,(65280&y)>>8,255&y]))),y+=1;return h}function Ze(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function $t(a,s){this.x=s,this.q=a}function vt(a,s,c,h){this.curve=a,this.x=s,this.y=c,this.z=null==h?ye.ONE:h,this.zinv=null}function Je(a,s,c){this.q=a,this.a=this.fromBigInteger(s),this.b=this.fromBigInteger(c),this.infinity=new vt(this,null,null)}nn.prototype.nextBytes=function(s){var c;for(c=0;c<s.length;++c)s[c]=Ft()},Ze.prototype.doPublic=function(s){return s.modPowInt(this.e,this.n)},Ze.prototype.setPublic=function(s,c){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof s)this.n=s,this.e=c;else{if(!(null!=s&&null!=c&&s.length>0&&c.length>0))throw"Invalid RSA public key";this.n=yn(s,16),this.e=parseInt(c,16)}},Ze.prototype.encrypt=function(s){var c=function(B,ie){if(ie<B.length+11)throw"Message too long for RSA";for(var q=new Array,te=B.length-1;te>=0&&ie>0;){var ae=B.charCodeAt(te--);ae<128?q[--ie]=ae:ae>127&&ae<2048?(q[--ie]=63&ae|128,q[--ie]=ae>>6|192):(q[--ie]=63&ae|128,q[--ie]=ae>>6&63|128,q[--ie]=ae>>12|224)}q[--ie]=0;for(var ue=new nn,ce=new Array;ie>2;){for(ce[0]=0;0==ce[0];)ue.nextBytes(ce);q[--ie]=ce[0]}return q[--ie]=2,q[--ie]=0,new ye(q)}(s,this.n.bitLength()+7>>3);if(null==c)return null;var h=this.doPublic(c);if(null==h)return null;var y=h.toString(16);return 0==(1&y.length)?y:"0"+y},Ze.prototype.encryptOAEP=function(s,c,h){var y=function(q,te,ae,ue){var ce=K.crypto.MessageDigest,pe=K.crypto.Util,O=null;if(ae||(ae="sha1"),"string"==typeof ae&&(O=ce.getCanonicalAlgName(ae),ue=ce.getHashLength(O),ae=function(Ne){return ln(pe.hashHex(Rn(Ne),O))}),q.length+2*ue+2>te)throw"Message too long for RSA";var H,M="";for(H=0;H<te-q.length-2*ue-2;H+=1)M+="\0";var E=ae("")+M+"\x01"+q,U=new Array(ue);(new nn).nextBytes(U);var ne=Dn(U,E.length,ae),se=[];for(H=0;H<E.length;H+=1)se[H]=E.charCodeAt(H)^ne.charCodeAt(H);var be=Dn(se,U.length,ae),Fe=[0];for(H=0;H<U.length;H+=1)Fe[H+1]=U[H]^be.charCodeAt(H);return new ye(Fe.concat(se))}(s,this.n.bitLength()+7>>3,c,h);if(null==y)return null;var T=this.doPublic(y);if(null==T)return null;var B=T.toString(16);return 0==(1&B.length)?B:"0"+B},Ze.prototype.type="RSA",$t.prototype.equals=function(s){return s==this||this.q.equals(s.q)&&this.x.equals(s.x)},$t.prototype.toBigInteger=function(){return this.x},$t.prototype.negate=function(){return new $t(this.q,this.x.negate().mod(this.q))},$t.prototype.add=function(s){return new $t(this.q,this.x.add(s.toBigInteger()).mod(this.q))},$t.prototype.subtract=function(s){return new $t(this.q,this.x.subtract(s.toBigInteger()).mod(this.q))},$t.prototype.multiply=function(s){return new $t(this.q,this.x.multiply(s.toBigInteger()).mod(this.q))},$t.prototype.square=function(){return new $t(this.q,this.x.square().mod(this.q))},$t.prototype.divide=function(s){return new $t(this.q,this.x.multiply(s.toBigInteger().modInverse(this.q)).mod(this.q))},vt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},vt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},vt.prototype.equals=function(s){return s==this||(this.isInfinity()?s.isInfinity():s.isInfinity()?this.isInfinity():!!s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(ye.ZERO)&&s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(ye.ZERO))},vt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(ye.ZERO)&&!this.y.toBigInteger().equals(ye.ZERO)},vt.prototype.negate=function(){return new vt(this.curve,this.x,this.y.negate(),this.z)},vt.prototype.add=function(s){if(this.isInfinity())return s;if(s.isInfinity())return this;var c=s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q),h=s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q);if(ye.ZERO.equals(h))return ye.ZERO.equals(c)?this.twice():this.curve.getInfinity();var y=new ye("3"),T=this.x.toBigInteger(),B=this.y.toBigInteger(),ie=(s.x.toBigInteger(),s.y.toBigInteger(),h.square()),q=ie.multiply(h),te=T.multiply(ie),ae=c.square().multiply(this.z),ue=ae.subtract(te.shiftLeft(1)).multiply(s.z).subtract(q).multiply(h).mod(this.curve.q),ce=te.multiply(y).multiply(c).subtract(B.multiply(q)).subtract(ae.multiply(c)).multiply(s.z).add(c.multiply(q)).mod(this.curve.q),pe=q.multiply(this.z).multiply(s.z).mod(this.curve.q);return new vt(this.curve,this.curve.fromBigInteger(ue),this.curve.fromBigInteger(ce),pe)},vt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var s=new ye("3"),c=this.x.toBigInteger(),h=this.y.toBigInteger(),y=h.multiply(this.z),T=y.multiply(h).mod(this.curve.q),B=this.curve.a.toBigInteger(),ie=c.square().multiply(s);ye.ZERO.equals(B)||(ie=ie.add(this.z.square().multiply(B)));var q=(ie=ie.mod(this.curve.q)).square().subtract(c.shiftLeft(3).multiply(T)).shiftLeft(1).multiply(y).mod(this.curve.q),te=ie.multiply(s).multiply(c).subtract(T.shiftLeft(1)).shiftLeft(2).multiply(T).subtract(ie.square().multiply(ie)).mod(this.curve.q),ae=y.square().multiply(y).shiftLeft(3).mod(this.curve.q);return new vt(this.curve,this.curve.fromBigInteger(q),this.curve.fromBigInteger(te),ae)},vt.prototype.multiply=function(s){if(this.isInfinity())return this;if(0==s.signum())return this.curve.getInfinity();var c,h=s,y=h.multiply(new ye("3")),T=this.negate(),B=this,ie=this.curve.q.subtract(s),q=ie.multiply(new ye("3")),te=new vt(this.curve,this.x,this.y),ae=te.negate();for(c=y.bitLength()-2;c>0;--c){B=B.twice();var ue=y.testBit(c);ue!=h.testBit(c)&&(B=B.add(ue?this:T))}for(c=q.bitLength()-2;c>0;--c){te=te.twice();var ce=q.testBit(c);ce!=ie.testBit(c)&&(te=te.add(ce?te:ae))}return B},vt.prototype.multiplyTwo=function(s,c,h){var y;y=s.bitLength()>h.bitLength()?s.bitLength()-1:h.bitLength()-1;for(var T=this.curve.getInfinity(),B=this.add(c);y>=0;)T=T.twice(),s.testBit(y)?T=h.testBit(y)?T.add(B):T.add(this):h.testBit(y)&&(T=T.add(c)),--y;return T},Je.prototype.getQ=function(){return this.q},Je.prototype.getA=function(){return this.a},Je.prototype.getB=function(){return this.b},Je.prototype.equals=function(s){return s==this||this.q.equals(s.q)&&this.a.equals(s.a)&&this.b.equals(s.b)},Je.prototype.getInfinity=function(){return this.infinity},Je.prototype.fromBigInteger=function(s){return new $t(this.q,s)},Je.prototype.decodePointHex=function(s){switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var c=(s.length-2)/2,h=s.substr(2,c),y=s.substr(c+2,c);return new vt(this,this.fromBigInteger(new ye(h,16)),this.fromBigInteger(new ye(y,16)));default:return null}},$t.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},vt.prototype.getEncoded=function(a){var s=function(B,ie){var q=B.toByteArrayUnsigned();if(ie<q.length)q=q.slice(q.length-ie);else for(;ie>q.length;)q.unshift(0);return q},c=this.getX().toBigInteger(),h=this.getY().toBigInteger(),y=s(c,32);return a?h.isEven()?y.unshift(2):y.unshift(3):(y.unshift(4),y=y.concat(s(h,32))),y},vt.decodeFrom=function(a,s){var c=s.length-1,h=s.slice(1,1+c/2),y=s.slice(1+c/2,1+c);h.unshift(0),y.unshift(0);var T=new ye(h),B=new ye(y);return new vt(a,a.fromBigInteger(T),a.fromBigInteger(B))},vt.decodeFromHex=function(a,s){s.substr(0,2);var c=s.length-2,h=s.substr(2,c/2),y=s.substr(2+c/2,c/2),T=new ye(h,16),B=new ye(y,16);return new vt(a,a.fromBigInteger(T),a.fromBigInteger(B))},vt.prototype.add2D=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;if(this.x.equals(a.x))return this.y.equals(a.y)?this.twice():this.curve.getInfinity();var s=a.x.subtract(this.x),c=a.y.subtract(this.y).divide(s),h=c.square().subtract(this.x).subtract(a.x),y=c.multiply(this.x.subtract(h)).subtract(this.y);return new vt(this.curve,h,y)},vt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var a=this.curve.fromBigInteger(ye.valueOf(2)),s=this.curve.fromBigInteger(ye.valueOf(3)),c=this.x.square().multiply(s).add(this.curve.a).divide(this.y.multiply(a)),h=c.square().subtract(this.x.multiply(a)),y=c.multiply(this.x.subtract(h)).subtract(this.y);return new vt(this.curve,h,y)},vt.prototype.multiply2D=function(a){if(this.isInfinity())return this;if(0==a.signum())return this.curve.getInfinity();var s,c=a,h=c.multiply(new ye("3")),y=this.negate(),T=this;for(s=h.bitLength()-2;s>0;--s){T=T.twice();var B=h.testBit(s);B!=c.testBit(s)&&(T=T.add2D(B?this:y))}return T},vt.prototype.isOnCurve=function(){var a=this.getX().toBigInteger(),s=this.getY().toBigInteger(),c=this.curve.getA().toBigInteger(),h=this.curve.getB().toBigInteger(),y=this.curve.getQ(),T=s.multiply(s).mod(y),B=a.multiply(a).multiply(a).add(c.multiply(a)).add(h).mod(y);return T.equals(B)},vt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},vt.prototype.validate=function(){var a=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var s=this.getX().toBigInteger(),c=this.getY().toBigInteger();if(s.compareTo(ye.ONE)<0||s.compareTo(a.subtract(ye.ONE))>0)throw new Error("x coordinate out of bounds");if(c.compareTo(ye.ONE)<0||c.compareTo(a.subtract(ye.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(a).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Kt=function(){var a=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),s=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),c={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function h(B,ie,q){return ie?c[ie]:String.fromCharCode(parseInt(q,16))}var y=new String(""),T=Object.hasOwnProperty;return function(B,ie){var q,te,ae=B.match(a),ue=ae[0],ce=!1;"{"===ue?q={}:"["===ue?q=[]:(q=[],ce=!0);for(var pe=[q],O=1-ce,H=ae.length;O<H;++O){var M;switch((ue=ae[O]).charCodeAt(0)){default:(M=pe[0])[te||M.length]=+ue,te=void 0;break;case 34:if(-1!==(ue=ue.substring(1,ue.length-1)).indexOf("\\")&&(ue=ue.replace(s,h)),M=pe[0],!te){if(!(M instanceof Array)){te=ue||y;break}te=M.length}M[te]=ue,te=void 0;break;case 91:pe.unshift((M=pe[0])[te||M.length]=[]),te=void 0;break;case 93:pe.shift();break;case 102:(M=pe[0])[te||M.length]=!1,te=void 0;break;case 110:(M=pe[0])[te||M.length]=null,te=void 0;break;case 116:(M=pe[0])[te||M.length]=!0,te=void 0;break;case 123:pe.unshift((M=pe[0])[te||M.length]={}),te=void 0;break;case 125:pe.shift()}}if(ce){if(1!==pe.length)throw new Error;q=q[0]}else if(pe.length)throw new Error;return ie&&(q=function E(U,ne){var se=U[ne];if(se&&"object"===(void 0===se?"undefined":k(se))){var be=null;for(var Fe in se)if(T.call(se,Fe)&&se!==U){var $e=E(se,Fe);void 0!==$e?se[Fe]=$e:(be||(be=[]),be.push(Fe))}if(be)for(var Ne=be.length;--Ne>=0;)delete se[be[Ne]]}return ie.call(U,ne,se)}({"":q},"")),q}}();void 0!==K&&K||(R.KJUR=K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),K.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){var s=a.toString(16);return s.length%2==1&&(s="0"+s),s},this.bigIntToMinTwosComplementsHex=function(a){var s=a.toString(16);if("-"!=s.substr(0,1))s.length%2==1?s="0"+s:s.match(/^[0-7]/)||(s="00"+s);else{var c=s.substr(1).length;c%2==1?c+=1:s.match(/^[0-7]/)||(c+=2);for(var h="",y=0;y<c;y++)h+="f";s=new ye(h,16).xor(a).add(ye.ONE).toString(16).replace(/^-/,"")}return s},this.getPEMStringFromHex=function(a,s){return dn(a,s)},this.newObject=function(a){var s=K.asn1,c=s.ASN1Object,h=s.DERBoolean,y=s.DERInteger,T=s.DERBitString,B=s.DEROctetString,ie=s.DERNull,q=s.DERObjectIdentifier,te=s.DEREnumerated,ae=s.DERUTF8String,ue=s.DERNumericString,ce=s.DERPrintableString,pe=s.DERTeletexString,O=s.DERIA5String,H=s.DERUTCTime,M=s.DERGeneralizedTime,E=s.DERVisibleString,U=s.DERBMPString,ne=s.DERSequence,se=s.DERSet,be=s.DERTaggedObject,Fe=s.ASN1Util.newObject;if(a instanceof s.ASN1Object)return a;var $e=Object.keys(a);if(1!=$e.length)throw new Error("key of param shall be only one.");var Ne=$e[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Ne+":"))throw new Error("undefined key: "+Ne);if("bool"==Ne)return new h(a[Ne]);if("int"==Ne)return new y(a[Ne]);if("bitstr"==Ne)return new T(a[Ne]);if("octstr"==Ne)return new B(a[Ne]);if("null"==Ne)return new ie(a[Ne]);if("oid"==Ne)return new q(a[Ne]);if("enum"==Ne)return new te(a[Ne]);if("utf8str"==Ne)return new ae(a[Ne]);if("numstr"==Ne)return new ue(a[Ne]);if("prnstr"==Ne)return new ce(a[Ne]);if("telstr"==Ne)return new pe(a[Ne]);if("ia5str"==Ne)return new O(a[Ne]);if("utctime"==Ne)return new H(a[Ne]);if("gentime"==Ne)return new M(a[Ne]);if("visstr"==Ne)return new E(a[Ne]);if("bmpstr"==Ne)return new U(a[Ne]);if("asn1"==Ne)return new c(a[Ne]);if("seq"==Ne){for(var _t=a[Ne],qe=[],Qe=0;Qe<_t.length;Qe++){var Ct=Fe(_t[Qe]);qe.push(Ct)}return new ne({array:qe})}if("set"==Ne){for(_t=a[Ne],qe=[],Qe=0;Qe<_t.length;Qe++)Ct=Fe(_t[Qe]),qe.push(Ct);return new se({array:qe})}if("tag"==Ne){var zt=a[Ne];if("[object Array]"===Object.prototype.toString.call(zt)&&3==zt.length){var Gt=Fe(zt[2]);return new be({tag:zt[0],explicit:zt[1],obj:Gt})}return new be(zt)}},this.jsonToASN1HEX=function(a){return this.newObject(a).getEncodedHex()}},K.asn1.ASN1Util.oidHexToInt=function(a){for(var s="",c=parseInt(a.substr(0,2),16),h=(s=Math.floor(c/40)+"."+c%40,""),y=2;y<a.length;y+=2){var T=("00000000"+parseInt(a.substr(y,2),16).toString(2)).slice(-8);h+=T.substr(1,7),"0"==T.substr(0,1)&&(s=s+"."+new ye(h,2).toString(10),h="")}return s},K.asn1.ASN1Util.oidIntToHex=function(a){var s=function(q){var te=q.toString(16);return 1==te.length&&(te="0"+te),te},c=function(q){var te="",ae=new ye(q,10).toString(2),ue=7-ae.length%7;7==ue&&(ue=0);for(var ce="",pe=0;pe<ue;pe++)ce+="0";for(ae=ce+ae,pe=0;pe<ae.length-1;pe+=7){var O=ae.substr(pe,7);pe!=ae.length-7&&(O="1"+O),te+=s(parseInt(O,2))}return te};if(!a.match(/^[0-9.]+$/))throw"malformed oid string: "+a;var h="",y=a.split("."),T=40*parseInt(y[0])+parseInt(y[1]);h+=s(T),y.splice(0,2);for(var B=0;B<y.length;B++)h+=c(y[B]);return h},K.asn1.ASN1Object=function(a){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var s=this.hV.length/2,c=s.toString(16);if(c.length%2==1&&(c="0"+c),s<128)return c;var h=c.length/2;if(h>15)throw"ASN.1 length too long to represent by 8x: n = "+s.toString(16);return(128+h).toString(16)+c},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(s){this.params=s},null!=a&&null!=a.tlv&&(this.hTLV=a.tlv,this.isModified=!1)},K.asn1.DERAbstractString=function(a){K.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(s){this.hTLV=null,this.isModified=!0,this.s=s,this.hV=nr(this.s).toLowerCase()},this.setStringHex=function(s){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.getFreshValueHex=function(){return this.hV},void 0!==a&&("string"==typeof a?this.setString(a):void 0!==a.str?this.setString(a.str):void 0!==a.hex&&this.setStringHex(a.hex))},b.lang.extend(K.asn1.DERAbstractString,K.asn1.ASN1Object),K.asn1.DERAbstractTime=function(a){K.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(s){var c=s.getTime()+6e4*s.getTimezoneOffset();return new Date(c)},this.formatDate=function(s,c,h){var y=this.zeroPadding,T=this.localDateToUTC(s),B=String(T.getFullYear());"utc"==c&&(B=B.substr(2,2));var ie=B+y(String(T.getMonth()+1),2)+y(String(T.getDate()),2)+y(String(T.getHours()),2)+y(String(T.getMinutes()),2)+y(String(T.getSeconds()),2);if(!0===h){var q=T.getMilliseconds();if(0!=q){var te=y(String(q),3);ie=ie+"."+(te=te.replace(/[0]+$/,""))}}return ie+"Z"},this.zeroPadding=function(s,c){return s.length>=c?s:new Array(c-s.length+1).join("0")+s},this.getString=function(){return this.s},this.setString=function(s){this.hTLV=null,this.isModified=!0,this.s=s,this.hV=tr(s)},this.setByDateValue=function(s,c,h,y,T,B){var ie=new Date(Date.UTC(s,c-1,h,y,T,B,0));this.setByDate(ie)},this.getFreshValueHex=function(){return this.hV}},b.lang.extend(K.asn1.DERAbstractTime,K.asn1.ASN1Object),K.asn1.DERAbstractStructured=function(a){K.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array=s},this.appendASN1Object=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array.push(s)},this.asn1Array=new Array,void 0!==a&&void 0!==a.array&&(this.asn1Array=a.array)},b.lang.extend(K.asn1.DERAbstractStructured,K.asn1.ASN1Object),K.asn1.DERBoolean=function(a){K.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==a?"010100":"0101ff"},b.lang.extend(K.asn1.DERBoolean,K.asn1.ASN1Object),K.asn1.DERInteger=function(a){K.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(s){this.hTLV=null,this.isModified=!0,this.hV=K.asn1.ASN1Util.bigIntToMinTwosComplementsHex(s)},this.setByInteger=function(s){var c=new ye(String(s),10);this.setByBigInteger(c)},this.setValueHex=function(s){this.hV=s},this.getFreshValueHex=function(){return this.hV},void 0!==a&&(void 0!==a.bigint?this.setByBigInteger(a.bigint):void 0!==a.int?this.setByInteger(a.int):"number"==typeof a?this.setByInteger(a):void 0!==a.hex&&this.setValueHex(a.hex))},b.lang.extend(K.asn1.DERInteger,K.asn1.ASN1Object),K.asn1.DERBitString=function(a){if(void 0!==a&&void 0!==a.obj){var s=K.asn1.ASN1Util.newObject(a.obj);a.hex="00"+s.getEncodedHex()}K.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(c){this.hTLV=null,this.isModified=!0,this.hV=c},this.setUnusedBitsAndHexValue=function(c,h){if(c<0||7<c)throw"unused bits shall be from 0 to 7: u = "+c;var y="0"+c;this.hTLV=null,this.isModified=!0,this.hV=y+h},this.setByBinaryString=function(c){var h=8-(c=c.replace(/0+$/,"")).length%8;8==h&&(h=0);for(var y=0;y<=h;y++)c+="0";var T="";for(y=0;y<c.length-1;y+=8){var B=c.substr(y,8),ie=parseInt(B,2).toString(16);1==ie.length&&(ie="0"+ie),T+=ie}this.hTLV=null,this.isModified=!0,this.hV="0"+h+T},this.setByBooleanArray=function(c){for(var h="",y=0;y<c.length;y++)h+=1==c[y]?"1":"0";this.setByBinaryString(h)},this.newFalseArray=function(c){for(var h=new Array(c),y=0;y<c;y++)h[y]=!1;return h},this.getFreshValueHex=function(){return this.hV},void 0!==a&&("string"==typeof a&&a.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(a):void 0!==a.hex?this.setHexValueIncludingUnusedBits(a.hex):void 0!==a.bin?this.setByBinaryString(a.bin):void 0!==a.array&&this.setByBooleanArray(a.array))},b.lang.extend(K.asn1.DERBitString,K.asn1.ASN1Object),K.asn1.DEROctetString=function(a){if(void 0!==a&&void 0!==a.obj){var s=K.asn1.ASN1Util.newObject(a.obj);a.hex=s.getEncodedHex()}K.asn1.DEROctetString.superclass.constructor.call(this,a),this.hT="04"},b.lang.extend(K.asn1.DEROctetString,K.asn1.DERAbstractString),K.asn1.DERNull=function(){K.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},b.lang.extend(K.asn1.DERNull,K.asn1.ASN1Object),K.asn1.DERObjectIdentifier=function(a){K.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(s){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.setValueOidString=function(s){var c=function(y){var T=function(ce){var pe=ce.toString(16);return 1==pe.length&&(pe="0"+pe),pe},B=function(ce){var pe="",O=parseInt(ce,10).toString(2),H=7-O.length%7;7==H&&(H=0);for(var M="",E=0;E<H;E++)M+="0";for(O=M+O,E=0;E<O.length-1;E+=7){var U=O.substr(E,7);E!=O.length-7&&(U="1"+U),pe+=T(parseInt(U,2))}return pe};try{if(!y.match(/^[0-9.]+$/))return null;var ie="",q=y.split("."),te=40*parseInt(q[0],10)+parseInt(q[1],10);ie+=T(te),q.splice(0,2);for(var ae=0;ae<q.length;ae++)ie+=B(q[ae]);return ie}catch(ue){return null}}(s);if(null==c)throw new Error("malformed oid string: "+s);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.setValueName=function(s){var c=K.asn1.x509.OID.name2oid(s);if(""===c)throw new Error("DERObjectIdentifier oidName undefined: "+s);this.setValueOidString(c)},this.setValueNameOrOid=function(s){s.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(s):this.setValueName(s)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(s){"string"==typeof s?this.setValueNameOrOid(s):void 0!==s.oid?this.setValueNameOrOid(s.oid):void 0!==s.name?this.setValueNameOrOid(s.name):void 0!==s.hex&&this.setValueHex(s.hex)},void 0!==a&&this.setByParam(a)},b.lang.extend(K.asn1.DERObjectIdentifier,K.asn1.ASN1Object),K.asn1.DEREnumerated=function(a){K.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(s){this.hTLV=null,this.isModified=!0,this.hV=K.asn1.ASN1Util.bigIntToMinTwosComplementsHex(s)},this.setByInteger=function(s){var c=new ye(String(s),10);this.setByBigInteger(c)},this.setValueHex=function(s){this.hV=s},this.getFreshValueHex=function(){return this.hV},void 0!==a&&(void 0!==a.int?this.setByInteger(a.int):"number"==typeof a?this.setByInteger(a):void 0!==a.hex&&this.setValueHex(a.hex))},b.lang.extend(K.asn1.DEREnumerated,K.asn1.ASN1Object),K.asn1.DERUTF8String=function(a){K.asn1.DERUTF8String.superclass.constructor.call(this,a),this.hT="0c"},b.lang.extend(K.asn1.DERUTF8String,K.asn1.DERAbstractString),K.asn1.DERNumericString=function(a){K.asn1.DERNumericString.superclass.constructor.call(this,a),this.hT="12"},b.lang.extend(K.asn1.DERNumericString,K.asn1.DERAbstractString),K.asn1.DERPrintableString=function(a){K.asn1.DERPrintableString.superclass.constructor.call(this,a),this.hT="13"},b.lang.extend(K.asn1.DERPrintableString,K.asn1.DERAbstractString),K.asn1.DERTeletexString=function(a){K.asn1.DERTeletexString.superclass.constructor.call(this,a),this.hT="14"},b.lang.extend(K.asn1.DERTeletexString,K.asn1.DERAbstractString),K.asn1.DERIA5String=function(a){K.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="16"},b.lang.extend(K.asn1.DERIA5String,K.asn1.DERAbstractString),K.asn1.DERVisibleString=function(a){K.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="1a"},b.lang.extend(K.asn1.DERVisibleString,K.asn1.DERAbstractString),K.asn1.DERBMPString=function(a){K.asn1.DERBMPString.superclass.constructor.call(this,a),this.hT="1e"},b.lang.extend(K.asn1.DERBMPString,K.asn1.DERAbstractString),K.asn1.DERUTCTime=function(a){K.asn1.DERUTCTime.superclass.constructor.call(this,a),this.hT="17",this.setByDate=function(s){this.hTLV=null,this.isModified=!0,this.date=s,this.s=this.formatDate(this.date,"utc"),this.hV=tr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=tr(this.s)),this.hV},void 0!==a&&(void 0!==a.str?this.setString(a.str):"string"==typeof a&&a.match(/^[0-9]{12}Z$/)?this.setString(a):void 0!==a.hex?this.setStringHex(a.hex):void 0!==a.date&&this.setByDate(a.date))},b.lang.extend(K.asn1.DERUTCTime,K.asn1.DERAbstractTime),K.asn1.DERGeneralizedTime=function(a){K.asn1.DERGeneralizedTime.superclass.constructor.call(this,a),this.hT="18",this.withMillis=!1,this.setByDate=function(s){this.hTLV=null,this.isModified=!0,this.date=s,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=tr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=tr(this.s)),this.hV},void 0!==a&&(void 0!==a.str?this.setString(a.str):"string"==typeof a&&a.match(/^[0-9]{14}Z$/)?this.setString(a):void 0!==a.hex?this.setStringHex(a.hex):void 0!==a.date&&this.setByDate(a.date),!0===a.millis&&(this.withMillis=!0))},b.lang.extend(K.asn1.DERGeneralizedTime,K.asn1.DERAbstractTime),K.asn1.DERSequence=function(a){K.asn1.DERSequence.superclass.constructor.call(this,a),this.hT="30",this.getFreshValueHex=function(){for(var s="",c=0;c<this.asn1Array.length;c++)s+=this.asn1Array[c].getEncodedHex();return this.hV=s,this.hV}},b.lang.extend(K.asn1.DERSequence,K.asn1.DERAbstractStructured),K.asn1.DERSet=function(a){K.asn1.DERSet.superclass.constructor.call(this,a),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var s=new Array,c=0;c<this.asn1Array.length;c++)s.push(this.asn1Array[c].getEncodedHex());return 1==this.sortFlag&&s.sort(),this.hV=s.join(""),this.hV},void 0!==a&&void 0!==a.sortflag&&0==a.sortflag&&(this.sortFlag=!1)},b.lang.extend(K.asn1.DERSet,K.asn1.DERAbstractStructured),K.asn1.DERTaggedObject=function(a){K.asn1.DERTaggedObject.superclass.constructor.call(this);var s=K.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(c,h,y){this.hT=h,this.isExplicit=c,this.asn1Object=y,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=y.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,h),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(c){null!=c.tag&&(this.hT=c.tag),null!=c.explicit&&(this.isExplicit=c.explicit),null!=c.tage&&(this.hT=c.tage,this.isExplicit=!0),null!=c.tagi&&(this.hT=c.tagi,this.isExplicit=!1),null!=c.obj&&(c.obj instanceof s.ASN1Object?(this.asn1Object=c.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==k(c.obj)&&(this.asn1Object=s.ASN1Util.newObject(c.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=a&&this.setByParam(a)},b.lang.extend(K.asn1.DERTaggedObject,K.asn1.ASN1Object);var K,nt,an,Be=new function(){};function vn(a){for(var s=new Array,c=0;c<a.length;c++)s[c]=a.charCodeAt(c);return s}function Lt(a){for(var s="",c=0;c<a.length;c++)s+=String.fromCharCode(a[c]);return s}function Nn(a){for(var s="",c=0;c<a.length;c++){var h=a[c].toString(16);1==h.length&&(h="0"+h),s+=h}return s}function tr(a){return Nn(vn(a))}function yt(a){return(a=(a=a.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ir(a){return a.length%4==2?a+="==":a.length%4==3&&(a+="="),(a=a.replace(/-/g,"+")).replace(/_/g,"/")}function ut(a){return a.length%2==1&&(a="0"+a),yt(Pe(a))}function Vt(a){return Oe(Ir(a))}function nr(a){return Pn(Cr(a))}function ct(a){return decodeURIComponent(rr(a))}function ln(a){for(var s="",c=0;c<a.length-1;c+=2)s+=String.fromCharCode(parseInt(a.substr(c,2),16));return s}function Rn(a){for(var s="",c=0;c<a.length;c++)s+=("0"+a.charCodeAt(c).toString(16)).slice(-2);return s}function Zn(a){return Pe(a)}function Tt(a){return Zn(a).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function pr(a){return Oe(a.replace(/[^0-9A-Za-z\/+=]*/g,""))}function dn(a,s){return"-----BEGIN "+s+"-----\r\n"+Tt(a)+"\r\n-----END "+s+"-----\r\n"}function On(a,s){if(-1==a.indexOf("-----BEGIN "))throw"can't find PEM header: "+s;return pr(a=void 0!==s?(a=a.replace(new RegExp("^[^]*-----BEGIN "+s+"-----"),"")).replace(new RegExp("-----END "+s+"-----[^]*$"),""):(a=a.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Ar(a){var s,c,h,y,T,B,ie,q,te,ae,ue;if(ue=a.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return q=ue[1],s=parseInt(q),2===q.length&&(50<=s&&s<100?s=1900+s:0<=s&&s<50&&(s=2e3+s)),c=parseInt(ue[2])-1,h=parseInt(ue[3]),y=parseInt(ue[4]),T=parseInt(ue[5]),B=parseInt(ue[6]),ie=0,""!==(te=ue[7])&&(ae=(te.substr(1)+"00").substr(0,3),ie=parseInt(ae)),Date.UTC(s,c,h,y,T,B,ie);throw"unsupported zulu format: "+a}function pi(a){return~~(Ar(a)/1e3)}function Pn(a){return a.replace(/%/g,"")}function rr(a){return a.replace(/(..)/g,"%$1")}function gi(a){var s="malformed IPv6 address";if(!a.match(/^[0-9A-Fa-f:]+$/))throw s;var c=(a=a.toLowerCase()).split(":").length-1;if(c<2)throw s;var h=":".repeat(7-c+2),y=(a=a.replace("::",h)).split(":");if(8!=y.length)throw s;for(var T=0;T<8;T++)y[T]=("0000"+y[T]).slice(-4);return y.join("")}function Vr(a){if(!a.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var s=(a=a.toLowerCase()).match(/.{1,4}/g),c=0;c<8;c++)s[c]=s[c].replace(/^0+/,""),""==s[c]&&(s[c]="0");var h=(a=":"+s.join(":")+":").match(/:(0:){2,}/g);if(null===h)return a.slice(1,-1);var y="";for(c=0;c<h.length;c++)h[c].length>y.length&&(y=h[c]);return(a=a.replace(y,"::")).slice(1,-1)}function mi(a){var s="malformed hex value";if(!a.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw s;if(8!=a.length)return 32==a.length?Vr(a):a;try{return parseInt(a.substr(0,2),16)+"."+parseInt(a.substr(2,2),16)+"."+parseInt(a.substr(4,2),16)+"."+parseInt(a.substr(6,2),16)}catch(c){throw s}}function Cr(a){for(var s=encodeURIComponent(a),c="",h=0;h<s.length;h++)"%"==s[h]?(c+=s.substr(h,3),h+=2):c=c+"%"+tr(s[h]);return c}function Fn(a){return!(a.length%2!=0||!a.match(/^[0-9a-f]+$/)&&!a.match(/^[0-9A-F]+$/))}function lt(a){return a.length%2==1?"0"+a:a.substr(0,1)>"7"?"00"+a:a}Be.getLblen=function(a,s){if("8"!=a.substr(s+2,1))return 1;var c=parseInt(a.substr(s+3,1));return 0==c?-1:0<c&&c<10?c+1:-2},Be.getL=function(a,s){var c=Be.getLblen(a,s);return c<1?"":a.substr(s+2,2*c)},Be.getVblen=function(a,s){var c;return""==(c=Be.getL(a,s))?-1:("8"===c.substr(0,1)?new ye(c.substr(2),16):new ye(c,16)).intValue()},Be.getVidx=function(a,s){var c=Be.getLblen(a,s);return c<0?c:s+2*(c+1)},Be.getV=function(a,s){var c=Be.getVidx(a,s),h=Be.getVblen(a,s);return a.substr(c,2*h)},Be.getTLV=function(a,s){return a.substr(s,2)+Be.getL(a,s)+Be.getV(a,s)},Be.getTLVblen=function(a,s){return 2+2*Be.getLblen(a,s)+2*Be.getVblen(a,s)},Be.getNextSiblingIdx=function(a,s){return Be.getVidx(a,s)+2*Be.getVblen(a,s)},Be.getChildIdx=function(a,s){var c,h,y,T=Be,B=[];c=T.getVidx(a,s),h=2*T.getVblen(a,s),"03"==a.substr(s,2)&&(c+=2,h-=2),y=0;for(var ie=c;y<=h;){var q=T.getTLVblen(a,ie);if((y+=q)<=h&&B.push(ie),ie+=q,y>=h)break}return B},Be.getNthChildIdx=function(a,s,c){return Be.getChildIdx(a,s)[c]},Be.getIdxbyList=function(a,s,c,h){var y,T,B=Be;return 0==c.length?void 0!==h&&a.substr(s,2)!==h?-1:s:(y=c.shift())>=(T=B.getChildIdx(a,s)).length?-1:B.getIdxbyList(a,T[y],c,h)},Be.getIdxbyListEx=function(a,s,c,h){var y,T,B=Be;if(0==c.length)return void 0!==h&&a.substr(s,2)!==h?-1:s;y=c.shift(),T=B.getChildIdx(a,s);for(var ie=0,q=0;q<T.length;q++){var te=a.substr(T[q],2);if("number"==typeof y&&!B.isContextTag(te)&&ie==y||"string"==typeof y&&B.isContextTag(te,y))return B.getIdxbyListEx(a,T[q],c,h);B.isContextTag(te)||ie++}return-1},Be.getTLVbyList=function(a,s,c,h){var y=Be,T=y.getIdxbyList(a,s,c,h);return-1==T||T>=a.length?null:y.getTLV(a,T)},Be.getTLVbyListEx=function(a,s,c,h){var y=Be,T=y.getIdxbyListEx(a,s,c,h);return-1==T?null:y.getTLV(a,T)},Be.getVbyList=function(a,s,c,h,y){var T,B,ie=Be;return-1==(T=ie.getIdxbyList(a,s,c,h))||T>=a.length?null:(B=ie.getV(a,T),!0===y&&(B=B.substr(2)),B)},Be.getVbyListEx=function(a,s,c,h,y){var T,B,ie=Be;return-1==(T=ie.getIdxbyListEx(a,s,c,h))?null:(B=ie.getV(a,T),"03"==a.substr(T,2)&&!1!==y&&(B=B.substr(2)),B)},Be.getInt=function(a,s,c){null==c&&(c=-1);try{var h=a.substr(s,2);if("02"!=h&&"03"!=h)return c;var y=Be.getV(a,s);return"02"==h?parseInt(y,16):function(B){try{var ie=B.substr(0,2);if("00"==ie)return parseInt(B.substr(2),16);var q=parseInt(ie,16),te=B.substr(2),ae=parseInt(te,16).toString(2);return"0"==ae&&(ae="00000000"),ae=ae.slice(0,0-q),parseInt(ae,2)}catch(ue){return-1}}(y)}catch(T){return c}},Be.getOID=function(a,s,c){null==c&&(c=null);try{return"06"!=a.substr(s,2)?c:function(y){if(!Fn(y))return null;try{var T=[],B=y.substr(0,2),ie=parseInt(B,16);T[0]=new String(Math.floor(ie/40)),T[1]=new String(ie%40);for(var q=y.substr(2),te=[],ae=0;ae<q.length/2;ae++)te.push(parseInt(q.substr(2*ae,2),16));var ue=[],ce="";for(ae=0;ae<te.length;ae++)128&te[ae]?ce+=Br((127&te[ae]).toString(2),7):(ce+=Br((127&te[ae]).toString(2),7),ue.push(new String(parseInt(ce,2))),ce="");var pe=T.join(".");return ue.length>0&&(pe=pe+"."+ue.join(".")),pe}catch(O){return null}}(Be.getV(a,s))}catch(h){return c}},Be.getOIDName=function(a,s,c){null==c&&(c=null);try{var h=Be.getOID(a,s,c);if(h==c)return c;var y=K.asn1.x509.OID.oid2name(h);return""==y?h:y}catch(T){return c}},Be.getString=function(a,s,c){null==c&&(c=null);try{return ln(Be.getV(a,s))}catch(h){return c}},Be.hextooidstr=function(a){var s=function(ce,pe){return ce.length>=pe?ce:new Array(pe-ce.length+1).join("0")+ce},c=[],h=a.substr(0,2),y=parseInt(h,16);c[0]=new String(Math.floor(y/40)),c[1]=new String(y%40);for(var T=a.substr(2),B=[],ie=0;ie<T.length/2;ie++)B.push(parseInt(T.substr(2*ie,2),16));var q=[],te="";for(ie=0;ie<B.length;ie++)128&B[ie]?te+=s((127&B[ie]).toString(2),7):(te+=s((127&B[ie]).toString(2),7),q.push(new String(parseInt(te,2))),te="");var ae=c.join(".");return q.length>0&&(ae=ae+"."+q.join(".")),ae},Be.dump=function(a,s,c,h){var y=Be,T=y.getV,B=y.dump,ie=y.getChildIdx,q=a;a instanceof K.asn1.ASN1Object&&(q=a.getEncodedHex());var te=function(Ne,_t){return Ne.length<=2*_t?Ne:Ne.substr(0,_t)+"..(total "+Ne.length/2+"bytes).."+Ne.substr(Ne.length-_t,_t)};void 0===s&&(s={ommit_long_octet:32}),void 0===c&&(c=0),void 0===h&&(h="");var ae,ue=s.ommit_long_octet;if("01"==(ae=q.substr(c,2)))return"00"==(ce=T(q,c))?h+"BOOLEAN FALSE\n":h+"BOOLEAN TRUE\n";if("02"==ae)return h+"INTEGER "+te(ce=T(q,c),ue)+"\n";if("03"==ae){var ce=T(q,c);return y.isASN1HEX(ce.substr(2))?(pe=h+"BITSTRING, encapsulates\n")+B(ce.substr(2),s,0,h+"  "):h+"BITSTRING "+te(ce,ue)+"\n"}if("04"==ae)return ce=T(q,c),y.isASN1HEX(ce)?(pe=h+"OCTETSTRING, encapsulates\n",pe+=B(ce,s,0,h+"  ")):h+"OCTETSTRING "+te(ce,ue)+"\n";if("05"==ae)return h+"NULL\n";if("06"==ae){var O=T(q,c),H=K.asn1.ASN1Util.oidHexToInt(O),M=K.asn1.x509.OID.oid2name(H),E=H.replace(/\./g," ");return""!=M?h+"ObjectIdentifier "+M+" ("+E+")\n":h+"ObjectIdentifier ("+E+")\n"}if("0a"==ae)return h+"ENUMERATED "+parseInt(T(q,c))+"\n";if("0c"==ae)return h+"UTF8String '"+ct(T(q,c))+"'\n";if("13"==ae)return h+"PrintableString '"+ct(T(q,c))+"'\n";if("14"==ae)return h+"TeletexString '"+ct(T(q,c))+"'\n";if("16"==ae)return h+"IA5String '"+ct(T(q,c))+"'\n";if("17"==ae)return h+"UTCTime "+ct(T(q,c))+"\n";if("18"==ae)return h+"GeneralizedTime "+ct(T(q,c))+"\n";if("1a"==ae)return h+"VisualString '"+ct(T(q,c))+"'\n";if("1e"==ae)return h+"BMPString '"+ct(T(q,c))+"'\n";if("30"==ae){if("3000"==q.substr(c,4))return h+"SEQUENCE {}\n";pe=h+"SEQUENCE\n";var U=s;if((2==(be=ie(q,c)).length||3==be.length)&&"06"==q.substr(be[0],2)&&"04"==q.substr(be[be.length-1],2)){M=y.oidname(T(q,be[0]));var ne=JSON.parse(JSON.stringify(s));ne.x509ExtName=M,U=ne}for(var se=0;se<be.length;se++)pe+=B(q,U,be[se],h+"  ");return pe}if("31"==ae){pe=h+"SET\n";var be=ie(q,c);for(se=0;se<be.length;se++)pe+=B(q,s,be[se],h+"  ");return pe}if(0!=(128&(ae=parseInt(ae,16)))){var pe,Fe=31&ae;if(0!=(32&ae)){for(pe=h+"["+Fe+"]\n",be=ie(q,c),se=0;se<be.length;se++)pe+=B(q,s,be[se],h+"  ");return pe}return ce=T(q,c),Be.isASN1HEX(ce)?(pe=h+"["+Fe+"]\n")+B(ce,s,0,h+"  "):(("68747470"==ce.substr(0,8)||"subjectAltName"===s.x509ExtName&&2==Fe)&&(ce=ct(ce)),h+"["+Fe+"] "+ce+"\n")}return h+"UNKNOWN("+ae+") "+T(q,c)+"\n"},Be.isContextTag=function(a,s){var c,h;a=a.toLowerCase();try{c=parseInt(a,16)}catch(y){return-1}if(void 0===s)return 128==(192&c);try{return null!=s.match(/^\[[0-9]+\]$/)&&!((h=parseInt(s.substr(1,s.length-1),10))>31)&&128==(192&c)&&(31&c)==h}catch(y){return!1}},Be.isASN1HEX=function(a){var s=Be;if(a.length%2==1)return!1;var c=s.getVblen(a,0),h=a.substr(0,2),y=s.getL(a,0);return a.length-h.length-y.length==2*c},Be.checkStrictDER=function(a,s,c,h,y){var T=Be;if(void 0===c){if("string"!=typeof a)throw new Error("not hex string");if(a=a.toLowerCase(),!K.lang.String.isHex(a))throw new Error("not hex string");c=a.length,y=(h=a.length/2)<128?1:Math.ceil(h.toString(16))+1}if(T.getL(a,s).length>2*y)throw new Error("L of TLV too long: idx="+s);var B=T.getVblen(a,s);if(B>h)throw new Error("value of L too long than hex: idx="+s);var ie=T.getTLV(a,s),q=ie.length-2-T.getL(a,s).length;if(q!==2*B)throw new Error("V string length and L's value not the same:"+q+"/"+2*B);if(0===s&&a.length!=ie.length)throw new Error("total length and TLV length unmatch:"+a.length+"!="+ie.length);var te=a.substr(s,2);if("02"===te){var ae=T.getVidx(a,s);if("00"==a.substr(ae,2)&&a.charCodeAt(ae+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(te,16)){for(var ue=T.getVblen(a,s),ce=0,pe=T.getChildIdx(a,s),O=0;O<pe.length;O++)ce+=T.getTLV(a,pe[O]).length,T.checkStrictDER(a,pe[O],c,h,y);if(2*ue!=ce)throw new Error("sum of children's TLV length and L unmatch: "+2*ue+"!="+ce)}},Be.oidname=function(a){var s=K.asn1;K.lang.String.isHex(a)&&(a=s.ASN1Util.oidHexToInt(a));var c=s.x509.OID.oid2name(a);return""===c&&(c=a),c},void 0!==K&&K||(R.KJUR=K={}),void 0!==K.lang&&K.lang||(K.lang={}),K.lang.String=function(){},"function"==typeof m?(R.utf8tob64u=nt=function(s){return yt(m.from(s,"utf8").toString("base64"))},R.b64utoutf8=an=function(s){return m.from(Ir(s),"base64").toString("utf8")}):(R.utf8tob64u=nt=function(s){return ut(Pn(Cr(s)))},R.b64utoutf8=an=function(s){return decodeURIComponent(rr(Vt(s)))}),K.lang.String.isInteger=function(a){return!!a.match(/^[0-9]+$/)||!!a.match(/^-[0-9]+$/)},K.lang.String.isHex=function(a){return Fn(a)},K.lang.String.isBase64=function(a){return!(!(a=a.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||a.length%4!=0)},K.lang.String.isBase64URL=function(a){return!a.match(/[+/=]/)&&(a=Ir(a),K.lang.String.isBase64(a))},K.lang.String.isIntegerArray=function(a){return!!(a=a.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},K.lang.String.isPrintable=function(a){return null!==a.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},K.lang.String.isIA5=function(a){return null!==a.match(/^[\x20-\x21\x23-\x7f]*$/)},K.lang.String.isMail=function(a){return null!==a.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Br=function(s,c,h){return null==h&&(h="0"),s.length>=c?s:new Array(c-s.length+1).join(h)+s};void 0!==K&&K||(R.KJUR=K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:fe.algo.MD5,sha1:fe.algo.SHA1,sha224:fe.algo.SHA224,sha256:fe.algo.SHA256,sha384:fe.algo.SHA384,sha512:fe.algo.SHA512,ripemd160:fe.algo.RIPEMD160},this.getDigestInfoHex=function(a,s){if(void 0===this.DIGESTINFOHEAD[s])throw"alg not supported in Util.DIGESTINFOHEAD: "+s;return this.DIGESTINFOHEAD[s]+a},this.getPaddedDigestInfoHex=function(a,s,c){var h=this.getDigestInfoHex(a,s),y=c/4;if(h.length+22>y)throw"key is too short for SigAlg: keylen="+c+","+s;for(var T="0001",B="00"+h,ie="",q=y-T.length-B.length,te=0;te<q;te+=2)ie+="ff";return T+ie+B},this.hashString=function(a,s){return new K.crypto.MessageDigest({alg:s}).digestString(a)},this.hashHex=function(a,s){return new K.crypto.MessageDigest({alg:s}).digestHex(a)},this.sha1=function(a){return this.hashString(a,"sha1")},this.sha256=function(a){return this.hashString(a,"sha256")},this.sha256Hex=function(a){return this.hashHex(a,"sha256")},this.sha512=function(a){return this.hashString(a,"sha512")},this.sha512Hex=function(a){return this.hashHex(a,"sha512")},this.isKey=function(a){return a instanceof Ze||a instanceof K.crypto.DSA||a instanceof K.crypto.ECDSA}},K.crypto.Util.md5=function(a){return new K.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(a)},K.crypto.Util.ripemd160=function(a){return new K.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(a)},K.crypto.Util.SECURERANDOMGEN=new nn,K.crypto.Util.getRandomHexOfNbytes=function(a){var s=new Array(a);return K.crypto.Util.SECURERANDOMGEN.nextBytes(s),Nn(s)},K.crypto.Util.getRandomBigIntegerOfNbytes=function(a){return new ye(K.crypto.Util.getRandomHexOfNbytes(a),16)},K.crypto.Util.getRandomHexOfNbits=function(a){var s=a%8,c=new Array((a-s)/8+1);return K.crypto.Util.SECURERANDOMGEN.nextBytes(c),c[0]=(255<<s&255^255)&c[0],Nn(c)},K.crypto.Util.getRandomBigIntegerOfNbits=function(a){return new ye(K.crypto.Util.getRandomHexOfNbits(a),16)},K.crypto.Util.getRandomBigIntegerZeroToMax=function(a){for(var s=a.bitLength();;){var c=K.crypto.Util.getRandomBigIntegerOfNbits(s);if(-1!=a.compareTo(c))return c}},K.crypto.Util.getRandomBigIntegerMinToMax=function(a,s){var c=a.compareTo(s);if(1==c)throw"biMin is greater than biMax";if(0==c)return a;var h=s.subtract(a);return K.crypto.Util.getRandomBigIntegerZeroToMax(h).add(a)},K.crypto.MessageDigest=function(a){this.setAlgAndProvider=function(s,c){if(null!==(s=K.crypto.MessageDigest.getCanonicalAlgName(s))&&void 0===c&&(c=K.crypto.Util.DEFAULTPROVIDER[s]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(s)&&"cryptojs"==c){try{this.md=K.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[s].create()}catch(h){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+h}this.updateString=function(h){this.md.update(h)},this.updateHex=function(h){var y=fe.enc.Hex.parse(h);this.md.update(y)},this.digest=function(){return this.md.finalize().toString(fe.enc.Hex)},this.digestString=function(h){return this.updateString(h),this.digest()},this.digestHex=function(h){return this.updateHex(h),this.digest()}}if(-1!=":sha256:".indexOf(s)&&"sjcl"==c){try{this.md=new sjcl.hash.sha256}catch(h){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+h}this.updateString=function(h){this.md.update(h)},this.updateHex=function(h){var y=sjcl.codec.hex.toBits(h);this.md.update(y)},this.digest=function(){var h=this.md.finalize();return sjcl.codec.hex.fromBits(h)},this.digestString=function(h){return this.updateString(h),this.digest()},this.digestHex=function(h){return this.updateHex(h),this.digest()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==a&&void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov&&(this.provName=K.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},K.crypto.MessageDigest.getCanonicalAlgName=function(a){return"string"==typeof a&&(a=(a=a.toLowerCase()).replace(/-/,"")),a},K.crypto.MessageDigest.getHashLength=function(a){var s=K.crypto.MessageDigest,c=s.getCanonicalAlgName(a);if(void 0===s.HASHLENGTH[c])throw"not supported algorithm: "+a;return s.HASHLENGTH[c]},K.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},K.crypto.Mac=function(a){this.setAlgAndProvider=function(s,c){if(null==(s=s.toLowerCase())&&(s="hmacsha1"),"hmac"!=(s=s.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+s;void 0===c&&(c=K.crypto.Util.DEFAULTPROVIDER[s]),this.algProv=s+"/"+c;var h=s.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(h)&&"cryptojs"==c){try{this.mac=fe.algo.HMAC.create(K.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[h],this.pass)}catch(T){throw"setAlgAndProvider hash alg set fail hashAlg="+h+"/"+T}this.updateString=function(T){this.mac.update(T)},this.updateHex=function(T){var B=fe.enc.Hex.parse(T);this.mac.update(B)},this.doFinal=function(){return this.mac.finalize().toString(fe.enc.Hex)},this.doFinalString=function(T){return this.updateString(T),this.doFinal()},this.doFinalHex=function(T){return this.updateHex(T),this.doFinal()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(s){if("string"==typeof s){var c=s;return s.length%2!=1&&s.match(/^[0-9A-Fa-f]+$/)||(c=Rn(s)),void(this.pass=fe.enc.Hex.parse(c))}if("object"!=(void 0===s?"undefined":k(s)))throw"KJUR.crypto.Mac unsupported password type: "+s;if(c=null,void 0!==s.hex){if(s.hex.length%2!=0||!s.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+s.hex;c=s.hex}if(void 0!==s.utf8&&(c=nr(s.utf8)),void 0!==s.rstr&&(c=Rn(s.rstr)),void 0!==s.b64&&(c=Oe(s.b64)),void 0!==s.b64u&&(c=Vt(s.b64u)),null==c)throw"KJUR.crypto.Mac unsupported password type: "+s;this.pass=fe.enc.Hex.parse(c)},void 0!==a&&(void 0!==a.pass&&this.setPassword(a.pass),void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov&&(this.provName=K.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},K.crypto.Signature=function(a){var s=null;if(this._setAlgNames=function(){var c=this.algName.match(/^(.+)with(.+)$/);c&&(this.mdAlgName=c[1].toLowerCase(),this.pubkeyAlgName=c[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(c,h){for(var y="",T=h/4-c.length,B=0;B<T;B++)y+="0";return y+c},this.setAlgAndProvider=function(c,h){if(this._setAlgNames(),"cryptojs/jsrsa"!=h)throw new Error("provider not supported: "+h);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new K.crypto.MessageDigest({alg:this.mdAlgName})}catch(y){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+y)}this.init=function(y,T){var B=null;try{B=void 0===T?Nt.getKey(y):Nt.getKey(y,T)}catch(ie){throw"init failed:"+ie}if(!0===B.isPrivate)this.prvKey=B,this.state="SIGN";else{if(!0!==B.isPublic)throw"init failed.:"+B;this.pubKey=B,this.state="VERIFY"}},this.updateString=function(y){this.md.updateString(y)},this.updateHex=function(y){this.md.updateHex(y)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==K.crypto.ECDSA&&(this.prvKey=new K.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Ze&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Ze&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof K.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof K.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(y){return this.updateString(y),this.sign()},this.signHex=function(y){return this.updateHex(y),this.sign()},this.verify=function(y){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==K.crypto.ECDSA&&(this.pubKey=new K.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Ze&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,y,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Ze&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);if(void 0!==K.crypto.ECDSA&&this.pubKey instanceof K.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);if(void 0!==K.crypto.DSA&&this.pubKey instanceof K.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(c,h){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(c){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(c){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(c){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(c){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=a,void 0!==a&&(void 0!==a.alg&&(this.algName=a.alg,this.provName=void 0===a.prov?K.crypto.Util.DEFAULTPROVIDER[this.algName]:a.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==a.psssaltlen&&(this.pssSaltLen=a.psssaltlen),void 0!==a.prvkeypem)){if(void 0!==a.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{s=Nt.getKey(a.prvkeypem),this.init(s)}catch(c){throw"fatal error to load pem private key: "+c}}},K.crypto.Cipher=function(a){},K.crypto.Cipher.encrypt=function(a,s,c){if(s instanceof Ze&&s.isPublic){var h=K.crypto.Cipher.getAlgByKeyAndName(s,c);if("RSA"===h)return s.encrypt(a);if("RSAOAEP"===h)return s.encryptOAEP(a,"sha1");var y=h.match(/^RSAOAEP(\d+)$/);if(null!==y)return s.encryptOAEP(a,"sha"+y[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.encrypt: unsupported key or algorithm"},K.crypto.Cipher.decrypt=function(a,s,c){if(s instanceof Ze&&s.isPrivate){var h=K.crypto.Cipher.getAlgByKeyAndName(s,c);if("RSA"===h)return s.decrypt(a);if("RSAOAEP"===h)return s.decryptOAEP(a,"sha1");var y=h.match(/^RSAOAEP(\d+)$/);if(null!==y)return s.decryptOAEP(a,"sha"+y[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.decrypt: unsupported key or algorithm"},K.crypto.Cipher.getAlgByKeyAndName=function(a,s){if(a instanceof Ze){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(s))return s;if(null==s)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+s}throw"getAlgByKeyAndName: not supported algorithm name: "+s},K.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==K&&K||(R.KJUR=K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.ECDSA=function(a){var s=Error,c=ye,h=vt,y=K.crypto.ECDSA,T=K.crypto.ECParameterDB,B=y.getName,q=Be.getVbyListEx,te=Be.isASN1HEX,ae=new nn;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(ue){return new c(ue.bitLength(),ae).mod(ue.subtract(c.ONE)).add(c.ONE)},this.setNamedCurve=function(ue){this.ecparams=T.getByName(ue),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=ue},this.setPrivateKeyHex=function(ue){this.isPrivate=!0,this.prvKeyHex=ue},this.setPublicKeyHex=function(ue){this.isPublic=!0,this.pubKeyHex=ue},this.getPublicKeyXYHex=function(){var ue=this.pubKeyHex;if("04"!==ue.substr(0,2))throw"this method supports uncompressed format(04) only";var ce=this.ecparams.keylen/4;if(ue.length!==2+2*ce)throw"malformed public key hex length";var pe={};return pe.x=ue.substr(2,ce),pe.y=ue.substr(2+ce),pe},this.getShortNISTPCurveName=function(){var ue=this.curveName;return"secp256r1"===ue||"NIST P-256"===ue||"P-256"===ue||"prime256v1"===ue?"P-256":"secp384r1"===ue||"NIST P-384"===ue||"P-384"===ue?"P-384":null},this.generateKeyPairHex=function(){var ce=this.getBigRandom(this.ecparams.n),pe=this.ecparams.G.multiply(ce),O=pe.getX().toBigInteger(),H=pe.getY().toBigInteger(),M=this.ecparams.keylen/4,E=("0000000000"+ce.toString(16)).slice(-M),U="04"+("0000000000"+O.toString(16)).slice(-M)+("0000000000"+H.toString(16)).slice(-M);return this.setPrivateKeyHex(E),this.setPublicKeyHex(U),{ecprvhex:E,ecpubhex:U}},this.signWithMessageHash=function(ue){return this.signHex(ue,this.prvKeyHex)},this.signHex=function(ue,ce){var pe=new c(ce,16),O=this.ecparams.n,H=new c(ue.substring(0,this.ecparams.keylen/4),16);do{var M=this.getBigRandom(O),E=this.ecparams.G.multiply(M).getX().toBigInteger().mod(O)}while(E.compareTo(c.ZERO)<=0);var U=M.modInverse(O).multiply(H.add(pe.multiply(E))).mod(O);return y.biRSSigToASN1Sig(E,U)},this.sign=function(ue,ce){var pe=ce,O=this.ecparams.n,H=c.fromByteArrayUnsigned(ue);do{var M=this.getBigRandom(O),E=this.ecparams.G.multiply(M).getX().toBigInteger().mod(O)}while(E.compareTo(ye.ZERO)<=0);var U=M.modInverse(O).multiply(H.add(pe.multiply(E))).mod(O);return this.serializeSig(E,U)},this.verifyWithMessageHash=function(ue,ce){return this.verifyHex(ue,ce,this.pubKeyHex)},this.verifyHex=function(ue,ce,pe){try{var O,H,M=y.parseSigHex(ce);O=M.r,H=M.s;var E=h.decodeFromHex(this.ecparams.curve,pe),U=new c(ue.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(U,O,H,E)}catch(ne){return!1}},this.verify=function(ue,ce,pe){var O,H,M;if(Bitcoin.Util.isArray(ce)){var E=this.parseSig(ce);O=E.r,H=E.s}else{if("object"!==(void 0===ce?"undefined":k(ce))||!ce.r||!ce.s)throw"Invalid value for signature";O=ce.r,H=ce.s}if(pe instanceof vt)M=pe;else{if(!Bitcoin.Util.isArray(pe))throw"Invalid format for pubkey value, must be byte array or ECPointFp";M=h.decodeFrom(this.ecparams.curve,pe)}var U=c.fromByteArrayUnsigned(ue);return this.verifyRaw(U,O,H,M)},this.verifyRaw=function(ue,ce,pe,O){var H=this.ecparams.n,M=this.ecparams.G;if(ce.compareTo(c.ONE)<0||ce.compareTo(H)>=0||pe.compareTo(c.ONE)<0||pe.compareTo(H)>=0)return!1;var E=pe.modInverse(H),U=ue.multiply(E).mod(H),ne=ce.multiply(E).mod(H);return M.multiply(U).add(O.multiply(ne)).getX().toBigInteger().mod(H).equals(ce)},this.serializeSig=function(ue,ce){var pe=ue.toByteArraySigned(),O=ce.toByteArraySigned(),H=[];return H.push(2),H.push(pe.length),(H=H.concat(pe)).push(2),H.push(O.length),(H=H.concat(O)).unshift(H.length),H.unshift(48),H},this.parseSig=function(ue){var ce;if(48!=ue[0])throw new Error("Signature not a valid DERSequence");if(2!=ue[ce=2])throw new Error("First element in signature must be a DERInteger");var pe=ue.slice(ce+2,ce+2+ue[ce+1]);if(2!=ue[ce+=2+ue[ce+1]])throw new Error("Second element in signature must be a DERInteger");var O=ue.slice(ce+2,ce+2+ue[ce+1]);return ce+=2+ue[ce+1],{r:c.fromByteArrayUnsigned(pe),s:c.fromByteArrayUnsigned(O)}},this.parseSigCompact=function(ue){if(65!==ue.length)throw"Signature has the wrong length";var ce=ue[0]-27;if(ce<0||ce>7)throw"Invalid signature type";var pe=this.ecparams.n;return{r:c.fromByteArrayUnsigned(ue.slice(1,33)).mod(pe),s:c.fromByteArrayUnsigned(ue.slice(33,65)).mod(pe),i:ce}},this.readPKCS5PrvKeyHex=function(ue){if(!1===te(ue))throw new Error("not ASN.1 hex string");var ce,pe,O;try{ce=q(ue,0,["[0]",0],"06"),pe=q(ue,0,[1],"04");try{O=q(ue,0,["[1]",0],"03")}catch(H){}}catch(H){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=B(ce),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(O),this.setPrivateKeyHex(pe),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(ue){if(!1===te(ue))throw new s("not ASN.1 hex string");var ce,pe,O;try{q(ue,0,[1,0],"06"),ce=q(ue,0,[1,1],"06"),pe=q(ue,0,[2,0,1],"04");try{O=q(ue,0,[2,0,"[1]",0],"03")}catch(H){}}catch(H){throw new s("malformed PKCS#8 plain ECC private key")}if(this.curveName=B(ce),void 0===this.curveName)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(O),this.setPrivateKeyHex(pe),this.isPublic=!1},this.readPKCS8PubKeyHex=function(ue){if(!1===te(ue))throw new s("not ASN.1 hex string");var ce,pe;try{q(ue,0,[0,0],"06"),ce=q(ue,0,[0,1],"06"),pe=q(ue,0,[1],"03")}catch(O){throw new s("malformed PKCS#8 ECC public key")}if(this.curveName=B(ce),null===this.curveName)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(pe)},this.readCertPubKeyHex=function(ue,ce){if(!1===te(ue))throw new s("not ASN.1 hex string");var pe,O;try{pe=q(ue,0,[0,5,0,1],"06"),O=q(ue,0,[0,5,1],"03")}catch(H){throw new s("malformed X.509 certificate ECC public key")}if(this.curveName=B(pe),null===this.curveName)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(O)},void 0!==a&&void 0!==a.curve&&(this.curveName=a.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==a&&(void 0!==a.prv&&this.setPrivateKeyHex(a.prv),void 0!==a.pub&&this.setPublicKeyHex(a.pub))},K.crypto.ECDSA.parseSigHex=function(a){var s=K.crypto.ECDSA.parseSigHexInHexRS(a);return{r:new ye(s.r,16),s:new ye(s.s,16)}},K.crypto.ECDSA.parseSigHexInHexRS=function(a){var c=Be.getChildIdx,h=Be.getV;if(Be.checkStrictDER(a,0),"30"!=a.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var y=c(a,0);if(2!=y.length)throw new Error("signature shall have two elements");var T=y[0],B=y[1];if("02"!=a.substr(T,2))throw new Error("1st item not ASN.1 integer");if("02"!=a.substr(B,2))throw new Error("2nd item not ASN.1 integer");return{r:h(a,T),s:h(a,B)}},K.crypto.ECDSA.asn1SigToConcatSig=function(a){var s=K.crypto.ECDSA.parseSigHexInHexRS(a),c=s.r,h=s.s;if("00"==c.substr(0,2)&&c.length%32==2&&(c=c.substr(2)),"00"==h.substr(0,2)&&h.length%32==2&&(h=h.substr(2)),c.length%32==30&&(c="00"+c),h.length%32==30&&(h="00"+h),c.length%32!=0)throw"unknown ECDSA sig r length error";if(h.length%32!=0)throw"unknown ECDSA sig s length error";return c+h},K.crypto.ECDSA.concatSigToASN1Sig=function(a){if(a.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var s=a.substr(0,a.length/2),c=a.substr(a.length/2);return K.crypto.ECDSA.hexRSSigToASN1Sig(s,c)},K.crypto.ECDSA.hexRSSigToASN1Sig=function(a,s){var c=new ye(a,16),h=new ye(s,16);return K.crypto.ECDSA.biRSSigToASN1Sig(c,h)},K.crypto.ECDSA.biRSSigToASN1Sig=function(a,s){var c=K.asn1,h=new c.DERInteger({bigint:a}),y=new c.DERInteger({bigint:s});return new c.DERSequence({array:[h,y]}).getEncodedHex()},K.crypto.ECDSA.getName=function(a){return"2b8104001f"===a?"secp192k1":"2a8648ce3d030107"===a?"secp256r1":"2b8104000a"===a?"secp256k1":"2b81040021"===a?"secp224r1":"2b81040022"===a?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(a)?"secp256r1":-1!=="|secp256k1|".indexOf(a)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(a)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(a)?"secp384r1":null},void 0!==K&&K||(R.KJUR=K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.ECParameterDB=new function(){var a={},s={};function c(h){return new ye(h,16)}this.getByName=function(h){var y=h;if(void 0!==s[y]&&(y=s[h]),void 0!==a[y])return a[y];throw"unregistered EC curve name: "+y},this.regist=function(h,y,T,B,ie,q,te,ae,ue,ce,pe,O){a[h]={};var H=c(T),M=c(B),E=c(ie),U=c(q),ne=c(te),se=new Je(H,M,E),be=se.decodePointHex("04"+ae+ue);a[h].name=h,a[h].keylen=y,a[h].curve=se,a[h].G=be,a[h].n=U,a[h].h=ne,a[h].oid=pe,a[h].info=O;for(var Fe=0;Fe<ce.length;Fe++)s[ce[Fe]]=h}},K.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),K.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),K.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),K.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),K.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),K.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),K.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),K.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),K.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),K.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Nt=function(){var a=function(te,ae,ue){return s(fe.AES,te,ae,ue)},s=function(te,ae,ue,ce){var pe=fe.enc.Hex.parse(ae),O=fe.enc.Hex.parse(ue),H=fe.enc.Hex.parse(ce),M={};M.key=O,M.iv=H,M.ciphertext=pe;var E=te.decrypt(M,O,{iv:H});return fe.enc.Hex.stringify(E)},c=function(te,ae,ue){return h(fe.AES,te,ae,ue)},h=function(te,ae,ue,ce){var pe=fe.enc.Hex.parse(ae),O=fe.enc.Hex.parse(ue),H=fe.enc.Hex.parse(ce),M=te.encrypt(pe,O,{iv:H}),E=fe.enc.Hex.parse(M.toString());return fe.enc.Base64.stringify(E)},y={"AES-256-CBC":{proc:a,eproc:c,keylen:32,ivlen:16},"AES-192-CBC":{proc:a,eproc:c,keylen:24,ivlen:16},"AES-128-CBC":{proc:a,eproc:c,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(te,ae,ue){return s(fe.TripleDES,te,ae,ue)},eproc:function(te,ae,ue){return h(fe.TripleDES,te,ae,ue)},keylen:24,ivlen:8},"DES-CBC":{proc:function(te,ae,ue){return s(fe.DES,te,ae,ue)},eproc:function(te,ae,ue){return h(fe.DES,te,ae,ue)},keylen:8,ivlen:8}},T=function(te){var ae={},ue=te.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ue&&(ae.cipher=ue[1],ae.ivsalt=ue[2]);var ce=te.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));ce&&(ae.type=ce[1]);var pe=-1,O=0;-1!=te.indexOf("\r\n\r\n")&&(pe=te.indexOf("\r\n\r\n"),O=2),-1!=te.indexOf("\n\n")&&(pe=te.indexOf("\n\n"),O=1);var H=te.indexOf("-----END");if(-1!=pe&&-1!=H){var M=te.substring(pe+2*O,H-O);M=M.replace(/\s+/g,""),ae.data=M}return ae},B=function(te,ae,ue){for(var ce=ue.substring(0,16),pe=fe.enc.Hex.parse(ce),O=fe.enc.Utf8.parse(ae),H=y[te].keylen+y[te].ivlen,M="",E=null;;){var U=fe.algo.MD5.create();if(null!=E&&U.update(E),U.update(O),U.update(pe),E=U.finalize(),(M+=fe.enc.Hex.stringify(E)).length>=2*H)break}var ne={};return ne.keyhex=M.substr(0,2*y[te].keylen),ne.ivhex=M.substr(2*y[te].keylen,2*y[te].ivlen),ne},ie=function(te,ae,ue,ce){var pe=fe.enc.Base64.parse(te),O=fe.enc.Hex.stringify(pe);return(0,y[ae].proc)(O,ue,ce)};return{version:"1.0.0",parsePKCS5PEM:function(te){return T(te)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(te,ae,ue){return B(te,ae,ue)},decryptKeyB64:function(te,ae,ue,ce){return ie(te,ae,ue,ce)},getDecryptedKeyHex:function(te,ae){var ue=T(te),ce=ue.cipher,pe=ue.ivsalt,O=ue.data,H=B(ce,ae,pe).keyhex;return ie(O,ce,H,pe)},getEncryptedPKCS5PEMFromPrvKeyHex:function(te,ae,ue,ce,pe){var E,U,O="";if(void 0!==ce&&null!=ce||(ce="AES-256-CBC"),void 0===y[ce])throw"KEYUTIL unsupported algorithm: "+ce;return void 0!==pe&&null!=pe||(pe=(E=y[ce].ivlen,U=fe.lib.WordArray.random(E),fe.enc.Hex.stringify(U)).toUpperCase()),O="-----BEGIN "+te+" PRIVATE KEY-----\r\n",O+="Proc-Type: 4,ENCRYPTED\r\n",O+="DEK-Info: "+ce+","+pe+"\r\n",O+="\r\n",(O+=function(E,U,ne,se){return(0,y[U].eproc)(E,ne,se)}(ae,ce,B(ce,ue,pe).keyhex,pe).replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+te+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(te){var ue=Be.getChildIdx,ce=Be.getV,pe={},O=ue(te,0);if(2!=O.length)throw"malformed format: SEQUENCE(0).items != 2: "+O.length;pe.ciphertext=ce(te,O[1]);var H=ue(te,O[0]);if(2!=H.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+H.length;if("2a864886f70d01050d"!=ce(te,H[0]))throw"this only supports pkcs5PBES2";var M=ue(te,H[1]);if(2!=H.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+M.length;var E=ue(te,M[1]);if(2!=E.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+E.length;if("2a864886f70d0307"!=ce(te,E[0]))throw"this only supports TripleDES";pe.encryptionSchemeAlg="TripleDES",pe.encryptionSchemeIV=ce(te,E[1]);var U=ue(te,M[0]);if(2!=U.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+U.length;if("2a864886f70d01050c"!=ce(te,U[0]))throw"this only supports pkcs5PBKDF2";var ne=ue(te,U[1]);if(ne.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+ne.length;pe.pbkdf2Salt=ce(te,ne[0]);var se=ce(te,ne[1]);try{pe.pbkdf2Iter=parseInt(se,16)}catch(be){throw"malformed format pbkdf2Iter: "+se}return pe},getPBKDF2KeyHexFromParam:function(te,ae){var ue=fe.enc.Hex.parse(te.pbkdf2Salt),pe=fe.PBKDF2(ae,ue,{keySize:6,iterations:te.pbkdf2Iter});return fe.enc.Hex.stringify(pe)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(te,ae){var ue=On(te,"ENCRYPTED PRIVATE KEY"),ce=this.parseHexOfEncryptedPKCS8(ue),pe=Nt.getPBKDF2KeyHexFromParam(ce,ae),O={};O.ciphertext=fe.enc.Hex.parse(ce.ciphertext);var H=fe.enc.Hex.parse(pe),M=fe.enc.Hex.parse(ce.encryptionSchemeIV),E=fe.TripleDES.decrypt(O,H,{iv:M});return fe.enc.Hex.stringify(E)},getKeyFromEncryptedPKCS8PEM:function(te,ae){var ue=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(te,ae);return this.getKeyFromPlainPrivatePKCS8Hex(ue)},parsePlainPrivatePKCS8Hex:function(te){var ae=Be,ue=ae.getChildIdx,ce=ae.getV,pe={algparam:null};if("30"!=te.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var O=ue(te,0);if(3!=O.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=te.substr(O[1],2))throw"malformed PKCS8 private key(code:003)";var H=ue(te,O[1]);if(2!=H.length)throw"malformed PKCS8 private key(code:004)";if("06"!=te.substr(H[0],2))throw"malformed PKCS8 private key(code:005)";if(pe.algoid=ce(te,H[0]),"06"==te.substr(H[1],2)&&(pe.algparam=ce(te,H[1])),"04"!=te.substr(O[2],2))throw"malformed PKCS8 private key(code:006)";return pe.keyidx=ae.getVidx(te,O[2]),pe},getKeyFromPlainPrivatePKCS8PEM:function(te){var ae=On(te,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(ae)},getKeyFromPlainPrivatePKCS8Hex:function(te){var ae,ue=this.parsePlainPrivatePKCS8Hex(te);if("2a864886f70d010101"==ue.algoid)ae=new Ze;else if("2a8648ce380401"==ue.algoid)ae=new K.crypto.DSA;else{if("2a8648ce3d0201"!=ue.algoid)throw"unsupported private key algorithm";ae=new K.crypto.ECDSA}return ae.readPKCS8PrvKeyHex(te),ae},_getKeyFromPublicPKCS8Hex:function(te){var ae,ue=Be.getVbyList(te,0,[0,0],"06");if("2a864886f70d010101"===ue)ae=new Ze;else if("2a8648ce380401"===ue)ae=new K.crypto.DSA;else{if("2a8648ce3d0201"!==ue)throw"unsupported PKCS#8 public key hex";ae=new K.crypto.ECDSA}return ae.readPKCS8PubKeyHex(te),ae},parsePublicRawRSAKeyHex:function(te){var ue=Be.getChildIdx,ce=Be.getV,pe={};if("30"!=te.substr(0,2))throw"malformed RSA key(code:001)";var O=ue(te,0);if(2!=O.length)throw"malformed RSA key(code:002)";if("02"!=te.substr(O[0],2))throw"malformed RSA key(code:003)";if(pe.n=ce(te,O[0]),"02"!=te.substr(O[1],2))throw"malformed RSA key(code:004)";return pe.e=ce(te,O[1]),pe},parsePublicPKCS8Hex:function(te){var ae=Be,ue=ae.getChildIdx,ce=ae.getV,pe={algparam:null},O=ue(te,0);if(2!=O.length)throw"outer DERSequence shall have 2 elements: "+O.length;var H=O[0];if("30"!=te.substr(H,2))throw"malformed PKCS8 public key(code:001)";var M=ue(te,H);if(2!=M.length)throw"malformed PKCS8 public key(code:002)";if("06"!=te.substr(M[0],2))throw"malformed PKCS8 public key(code:003)";if(pe.algoid=ce(te,M[0]),"06"==te.substr(M[1],2)?pe.algparam=ce(te,M[1]):"30"==te.substr(M[1],2)&&(pe.algparam={},pe.algparam.p=ae.getVbyList(te,M[1],[0],"02"),pe.algparam.q=ae.getVbyList(te,M[1],[1],"02"),pe.algparam.g=ae.getVbyList(te,M[1],[2],"02")),"03"!=te.substr(O[1],2))throw"malformed PKCS8 public key(code:004)";return pe.key=ce(te,O[1]).substr(2),pe}}}();Nt.getKey=function(a,s,c){var Gt,h=(M=Be).getChildIdx,y=M.getVbyList,T=K.crypto,B=T.ECDSA,ie=T.DSA,q=Ze,te=On,ae=Nt;if(void 0!==q&&a instanceof q||void 0!==B&&a instanceof B||void 0!==ie&&a instanceof ie)return a;if(void 0!==a.curve&&void 0!==a.xy&&void 0===a.d)return new B({pub:a.xy,curve:a.curve});if(void 0!==a.curve&&void 0!==a.d)return new B({prv:a.d,curve:a.curve});if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0===a.d)return(Qe=new q).setPublic(a.n,a.e),Qe;if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0!==a.p&&void 0!==a.q&&void 0!==a.dp&&void 0!==a.dq&&void 0!==a.co&&void 0===a.qi)return(Qe=new q).setPrivateEx(a.n,a.e,a.d,a.p,a.q,a.dp,a.dq,a.co),Qe;if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0===a.p)return(Qe=new q).setPrivate(a.n,a.e,a.d),Qe;if(void 0!==a.p&&void 0!==a.q&&void 0!==a.g&&void 0!==a.y&&void 0===a.x)return(Qe=new ie).setPublic(a.p,a.q,a.g,a.y),Qe;if(void 0!==a.p&&void 0!==a.q&&void 0!==a.g&&void 0!==a.y&&void 0!==a.x)return(Qe=new ie).setPrivate(a.p,a.q,a.g,a.y,a.x),Qe;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0===a.d)return(Qe=new q).setPublic(Vt(a.n),Vt(a.e)),Qe;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0!==a.p&&void 0!==a.q&&void 0!==a.dp&&void 0!==a.dq&&void 0!==a.qi)return(Qe=new q).setPrivateEx(Vt(a.n),Vt(a.e),Vt(a.d),Vt(a.p),Vt(a.q),Vt(a.dp),Vt(a.dq),Vt(a.qi)),Qe;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d)return(Qe=new q).setPrivate(Vt(a.n),Vt(a.e),Vt(a.d)),Qe;if("EC"===a.kty&&void 0!==a.crv&&void 0!==a.x&&void 0!==a.y&&void 0===a.d){var ue=(qe=new B({curve:a.crv})).ecparams.keylen/4,ce="04"+("0000000000"+Vt(a.x)).slice(-ue)+("0000000000"+Vt(a.y)).slice(-ue);return qe.setPublicKeyHex(ce),qe}if("EC"===a.kty&&void 0!==a.crv&&void 0!==a.x&&void 0!==a.y&&void 0!==a.d){ue=(qe=new B({curve:a.crv})).ecparams.keylen/4,ce="04"+("0000000000"+Vt(a.x)).slice(-ue)+("0000000000"+Vt(a.y)).slice(-ue);var pe=("0000000000"+Vt(a.d)).slice(-ue);return qe.setPublicKeyHex(ce),qe.setPrivateKeyHex(pe),qe}if("pkcs5prv"===c){var O,H=a,M=Be;if(9===(O=h(H,0)).length)(Qe=new q).readPKCS5PrvKeyHex(H);else if(6===O.length)(Qe=new ie).readPKCS5PrvKeyHex(H);else{if(!(O.length>2&&"04"===H.substr(O[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(Qe=new B).readPKCS5PrvKeyHex(H)}return Qe}if("pkcs8prv"===c)return ae.getKeyFromPlainPrivatePKCS8Hex(a);if("pkcs8pub"===c)return ae._getKeyFromPublicPKCS8Hex(a);if("x509pub"===c)return jt.getPublicKeyFromCertHex(a);if(-1!=a.indexOf("-END CERTIFICATE-",0)||-1!=a.indexOf("-END X509 CERTIFICATE-",0)||-1!=a.indexOf("-END TRUSTED CERTIFICATE-",0))return jt.getPublicKeyFromCertPEM(a);if(-1!=a.indexOf("-END PUBLIC KEY-")){var E=On(a,"PUBLIC KEY");return ae._getKeyFromPublicPKCS8Hex(E)}if(-1!=a.indexOf("-END RSA PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED")){var U=te(a,"RSA PRIVATE KEY");return ae.getKey(U,null,"pkcs5prv")}if(-1!=a.indexOf("-END DSA PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED")){var ne=y(Gt=te(a,"DSA PRIVATE KEY"),0,[1],"02"),se=y(Gt,0,[2],"02"),be=y(Gt,0,[3],"02"),Fe=y(Gt,0,[4],"02"),$e=y(Gt,0,[5],"02");return(Qe=new ie).setPrivate(new ye(ne,16),new ye(se,16),new ye(be,16),new ye(Fe,16),new ye($e,16)),Qe}if(-1!=a.indexOf("-END EC PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED"))return U=te(a,"EC PRIVATE KEY"),ae.getKey(U,null,"pkcs5prv");if(-1!=a.indexOf("-END PRIVATE KEY-"))return ae.getKeyFromPlainPrivatePKCS8PEM(a);if(-1!=a.indexOf("-END RSA PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){var Ne=ae.getDecryptedKeyHex(a,s),_t=new Ze;return _t.readPKCS5PrvKeyHex(Ne),_t}if(-1!=a.indexOf("-END EC PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){var qe,Qe=y(Gt=ae.getDecryptedKeyHex(a,s),0,[1],"04"),Ct=y(Gt,0,[2,0],"06"),zt=y(Gt,0,[3,0],"03").substr(2);if(void 0===K.crypto.OID.oidhex2name[Ct])throw"undefined OID(hex) in KJUR.crypto.OID: "+Ct;return(qe=new B({curve:K.crypto.OID.oidhex2name[Ct]})).setPublicKeyHex(zt),qe.setPrivateKeyHex(Qe),qe.isPublic=!1,qe}if(-1!=a.indexOf("-END DSA PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED"))return ne=y(Gt=ae.getDecryptedKeyHex(a,s),0,[1],"02"),se=y(Gt,0,[2],"02"),be=y(Gt,0,[3],"02"),Fe=y(Gt,0,[4],"02"),$e=y(Gt,0,[5],"02"),(Qe=new ie).setPrivate(new ye(ne,16),new ye(se,16),new ye(be,16),new ye(Fe,16),new ye($e,16)),Qe;if(-1!=a.indexOf("-END ENCRYPTED PRIVATE KEY-"))return ae.getKeyFromEncryptedPKCS8PEM(a,s);throw new Error("not supported argument")},Nt.generateKeypair=function(a,s){if("RSA"==a){var c=s;(B=new Ze).generate(c,"10001"),B.isPrivate=!0,B.isPublic=!0;var h=new Ze,y=B.n.toString(16),T=B.e.toString(16);return h.setPublic(y,T),h.isPrivate=!1,h.isPublic=!0,(ie={}).prvKeyObj=B,ie.pubKeyObj=h,ie}if("EC"==a){var B,ie,q=s,te=new K.crypto.ECDSA({curve:q}).generateKeyPairHex();return(B=new K.crypto.ECDSA({curve:q})).setPublicKeyHex(te.ecpubhex),B.setPrivateKeyHex(te.ecprvhex),B.isPrivate=!0,B.isPublic=!1,(h=new K.crypto.ECDSA({curve:q})).setPublicKeyHex(te.ecpubhex),h.isPrivate=!1,h.isPublic=!0,(ie={}).prvKeyObj=B,ie.pubKeyObj=h,ie}throw"unknown algorithm: "+a},Nt.getPEM=function(a,s,c,h,y,T){var ie=K.asn1,q=ie.DERObjectIdentifier,te=ie.DERInteger,ae=ie.ASN1Util.newObject,ce=K.crypto,pe=ce.DSA,O=ce.ECDSA,H=Ze;function M(qe){return ae({seq:[{int:0},{int:{bigint:qe.n}},{int:qe.e},{int:{bigint:qe.d}},{int:{bigint:qe.p}},{int:{bigint:qe.q}},{int:{bigint:qe.dmp1}},{int:{bigint:qe.dmq1}},{int:{bigint:qe.coeff}}]})}function E(qe){return ae({seq:[{int:1},{octstr:{hex:qe.prvKeyHex}},{tag:["a0",!0,{oid:{name:qe.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+qe.pubKeyHex}}]}]})}function U(qe){return ae({seq:[{int:0},{int:{bigint:qe.p}},{int:{bigint:qe.q}},{int:{bigint:qe.g}},{int:{bigint:qe.y}},{int:{bigint:qe.x}}]})}if((void 0!==H&&a instanceof H||void 0!==pe&&a instanceof pe||void 0!==O&&a instanceof O)&&1==a.isPublic&&(void 0===s||"PKCS8PUB"==s))return dn(Fe=new(0,ie.x509.SubjectPublicKeyInfo)(a).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==s&&void 0!==H&&a instanceof H&&(void 0===c||null==c)&&1==a.isPrivate)return dn(Fe=M(a).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==s&&void 0!==O&&a instanceof O&&(void 0===c||null==c)&&1==a.isPrivate){var ne=new q({name:a.curveName}).getEncodedHex(),se=E(a).getEncodedHex(),be="";return(be+=dn(ne,"EC PARAMETERS"))+dn(se,"EC PRIVATE KEY")}if("PKCS1PRV"==s&&void 0!==pe&&a instanceof pe&&(void 0===c||null==c)&&1==a.isPrivate)return dn(Fe=U(a).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==s&&void 0!==H&&a instanceof H&&void 0!==c&&null!=c&&1==a.isPrivate){var Fe=M(a).getEncodedHex();return void 0===h&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Fe,c,h,T)}if("PKCS5PRV"==s&&void 0!==O&&a instanceof O&&void 0!==c&&null!=c&&1==a.isPrivate)return Fe=E(a).getEncodedHex(),void 0===h&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Fe,c,h,T);if("PKCS5PRV"==s&&void 0!==pe&&a instanceof pe&&void 0!==c&&null!=c&&1==a.isPrivate)return Fe=U(a).getEncodedHex(),void 0===h&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Fe,c,h,T);var $e=function(Qe,Ct){var zt=Ne(Qe,Ct);return new ae({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:zt.pbkdf2Salt}},{int:zt.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:zt.encryptionSchemeIV}}]}]}]},{octstr:{hex:zt.ciphertext}}]}).getEncodedHex()},Ne=function(Qe,Ct){var zt=fe.lib.WordArray.random(8),Gt=fe.lib.WordArray.random(8),jn=fe.PBKDF2(Ct,zt,{keySize:6,iterations:100}),xn=fe.enc.Hex.parse(Qe),Un=fe.TripleDES.encrypt(xn,jn,{iv:Gt})+"",rn={};return rn.ciphertext=Un,rn.pbkdf2Salt=fe.enc.Hex.stringify(zt),rn.pbkdf2Iter=100,rn.encryptionSchemeAlg="DES-EDE3-CBC",rn.encryptionSchemeIV=fe.enc.Hex.stringify(Gt),rn};if("PKCS8PRV"==s&&null!=H&&a instanceof H&&1==a.isPrivate){var _t=M(a).getEncodedHex();return Fe=ae({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:_t}}]}).getEncodedHex(),void 0===c||null==c?dn(Fe,"PRIVATE KEY"):dn(se=$e(Fe,c),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==s&&void 0!==O&&a instanceof O&&1==a.isPrivate)return _t=new ae({seq:[{int:1},{octstr:{hex:a.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+a.pubKeyHex}}]}]}).getEncodedHex(),Fe=ae({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:a.curveName}}]},{octstr:{hex:_t}}]}).getEncodedHex(),void 0===c||null==c?dn(Fe,"PRIVATE KEY"):dn(se=$e(Fe,c),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==s&&void 0!==pe&&a instanceof pe&&1==a.isPrivate)return _t=new te({bigint:a.x}).getEncodedHex(),Fe=ae({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:a.p}},{int:{bigint:a.q}},{int:{bigint:a.g}}]}]},{octstr:{hex:_t}}]}).getEncodedHex(),void 0===c||null==c?dn(Fe,"PRIVATE KEY"):dn(se=$e(Fe,c),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Nt.getKeyFromCSRPEM=function(a){var s=On(a,"CERTIFICATE REQUEST");return Nt.getKeyFromCSRHex(s)},Nt.getKeyFromCSRHex=function(a){var s=Nt.parseCSRHex(a);return Nt.getKey(s.p8pubkeyhex,null,"pkcs8pub")},Nt.parseCSRHex=function(a){var c=Be.getChildIdx,h=Be.getTLV,y={},T=a;if("30"!=T.substr(0,2))throw"malformed CSR(code:001)";var B=c(T,0);if(B.length<1)throw"malformed CSR(code:002)";if("30"!=T.substr(B[0],2))throw"malformed CSR(code:003)";var ie=c(T,B[0]);if(ie.length<3)throw"malformed CSR(code:004)";return y.p8pubkeyhex=h(T,ie[2]),y},Nt.getKeyID=function(a){var s=Nt,c=Be;"string"==typeof a&&-1!=a.indexOf("BEGIN ")&&(a=s.getKey(a));var h=On(s.getPEM(a)),y=c.getIdxbyList(h,0,[1]),T=c.getV(h,y).substring(2);return K.crypto.Util.hashHex(T,"sha1")},Nt.getJWKFromKey=function(a){var s={};if(a instanceof Ze&&a.isPrivate)return s.kty="RSA",s.n=ut(a.n.toString(16)),s.e=ut(a.e.toString(16)),s.d=ut(a.d.toString(16)),s.p=ut(a.p.toString(16)),s.q=ut(a.q.toString(16)),s.dp=ut(a.dmp1.toString(16)),s.dq=ut(a.dmq1.toString(16)),s.qi=ut(a.coeff.toString(16)),s;if(a instanceof Ze&&a.isPublic)return s.kty="RSA",s.n=ut(a.n.toString(16)),s.e=ut(a.e.toString(16)),s;if(a instanceof K.crypto.ECDSA&&a.isPrivate){if("P-256"!==(h=a.getShortNISTPCurveName())&&"P-384"!==h)throw"unsupported curve name for JWT: "+h;var c=a.getPublicKeyXYHex();return s.kty="EC",s.crv=h,s.x=ut(c.x),s.y=ut(c.y),s.d=ut(a.prvKeyHex),s}if(a instanceof K.crypto.ECDSA&&a.isPublic){var h;if("P-256"!==(h=a.getShortNISTPCurveName())&&"P-384"!==h)throw"unsupported curve name for JWT: "+h;return c=a.getPublicKeyXYHex(),s.kty="EC",s.crv=h,s.x=ut(c.x),s.y=ut(c.y),s}throw"not supported key object"},Ze.getPosArrayOfChildrenFromHex=function(a){return Be.getChildIdx(a,0)},Ze.getHexValueArrayOfChildrenFromHex=function(a){var s,c=Be.getV,h=c(a,(s=Ze.getPosArrayOfChildrenFromHex(a))[0]),y=c(a,s[1]),T=c(a,s[2]),B=c(a,s[3]),ie=c(a,s[4]),q=c(a,s[5]),te=c(a,s[6]),ae=c(a,s[7]),ue=c(a,s[8]);return(s=new Array).push(h,y,T,B,ie,q,te,ae,ue),s},Ze.prototype.readPrivateKeyFromPEMString=function(a){var s=On(a),c=Ze.getHexValueArrayOfChildrenFromHex(s);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},Ze.prototype.readPKCS5PrvKeyHex=function(a){var s=Ze.getHexValueArrayOfChildrenFromHex(a);this.setPrivateEx(s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8])},Ze.prototype.readPKCS8PrvKeyHex=function(a){var s,c,h,y,T,B,ie,q,ae=Be.getVbyListEx;if(!1===Be.isASN1HEX(a))throw new Error("not ASN.1 hex string");try{s=ae(a,0,[2,0,1],"02"),c=ae(a,0,[2,0,2],"02"),h=ae(a,0,[2,0,3],"02"),y=ae(a,0,[2,0,4],"02"),T=ae(a,0,[2,0,5],"02"),B=ae(a,0,[2,0,6],"02"),ie=ae(a,0,[2,0,7],"02"),q=ae(a,0,[2,0,8],"02")}catch(ue){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(s,c,h,y,T,B,ie,q)},Ze.prototype.readPKCS5PubKeyHex=function(a){var s=Be,c=s.getV;if(!1===s.isASN1HEX(a))throw new Error("keyHex is not ASN.1 hex string");var h=s.getChildIdx(a,0);if(2!==h.length||"02"!==a.substr(h[0],2)||"02"!==a.substr(h[1],2))throw new Error("wrong hex for PKCS#5 public key");var y=c(a,h[0]),T=c(a,h[1]);this.setPublic(y,T)},Ze.prototype.readPKCS8PubKeyHex=function(a){var s=Be;if(!1===s.isASN1HEX(a))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==s.getTLVbyListEx(a,0,[0,0]))throw new Error("not PKCS8 RSA public key");var c=s.getTLVbyListEx(a,0,[1,0]);this.readPKCS5PubKeyHex(c)},Ze.prototype.readCertPubKeyHex=function(a,s){var c,h;(c=new jt).readCertHex(a),h=c.getPublicKeyHex(),this.readPKCS8PubKeyHex(h)};var Sr=new RegExp("[^0-9a-f]","gi");function Tr(a,s){for(var c="",h=s/4-a.length,y=0;y<h;y++)c+="0";return c+a}function yi(a,s,c){for(var h="",y=0;h.length<s;)h+=ln(c(Rn(a+String.fromCharCode.apply(String,[(4278190080&y)>>24,(16711680&y)>>16,(65280&y)>>8,255&y])))),y+=1;return h}function fn(a){for(var s in K.crypto.Util.DIGESTINFOHEAD){var c=K.crypto.Util.DIGESTINFOHEAD[s],h=c.length;if(a.substring(0,h)==c)return[s,a.substring(h)]}return[]}function jt(a){var s,c=Be,h=c.getChildIdx,y=c.getV,T=c.getTLV,B=c.getVbyList,ie=c.getVbyListEx,q=c.getTLVbyList,te=c.getTLVbyListEx,ae=c.getIdxbyList,ue=c.getIdxbyListEx,ce=c.getVidx,pe=c.oidname,O=c.hextooidstr,H=jt,M=On;try{s=K.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(E){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==q(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return ie(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var E=te(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(E)},this.getAlgorithmIdentifierName=function(E){for(var U in s)if(E===s[U])return U;return pe(ie(E,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return q(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return H.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return q(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return H.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var E=B(this.hex,0,[0,4+this.foffset,0]);return E=E.replace(/(..)/g,"%$1"),decodeURIComponent(E)},this.getNotAfter=function(){var E=B(this.hex,0,[0,4+this.foffset,1]);return E=E.replace(/(..)/g,"%$1"),decodeURIComponent(E)},this.getPublicKeyHex=function(){return c.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return ae(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var E=this.getPublicKeyIdx();return ae(this.hex,E,[1,0],"30")},this.getPublicKey=function(){return Nt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var E=q(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(E)},this.getSignatureValueHex=function(){return B(this.hex,0,[2],"03",!0)},this.verifySignature=function(E){var U=this.getSignatureAlgorithmField(),ne=this.getSignatureValueHex(),se=q(this.hex,0,[0],"30"),be=new K.crypto.Signature({alg:U});return be.init(E),be.updateHex(se),be.verify(ne)},this.parseExt=function(E){var U,ne,se;if(void 0===E){if(3!==this.version)return-1;U=ae(se=this.hex,0,[0,7,0],"30"),ne=h(se,U)}else{se=On(E);var be=ae(se,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=y(se,be))return void(this.aExtInfo=new Array);U=ae(se,0,[0,3,0,1,0],"30"),ne=h(se,U),this.hex=se}this.aExtInfo=new Array;for(var Fe=0;Fe<ne.length;Fe++){var $e={critical:!1},Ne=0;3===h(se,ne[Fe]).length&&($e.critical=!0,Ne=1),$e.oid=c.hextooidstr(B(se,ne[Fe],[0],"06"));var _t=ae(se,ne[Fe],[1+Ne]);$e.vidx=ce(se,_t),this.aExtInfo.push($e)}},this.getExtInfo=function(E){var U=this.aExtInfo,ne=E;if(E.match(/^[0-9.]+$/)||(ne=K.asn1.x509.OID.name2oid(E)),""!==ne)for(var se=0;se<U.length;se++)if(U[se].oid===ne)return U[se]},this.getExtBasicConstraints=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("basicConstraints");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"basicConstraints"};if(U&&(se.critical=!0),"3000"===E)return se;if("30030101ff"===E)return se.cA=!0,se;if("30060101ff02"===E.substr(0,12)){var be=y(E,10),Fe=parseInt(be,16);return se.cA=!0,se.pathLen=Fe,se}throw new Error("hExtV parse error: "+E)},this.getExtKeyUsage=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("keyUsage");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"keyUsage"};return U&&(se.critical=!0),se.names=this.getExtKeyUsageString(E).split(","),se},this.getExtKeyUsageBin=function(E){if(void 0===E){var U=this.getExtInfo("keyUsage");if(void 0===U)return"";E=T(this.hex,U.vidx)}if(8!=E.length&&10!=E.length)throw new Error("malformed key usage value: "+E);var ne="000000000000000"+parseInt(E.substr(6),16).toString(2);return 8==E.length&&(ne=ne.slice(-8)),10==E.length&&(ne=ne.slice(-16)),""==(ne=ne.replace(/0+$/,""))&&(ne="0"),ne},this.getExtKeyUsageString=function(E){for(var U=this.getExtKeyUsageBin(E),ne=new Array,se=0;se<U.length;se++)"1"==U.substr(se,1)&&ne.push(jt.KEYUSAGE_NAME[se]);return ne.join(",")},this.getExtSubjectKeyIdentifier=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("subjectKeyIdentifier");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"subjectKeyIdentifier"};U&&(se.critical=!0);var be=y(E,0);return se.kid={hex:be},se},this.getExtAuthorityKeyIdentifier=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("authorityKeyIdentifier");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"authorityKeyIdentifier"};U&&(se.critical=!0);for(var be=h(E,0),Fe=0;Fe<be.length;Fe++){var $e=E.substr(be[Fe],2);if("80"===$e&&(se.kid={hex:y(E,be[Fe])}),"a1"===$e){var Ne=T(E,be[Fe]),_t=this.getGeneralNames(Ne);se.issuer=_t[0].dn}"82"===$e&&(se.sn={hex:y(E,be[Fe])})}return se},this.getExtExtKeyUsage=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("extKeyUsage");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"extKeyUsage",array:[]};U&&(se.critical=!0);for(var be=h(E,0),Fe=0;Fe<be.length;Fe++)se.array.push(pe(y(E,be[Fe])));return se},this.getExtExtKeyUsageName=function(){var E=this.getExtInfo("extKeyUsage");if(void 0===E)return E;var U=new Array,ne=T(this.hex,E.vidx);if(""===ne)return U;for(var se=h(ne,0),be=0;be<se.length;be++)U.push(pe(y(ne,se[be])));return U},this.getExtSubjectAltName=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("subjectAltName");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"subjectAltName",array:[]};return U&&(se.critical=!0),se.array=this.getGeneralNames(E),se},this.getExtIssuerAltName=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("issuerAltName");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"issuerAltName",array:[]};return U&&(se.critical=!0),se.array=this.getGeneralNames(E),se},this.getGeneralNames=function(E){for(var U=h(E,0),ne=[],se=0;se<U.length;se++){var be=this.getGeneralName(T(E,U[se]));void 0!==be&&ne.push(be)}return ne},this.getGeneralName=function(E){var U=E.substr(0,2),ne=y(E,0),se=ln(ne);return"81"==U?{rfc822:se}:"82"==U?{dns:se}:"86"==U?{uri:se}:"87"==U?{ip:mi(ne)}:"a4"==U?{dn:this.getX500Name(ne)}:void 0},this.getExtSubjectAltName2=function(){var E,U,ne,se=this.getExtInfo("subjectAltName");if(void 0===se)return se;for(var be=new Array,Fe=T(this.hex,se.vidx),$e=h(Fe,0),Ne=0;Ne<$e.length;Ne++)ne=Fe.substr($e[Ne],2),E=y(Fe,$e[Ne]),"81"===ne&&(U=ct(E),be.push(["MAIL",U])),"82"===ne&&(U=ct(E),be.push(["DNS",U])),"84"===ne&&(U=jt.hex2dn(E,0),be.push(["DN",U])),"86"===ne&&(U=ct(E),be.push(["URI",U])),"87"===ne&&(U=mi(E),be.push(["IP",U]));return be},this.getExtCRLDistributionPoints=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("cRLDistributionPoints");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"cRLDistributionPoints",array:[]};U&&(se.critical=!0);for(var be=h(E,0),Fe=0;Fe<be.length;Fe++){var $e=T(E,be[Fe]);se.array.push(this.getDistributionPoint($e))}return se},this.getDistributionPoint=function(E){for(var U={},ne=h(E,0),se=0;se<ne.length;se++){var be=E.substr(ne[se],2),Fe=T(E,ne[se]);"a0"==be&&(U.dpname=this.getDistributionPointName(Fe))}return U},this.getDistributionPointName=function(E){for(var U={},ne=h(E,0),se=0;se<ne.length;se++){var be=E.substr(ne[se],2),Fe=T(E,ne[se]);"a0"==be&&(U.full=this.getGeneralNames(Fe))}return U},this.getExtCRLDistributionPointsURI=function(){var E=this.getExtInfo("cRLDistributionPoints");if(void 0===E)return E;for(var U=new Array,ne=h(this.hex,E.vidx),se=0;se<ne.length;se++)try{var be=ct(B(this.hex,ne[se],[0,0,0],"86"));U.push(be)}catch(Fe){}return U},this.getExtAIAInfo=function(){var E=this.getExtInfo("authorityInfoAccess");if(void 0===E)return E;for(var U={ocsp:[],caissuer:[]},ne=h(this.hex,E.vidx),se=0;se<ne.length;se++){var be=B(this.hex,ne[se],[0],"06"),Fe=B(this.hex,ne[se],[1],"86");"2b06010505073001"===be&&U.ocsp.push(ct(Fe)),"2b06010505073002"===be&&U.caissuer.push(ct(Fe))}return U},this.getExtAuthorityInfoAccess=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("authorityInfoAccess");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"authorityInfoAccess",array:[]};U&&(se.critical=!0);for(var be=h(E,0),Fe=0;Fe<be.length;Fe++){var $e=ie(E,be[Fe],[0],"06"),Ne=ct(B(E,be[Fe],[1],"86"));if("2b06010505073001"==$e)se.array.push({ocsp:Ne});else{if("2b06010505073002"!=$e)throw new Error("unknown method: "+$e);se.array.push({caissuer:Ne})}}return se},this.getExtCertificatePolicies=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("certificatePolicies");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"certificatePolicies",array:[]};U&&(se.critical=!0);for(var be=h(E,0),Fe=0;Fe<be.length;Fe++){var $e=T(E,be[Fe]),Ne=this.getPolicyInformation($e);se.array.push(Ne)}return se},this.getPolicyInformation=function(E){var U={},ne=B(E,0,[0],"06");U.policyoid=pe(ne);var se=ue(E,0,[1],"30");if(-1!=se){U.array=[];for(var be=h(E,se),Fe=0;Fe<be.length;Fe++){var $e=T(E,be[Fe]),Ne=this.getPolicyQualifierInfo($e);U.array.push(Ne)}}return U},this.getPolicyQualifierInfo=function(E){var U={},ne=B(E,0,[0],"06");if("2b06010505070201"===ne){var se=ie(E,0,[1],"16");U.cps=ln(se)}else if("2b06010505070202"===ne){var be=q(E,0,[1],"30");U.unotice=this.getUserNotice(be)}return U},this.getUserNotice=function(E){for(var U={},ne=h(E,0),se=0;se<ne.length;se++){var be=T(E,ne[se]);"30"!=be.substr(0,2)&&(U.exptext=this.getDisplayText(be))}return U},this.getDisplayText=function(E){var U={};return U.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[E.substr(0,2)],U.str=ln(y(E,0)),U},this.getExtCRLNumber=function(E,U){var ne={extname:"cRLNumber"};if(U&&(ne.critical=!0),"02"==E.substr(0,2))return ne.num={hex:y(E,0)},ne;throw new Error("hExtV parse error: "+E)},this.getExtCRLReason=function(E,U){var ne={extname:"cRLReason"};if(U&&(ne.critical=!0),"0a"==E.substr(0,2))return ne.code=parseInt(y(E,0),16),ne;throw new Error("hExtV parse error: "+E)},this.getExtOcspNonce=function(E,U){var ne={extname:"ocspNonce"};U&&(ne.critical=!0);var se=y(E,0);return ne.hex=se,ne},this.getExtOcspNoCheck=function(E,U){var ne={extname:"ocspNoCheck"};return U&&(ne.critical=!0),ne},this.getExtAdobeTimeStamp=function(E,U){if(void 0===E&&void 0===U){var ne=this.getExtInfo("adobeTimeStamp");if(void 0===ne)return;E=T(this.hex,ne.vidx),U=ne.critical}var se={extname:"adobeTimeStamp"};U&&(se.critical=!0);var be=h(E,0);if(be.length>1){var Fe=T(E,be[1]),$e=this.getGeneralName(Fe);null!=$e.uri&&(se.uri=$e.uri)}if(be.length>2){var Ne=T(E,be[2]);"0101ff"==Ne&&(se.reqauth=!0),"010100"==Ne&&(se.reqauth=!1)}return se},this.getX500NameRule=function(E){for(var U=null,ne=[],se=0;se<E.length;se++)for(var be=E[se],Fe=0;Fe<be.length;Fe++)ne.push(be[Fe]);for(se=0;se<ne.length;se++){var $e=ne[se],Ne=$e.ds,qe=$e.type;if("prn"!=Ne&&"utf8"!=Ne&&"ia5"!=Ne)return"mixed";if("ia5"==Ne){if("CN"!=qe)return"mixed";if(K.lang.String.isMail($e.value))continue;return"mixed"}if("C"==qe){if("prn"==Ne)continue;return"mixed"}if(null==U)U=Ne;else if(U!==Ne)return"mixed"}return null==U?"prn":U},this.getX500Name=function(E){var U=this.getX500NameArray(E);return{array:U,str:this.dnarraytostr(U)}},this.getX500NameArray=function(E){for(var U=[],ne=h(E,0),se=0;se<ne.length;se++)U.push(this.getRDN(T(E,ne[se])));return U},this.getRDN=function(E){for(var U=[],ne=h(E,0),se=0;se<ne.length;se++)U.push(this.getAttrTypeAndValue(T(E,ne[se])));return U},this.getAttrTypeAndValue=function(E){var U={type:null,value:null,ds:null},ne=h(E,0),se=B(E,ne[0],[],"06"),be=B(E,ne[1],[]),Fe=K.asn1.ASN1Util.oidHexToInt(se);return U.type=K.asn1.x509.OID.oid2atype(Fe),U.value=ln(be),U.ds=this.HEX2STAG[E.substr(ne[1],2)],U},this.readCertPEM=function(E){this.readCertHex(M(E))},this.readCertHex=function(E){this.hex=E,this.getVersion();try{ae(this.hex,0,[0,7],"a3"),this.parseExt()}catch(U){}},this.getParam=function(){var E={};return E.version=this.getVersion(),E.serial={hex:this.getSerialNumberHex()},E.sigalg=this.getSignatureAlgorithmField(),E.issuer=this.getIssuer(),E.notbefore=this.getNotBefore(),E.notafter=this.getNotAfter(),E.subject=this.getSubject(),E.sbjpubkey=dn(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(E.ext=this.getExtParamArray()),E.sighex=this.getSignatureValueHex(),E},this.getExtParamArray=function(E){null==E&&-1!=ue(this.hex,0,[0,"[3]"])&&(E=te(this.hex,0,[0,"[3]",0],"30"));for(var U=[],ne=h(E,0),se=0;se<ne.length;se++){var be=T(E,ne[se]),Fe=this.getExtParam(be);null!=Fe&&U.push(Fe)}return U},this.getExtParam=function(E){var U=h(E,0).length;if(2!=U&&3!=U)throw new Error("wrong number elements in Extension: "+U+" "+E);var ne=O(B(E,0,[0],"06")),se=!1;3==U&&"0101ff"==q(E,0,[1])&&(se=!0);var be=q(E,0,[U-1,0]),Fe=void 0;if("2.5.29.14"==ne?Fe=this.getExtSubjectKeyIdentifier(be,se):"2.5.29.15"==ne?Fe=this.getExtKeyUsage(be,se):"2.5.29.17"==ne?Fe=this.getExtSubjectAltName(be,se):"2.5.29.18"==ne?Fe=this.getExtIssuerAltName(be,se):"2.5.29.19"==ne?Fe=this.getExtBasicConstraints(be,se):"2.5.29.31"==ne?Fe=this.getExtCRLDistributionPoints(be,se):"2.5.29.32"==ne?Fe=this.getExtCertificatePolicies(be,se):"2.5.29.35"==ne?Fe=this.getExtAuthorityKeyIdentifier(be,se):"2.5.29.37"==ne?Fe=this.getExtExtKeyUsage(be,se):"1.3.6.1.5.5.7.1.1"==ne?Fe=this.getExtAuthorityInfoAccess(be,se):"2.5.29.20"==ne?Fe=this.getExtCRLNumber(be,se):"2.5.29.21"==ne?Fe=this.getExtCRLReason(be,se):"1.3.6.1.5.5.7.48.1.2"==ne?Fe=this.getExtOcspNonce(be,se):"1.3.6.1.5.5.7.48.1.5"==ne?Fe=this.getExtOcspNoCheck(be,se):"1.2.840.113583.1.1.9.1"==ne&&(Fe=this.getExtAdobeTimeStamp(be,se)),null!=Fe)return Fe;var $e={extname:ne,extn:be};return se&&($e.critical=!0),$e},this.findExt=function(E,U){for(var ne=0;ne<E.length;ne++)if(E[ne].extname==U)return E[ne];return null},this.updateExtCDPFullURI=function(E,U){var ne=this.findExt(E,"cRLDistributionPoints");if(null!=ne&&null!=ne.array)for(var se=ne.array,be=0;be<se.length;be++)if(null!=se[be].dpname&&null!=se[be].dpname.full)for(var Fe=se[be].dpname.full,$e=0;$e<Fe.length;$e++){var Ne=Fe[be];null!=Ne.uri&&(Ne.uri=U)}},this.updateExtAIAOCSP=function(E,U){var ne=this.findExt(E,"authorityInfoAccess");if(null!=ne&&null!=ne.array)for(var se=ne.array,be=0;be<se.length;be++)null!=se[be].ocsp&&(se[be].ocsp=U)},this.updateExtAIACAIssuer=function(E,U){var ne=this.findExt(E,"authorityInfoAccess");if(null!=ne&&null!=ne.array)for(var se=ne.array,be=0;be<se.length;be++)null!=se[be].caissuer&&(se[be].caissuer=U)},this.dnarraytostr=function(E){return"/"+E.map(function(U){return U.map(function(be){return($e=be).type+"="+$e.value;var $e}).join("+")}).join("/")},this.getInfo=function(){var E,U,ne,jn,be=function(jn){for(var xn="",Un=jn.array,rn=0;rn<Un.length;rn++){var un=Un[rn];if(xn+="    policy oid: "+un.policyoid+"\n",void 0!==un.array)for(var _n=0;_n<un.array.length;_n++){var tn=un.array[_n];void 0!==tn.cps&&(xn+="    cps: "+tn.cps+"\n")}}return xn},Fe=function(jn){for(var xn="",Un=jn.array,rn=0;rn<Un.length;rn++){var un=Un[rn];try{void 0!==un.dpname.full[0].uri&&(xn+="    "+un.dpname.full[0].uri+"\n")}catch(_n){}try{void 0!==un.dname.full[0].dn.hex&&(xn+="    "+jt.hex2dn(un.dpname.full[0].dn.hex)+"\n")}catch(_n){}}return xn},$e=function(jn){for(var xn="",Un=jn.array,rn=0;rn<Un.length;rn++){var un=Un[rn];void 0!==un.caissuer&&(xn+="    caissuer: "+un.caissuer+"\n"),void 0!==un.ocsp&&(xn+="    ocsp: "+un.ocsp+"\n")}return xn};if(E="Basic Fields\n",E+="  serial number: "+this.getSerialNumberHex()+"\n",E+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",E+="  issuer: "+this.getIssuerString()+"\n",E+="  notBefore: "+this.getNotBefore()+"\n",E+="  notAfter: "+this.getNotAfter()+"\n",E+="  subject: "+this.getSubjectString()+"\n",E+="  subject public key info: \n",E+="    key algorithm: "+(U=this.getPublicKey()).type+"\n","RSA"===U.type&&(E+="    n="+lt(U.n.toString(16)).substr(0,16)+"...\n",E+="    e="+lt(U.e.toString(16))+"\n"),null!=(ne=this.aExtInfo)){E+="X509v3 Extensions:\n";for(var Ne=0;Ne<ne.length;Ne++){var _t=ne[Ne],qe=K.asn1.x509.OID.oid2name(_t.oid);""===qe&&(qe=_t.oid);var Qe="";if(!0===_t.critical&&(Qe="CRITICAL"),E+="  "+qe+" "+Qe+":\n","basicConstraints"===qe){var Ct=this.getExtBasicConstraints();void 0===Ct.cA?E+="    {}\n":(E+="    cA=true",void 0!==Ct.pathLen&&(E+=", pathLen="+Ct.pathLen),E+="\n")}else if("keyUsage"===qe)E+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===qe)E+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===qe){var zt=this.getExtAuthorityKeyIdentifier();void 0!==zt.kid&&(E+="    kid="+zt.kid.hex+"\n")}else"extKeyUsage"===qe?E+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===qe?E+="    "+(jn=this.getExtSubjectAltName(),JSON.stringify(jn.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===qe?E+=Fe(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===qe?E+=$e(this.getExtAuthorityInfoAccess()):"certificatePolicies"===qe&&(E+=be(this.getExtCertificatePolicies()))}}return(E+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof a&&(-1!=a.indexOf("-----BEGIN")?this.readCertPEM(a):K.lang.String.isHex(a)&&this.readCertHex(a))}Ze.prototype.sign=function(a,s){var c=function(y){return K.crypto.Util.hashString(y,s)}(a);return this.signWithMessageHash(c,s)},Ze.prototype.signWithMessageHash=function(a,s){var c=yn(K.crypto.Util.getPaddedDigestInfoHex(a,s,this.n.bitLength()),16);return Tr(this.doPrivate(c).toString(16),this.n.bitLength())},Ze.prototype.signPSS=function(a,s,c){var T,h=(T=Rn(a),K.crypto.Util.hashHex(T,s));return void 0===c&&(c=-1),this.signWithMessageHashPSS(h,s,c)},Ze.prototype.signWithMessageHashPSS=function(a,s,c){var h,y=ln(a),T=y.length,B=this.n.bitLength()-1,ie=Math.ceil(B/8),q=function(E){return K.crypto.Util.hashHex(E,s)};if(-1===c||void 0===c)c=T;else if(-2===c)c=ie-T-2;else if(c<-2)throw new Error("invalid salt length");if(ie<T+c+2)throw new Error("data too long");var te="";c>0&&(te=new Array(c),(new nn).nextBytes(te),te=String.fromCharCode.apply(String,te));var ae=ln(q(Rn("\0\0\0\0\0\0\0\0"+y+te))),ue=[];for(h=0;h<ie-c-T-2;h+=1)ue[h]=0;var ce=String.fromCharCode.apply(String,ue)+"\x01"+te,pe=yi(ae,ce.length,q),O=[];for(h=0;h<ce.length;h+=1)O[h]=ce.charCodeAt(h)^pe.charCodeAt(h);for(O[0]&=~(65280>>8*ie-B&255),h=0;h<T;h++)O.push(ae.charCodeAt(h));return O.push(188),Tr(this.doPrivate(new ye(O)).toString(16),this.n.bitLength())},Ze.prototype.verify=function(a,s){var c=yn(s=(s=s.replace(Sr,"")).replace(/[ \n]+/g,""),16);if(c.bitLength()>this.n.bitLength())return 0;var h=fn(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=h.length&&h[1]==K.crypto.Util.hashString(a,h[0])},Ze.prototype.verifyWithMessageHash=function(a,s){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var c=yn(s,16);if(c.bitLength()>this.n.bitLength())return 0;var h=fn(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=h.length&&h[1]==a},Ze.prototype.verifyPSS=function(a,s,c,h){var B,y=(B=Rn(a),K.crypto.Util.hashHex(B,c));return void 0===h&&(h=-1),this.verifyWithMessageHashPSS(y,s,c,h)},Ze.prototype.verifyWithMessageHashPSS=function(a,s,c,h){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var y,T=new ye(s,16),B=function(ne){return K.crypto.Util.hashHex(ne,c)},ie=ln(a),q=ie.length,te=this.n.bitLength()-1,ae=Math.ceil(te/8);if(-1===h||void 0===h)h=q;else if(-2===h)h=ae-q-2;else if(h<-2)throw new Error("invalid salt length");if(ae<q+h+2)throw new Error("data too long");var ue=this.doPublic(T).toByteArray();for(y=0;y<ue.length;y+=1)ue[y]&=255;for(;ue.length<ae;)ue.unshift(0);if(188!==ue[ae-1])throw new Error("encoded message does not end in 0xbc");var ce=(ue=String.fromCharCode.apply(String,ue)).substr(0,ae-q-1),pe=ue.substr(ce.length,q),O=65280>>8*ae-te&255;if(0!=(ce.charCodeAt(0)&O))throw new Error("bits beyond keysize not zero");var H=yi(pe,ce.length,B),M=[];for(y=0;y<ce.length;y+=1)M[y]=ce.charCodeAt(y)^H.charCodeAt(y);M[0]&=~O;var E=ae-q-h-2;for(y=0;y<E;y+=1)if(0!==M[y])throw new Error("leftmost octets not zero");if(1!==M[E])throw new Error("0x01 marker not found");return pe===ln(B(Rn("\0\0\0\0\0\0\0\0"+ie+String.fromCharCode.apply(String,M.slice(-h)))))},Ze.SALT_LEN_HLEN=-1,Ze.SALT_LEN_MAX=-2,Ze.SALT_LEN_RECOVER=-2,jt.hex2dn=function(a,s){if(void 0===s&&(s=0),"30"!==a.substr(s,2))throw new Error("malformed DN");for(var c=new Array,h=Be.getChildIdx(a,s),y=0;y<h.length;y++)c.push(jt.hex2rdn(a,h[y]));return"/"+(c=c.map(function(T){return T.replace("/","\\/")})).join("/")},jt.hex2rdn=function(a,s){if(void 0===s&&(s=0),"31"!==a.substr(s,2))throw new Error("malformed RDN");for(var c=new Array,h=Be.getChildIdx(a,s),y=0;y<h.length;y++)c.push(jt.hex2attrTypeValue(a,h[y]));return(c=c.map(function(T){return T.replace("+","\\+")})).join("+")},jt.hex2attrTypeValue=function(a,s){var c=Be,h=c.getV;if(void 0===s&&(s=0),"30"!==a.substr(s,2))throw new Error("malformed attribute type and value");var y=c.getChildIdx(a,s);2!==y.length||a.substr(y[0],2);var T=h(a,y[0]),B=K.asn1.ASN1Util.oidHexToInt(T);return K.asn1.x509.OID.oid2atype(B)+"="+ln(h(a,y[1]))},jt.getPublicKeyFromCertHex=function(a){var s=new jt;return s.readCertHex(a),s.getPublicKey()},jt.getPublicKeyFromCertPEM=function(a){var s=new jt;return s.readCertPEM(a),s.getPublicKey()},jt.getPublicKeyInfoPropOfCertPEM=function(a){var s,c,h=Be.getVbyList,y={algparam:null};return(s=new jt).readCertPEM(a),c=s.getPublicKeyHex(),y.keyhex=h(c,0,[1],"03").substr(2),y.algoid=h(c,0,[0,0],"06"),"2a8648ce3d0201"===y.algoid&&(y.algparam=h(c,0,[0,1],"06")),y},jt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==K&&K||(R.KJUR=K={}),void 0!==K.jws&&K.jws||(K.jws={}),K.jws.JWS=function(){var a=K.jws.JWS.isSafeJSONString;this.parseJWS=function(s,c){if(void 0===this.parsedJWS||!c&&void 0===this.parsedJWS.sigvalH){var h=s.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==h)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var y=h[1],T=h[2],B=h[3],ie=y+"."+T;if(this.parsedJWS={},this.parsedJWS.headB64U=y,this.parsedJWS.payloadB64U=T,this.parsedJWS.sigvalB64U=B,this.parsedJWS.si=ie,!c){var q=Vt(B),te=yn(q,16);this.parsedJWS.sigvalH=q,this.parsedJWS.sigvalBI=te}var ae=an(y),ue=an(T);if(this.parsedJWS.headS=ae,this.parsedJWS.payloadS=ue,!a(ae,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+ae}}},K.jws.JWS.sign=function(a,s,c,h,y){var T,B,ie,te=K.jws.JWS,ae=te.readSafeJSONString,ue=te.isSafeJSONString,ce=K.crypto,pe=ce.Mac,O=ce.Signature,H=JSON;if("string"!=typeof s&&"object"!=(void 0===s?"undefined":k(s)))throw"spHeader must be JSON string or object: "+s;if("object"==(void 0===s?"undefined":k(s))&&(T=H.stringify(B=s)),"string"==typeof s){if(!ue(T=s))throw"JWS Head is not safe JSON string: "+T;B=ae(T)}if(ie=c,"object"==(void 0===c?"undefined":k(c))&&(ie=H.stringify(c)),""!=a&&null!=a||void 0===B.alg||(a=B.alg),""!=a&&null!=a&&void 0===B.alg&&(B.alg=a,T=H.stringify(B)),a!==B.alg)throw"alg and sHeader.alg doesn't match: "+a+"!="+B.alg;var M=null;if(void 0===te.jwsalg2sigalg[a])throw"unsupported alg name: "+a;M=te.jwsalg2sigalg[a];var E=nt(T)+"."+nt(ie),U="";if("Hmac"==M.substr(0,4)){if(void 0===h)throw"mac key shall be specified for HS* alg";var ne=new pe({alg:M,prov:"cryptojs",pass:h});ne.updateString(E),U=ne.doFinal()}else if(-1!=M.indexOf("withECDSA")){(be=new O({alg:M})).init(h,y),be.updateString(E);var se=be.sign();U=K.crypto.ECDSA.asn1SigToConcatSig(se)}else{var be;"none"!=M&&((be=new O({alg:M})).init(h,y),be.updateString(E),U=be.sign())}return E+"."+ut(U)},K.jws.JWS.verify=function(a,s,c){var h,T=K.jws.JWS,B=T.readSafeJSONString,ie=K.crypto,q=ie.ECDSA,te=ie.Mac,ae=ie.Signature;void 0!==k(Ze)&&(h=Ze);var ue=a.split(".");if(3!==ue.length)return!1;var M,ce=ue[0]+"."+ue[1],pe=Vt(ue[2]),O=B(an(ue[0])),H=null;if(void 0===O.alg)throw"algorithm not specified in header";if(M=(H=O.alg).substr(0,2),null!=c&&"[object Array]"===Object.prototype.toString.call(c)&&c.length>0&&-1==(":"+c.join(":")+":").indexOf(":"+H+":"))throw"algorithm '"+H+"' not accepted in the list";if("none"!=H&&null===s)throw"key shall be specified to verify.";if("string"==typeof s&&-1!=s.indexOf("-----BEGIN ")&&(s=Nt.getKey(s)),!("RS"!=M&&"PS"!=M||s instanceof h))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==M&&!(s instanceof q))throw"key shall be a ECDSA obj for ES* algs";var E=null;if(void 0===T.jwsalg2sigalg[O.alg])throw"unsupported alg name: "+H;if("none"==(E=T.jwsalg2sigalg[H]))throw"not supported";if("Hmac"==E.substr(0,4)){if(void 0===s)throw"hexadecimal key shall be specified for HMAC";var U=new te({alg:E,pass:s});return U.updateString(ce),pe==U.doFinal()}if(-1!=E.indexOf("withECDSA")){var ne,se=null;try{se=q.concatSigToASN1Sig(pe)}catch(be){return!1}return(ne=new ae({alg:E})).init(s),ne.updateString(ce),ne.verify(se)}return(ne=new ae({alg:E})).init(s),ne.updateString(ce),ne.verify(pe)},K.jws.JWS.parse=function(a){var c,h,y=a.split("."),T={};if(2!=y.length&&3!=y.length)throw"malformed sJWS: wrong number of '.' splitted elements";return c=y[1],3==y.length&&(h=y[2]),T.headerObj=K.jws.JWS.readSafeJSONString(an(y[0])),T.payloadObj=K.jws.JWS.readSafeJSONString(an(c)),T.headerPP=JSON.stringify(T.headerObj,null,"  "),T.payloadPP=null==T.payloadObj?an(c):JSON.stringify(T.payloadObj,null,"  "),void 0!==h&&(T.sigHex=Vt(h)),T},K.jws.JWS.verifyJWT=function(a,s,c){var h=K.jws,y=h.JWS,T=y.readSafeJSONString,B=y.inArray,ie=y.includedArray,q=a.split("."),te=q[0],ae=q[1],ue=(Vt(q[2]),T(an(te))),ce=T(an(ae));if(void 0===ue.alg)return!1;if(void 0===c.alg)throw"acceptField.alg shall be specified";if(!B(ue.alg,c.alg)||void 0!==ce.iss&&"object"===k(c.iss)&&!B(ce.iss,c.iss)||void 0!==ce.sub&&"object"===k(c.sub)&&!B(ce.sub,c.sub))return!1;if(void 0!==ce.aud&&"object"===k(c.aud))if("string"==typeof ce.aud){if(!B(ce.aud,c.aud))return!1}else if("object"==k(ce.aud)&&!ie(ce.aud,c.aud))return!1;var pe=h.IntDate.getNow();return void 0!==c.verifyAt&&"number"==typeof c.verifyAt&&(pe=c.verifyAt),void 0!==c.gracePeriod&&"number"==typeof c.gracePeriod||(c.gracePeriod=0),!(void 0!==ce.exp&&"number"==typeof ce.exp&&ce.exp+c.gracePeriod<pe||void 0!==ce.nbf&&"number"==typeof ce.nbf&&pe<ce.nbf-c.gracePeriod||void 0!==ce.iat&&"number"==typeof ce.iat&&pe<ce.iat-c.gracePeriod||void 0!==ce.jti&&void 0!==c.jti&&ce.jti!==c.jti||!y.verify(a,s,c.alg))},K.jws.JWS.includedArray=function(a,s){var c=K.jws.JWS.inArray;if(null===a||"object"!==(void 0===a?"undefined":k(a))||"number"!=typeof a.length)return!1;for(var h=0;h<a.length;h++)if(!c(a[h],s))return!1;return!0},K.jws.JWS.inArray=function(a,s){if(null===s||"object"!==(void 0===s?"undefined":k(s))||"number"!=typeof s.length)return!1;for(var c=0;c<s.length;c++)if(s[c]==a)return!0;return!1},K.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},K.jws.JWS.isSafeJSONString=function(a,s,c){var h=null;try{return"object"!=(void 0===(h=Kt(a))?"undefined":k(h))||h.constructor===Array?0:(s&&(s[c]=h),1)}catch(y){return 0}},K.jws.JWS.readSafeJSONString=function(a){var s=null;try{return"object"!=(void 0===(s=Kt(a))?"undefined":k(s))||s.constructor===Array?null:s}catch(c){return null}},K.jws.JWS.getEncodedSignatureValueFromJWS=function(a){var s=a.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==s)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return s[1]},K.jws.JWS.getJWKthumbprint=function(a){if("RSA"!==a.kty&&"EC"!==a.kty&&"oct"!==a.kty)throw"unsupported algorithm for JWK Thumprint";var s="{";if("RSA"===a.kty){if("string"!=typeof a.n||"string"!=typeof a.e)throw"wrong n and e value for RSA key";s+='"e":"'+a.e+'",',s+='"kty":"'+a.kty+'",',s+='"n":"'+a.n+'"}'}else if("EC"===a.kty){if("string"!=typeof a.crv||"string"!=typeof a.x||"string"!=typeof a.y)throw"wrong crv, x and y value for EC key";s+='"crv":"'+a.crv+'",',s+='"kty":"'+a.kty+'",',s+='"x":"'+a.x+'",',s+='"y":"'+a.y+'"}'}else if("oct"===a.kty){if("string"!=typeof a.k)throw"wrong k value for oct(symmetric) key";s+='"kty":"'+a.kty+'",',s+='"k":"'+a.k+'"}'}var c=Rn(s);return ut(K.crypto.Util.hashHex(c,"sha256"))},K.jws.IntDate={},K.jws.IntDate.get=function(a){var s=K.jws.IntDate,c=s.getNow,h=s.getZulu;if("now"==a)return c();if("now + 1hour"==a)return c()+3600;if("now + 1day"==a)return c()+86400;if("now + 1month"==a)return c()+2592e3;if("now + 1year"==a)return c()+31536e3;if(a.match(/Z$/))return h(a);if(a.match(/^[0-9]+$/))return parseInt(a);throw"unsupported format: "+a},K.jws.IntDate.getZulu=function(a){return pi(a)},K.jws.IntDate.getNow=function(){return~~(new Date/1e3)},K.jws.IntDate.intDate2UTCString=function(a){return new Date(1e3*a).toUTCString()},K.jws.IntDate.intDate2Zulu=function(a){var s=new Date(1e3*a);return("0000"+s.getUTCFullYear()).slice(-4)+("00"+(s.getUTCMonth()+1)).slice(-2)+("00"+s.getUTCDate()).slice(-2)+("00"+s.getUTCHours()).slice(-2)+("00"+s.getUTCMinutes()).slice(-2)+("00"+s.getUTCSeconds()).slice(-2)+"Z"},R.SecureRandom=nn,R.rng_seed_time=xe,R.BigInteger=ye,R.RSAKey=Ze,R.EDSA=K.crypto.EDSA,R.DSA=K.crypto.DSA,R.Signature=K.crypto.Signature,R.MessageDigest=K.crypto.MessageDigest,R.Mac=K.crypto.Mac,R.Cipher=K.crypto.Cipher,R.KEYUTIL=Nt,R.ASN1HEX=Be,R.X509=jt,R.CryptoJS=fe,R.b64tohex=Oe,R.b64toBA=Ve,R.stoBA=vn,R.BAtos=Lt,R.BAtohex=Nn,R.stohex=tr,R.stob64=function(s){return Pe(tr(s))},R.stob64u=function(s){return yt(Pe(tr(s)))},R.b64utos=function(s){return Lt(Ve(Ir(s)))},R.b64tob64u=yt,R.b64utob64=Ir,R.hex2b64=Pe,R.hextob64u=ut,R.b64utohex=Vt,R.utf8tob64u=nt,R.b64utoutf8=an,R.utf8tob64=function(s){return Pe(Pn(Cr(s)))},R.b64toutf8=function(s){return decodeURIComponent(rr(Oe(s)))},R.utf8tohex=nr,R.hextoutf8=ct,R.hextorstr=ln,R.rstrtohex=Rn,R.hextob64=Zn,R.hextob64nl=Tt,R.b64nltohex=pr,R.hextopem=dn,R.pemtohex=On,R.hextoArrayBuffer=function(s){if(s.length%2!=0)throw"input is not even length";if(null==s.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var c=new ArrayBuffer(s.length/2),h=new DataView(c),y=0;y<s.length/2;y++)h.setUint8(y,parseInt(s.substr(2*y,2),16));return c},R.ArrayBuffertohex=function(s){for(var c="",h=new DataView(s),y=0;y<s.byteLength;y++)c+=("00"+h.getUint8(y).toString(16)).slice(-2);return c},R.zulutomsec=Ar,R.zulutosec=pi,R.zulutodate=function(s){return new Date(Ar(s))},R.datetozulu=function(s,c,h){var y,T=s.getUTCFullYear();if(c){if(T<1950||2049<T)throw"not proper year for UTCTime: "+T;y=(""+T).slice(-2)}else y=("000"+T).slice(-4);if(y+=("0"+(s.getUTCMonth()+1)).slice(-2),y+=("0"+s.getUTCDate()).slice(-2),y+=("0"+s.getUTCHours()).slice(-2),y+=("0"+s.getUTCMinutes()).slice(-2),y+=("0"+s.getUTCSeconds()).slice(-2),h){var B=s.getUTCMilliseconds();0!==B&&(y+="."+(B=(B=("00"+B).slice(-3)).replace(/0+$/g,"")))}return y+"Z"},R.uricmptohex=Pn,R.hextouricmp=rr,R.ipv6tohex=gi,R.hextoipv6=Vr,R.hextoip=mi,R.iptohex=function(s){var c="malformed IP address";if(!(s=s.toLowerCase(s)).match(/^[0-9.]+$/)){if(s.match(/^[0-9a-f:]+$/)&&-1!==s.indexOf(":"))return gi(s);throw c}var h=s.split(".");if(4!==h.length)throw c;var y="";try{for(var T=0;T<4;T++)y+=("0"+parseInt(h[T]).toString(16)).slice(-2);return y}catch(B){throw c}},R.encodeURIComponentAll=Cr,R.newline_toUnix=function(s){return s.replace(/\r\n/gm,"\n")},R.newline_toDos=function(s){return(s=s.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},R.hextoposhex=lt,R.intarystrtohex=function(s){s=(s=(s=s.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return s.split(/,/).map(function(c,h,y){var T=parseInt(c);if(T<0||255<T)throw"integer not in range 0-255";return("00"+T.toString(16)).slice(-2)}).join("")}catch(c){throw"malformed integer array string: "+c}},R.strdiffidx=function(s,c){var h=s.length;s.length>c.length&&(h=c.length);for(var y=0;y<h;y++)if(s.charCodeAt(y)!=c.charCodeAt(y))return y;return s.length!=c.length?h:-1},R.KJUR=K,R.crypto=K.crypto,R.asn1=K.asn1,R.jws=K.jws,R.lang=K.lang}).call(this,x(28).Buffer)},function(Ae,R,x){"use strict";(function(m){var k=x(30),oe=x(31),Z=x(32);function b(){return w.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function F(he,P){if(b()<P)throw new RangeError("Invalid typed array length");return w.TYPED_ARRAY_SUPPORT?(he=new Uint8Array(P)).__proto__=w.prototype:(null===he&&(he=new w(P)),he.length=P),he}function w(he,P,A){if(!(w.TYPED_ARRAY_SUPPORT||this instanceof w))return new w(he,P,A);if("number"==typeof he){if("string"==typeof P)throw new Error("If encoding is specified then the first argument must be a string");return L(this,he)}return N(this,he,P,A)}function N(he,P,A,ge){if("number"==typeof P)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&P instanceof ArrayBuffer?function(Se,xe,We,Ge){if(We<0||xe.byteLength<We)throw new RangeError("'offset' is out of bounds");if(xe.byteLength<We+(Ge||0))throw new RangeError("'length' is out of bounds");return xe=void 0===We&&void 0===Ge?new Uint8Array(xe):void 0===Ge?new Uint8Array(xe,We):new Uint8Array(xe,We,Ge),w.TYPED_ARRAY_SUPPORT?(Se=xe).__proto__=w.prototype:Se=Q(Se,xe),Se}(he,P,A,ge):"string"==typeof P?function(Se,xe,We){if("string"==typeof We&&""!==We||(We="utf8"),!w.isEncoding(We))throw new TypeError('"encoding" must be a valid string encoding');var Ge=0|W(xe,We),pt=(Se=F(Se,Ge)).write(xe,We);return pt!==Ge&&(Se=Se.slice(0,pt)),Se}(he,P,A):function(Se,xe){if(w.isBuffer(xe)){var We=0|J(xe.length);return 0===(Se=F(Se,We)).length||xe.copy(Se,0,0,We),Se}if(xe){if("undefined"!=typeof ArrayBuffer&&xe.buffer instanceof ArrayBuffer||"length"in xe)return"number"!=typeof xe.length||(pt=xe.length)!=pt?F(Se,0):Q(Se,xe);if("Buffer"===xe.type&&Z(xe.data))return Q(Se,xe.data)}var pt;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(he,P)}function j(he){if("number"!=typeof he)throw new TypeError('"size" argument must be a number');if(he<0)throw new RangeError('"size" argument must not be negative')}function L(he,P){if(j(P),he=F(he,P<0?0:0|J(P)),!w.TYPED_ARRAY_SUPPORT)for(var A=0;A<P;++A)he[A]=0;return he}function Q(he,P){var A=P.length<0?0:0|J(P.length);he=F(he,A);for(var ge=0;ge<A;ge+=1)he[ge]=255&P[ge];return he}function J(he){if(he>=b())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b().toString(16)+" bytes");return 0|he}function W(he,P){if(w.isBuffer(he))return he.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(he)||he instanceof ArrayBuffer))return he.byteLength;"string"!=typeof he&&(he=""+he);var A=he.length;if(0===A)return 0;for(var ge=!1;;)switch(P){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":case void 0:return en(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return mn(he).length;default:if(ge)return en(he).length;P=(""+P).toLowerCase(),ge=!0}}function G(he,P,A){var ge=!1;if((void 0===P||P<0)&&(P=0),P>this.length||((void 0===A||A>this.length)&&(A=this.length),A<=0)||(A>>>=0)<=(P>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return tt(this,P,A);case"utf8":case"utf-8":return He(this,P,A);case"ascii":return Et(this,P,A);case"latin1":case"binary":return at(this,P,A);case"base64":return ze(this,P,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,P,A);default:if(ge)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),ge=!0}}function Y(he,P,A){var ge=he[P];he[P]=he[A],he[A]=ge}function we(he,P,A,ge,_e){if(0===he.length)return-1;if("string"==typeof A?(ge=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,isNaN(A)&&(A=_e?0:he.length-1),A<0&&(A=he.length+A),A>=he.length){if(_e)return-1;A=he.length-1}else if(A<0){if(!_e)return-1;A=0}if("string"==typeof P&&(P=w.from(P,ge)),w.isBuffer(P))return 0===P.length?-1:fe(he,P,A,ge,_e);if("number"==typeof P)return P&=255,w.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?_e?Uint8Array.prototype.indexOf.call(he,P,A):Uint8Array.prototype.lastIndexOf.call(he,P,A):fe(he,[P],A,ge,_e);throw new TypeError("val must be string, number or Buffer")}function fe(he,P,A,ge,_e){var Se,xe=1,We=he.length,Ge=P.length;if(void 0!==ge&&("ucs2"===(ge=String(ge).toLowerCase())||"ucs-2"===ge||"utf16le"===ge||"utf-16le"===ge)){if(he.length<2||P.length<2)return-1;xe=2,We/=2,Ge/=2,A/=2}function pt(yn,Dn){return 1===xe?yn[Dn]:yn.readUInt16BE(Dn*xe)}if(_e){var wt=-1;for(Se=A;Se<We;Se++)if(pt(he,Se)===pt(P,-1===wt?0:Se-wt)){if(-1===wt&&(wt=Se),Se-wt+1===Ge)return wt*xe}else-1!==wt&&(Se-=Se-wt),wt=-1}else for(A+Ge>We&&(A=We-Ge),Se=A;Se>=0;Se--){for(var Ft=!0,nn=0;nn<Ge;nn++)if(pt(he,Se+nn)!==pt(P,nn)){Ft=!1;break}if(Ft)return Se}return-1}function le(he,P,A,ge){A=Number(A)||0;var _e=he.length-A;ge?(ge=Number(ge))>_e&&(ge=_e):ge=_e;var Se=P.length;if(Se%2!=0)throw new TypeError("Invalid hex string");ge>Se/2&&(ge=Se/2);for(var xe=0;xe<ge;++xe){var We=parseInt(P.substr(2*xe,2),16);if(isNaN(We))return xe;he[A+xe]=We}return xe}function re(he,P,A,ge){return Wt(en(P,he.length-A),he,A,ge)}function Pe(he,P,A,ge){return Wt(function(Se){for(var xe=[],We=0;We<Se.length;++We)xe.push(255&Se.charCodeAt(We));return xe}(P),he,A,ge)}function Oe(he,P,A,ge){return Pe(he,P,A,ge)}function Ve(he,P,A,ge){return Wt(mn(P),he,A,ge)}function ye(he,P,A,ge){return Wt(function(Se,xe){for(var We,Ge,wt=[],Ft=0;Ft<Se.length&&!((xe-=2)<0);++Ft)Ge=(We=Se.charCodeAt(Ft))>>8,wt.push(We%256),wt.push(Ge);return wt}(P,he.length-A),he,A,ge)}function ze(he,P,A){return k.fromByteArray(0===P&&A===he.length?he:he.slice(P,A))}function He(he,P,A){A=Math.min(he.length,A);for(var ge=[],_e=P;_e<A;){var Se,xe,We,Ge,pt=he[_e],wt=null,Ft=pt>239?4:pt>223?3:pt>191?2:1;if(_e+Ft<=A)switch(Ft){case 1:pt<128&&(wt=pt);break;case 2:128==(192&(Se=he[_e+1]))&&(Ge=(31&pt)<<6|63&Se)>127&&(wt=Ge);break;case 3:xe=he[_e+2],128==(192&(Se=he[_e+1]))&&128==(192&xe)&&(Ge=(15&pt)<<12|(63&Se)<<6|63&xe)>2047&&(Ge<55296||Ge>57343)&&(wt=Ge);break;case 4:xe=he[_e+2],We=he[_e+3],128==(192&(Se=he[_e+1]))&&128==(192&xe)&&128==(192&We)&&(Ge=(15&pt)<<18|(63&Se)<<12|(63&xe)<<6|63&We)>65535&&Ge<1114112&&(wt=Ge)}null===wt?(wt=65533,Ft=1):wt>65535&&(ge.push((wt-=65536)>>>10&1023|55296),wt=56320|1023&wt),ge.push(wt),_e+=Ft}return function(yn){var Dn=yn.length;if(Dn<=Xe)return String.fromCharCode.apply(String,yn);for(var Ze="",$t=0;$t<Dn;)Ze+=String.fromCharCode.apply(String,yn.slice($t,$t+=Xe));return Ze}(ge)}R.Buffer=w,R.SlowBuffer=function(P){return+P!=P&&(P=0),w.alloc(+P)},R.INSPECT_MAX_BYTES=50,w.TYPED_ARRAY_SUPPORT=void 0!==m.TYPED_ARRAY_SUPPORT?m.TYPED_ARRAY_SUPPORT:function(){try{var P=new Uint8Array(1);return P.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===P.foo()&&"function"==typeof P.subarray&&0===P.subarray(1,1).byteLength}catch(A){return!1}}(),R.kMaxLength=b(),w.poolSize=8192,w._augment=function(he){return he.__proto__=w.prototype,he},w.from=function(he,P,A){return N(null,he,P,A)},w.TYPED_ARRAY_SUPPORT&&(w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&w[Symbol.species]===w&&Object.defineProperty(w,Symbol.species,{value:null,configurable:!0})),w.alloc=function(he,P,A){return null,xe=P,We=A,j(Se=he),Se<=0?F(null,Se):void 0!==xe?"string"==typeof We?F(null,Se).fill(xe,We):F(null,Se).fill(xe):F(null,Se);var Se,xe,We},w.allocUnsafe=function(he){return L(null,he)},w.allocUnsafeSlow=function(he){return L(null,he)},w.isBuffer=function(P){return!(null==P||!P._isBuffer)},w.compare=function(P,A){if(!w.isBuffer(P)||!w.isBuffer(A))throw new TypeError("Arguments must be Buffers");if(P===A)return 0;for(var ge=P.length,_e=A.length,Se=0,xe=Math.min(ge,_e);Se<xe;++Se)if(P[Se]!==A[Se]){ge=P[Se],_e=A[Se];break}return ge<_e?-1:_e<ge?1:0},w.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(P,A){if(!Z(P))throw new TypeError('"list" argument must be an Array of Buffers');if(0===P.length)return w.alloc(0);var ge;if(void 0===A)for(A=0,ge=0;ge<P.length;++ge)A+=P[ge].length;var _e=w.allocUnsafe(A),Se=0;for(ge=0;ge<P.length;++ge){var xe=P[ge];if(!w.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(_e,Se),Se+=xe.length}return _e},w.byteLength=W,w.prototype._isBuffer=!0,w.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<P;A+=2)Y(this,A,A+1);return this},w.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<P;A+=4)Y(this,A,A+3),Y(this,A+1,A+2);return this},w.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<P;A+=8)Y(this,A,A+7),Y(this,A+1,A+6),Y(this,A+2,A+5),Y(this,A+3,A+4);return this},w.prototype.toString=function(){var P=0|this.length;return 0===P?"":0===arguments.length?He(this,0,P):G.apply(this,arguments)},w.prototype.equals=function(P){if(!w.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||0===w.compare(this,P)},w.prototype.inspect=function(){var P="",A=R.INSPECT_MAX_BYTES;return this.length>0&&(P=this.toString("hex",0,A).match(/.{2}/g).join(" "),this.length>A&&(P+=" ... ")),"<Buffer "+P+">"},w.prototype.compare=function(P,A,ge,_e,Se){if(!w.isBuffer(P))throw new TypeError("Argument must be a Buffer");if(void 0===A&&(A=0),void 0===ge&&(ge=P?P.length:0),void 0===_e&&(_e=0),void 0===Se&&(Se=this.length),A<0||ge>P.length||_e<0||Se>this.length)throw new RangeError("out of range index");if(_e>=Se&&A>=ge)return 0;if(_e>=Se)return-1;if(A>=ge)return 1;if(this===P)return 0;for(var xe=(Se>>>=0)-(_e>>>=0),We=(ge>>>=0)-(A>>>=0),Ge=Math.min(xe,We),pt=this.slice(_e,Se),wt=P.slice(A,ge),Ft=0;Ft<Ge;++Ft)if(pt[Ft]!==wt[Ft]){xe=pt[Ft],We=wt[Ft];break}return xe<We?-1:We<xe?1:0},w.prototype.includes=function(P,A,ge){return-1!==this.indexOf(P,A,ge)},w.prototype.indexOf=function(P,A,ge){return we(this,P,A,ge,!0)},w.prototype.lastIndexOf=function(P,A,ge){return we(this,P,A,ge,!1)},w.prototype.write=function(P,A,ge,_e){if(void 0===A)_e="utf8",ge=this.length,A=0;else if(void 0===ge&&"string"==typeof A)_e=A,ge=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A|=0,isFinite(ge)?(ge|=0,void 0===_e&&(_e="utf8")):(_e=ge,ge=void 0)}var Se=this.length-A;if((void 0===ge||ge>Se)&&(ge=Se),P.length>0&&(ge<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");for(var xe=!1;;)switch(_e){case"hex":return le(this,P,A,ge);case"utf8":case"utf-8":return re(this,P,A,ge);case"ascii":return Pe(this,P,A,ge);case"latin1":case"binary":return Oe(this,P,A,ge);case"base64":return Ve(this,P,A,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,P,A,ge);default:if(xe)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),xe=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Xe=4096;function Et(he,P,A){var ge="";A=Math.min(he.length,A);for(var _e=P;_e<A;++_e)ge+=String.fromCharCode(127&he[_e]);return ge}function at(he,P,A){var ge="";A=Math.min(he.length,A);for(var _e=P;_e<A;++_e)ge+=String.fromCharCode(he[_e]);return ge}function tt(he,P,A){var ge=he.length;(!P||P<0)&&(P=0),(!A||A<0||A>ge)&&(A=ge);for(var _e="",Se=P;Se<A;++Se)_e+=zn(he[Se]);return _e}function ot(he,P,A){for(var ge=he.slice(P,A),_e="",Se=0;Se<ge.length;Se+=2)_e+=String.fromCharCode(ge[Se]+256*ge[Se+1]);return _e}function Re(he,P,A){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+P>A)throw new RangeError("Trying to access beyond buffer length")}function ht(he,P,A,ge,_e,Se){if(!w.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>_e||P<Se)throw new RangeError('"value" argument is out of bounds');if(A+ge>he.length)throw new RangeError("Index out of range")}function At(he,P,A,ge){P<0&&(P=65535+P+1);for(var _e=0,Se=Math.min(he.length-A,2);_e<Se;++_e)he[A+_e]=(P&255<<8*(ge?_e:1-_e))>>>8*(ge?_e:1-_e)}function En(he,P,A,ge){P<0&&(P=4294967295+P+1);for(var _e=0,Se=Math.min(he.length-A,4);_e<Se;++_e)he[A+_e]=P>>>8*(ge?_e:3-_e)&255}function Ut(he,P,A,ge,_e,Se){if(A+ge>he.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function Tn(he,P,A,ge,_e){return _e||Ut(he,0,A,4),oe.write(he,P,A,ge,23,4),A+4}function Sn(he,P,A,ge,_e){return _e||Ut(he,0,A,8),oe.write(he,P,A,ge,52,8),A+8}w.prototype.slice=function(P,A){var ge,_e=this.length;if((P=~~P)<0?(P+=_e)<0&&(P=0):P>_e&&(P=_e),(A=void 0===A?_e:~~A)<0?(A+=_e)<0&&(A=0):A>_e&&(A=_e),A<P&&(A=P),w.TYPED_ARRAY_SUPPORT)(ge=this.subarray(P,A)).__proto__=w.prototype;else{var Se=A-P;ge=new w(Se,void 0);for(var xe=0;xe<Se;++xe)ge[xe]=this[xe+P]}return ge},w.prototype.readUIntLE=function(P,A,ge){P|=0,A|=0,ge||Re(P,A,this.length);for(var _e=this[P],Se=1,xe=0;++xe<A&&(Se*=256);)_e+=this[P+xe]*Se;return _e},w.prototype.readUIntBE=function(P,A,ge){P|=0,A|=0,ge||Re(P,A,this.length);for(var _e=this[P+--A],Se=1;A>0&&(Se*=256);)_e+=this[P+--A]*Se;return _e},w.prototype.readUInt8=function(P,A){return A||Re(P,1,this.length),this[P]},w.prototype.readUInt16LE=function(P,A){return A||Re(P,2,this.length),this[P]|this[P+1]<<8},w.prototype.readUInt16BE=function(P,A){return A||Re(P,2,this.length),this[P]<<8|this[P+1]},w.prototype.readUInt32LE=function(P,A){return A||Re(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},w.prototype.readUInt32BE=function(P,A){return A||Re(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},w.prototype.readIntLE=function(P,A,ge){P|=0,A|=0,ge||Re(P,A,this.length);for(var _e=this[P],Se=1,xe=0;++xe<A&&(Se*=256);)_e+=this[P+xe]*Se;return _e>=(Se*=128)&&(_e-=Math.pow(2,8*A)),_e},w.prototype.readIntBE=function(P,A,ge){P|=0,A|=0,ge||Re(P,A,this.length);for(var _e=A,Se=1,xe=this[P+--_e];_e>0&&(Se*=256);)xe+=this[P+--_e]*Se;return xe>=(Se*=128)&&(xe-=Math.pow(2,8*A)),xe},w.prototype.readInt8=function(P,A){return A||Re(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},w.prototype.readInt16LE=function(P,A){A||Re(P,2,this.length);var ge=this[P]|this[P+1]<<8;return 32768&ge?4294901760|ge:ge},w.prototype.readInt16BE=function(P,A){A||Re(P,2,this.length);var ge=this[P+1]|this[P]<<8;return 32768&ge?4294901760|ge:ge},w.prototype.readInt32LE=function(P,A){return A||Re(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},w.prototype.readInt32BE=function(P,A){return A||Re(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},w.prototype.readFloatLE=function(P,A){return A||Re(P,4,this.length),oe.read(this,P,!0,23,4)},w.prototype.readFloatBE=function(P,A){return A||Re(P,4,this.length),oe.read(this,P,!1,23,4)},w.prototype.readDoubleLE=function(P,A){return A||Re(P,8,this.length),oe.read(this,P,!0,52,8)},w.prototype.readDoubleBE=function(P,A){return A||Re(P,8,this.length),oe.read(this,P,!1,52,8)},w.prototype.writeUIntLE=function(P,A,ge,_e){P=+P,A|=0,ge|=0,_e||ht(this,P,A,ge,Math.pow(2,8*ge)-1,0);var Se=1,xe=0;for(this[A]=255&P;++xe<ge&&(Se*=256);)this[A+xe]=P/Se&255;return A+ge},w.prototype.writeUIntBE=function(P,A,ge,_e){P=+P,A|=0,ge|=0,_e||ht(this,P,A,ge,Math.pow(2,8*ge)-1,0);var Se=ge-1,xe=1;for(this[A+Se]=255&P;--Se>=0&&(xe*=256);)this[A+Se]=P/xe&255;return A+ge},w.prototype.writeUInt8=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,1,255,0),w.TYPED_ARRAY_SUPPORT||(P=Math.floor(P)),this[A]=255&P,A+1},w.prototype.writeUInt16LE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[A]=255&P,this[A+1]=P>>>8):At(this,P,A,!0),A+2},w.prototype.writeUInt16BE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[A]=P>>>8,this[A+1]=255&P):At(this,P,A,!1),A+2},w.prototype.writeUInt32LE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[A+3]=P>>>24,this[A+2]=P>>>16,this[A+1]=P>>>8,this[A]=255&P):En(this,P,A,!0),A+4},w.prototype.writeUInt32BE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[A]=P>>>24,this[A+1]=P>>>16,this[A+2]=P>>>8,this[A+3]=255&P):En(this,P,A,!1),A+4},w.prototype.writeIntLE=function(P,A,ge,_e){if(P=+P,A|=0,!_e){var Se=Math.pow(2,8*ge-1);ht(this,P,A,ge,Se-1,-Se)}var xe=0,We=1,Ge=0;for(this[A]=255&P;++xe<ge&&(We*=256);)P<0&&0===Ge&&0!==this[A+xe-1]&&(Ge=1),this[A+xe]=(P/We>>0)-Ge&255;return A+ge},w.prototype.writeIntBE=function(P,A,ge,_e){if(P=+P,A|=0,!_e){var Se=Math.pow(2,8*ge-1);ht(this,P,A,ge,Se-1,-Se)}var xe=ge-1,We=1,Ge=0;for(this[A+xe]=255&P;--xe>=0&&(We*=256);)P<0&&0===Ge&&0!==this[A+xe+1]&&(Ge=1),this[A+xe]=(P/We>>0)-Ge&255;return A+ge},w.prototype.writeInt8=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,1,127,-128),w.TYPED_ARRAY_SUPPORT||(P=Math.floor(P)),P<0&&(P=255+P+1),this[A]=255&P,A+1},w.prototype.writeInt16LE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[A]=255&P,this[A+1]=P>>>8):At(this,P,A,!0),A+2},w.prototype.writeInt16BE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[A]=P>>>8,this[A+1]=255&P):At(this,P,A,!1),A+2},w.prototype.writeInt32LE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,4,2147483647,-2147483648),w.TYPED_ARRAY_SUPPORT?(this[A]=255&P,this[A+1]=P>>>8,this[A+2]=P>>>16,this[A+3]=P>>>24):En(this,P,A,!0),A+4},w.prototype.writeInt32BE=function(P,A,ge){return P=+P,A|=0,ge||ht(this,P,A,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),w.TYPED_ARRAY_SUPPORT?(this[A]=P>>>24,this[A+1]=P>>>16,this[A+2]=P>>>8,this[A+3]=255&P):En(this,P,A,!1),A+4},w.prototype.writeFloatLE=function(P,A,ge){return Tn(this,P,A,!0,ge)},w.prototype.writeFloatBE=function(P,A,ge){return Tn(this,P,A,!1,ge)},w.prototype.writeDoubleLE=function(P,A,ge){return Sn(this,P,A,!0,ge)},w.prototype.writeDoubleBE=function(P,A,ge){return Sn(this,P,A,!1,ge)},w.prototype.copy=function(P,A,ge,_e){if(ge||(ge=0),_e||0===_e||(_e=this.length),A>=P.length&&(A=P.length),A||(A=0),_e>0&&_e<ge&&(_e=ge),_e===ge||0===P.length||0===this.length)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("sourceStart out of bounds");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),P.length-A<_e-ge&&(_e=P.length-A+ge);var Se,xe=_e-ge;if(this===P&&ge<A&&A<_e)for(Se=xe-1;Se>=0;--Se)P[Se+A]=this[Se+ge];else if(xe<1e3||!w.TYPED_ARRAY_SUPPORT)for(Se=0;Se<xe;++Se)P[Se+A]=this[Se+ge];else Uint8Array.prototype.set.call(P,this.subarray(ge,ge+xe),A);return xe},w.prototype.fill=function(P,A,ge,_e){if("string"==typeof P){if("string"==typeof A?(_e=A,A=0,ge=this.length):"string"==typeof ge&&(_e=ge,ge=this.length),1===P.length){var Se=P.charCodeAt(0);Se<256&&(P=Se)}if(void 0!==_e&&"string"!=typeof _e)throw new TypeError("encoding must be a string");if("string"==typeof _e&&!w.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e)}else"number"==typeof P&&(P&=255);if(A<0||this.length<A||this.length<ge)throw new RangeError("Out of range index");if(ge<=A)return this;var xe;if(A>>>=0,ge=void 0===ge?this.length:ge>>>0,P||(P=0),"number"==typeof P)for(xe=A;xe<ge;++xe)this[xe]=P;else{var We=w.isBuffer(P)?P:en(new w(P,_e).toString()),Ge=We.length;for(xe=0;xe<ge-A;++xe)this[xe+A]=We[xe%Ge]}return this};var Jn=/[^+\/0-9A-Za-z-_]/g;function zn(he){return he<16?"0"+he.toString(16):he.toString(16)}function en(he,P){var A;P=P||1/0;for(var ge=he.length,_e=null,Se=[],xe=0;xe<ge;++xe){if((A=he.charCodeAt(xe))>55295&&A<57344){if(!_e){if(A>56319){(P-=3)>-1&&Se.push(239,191,189);continue}if(xe+1===ge){(P-=3)>-1&&Se.push(239,191,189);continue}_e=A;continue}if(A<56320){(P-=3)>-1&&Se.push(239,191,189),_e=A;continue}A=65536+(_e-55296<<10|A-56320)}else _e&&(P-=3)>-1&&Se.push(239,191,189);if(_e=null,A<128){if((P-=1)<0)break;Se.push(A)}else if(A<2048){if((P-=2)<0)break;Se.push(A>>6|192,63&A|128)}else if(A<65536){if((P-=3)<0)break;Se.push(A>>12|224,A>>6&63|128,63&A|128)}else{if(!(A<1114112))throw new Error("Invalid code point");if((P-=4)<0)break;Se.push(A>>18|240,A>>12&63|128,A>>6&63|128,63&A|128)}}return Se}function mn(he){return k.toByteArray(function(A){if((A=(_e=A,_e.trim?_e.trim():_e.replace(/^\s+|\s+$/g,"")).replace(Jn,"")).length<2)return"";for(var _e;A.length%4!=0;)A+="=";return A}(he))}function Wt(he,P,A,ge){for(var _e=0;_e<ge&&!(_e+A>=P.length||_e>=he.length);++_e)P[_e+A]=he[_e];return _e}}).call(this,x(29))},function(Ae,R){var x;x=function(){return this}();try{x=x||new Function("return this")()}catch(m){"object"==typeof window&&(x=window)}Ae.exports=x},function(Ae,R,x){"use strict";R.byteLength=function(L){var Q=w(L),W=Q[1];return 3*(Q[0]+W)/4-W},R.toByteArray=function(L){var Q,J,Ve,W=w(L),G=W[0],Y=W[1],we=new oe(3*(G+(Ve=Y))/4-Ve),fe=0,le=Y>0?G-4:G;for(J=0;J<le;J+=4)Q=k[L.charCodeAt(J)]<<18|k[L.charCodeAt(J+1)]<<12|k[L.charCodeAt(J+2)]<<6|k[L.charCodeAt(J+3)],we[fe++]=Q>>16&255,we[fe++]=Q>>8&255,we[fe++]=255&Q;return 2===Y&&(Q=k[L.charCodeAt(J)]<<2|k[L.charCodeAt(J+1)]>>4,we[fe++]=255&Q),1===Y&&(Q=k[L.charCodeAt(J)]<<10|k[L.charCodeAt(J+1)]<<4|k[L.charCodeAt(J+2)]>>2,we[fe++]=Q>>8&255,we[fe++]=255&Q),we},R.fromByteArray=function(L){for(var Q,J=L.length,W=J%3,G=[],Y=16383,we=0,fe=J-W;we<fe;we+=Y)G.push(N(L,we,we+Y>fe?fe:we+Y));return 1===W?G.push(m[(Q=L[J-1])>>2]+m[Q<<4&63]+"=="):2===W&&G.push(m[(Q=(L[J-2]<<8)+L[J-1])>>10]+m[Q>>4&63]+m[Q<<2&63]+"="),G.join("")};for(var m=[],k=[],oe="undefined"!=typeof Uint8Array?Uint8Array:Array,Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,F=Z.length;b<F;++b)m[b]=Z[b],k[Z.charCodeAt(b)]=b;function w(j){var L=j.length;if(L%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Q=j.indexOf("=");return-1===Q&&(Q=L),[Q,Q===L?0:4-Q%4]}function N(j,L,Q){for(var W,G=[],Y=L;Y<Q;Y+=3)G.push(m[(W=(j[Y]<<16&16711680)+(j[Y+1]<<8&65280)+(255&j[Y+2]))>>18&63]+m[W>>12&63]+m[W>>6&63]+m[63&W]);return G.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},function(Ae,R){R.read=function(x,m,k,oe,Z){var b,F,w=8*Z-oe-1,N=(1<<w)-1,j=N>>1,L=-7,Q=k?Z-1:0,J=k?-1:1,W=x[m+Q];for(Q+=J,b=W&(1<<-L)-1,W>>=-L,L+=w;L>0;b=256*b+x[m+Q],Q+=J,L-=8);for(F=b&(1<<-L)-1,b>>=-L,L+=oe;L>0;F=256*F+x[m+Q],Q+=J,L-=8);if(0===b)b=1-j;else{if(b===N)return F?NaN:1/0*(W?-1:1);F+=Math.pow(2,oe),b-=j}return(W?-1:1)*F*Math.pow(2,b-oe)},R.write=function(x,m,k,oe,Z,b){var F,w,N,j=8*b-Z-1,L=(1<<j)-1,Q=L>>1,J=23===Z?Math.pow(2,-24)-Math.pow(2,-77):0,W=oe?0:b-1,G=oe?1:-1,Y=m<0||0===m&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(w=isNaN(m)?1:0,F=L):(F=Math.floor(Math.log(m)/Math.LN2),m*(N=Math.pow(2,-F))<1&&(F--,N*=2),(m+=F+Q>=1?J/N:J*Math.pow(2,1-Q))*N>=2&&(F++,N/=2),F+Q>=L?(w=0,F=L):F+Q>=1?(w=(m*N-1)*Math.pow(2,Z),F+=Q):(w=m*Math.pow(2,Q-1)*Math.pow(2,Z),F=0));Z>=8;x[k+W]=255&w,W+=G,w/=256,Z-=8);for(F=F<<Z|w,j+=Z;j>0;x[k+W]=255&F,W+=G,F/=256,j-=8);x[k+W-G]|=128*Y}},function(Ae,R){var x={}.toString;Ae.exports=Array.isArray||function(m){return"[object Array]"==x.call(m)}},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(oe){var Z=oe.jws,b=oe.KeyUtil,F=oe.X509,w=oe.crypto,N=oe.hextob64u,j=oe.b64tohex,L=oe.AllowedSigningAlgs;return function(){function Q(){!function(W,G){if(!(W instanceof G))throw new TypeError("Cannot call a class as a function")}(this,Q)}return Q.parseJwt=function(W){m.Log.debug("JoseUtil.parseJwt");try{var G=Z.JWS.parse(W);return{header:G.headerObj,payload:G.payloadObj}}catch(Y){m.Log.error(Y)}},Q.validateJwt=function(W,G,Y,we,fe,le,re){m.Log.debug("JoseUtil.validateJwt");try{if("RSA"===G.kty)if(G.e&&G.n)G=b.getKey(G);else{if(!G.x5c||!G.x5c.length)return m.Log.error("JoseUtil.validateJwt: RSA key missing key material",G),Promise.reject(new Error("RSA key missing key material"));var Pe=j(G.x5c[0]);G=F.getPublicKeyFromCertHex(Pe)}else{if("EC"!==G.kty)return m.Log.error("JoseUtil.validateJwt: Unsupported key type",G&&G.kty),Promise.reject(new Error(G.kty));if(!(G.crv&&G.x&&G.y))return m.Log.error("JoseUtil.validateJwt: EC key missing key material",G),Promise.reject(new Error("EC key missing key material"));G=b.getKey(G)}return Q._validateJwt(W,G,Y,we,fe,le,re)}catch(Oe){return m.Log.error(Oe&&Oe.message||Oe),Promise.reject("JWT validation failed")}},Q.validateJwtAttributes=function(W,G,Y,we,fe,le){we||(we=0),fe||(fe=parseInt(Date.now()/1e3));var re=Q.parseJwt(W).payload;if(!re.iss)return m.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(re.iss!==G)return m.Log.error("JoseUtil._validateJwt: Invalid issuer in token",re.iss),Promise.reject(new Error("Invalid issuer in token: "+re.iss));if(!re.aud)return m.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(re.aud===Y||Array.isArray(re.aud)&&re.aud.indexOf(Y)>=0))return m.Log.error("JoseUtil._validateJwt: Invalid audience in token",re.aud),Promise.reject(new Error("Invalid audience in token: "+re.aud));if(re.azp&&re.azp!==Y)return m.Log.error("JoseUtil._validateJwt: Invalid azp in token",re.azp),Promise.reject(new Error("Invalid azp in token: "+re.azp));if(!le){var Pe=fe+we,Oe=fe-we;if(!re.iat)return m.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(Pe<re.iat)return m.Log.error("JoseUtil._validateJwt: iat is in the future",re.iat),Promise.reject(new Error("iat is in the future: "+re.iat));if(re.nbf&&Pe<re.nbf)return m.Log.error("JoseUtil._validateJwt: nbf is in the future",re.nbf),Promise.reject(new Error("nbf is in the future: "+re.nbf));if(!re.exp)return m.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(re.exp<Oe)return m.Log.error("JoseUtil._validateJwt: exp is in the past",re.exp),Promise.reject(new Error("exp is in the past:"+re.exp))}return Promise.resolve(re)},Q._validateJwt=function(W,G,Y,we,fe,le,re){return Q.validateJwtAttributes(W,Y,we,fe,le,re).then(function(Pe){try{return Z.JWS.verify(W,G,L)?Pe:(m.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Oe){return m.Log.error(Oe&&Oe.message||Oe),Promise.reject(new Error("signature validation failed"))}})},Q.hashString=function(W,G){try{return w.Util.hashString(W,G)}catch(Y){m.Log.error(Y)}},Q.hexToBase64Url=function(W){try{return N(W)}catch(G){m.Log.error(G)}},Q}()};var m=x(0);Ae.exports=R.default},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SigninResponse=void 0;var m=function(){function Z(b,F){for(var w=0;w<F.length;w++){var N=F[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,F,w){return F&&Z(b.prototype,F),w&&Z(b,w),b}}(),k=x(3);function oe(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}R.SigninResponse=function(){function Z(b){var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";oe(this,Z);var w=k.UrlUtility.parseUrlFragment(b,F);this.error=w.error,this.error_description=w.error_description,this.error_uri=w.error_uri,this.code=w.code,this.state=w.state,this.id_token=w.id_token,this.session_state=w.session_state,this.access_token=w.access_token,this.token_type=w.token_type,this.scope=w.scope,this.profile=void 0,this.expires_in=w.expires_in}return m(Z,[{key:"expires_in",get:function(){if(this.expires_at){var F=parseInt(Date.now()/1e3);return this.expires_at-F}},set:function(F){var w=parseInt(F);if("number"==typeof w&&w>0){var N=parseInt(Date.now()/1e3);this.expires_at=N+w}}},{key:"expired",get:function(){var F=this.expires_in;if(void 0!==F)return F<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),Z}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SignoutRequest=void 0;var m=x(0),k=x(3),oe=x(9);R.SignoutRequest=function Z(b){var F=b.url,w=b.id_token_hint,N=b.post_logout_redirect_uri,j=b.data,L=b.extraQueryParams,Q=b.request_type;if(function(G,Y){if(!(G instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,Z),!F)throw m.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var J in w&&(F=k.UrlUtility.addQueryParam(F,"id_token_hint",w)),N&&(F=k.UrlUtility.addQueryParam(F,"post_logout_redirect_uri",N),j&&(this.state=new oe.State({data:j,request_type:Q}),F=k.UrlUtility.addQueryParam(F,"state",this.state.id))),L)F=k.UrlUtility.addQueryParam(F,J,L[J]);this.url=F}},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SignoutResponse=void 0;var m=x(3);R.SignoutResponse=function k(oe){!function(F,w){if(!(F instanceof w))throw new TypeError("Cannot call a class as a function")}(this,k);var Z=m.UrlUtility.parseUrlFragment(oe,"?");this.error=Z.error,this.error_description=Z.error_description,this.error_uri=Z.error_uri,this.state=Z.state}},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.InMemoryWebStorage=void 0;var m=function(){function oe(Z,b){for(var F=0;F<b.length;F++){var w=b[F];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(Z,w.key,w)}}return function(Z,b,F){return b&&oe(Z.prototype,b),F&&oe(Z,F),Z}}(),k=x(0);R.InMemoryWebStorage=function(){function oe(){(function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")})(this,oe),this._data={}}return oe.prototype.getItem=function(b){return k.Log.debug("InMemoryWebStorage.getItem",b),this._data[b]},oe.prototype.setItem=function(b,F){k.Log.debug("InMemoryWebStorage.setItem",b),this._data[b]=F},oe.prototype.removeItem=function(b){k.Log.debug("InMemoryWebStorage.removeItem",b),delete this._data[b]},oe.prototype.key=function(b){return Object.getOwnPropertyNames(this._data)[b]},m(oe,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.UserManager=void 0;var m=function(){function Y(we,fe){for(var le=0;le<fe.length;le++){var re=fe[le];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(we,re.key,re)}}return function(we,fe,le){return fe&&Y(we.prototype,fe),le&&Y(we,le),we}}(),k=x(0),oe=x(10),Z=x(39),b=x(15),F=x(45),w=x(47),N=x(18),j=x(8),L=x(20),Q=x(11),J=x(4);function W(Y,we){if(!(Y instanceof we))throw new TypeError("Cannot call a class as a function")}function G(Y,we){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!we||"object"!=typeof we&&"function"!=typeof we?Y:we}R.UserManager=function(Y){function we(){var fe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.SilentRenewService,re=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.SessionMonitor,Pe=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.TokenRevocationClient,Oe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Q.TokenClient,Ve=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J.JoseUtil;W(this,we),fe instanceof Z.UserManagerSettings||(fe=new Z.UserManagerSettings(fe));var ye=G(this,Y.call(this,fe));return ye._events=new F.UserManagerEvents(fe),ye._silentRenewService=new le(ye),ye.settings.automaticSilentRenew&&(k.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),ye.startSilentRenew()),ye.settings.monitorSession&&(k.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),ye._sessionMonitor=new re(ye)),ye._tokenRevocationClient=new Pe(ye._settings),ye._tokenClient=new Oe(ye._settings),ye._joseUtil=Ve,ye}return function(le,re){if("function"!=typeof re&&null!==re)throw new TypeError("Super expression must either be null or a function, not "+typeof re);le.prototype=Object.create(re&&re.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(le,re):le.__proto__=re)}(we,Y),we.prototype.getUser=function(){var le=this;return this._loadUser().then(function(re){return re?(k.Log.info("UserManager.getUser: user loaded"),le._events.load(re,!1),re):(k.Log.info("UserManager.getUser: user not found in storage"),null)})},we.prototype.removeUser=function(){var le=this;return this.storeUser(null).then(function(){k.Log.info("UserManager.removeUser: user removed from storage"),le._events.unload()})},we.prototype.signinRedirect=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(le=Object.assign({},le)).request_type="si:r",this._signinStart(le,this._redirectNavigator,{useReplaceToNavigate:le.useReplaceToNavigate}).then(function(){k.Log.info("UserManager.signinRedirect: successful")})},we.prototype.signinRedirectCallback=function(le){return this._signinEnd(le||this._redirectNavigator.url).then(function(re){return re.profile&&re.profile.sub?k.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",re.profile.sub):k.Log.info("UserManager.signinRedirectCallback: no sub"),re})},we.prototype.signinPopup=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(le=Object.assign({},le)).request_type="si:p";var re=le.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return re?(le.redirect_uri=re,le.display="popup",this._signin(le,this._popupNavigator,{startUrl:re,popupWindowFeatures:le.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:le.popupWindowTarget||this.settings.popupWindowTarget}).then(function(Pe){return Pe&&(Pe.profile&&Pe.profile.sub?k.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",Pe.profile.sub):k.Log.info("UserManager.signinPopup: no sub")),Pe})):(k.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},we.prototype.signinPopupCallback=function(le){return this._signinCallback(le,this._popupNavigator).then(function(re){return re&&(re.profile&&re.profile.sub?k.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",re.profile.sub):k.Log.info("UserManager.signinPopupCallback: no sub")),re}).catch(function(re){k.Log.error(re.message)})},we.prototype.signinSilent=function(){var le=this,re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return re=Object.assign({},re),this._loadUser().then(function(Pe){return Pe&&Pe.refresh_token?(re.refresh_token=Pe.refresh_token,le._useRefreshToken(re)):(re.request_type="si:s",re.id_token_hint=re.id_token_hint||le.settings.includeIdTokenInSilentRenew&&Pe&&Pe.id_token,Pe&&le._settings.validateSubOnSilentRenew&&(k.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",Pe.profile.sub),re.current_sub=Pe.profile.sub),le._signinSilentIframe(re))})},we.prototype._useRefreshToken=function(){var le=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(Pe){return Pe?Pe.access_token?le._loadUser().then(function(Oe){if(Oe){var Ve=Promise.resolve();return Pe.id_token&&(Ve=le._validateIdTokenFromTokenRefreshToken(Oe.profile,Pe.id_token)),Ve.then(function(){return k.Log.debug("UserManager._useRefreshToken: refresh token response success"),Oe.id_token=Pe.id_token||Oe.id_token,Oe.access_token=Pe.access_token,Oe.refresh_token=Pe.refresh_token||Oe.refresh_token,Oe.expires_in=Pe.expires_in,le.storeUser(Oe).then(function(){return le._events.load(Oe),Oe})})}return null}):(k.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(k.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},we.prototype._validateIdTokenFromTokenRefreshToken=function(le,re){var Pe=this;return this._metadataService.getIssuer().then(function(Oe){return Pe.settings.getEpochTime().then(function(Ve){return Pe._joseUtil.validateJwtAttributes(re,Oe,Pe._settings.client_id,Pe._settings.clockSkew,Ve).then(function(ye){return ye?ye.sub!==le.sub?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ye.auth_time&&ye.auth_time!==le.auth_time?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ye.azp&&ye.azp!==le.azp?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ye.azp&&le.azp?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},we.prototype._signinSilentIframe=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},re=le.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return re?(le.redirect_uri=re,le.prompt=le.prompt||"none",this._signin(le,this._iframeNavigator,{startUrl:re,silentRequestTimeout:le.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Pe){return Pe&&(Pe.profile&&Pe.profile.sub?k.Log.info("UserManager.signinSilent: successful, signed in sub: ",Pe.profile.sub):k.Log.info("UserManager.signinSilent: no sub")),Pe})):(k.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},we.prototype.signinSilentCallback=function(le){return this._signinCallback(le,this._iframeNavigator).then(function(re){return re&&(re.profile&&re.profile.sub?k.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",re.profile.sub):k.Log.info("UserManager.signinSilentCallback: no sub")),re})},we.prototype.signinCallback=function(le){var re=this;return this.readSigninResponseState(le).then(function(Pe){var Oe=Pe.state;return"si:r"===Oe.request_type?re.signinRedirectCallback(le):"si:p"===Oe.request_type?re.signinPopupCallback(le):"si:s"===Oe.request_type?re.signinSilentCallback(le):Promise.reject(new Error("invalid response_type in state"))})},we.prototype.signoutCallback=function(le,re){var Pe=this;return this.readSignoutResponseState(le).then(function(Oe){var Ve=Oe.state,ye=Oe.response;return Ve?"so:r"===Ve.request_type?Pe.signoutRedirectCallback(le):"so:p"===Ve.request_type?Pe.signoutPopupCallback(le,re):Promise.reject(new Error("invalid response_type in state")):ye})},we.prototype.querySessionStatus=function(){var le=this,re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(re=Object.assign({},re)).request_type="si:s";var Pe=re.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Pe?(re.redirect_uri=Pe,re.prompt="none",re.response_type=re.response_type||this.settings.query_status_response_type,re.scope=re.scope||"openid",re.skipUserInfo=!0,this._signinStart(re,this._iframeNavigator,{startUrl:Pe,silentRequestTimeout:re.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Oe){return le.processSigninResponse(Oe.url).then(function(Ve){if(k.Log.debug("UserManager.querySessionStatus: got signin response"),Ve.session_state&&Ve.profile.sub)return k.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",Ve.profile.sub),{session_state:Ve.session_state,sub:Ve.profile.sub,sid:Ve.profile.sid};k.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(Ve){if(Ve.session_state&&le.settings.monitorAnonymousSession&&("login_required"==Ve.message||"consent_required"==Ve.message||"interaction_required"==Ve.message||"account_selection_required"==Ve.message))return k.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:Ve.session_state};throw Ve})})):(k.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},we.prototype._signin=function(le,re){var Pe=this;return this._signinStart(le,re,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Ve){return Pe._signinEnd(Ve.url,le)})},we.prototype._signinStart=function(le,re){var Pe=this,Oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return re.prepare(Oe).then(function(Ve){return k.Log.debug("UserManager._signinStart: got navigator window handle"),Pe.createSigninRequest(le).then(function(ye){return k.Log.debug("UserManager._signinStart: got signin request"),Oe.url=ye.url,Oe.id=ye.state.id,Ve.navigate(Oe)}).catch(function(ye){throw Ve.close&&(k.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),Ve.close()),ye})})},we.prototype._signinEnd=function(le){var re=this,Pe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(le).then(function(Oe){k.Log.debug("UserManager._signinEnd: got signin response");var Ve=new b.User(Oe);if(Pe.current_sub){if(Pe.current_sub!==Ve.profile.sub)return k.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",Ve.profile.sub),Promise.reject(new Error("login_required"));k.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return re.storeUser(Ve).then(function(){return k.Log.debug("UserManager._signinEnd: user stored"),re._events.load(Ve),Ve})})},we.prototype._signinCallback=function(le,re){k.Log.debug("UserManager._signinCallback");var Pe="query"===this._settings.response_mode||!this._settings.response_mode&&j.SigninRequest.isCode(this._settings.response_type)?"?":"#";return re.callback(le,void 0,Pe)},we.prototype.signoutRedirect=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(le=Object.assign({},le)).request_type="so:r";var re=le.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return re&&(le.post_logout_redirect_uri=re),this._signoutStart(le,this._redirectNavigator,{useReplaceToNavigate:le.useReplaceToNavigate}).then(function(){k.Log.info("UserManager.signoutRedirect: successful")})},we.prototype.signoutRedirectCallback=function(le){return this._signoutEnd(le||this._redirectNavigator.url).then(function(re){return k.Log.info("UserManager.signoutRedirectCallback: successful"),re})},we.prototype.signoutPopup=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(le=Object.assign({},le)).request_type="so:p";var re=le.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return le.post_logout_redirect_uri=re,le.display="popup",le.post_logout_redirect_uri&&(le.state=le.state||{}),this._signout(le,this._popupNavigator,{startUrl:re,popupWindowFeatures:le.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:le.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){k.Log.info("UserManager.signoutPopup: successful")})},we.prototype.signoutPopupCallback=function(le,re){return void 0===re&&"boolean"==typeof le&&(re=le,le=null),this._popupNavigator.callback(le,re,"?").then(function(){k.Log.info("UserManager.signoutPopupCallback: successful")})},we.prototype._signout=function(le,re){var Pe=this;return this._signoutStart(le,re,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Ve){return Pe._signoutEnd(Ve.url)})},we.prototype._signoutStart=function(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},re=this,Oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(Oe).then(function(Ve){return k.Log.debug("UserManager._signoutStart: got navigator window handle"),re._loadUser().then(function(ye){return k.Log.debug("UserManager._signoutStart: loaded current user from storage"),(re._settings.revokeAccessTokenOnSignout?re._revokeInternal(ye):Promise.resolve()).then(function(){var ze=le.id_token_hint||ye&&ye.id_token;return ze&&(k.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),le.id_token_hint=ze),re.removeUser().then(function(){return k.Log.debug("UserManager._signoutStart: user removed, creating signout request"),re.createSignoutRequest(le).then(function(He){return k.Log.debug("UserManager._signoutStart: got signout request"),Oe.url=He.url,He.state&&(Oe.id=He.state.id),Ve.navigate(Oe)})})})}).catch(function(ye){throw Ve.close&&(k.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),Ve.close()),ye})})},we.prototype._signoutEnd=function(le){return this.processSignoutResponse(le).then(function(re){return k.Log.debug("UserManager._signoutEnd: got signout response"),re})},we.prototype.revokeAccessToken=function(){var le=this;return this._loadUser().then(function(re){return le._revokeInternal(re,!0).then(function(Pe){if(Pe)return k.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),re.access_token=null,re.refresh_token=null,re.expires_at=null,re.token_type=null,le.storeUser(re).then(function(){k.Log.debug("UserManager.revokeAccessToken: user stored"),le._events.load(re)})})}).then(function(){k.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},we.prototype._revokeInternal=function(le,re){var Pe=this;if(le){var Ve=le.refresh_token;return this._revokeAccessTokenInternal(le.access_token,re).then(function(ye){return Pe._revokeRefreshTokenInternal(Ve,re).then(function(ze){return ye||ze||k.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),ye||ze})})}return Promise.resolve(!1)},we.prototype._revokeAccessTokenInternal=function(le,re){return!le||le.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(le,re).then(function(){return!0})},we.prototype._revokeRefreshTokenInternal=function(le,re){return le?this._tokenRevocationClient.revoke(le,re,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},we.prototype.startSilentRenew=function(){this._silentRenewService.start()},we.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},we.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(le){return le?(k.Log.debug("UserManager._loadUser: user storageString loaded"),b.User.fromStorageString(le)):(k.Log.debug("UserManager._loadUser: no user storageString"),null)})},we.prototype.storeUser=function(le){if(le){k.Log.debug("UserManager.storeUser: storing user");var re=le.toStorageString();return this._userStore.set(this._userStoreKey,re)}return k.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},m(we,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),we}(oe.OidcClient)},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.UserManagerSettings=void 0;var m=function(){function Q(J,W){for(var G=0;G<W.length;G++){var Y=W[G];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(J,Y.key,Y)}}return function(J,W,G){return W&&Q(J.prototype,W),G&&Q(J,G),J}}(),k=(x(0),x(5)),oe=x(40),Z=x(41),b=x(43),F=x(6),w=x(1),N=x(8);function j(Q,J){if(!(Q instanceof J))throw new TypeError("Cannot call a class as a function")}function L(Q,J){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!J||"object"!=typeof J&&"function"!=typeof J?Q:J}R.UserManagerSettings=function(Q){function J(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},G=W.popup_redirect_uri,Y=W.popup_post_logout_redirect_uri,we=W.popupWindowFeatures,fe=W.popupWindowTarget,le=W.silent_redirect_uri,re=W.silentRequestTimeout,Pe=W.automaticSilentRenew,Oe=void 0!==Pe&&Pe,Ve=W.validateSubOnSilentRenew,ye=void 0!==Ve&&Ve,ze=W.includeIdTokenInSilentRenew,He=void 0===ze||ze,Xe=W.monitorSession,Et=void 0===Xe||Xe,at=W.monitorAnonymousSession,tt=void 0!==at&&at,ot=W.checkSessionInterval,Re=void 0===ot?2e3:ot,ht=W.stopCheckSessionOnError,At=void 0===ht||ht,En=W.query_status_response_type,Ut=W.revokeAccessTokenOnSignout,Tn=void 0!==Ut&&Ut,Sn=W.accessTokenExpiringNotificationTime,Jn=void 0===Sn?60:Sn,zn=W.redirectNavigator,en=void 0===zn?new oe.RedirectNavigator:zn,mn=W.popupNavigator,Wt=void 0===mn?new Z.PopupNavigator:mn,he=W.iframeNavigator,P=void 0===he?new b.IFrameNavigator:he,A=W.userStore,ge=void 0===A?new F.WebStorageStateStore({store:w.Global.sessionStorage}):A;j(this,J);var _e=L(this,Q.call(this,arguments[0]));return _e._popup_redirect_uri=G,_e._popup_post_logout_redirect_uri=Y,_e._popupWindowFeatures=we,_e._popupWindowTarget=fe,_e._silent_redirect_uri=le,_e._silentRequestTimeout=re,_e._automaticSilentRenew=Oe,_e._validateSubOnSilentRenew=ye,_e._includeIdTokenInSilentRenew=He,_e._accessTokenExpiringNotificationTime=Jn,_e._monitorSession=Et,_e._monitorAnonymousSession=tt,_e._checkSessionInterval=Re,_e._stopCheckSessionOnError=At,_e._query_status_response_type=En||(arguments[0]&&arguments[0].response_type?N.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),_e._revokeAccessTokenOnSignout=Tn,_e._redirectNavigator=en,_e._popupNavigator=Wt,_e._iframeNavigator=P,_e._userStore=ge,_e}return function(G,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);G.prototype=Object.create(Y&&Y.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(G,Y):G.__proto__=Y)}(J,Q),m(J,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),J}(k.OidcClientSettings)},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.RedirectNavigator=void 0;var m=function(){function oe(Z,b){for(var F=0;F<b.length;F++){var w=b[F];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(Z,w.key,w)}}return function(Z,b,F){return b&&oe(Z.prototype,b),F&&oe(Z,F),Z}}(),k=x(0);R.RedirectNavigator=function(){function oe(){!function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.prototype.prepare=function(){return Promise.resolve(this)},oe.prototype.navigate=function(b){return b&&b.url?(b.useReplaceToNavigate?window.location.replace(b.url):window.location=b.url,Promise.resolve()):(k.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},m(oe,[{key:"url",get:function(){return window.location.href}}]),oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PopupNavigator=void 0;var m=x(0),k=x(42);R.PopupNavigator=function(){function oe(){!function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.prototype.prepare=function(b){var F=new k.PopupWindow(b);return Promise.resolve(F)},oe.prototype.callback=function(b,F,w){m.Log.debug("PopupNavigator.callback");try{return k.PopupWindow.notifyOpener(b,F,w),Promise.resolve()}catch(N){return Promise.reject(N)}},oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PopupWindow=void 0;var m=function(){function Z(b,F){for(var w=0;w<F.length;w++){var N=F[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,F,w){return F&&Z(b.prototype,F),w&&Z(b,w),b}}(),k=x(0),oe=x(3);R.PopupWindow=function(){function Z(b){var F=this;(function(L,Q){if(!(L instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,Z),this._promise=new Promise(function(j,L){F._resolve=j,F._reject=L}),this._popup=window.open("",b.popupWindowTarget||"_blank",b.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(k.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return Z.prototype.navigate=function(F){return this._popup?F&&F.url?(k.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=F.id,this._id&&(window["popupCallback_"+F.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=F.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},Z.prototype._success=function(F){k.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(F)},Z.prototype._error=function(F){k.Log.error("PopupWindow.error: ",F),this._cleanup(),this._reject(new Error(F))},Z.prototype.close=function(){this._cleanup(!1)},Z.prototype._cleanup=function(F){k.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!F&&this._popup.close(),this._popup=null},Z.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},Z.prototype._callback=function(F,w){this._cleanup(w),F?(k.Log.debug("PopupWindow.callback success"),this._success({url:F})):(k.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},Z.notifyOpener=function(F,w,N){if(window.opener){if(F=F||window.location.href){var j=oe.UrlUtility.parseUrlFragment(F,N);if(j.state){var Q=window.opener["popupCallback_"+j.state];Q?(k.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),Q(F,w)):k.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else k.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else k.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},m(Z,[{key:"promise",get:function(){return this._promise}}]),Z}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.IFrameNavigator=void 0;var m=x(0),k=x(44);R.IFrameNavigator=function(){function oe(){!function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.prototype.prepare=function(b){var F=new k.IFrameWindow(b);return Promise.resolve(F)},oe.prototype.callback=function(b){m.Log.debug("IFrameNavigator.callback");try{return k.IFrameWindow.notifyParent(b),Promise.resolve()}catch(F){return Promise.reject(F)}},oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.IFrameWindow=void 0;var m=function(){function oe(Z,b){for(var F=0;F<b.length;F++){var w=b[F];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(Z,w.key,w)}}return function(Z,b,F){return b&&oe(Z.prototype,b),F&&oe(Z,F),Z}}(),k=x(0);R.IFrameWindow=function(){function oe(Z){var b=this;(function(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")})(this,oe),this._promise=new Promise(function(F,w){b._resolve=F,b._reject=w}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return oe.prototype.navigate=function(b){if(b&&b.url){var F=b.silentRequestTimeout||1e4;k.Log.debug("IFrameWindow.navigate: Using timeout of:",F),this._timer=window.setTimeout(this._timeout.bind(this),F),this._frame.src=b.url}else this._error("No url provided");return this.promise},oe.prototype._success=function(b){this._cleanup(),k.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(b)},oe.prototype._error=function(b){this._cleanup(),k.Log.error(b),this._reject(new Error(b))},oe.prototype.close=function(){this._cleanup()},oe.prototype._cleanup=function(){this._frame&&(k.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},oe.prototype._timeout=function(){k.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},oe.prototype._message=function(b){if(k.Log.debug("IFrameWindow.message"),this._timer&&b.origin===this._origin&&b.source===this._frame.contentWindow&&"string"==typeof b.data&&(b.data.startsWith("http://")||b.data.startsWith("https://"))){var F=b.data;F?this._success({url:F}):this._error("Invalid response from frame")}},oe.notifyParent=function(b){k.Log.debug("IFrameWindow.notifyParent"),(b=b||window.location.href)&&(k.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(b,location.protocol+"//"+location.host))},m(oe,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),oe}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.UserManagerEvents=void 0;var m=x(0),k=x(16),oe=x(17);R.UserManagerEvents=function(Z){function b(F){!function(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")}(this,b);var w=function(j,L){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||"object"!=typeof L&&"function"!=typeof L?j:L}(this,Z.call(this,F));return w._userLoaded=new oe.Event("User loaded"),w._userUnloaded=new oe.Event("User unloaded"),w._silentRenewError=new oe.Event("Silent renew error"),w._userSignedIn=new oe.Event("User signed in"),w._userSignedOut=new oe.Event("User signed out"),w._userSessionChanged=new oe.Event("User session changed"),w}return function(w,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}(b,Z),b.prototype.load=function(w){var N=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];m.Log.debug("UserManagerEvents.load"),Z.prototype.load.call(this,w),N&&this._userLoaded.raise(w)},b.prototype.unload=function(){m.Log.debug("UserManagerEvents.unload"),Z.prototype.unload.call(this),this._userUnloaded.raise()},b.prototype.addUserLoaded=function(w){this._userLoaded.addHandler(w)},b.prototype.removeUserLoaded=function(w){this._userLoaded.removeHandler(w)},b.prototype.addUserUnloaded=function(w){this._userUnloaded.addHandler(w)},b.prototype.removeUserUnloaded=function(w){this._userUnloaded.removeHandler(w)},b.prototype.addSilentRenewError=function(w){this._silentRenewError.addHandler(w)},b.prototype.removeSilentRenewError=function(w){this._silentRenewError.removeHandler(w)},b.prototype._raiseSilentRenewError=function(w){m.Log.debug("UserManagerEvents._raiseSilentRenewError",w.message),this._silentRenewError.raise(w)},b.prototype.addUserSignedIn=function(w){this._userSignedIn.addHandler(w)},b.prototype.removeUserSignedIn=function(w){this._userSignedIn.removeHandler(w)},b.prototype._raiseUserSignedIn=function(){m.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},b.prototype.addUserSignedOut=function(w){this._userSignedOut.addHandler(w)},b.prototype.removeUserSignedOut=function(w){this._userSignedOut.removeHandler(w)},b.prototype._raiseUserSignedOut=function(){m.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},b.prototype.addUserSessionChanged=function(w){this._userSessionChanged.addHandler(w)},b.prototype.removeUserSessionChanged=function(w){this._userSessionChanged.removeHandler(w)},b.prototype._raiseUserSessionChanged=function(){m.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},b}(k.AccessTokenEvents)},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Timer=void 0;var m=function(){function w(N,j){for(var L=0;L<j.length;L++){var Q=j[L];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(N,Q.key,Q)}}return function(N,j,L){return j&&w(N.prototype,j),L&&w(N,L),N}}(),k=x(0),oe=x(1),Z=x(17);function b(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}function F(w,N){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?w:N}R.Timer=function(w){function N(j){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.Global.timer,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;b(this,N);var J=F(this,w.call(this,j));return J._timer=L,J._nowFunc=Q||function(){return Date.now()/1e3},J}return function(L,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);L.prototype=Object.create(Q&&Q.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(L,Q):L.__proto__=Q)}(N,w),N.prototype.init=function(L){L<=0&&(L=1),L=parseInt(L);var Q=this.now+L;if(this.expiration===Q&&this._timerHandle)k.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),k.Log.debug("Timer.init timer "+this._name+" for duration:",L),this._expiration=Q;var J=5;L<J&&(J=L),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*J)}},N.prototype.cancel=function(){this._timerHandle&&(k.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},N.prototype._callback=function(){k.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),w.prototype.raise.call(this))},m(N,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),N}(Z.Event)},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SilentRenewService=void 0;var m=x(0);R.SilentRenewService=function(){function k(oe){(function(b,F){if(!(b instanceof F))throw new TypeError("Cannot call a class as a function")})(this,k),this._userManager=oe}return k.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(Z){}).catch(function(Z){m.Log.error("SilentRenewService.start: Error from getUser:",Z.message)}))},k.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},k.prototype._tokenExpiring=function(){var Z=this;this._userManager.signinSilent().then(function(b){m.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(b){m.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",b.message),Z._userManager.events._raiseSilentRenewError(b)})},k}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CordovaPopupNavigator=void 0;var m=x(21);R.CordovaPopupNavigator=function(){function k(){!function(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}(this,k)}return k.prototype.prepare=function(Z){var b=new m.CordovaPopupWindow(Z);return Promise.resolve(b)},k}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CordovaIFrameNavigator=void 0;var m=x(21);R.CordovaIFrameNavigator=function(){function k(){!function(Z,b){if(!(Z instanceof b))throw new TypeError("Cannot call a class as a function")}(this,k)}return k.prototype.prepare=function(Z){Z.popupWindowFeatures="hidden=yes";var b=new m.CordovaPopupWindow(Z);return Promise.resolve(b)},k}()},function(Ae,R,x){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Version="1.11.5"}])},574:(It,Ae,R)=>{"use strict";R.d(Ae,{y:()=>L});var x=R(393),k=R(181),oe=R(490),b=R(554),F=R(487);var j=R(494);let L=(()=>{class J{constructor(G){this._isScalar=!1,G&&(this._subscribe=G)}lift(G){const Y=new J;return Y.source=this,Y.operator=G,Y}subscribe(G,Y,we){const{operator:fe}=this,le=function(J,W,G){if(J){if(J instanceof x.L)return J;if(J[k.b])return J[k.b]()}return J||W||G?new x.L(J,W,G):new x.L(oe.c)}(G,Y,we);if(le.add(fe?fe.call(le,this.source):this.source||j.v.useDeprecatedSynchronousErrorHandling&&!le.syncErrorThrowable?this._subscribe(le):this._trySubscribe(le)),j.v.useDeprecatedSynchronousErrorHandling&&le.syncErrorThrowable&&(le.syncErrorThrowable=!1,le.syncErrorThrown))throw le.syncErrorValue;return le}_trySubscribe(G){try{return this._subscribe(G)}catch(Y){j.v.useDeprecatedSynchronousErrorHandling&&(G.syncErrorThrown=!0,G.syncErrorValue=Y),function(J){for(;J;){const{closed:W,destination:G,isStopped:Y}=J;if(W||Y)return!1;J=G&&G instanceof x.L?G:null}return!0}(G)?G.error(Y):console.warn(Y)}}forEach(G,Y){return new(Y=Q(Y))((we,fe)=>{let le;le=this.subscribe(re=>{try{G(re)}catch(Pe){fe(Pe),le&&le.unsubscribe()}},fe,we)})}_subscribe(G){const{source:Y}=this;return Y&&Y.subscribe(G)}[b.L](){return this}pipe(...G){return 0===G.length?this:function(J){return 0===J.length?F.y:1===J.length?J[0]:function(G){return J.reduce((Y,we)=>we(Y),G)}}(G)(this)}toPromise(G){return new(G=Q(G))((Y,we)=>{let fe;this.subscribe(le=>fe=le,le=>we(le),()=>Y(fe))})}}return J.create=W=>new J(W),J})();function Q(J){if(J||(J=j.v.Promise||Promise),!J)throw new Error("no Promise impl found");return J}},490:(It,Ae,R)=>{"use strict";R.d(Ae,{c:()=>k});var x=R(494),m=R(449);const k={closed:!0,next(oe){},error(oe){if(x.v.useDeprecatedSynchronousErrorHandling)throw oe;(0,m.z)(oe)},complete(){}}},709:(It,Ae,R)=>{"use strict";R.d(Ae,{xQ:()=>w,Yc:()=>F});var x=R(574),m=R(393),k=R(319),oe=R(971);class Z extends k.w{constructor(L,Q){super(),this.subject=L,this.subscriber=Q,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const L=this.subject,Q=L.observers;if(this.subject=null,!Q||0===Q.length||L.isStopped||L.closed)return;const J=Q.indexOf(this.subscriber);-1!==J&&Q.splice(J,1)}}var b=R(181);class F extends m.L{constructor(L){super(L),this.destination=L}}let w=(()=>{class j extends x.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[b.b](){return new F(this)}lift(Q){const J=new N(this,this);return J.operator=Q,J}next(Q){if(this.closed)throw new oe.N;if(!this.isStopped){const{observers:J}=this,W=J.length,G=J.slice();for(let Y=0;Y<W;Y++)G[Y].next(Q)}}error(Q){if(this.closed)throw new oe.N;this.hasError=!0,this.thrownError=Q,this.isStopped=!0;const{observers:J}=this,W=J.length,G=J.slice();for(let Y=0;Y<W;Y++)G[Y].error(Q);this.observers.length=0}complete(){if(this.closed)throw new oe.N;this.isStopped=!0;const{observers:Q}=this,J=Q.length,W=Q.slice();for(let G=0;G<J;G++)W[G].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Q){if(this.closed)throw new oe.N;return super._trySubscribe(Q)}_subscribe(Q){if(this.closed)throw new oe.N;return this.hasError?(Q.error(this.thrownError),k.w.EMPTY):this.isStopped?(Q.complete(),k.w.EMPTY):(this.observers.push(Q),new Z(this,Q))}asObservable(){const Q=new x.y;return Q.source=this,Q}}return j.create=(L,Q)=>new N(L,Q),j})();class N extends w{constructor(L,Q){super(),this.destination=L,this.source=Q}next(L){const{destination:Q}=this;Q&&Q.next&&Q.next(L)}error(L){const{destination:Q}=this;Q&&Q.error&&this.destination.error(L)}complete(){const{destination:L}=this;L&&L.complete&&this.destination.complete()}_subscribe(L){const{source:Q}=this;return Q?this.source.subscribe(L):k.w.EMPTY}}},393:(It,Ae,R)=>{"use strict";R.d(Ae,{L:()=>F});var x=R(105),m=R(490),k=R(319),oe=R(181),Z=R(494),b=R(449);class F extends k.w{constructor(j,L,Q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=m.c;break;case 1:if(!j){this.destination=m.c;break}if("object"==typeof j){j instanceof F?(this.syncErrorThrowable=j.syncErrorThrowable,this.destination=j,j.add(this)):(this.syncErrorThrowable=!0,this.destination=new w(this,j));break}default:this.syncErrorThrowable=!0,this.destination=new w(this,j,L,Q)}}[oe.b](){return this}static create(j,L,Q){const J=new F(j,L,Q);return J.syncErrorThrowable=!1,J}next(j){this.isStopped||this._next(j)}error(j){this.isStopped||(this.isStopped=!0,this._error(j))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(j){this.destination.next(j)}_error(j){this.destination.error(j),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:j}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=j,this}}class w extends F{constructor(j,L,Q,J){super(),this._parentSubscriber=j;let W,G=this;(0,x.m)(L)?W=L:L&&(W=L.next,Q=L.error,J=L.complete,L!==m.c&&(G=Object.create(L),(0,x.m)(G.unsubscribe)&&this.add(G.unsubscribe.bind(G)),G.unsubscribe=this.unsubscribe.bind(this))),this._context=G,this._next=W,this._error=Q,this._complete=J}next(j){if(!this.isStopped&&this._next){const{_parentSubscriber:L}=this;Z.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?this.__tryOrSetError(L,this._next,j)&&this.unsubscribe():this.__tryOrUnsub(this._next,j)}}error(j){if(!this.isStopped){const{_parentSubscriber:L}=this,{useDeprecatedSynchronousErrorHandling:Q}=Z.v;if(this._error)Q&&L.syncErrorThrowable?(this.__tryOrSetError(L,this._error,j),this.unsubscribe()):(this.__tryOrUnsub(this._error,j),this.unsubscribe());else if(L.syncErrorThrowable)Q?(L.syncErrorValue=j,L.syncErrorThrown=!0):(0,b.z)(j),this.unsubscribe();else{if(this.unsubscribe(),Q)throw j;(0,b.z)(j)}}}complete(){if(!this.isStopped){const{_parentSubscriber:j}=this;if(this._complete){const L=()=>this._complete.call(this._context);Z.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?(this.__tryOrSetError(j,L),this.unsubscribe()):(this.__tryOrUnsub(L),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(j,L){try{j.call(this._context,L)}catch(Q){if(this.unsubscribe(),Z.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,b.z)(Q)}}__tryOrSetError(j,L,Q){if(!Z.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{L.call(this._context,Q)}catch(J){return Z.v.useDeprecatedSynchronousErrorHandling?(j.syncErrorValue=J,j.syncErrorThrown=!0,!0):((0,b.z)(J),!0)}return!1}_unsubscribe(){const{_parentSubscriber:j}=this;this._context=null,this._parentSubscriber=null,j.unsubscribe()}}},319:(It,Ae,R)=>{"use strict";R.d(Ae,{w:()=>b});var x=R(796),m=R(555),k=R(105);const Z=(()=>{function w(N){return Error.call(this),this.message=N?`${N.length} errors occurred during unsubscription:\n${N.map((j,L)=>`${L+1}) ${j.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=N,this}return w.prototype=Object.create(Error.prototype),w})();class b{constructor(N){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,N&&(this._ctorUnsubscribe=!0,this._unsubscribe=N)}unsubscribe(){let N;if(this.closed)return;let{_parentOrParents:j,_ctorUnsubscribe:L,_unsubscribe:Q,_subscriptions:J}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,j instanceof b)j.remove(this);else if(null!==j)for(let W=0;W<j.length;++W)j[W].remove(this);if((0,k.m)(Q)){L&&(this._unsubscribe=void 0);try{Q.call(this)}catch(W){N=W instanceof Z?F(W.errors):[W]}}if((0,x.k)(J)){let W=-1,G=J.length;for(;++W<G;){const Y=J[W];if((0,m.K)(Y))try{Y.unsubscribe()}catch(we){N=N||[],we instanceof Z?N=N.concat(F(we.errors)):N.push(we)}}}if(N)throw new Z(N)}add(N){let j=N;if(!N)return b.EMPTY;switch(typeof N){case"function":j=new b(N);case"object":if(j===this||j.closed||"function"!=typeof j.unsubscribe)return j;if(this.closed)return j.unsubscribe(),j;if(!(j instanceof b)){const J=j;j=new b,j._subscriptions=[J]}break;default:throw new Error("unrecognized teardown "+N+" added to Subscription.")}let{_parentOrParents:L}=j;if(null===L)j._parentOrParents=this;else if(L instanceof b){if(L===this)return j;j._parentOrParents=[L,this]}else{if(-1!==L.indexOf(this))return j;L.push(this)}const Q=this._subscriptions;return null===Q?this._subscriptions=[j]:Q.push(j),j}remove(N){const j=this._subscriptions;if(j){const L=j.indexOf(N);-1!==L&&j.splice(L,1)}}}var w;function F(w){return w.reduce((N,j)=>N.concat(j instanceof Z?j.errors:j),[])}b.EMPTY=((w=new b).closed=!0,w)},494:(It,Ae,R)=>{"use strict";R.d(Ae,{v:()=>m});let x=!1;const m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const oe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+oe.stack)}else x&&console.log("RxJS: Back to a better error behavior. Thank you. <3");x=k},get useDeprecatedSynchronousErrorHandling(){return x}}},345:(It,Ae,R)=>{"use strict";R.d(Ae,{IY:()=>oe,Ds:()=>b,ft:()=>w});var x=R(393),m=R(574),k=R(444);class oe extends x.L{constructor(j){super(),this.parent=j}_next(j){this.parent.notifyNext(j)}_error(j){this.parent.notifyError(j),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class b extends x.L{notifyNext(j){this.destination.next(j)}notifyError(j){this.destination.error(j)}notifyComplete(){this.destination.complete()}}function w(N,j){if(j.closed)return;if(N instanceof m.y)return N.subscribe(j);let L;try{L=(0,k.s)(N)(j)}catch(Q){j.error(Q)}return L}},441:(It,Ae,R)=>{"use strict";R.d(Ae,{c:()=>Z,N:()=>b});var x=R(709),m=R(574),k=R(319),oe=R(307);class Z extends m.y{constructor(L,Q){super(),this.source=L,this.subjectFactory=Q,this._refCount=0,this._isComplete=!1}_subscribe(L){return this.getSubject().subscribe(L)}getSubject(){const L=this._subject;return(!L||L.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let L=this._connection;return L||(this._isComplete=!1,L=this._connection=new k.w,L.add(this.source.subscribe(new F(this.getSubject(),this))),L.closed&&(this._connection=null,L=k.w.EMPTY)),L}refCount(){return(0,oe.x)()(this)}}const b=(()=>{const j=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:j._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}}})();class F extends x.Yc{constructor(L,Q){super(L),this.connectable=Q}_error(L){this._unsubscribe(),super._error(L)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const L=this.connectable;if(L){this.connectable=null;const Q=L._connection;L._refCount=0,L._subject=null,L._connection=null,Q&&Q.unsubscribe()}}}},402:(It,Ae,R)=>{"use strict";R.d(Ae,{D:()=>G});var x=R(574),m=R(444),k=R(319),oe=R(554),F=R(87),w=R(377),L=R(72),Q=R(489);function G(Y,we){return we?function(Y,we){if(null!=Y){if(function(Y){return Y&&"function"==typeof Y[oe.L]}(Y))return function(Y,we){return new x.y(fe=>{const le=new k.w;return le.add(we.schedule(()=>{const re=Y[oe.L]();le.add(re.subscribe({next(Pe){le.add(we.schedule(()=>fe.next(Pe)))},error(Pe){le.add(we.schedule(()=>fe.error(Pe)))},complete(){le.add(we.schedule(()=>fe.complete()))}}))})),le})}(Y,we);if((0,L.t)(Y))return function(Y,we){return new x.y(fe=>{const le=new k.w;return le.add(we.schedule(()=>Y.then(re=>{le.add(we.schedule(()=>{fe.next(re),le.add(we.schedule(()=>fe.complete()))}))},re=>{le.add(we.schedule(()=>fe.error(re)))}))),le})}(Y,we);if((0,Q.z)(Y))return(0,F.r)(Y,we);if(function(Y){return Y&&"function"==typeof Y[w.hZ]}(Y)||"string"==typeof Y)return function(Y,we){if(!Y)throw new Error("Iterable cannot be null");return new x.y(fe=>{const le=new k.w;let re;return le.add(()=>{re&&"function"==typeof re.return&&re.return()}),le.add(we.schedule(()=>{re=Y[w.hZ](),le.add(we.schedule(function(){if(fe.closed)return;let Pe,Oe;try{const Ve=re.next();Pe=Ve.value,Oe=Ve.done}catch(Ve){return void fe.error(Ve)}Oe?fe.complete():(fe.next(Pe),this.schedule())}))})),le})}(Y,we)}throw new TypeError((null!==Y&&typeof Y||Y)+" is not observable")}(Y,we):Y instanceof x.y?Y:new x.y((0,m.s)(Y))}},693:(It,Ae,R)=>{"use strict";R.d(Ae,{n:()=>oe});var x=R(574),m=R(15),k=R(87);function oe(Z,b){return b?(0,k.r)(Z,b):new x.y((0,m.V)(Z))}},2:(It,Ae,R)=>{"use strict";R.d(Ae,{U:()=>m});var x=R(393);function m(Z,b){return function(w){if("function"!=typeof Z)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return w.lift(new k(Z,b))}}class k{constructor(b,F){this.project=b,this.thisArg=F}call(b,F){return F.subscribe(new oe(b,this.project,this.thisArg))}}class oe extends x.L{constructor(b,F,w){super(b),this.project=F,this.count=0,this.thisArg=w||this}_next(b){let F;try{F=this.project.call(this.thisArg,b,this.count++)}catch(w){return void this.destination.error(w)}this.destination.next(F)}}},282:(It,Ae,R)=>{"use strict";R.d(Ae,{J:()=>k});var x=R(773),m=R(487);function k(oe=Number.POSITIVE_INFINITY){return(0,x.zg)(m.y,oe)}},773:(It,Ae,R)=>{"use strict";R.d(Ae,{zg:()=>oe});var x=R(2),m=R(402),k=R(345);function oe(w,N,j=Number.POSITIVE_INFINITY){return"function"==typeof N?L=>L.pipe(oe((Q,J)=>(0,m.D)(w(Q,J)).pipe((0,x.U)((W,G)=>N(Q,W,J,G))),j)):("number"==typeof N&&(j=N),L=>L.lift(new Z(w,j)))}class Z{constructor(N,j=Number.POSITIVE_INFINITY){this.project=N,this.concurrent=j}call(N,j){return j.subscribe(new b(N,this.project,this.concurrent))}}class b extends k.Ds{constructor(N,j,L=Number.POSITIVE_INFINITY){super(N),this.project=j,this.concurrent=L,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(N){this.active<this.concurrent?this._tryNext(N):this.buffer.push(N)}_tryNext(N){let j;const L=this.index++;try{j=this.project(N,L)}catch(Q){return void this.destination.error(Q)}this.active++,this._innerSub(j)}_innerSub(N){const j=new k.IY(this),L=this.destination;L.add(j);const Q=(0,k.ft)(N,j);Q!==j&&L.add(Q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(N){this.destination.next(N)}notifyComplete(){const N=this.buffer;this.active--,N.length>0?this._next(N.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},307:(It,Ae,R)=>{"use strict";R.d(Ae,{x:()=>m});var x=R(393);function m(){return function(b){return b.lift(new k(b))}}class k{constructor(b){this.connectable=b}call(b,F){const{connectable:w}=this;w._refCount++;const N=new oe(b,w),j=F.subscribe(N);return N.closed||(N.connection=w.connect()),j}}class oe extends x.L{constructor(b,F){super(b),this.connectable=F}_unsubscribe(){const{connectable:b}=this;if(!b)return void(this.connection=null);this.connectable=null;const F=b._refCount;if(F<=0)return void(this.connection=null);if(b._refCount=F-1,F>1)return void(this.connection=null);const{connection:w}=this,N=b._connection;this.connection=null,N&&(!w||N===w)&&N.unsubscribe()}}},87:(It,Ae,R)=>{"use strict";R.d(Ae,{r:()=>k});var x=R(574),m=R(319);function k(oe,Z){return new x.y(b=>{const F=new m.w;let w=0;return F.add(Z.schedule(function(){w!==oe.length?(b.next(oe[w++]),b.closed||F.add(this.schedule())):b.complete()})),F})}},377:(It,Ae,R)=>{"use strict";R.d(Ae,{hZ:()=>m});const m="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},554:(It,Ae,R)=>{"use strict";R.d(Ae,{L:()=>x});const x="function"==typeof Symbol&&Symbol.observable||"@@observable"},181:(It,Ae,R)=>{"use strict";R.d(Ae,{b:()=>x});const x="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},971:(It,Ae,R)=>{"use strict";R.d(Ae,{N:()=>m});const m=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},449:(It,Ae,R)=>{"use strict";function x(m){setTimeout(()=>{throw m},0)}R.d(Ae,{z:()=>x})},487:(It,Ae,R)=>{"use strict";function x(m){return m}R.d(Ae,{y:()=>x})},796:(It,Ae,R)=>{"use strict";R.d(Ae,{k:()=>x});const x=Array.isArray||(m=>m&&"number"==typeof m.length)},489:(It,Ae,R)=>{"use strict";R.d(Ae,{z:()=>x});const x=m=>m&&"number"==typeof m.length&&"function"!=typeof m},105:(It,Ae,R)=>{"use strict";function x(m){return"function"==typeof m}R.d(Ae,{m:()=>x})},555:(It,Ae,R)=>{"use strict";function x(m){return null!==m&&"object"==typeof m}R.d(Ae,{K:()=>x})},72:(It,Ae,R)=>{"use strict";function x(m){return!!m&&"function"!=typeof m.subscribe&&"function"==typeof m.then}R.d(Ae,{t:()=>x})},869:(It,Ae,R)=>{"use strict";function x(m){return m&&"function"==typeof m.schedule}R.d(Ae,{K:()=>x})},444:(It,Ae,R)=>{"use strict";R.d(Ae,{s:()=>L});var x=R(15),m=R(449),oe=R(377),b=R(554),w=R(489),N=R(72),j=R(555);const L=Q=>{if(Q&&"function"==typeof Q[b.L])return(Q=>J=>{const W=Q[b.L]();if("function"!=typeof W.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return W.subscribe(J)})(Q);if((0,w.z)(Q))return(0,x.V)(Q);if((0,N.t)(Q))return(Q=>J=>(Q.then(W=>{J.closed||(J.next(W),J.complete())},W=>J.error(W)).then(null,m.z),J))(Q);if(Q&&"function"==typeof Q[oe.hZ])return(Q=>J=>{const W=Q[oe.hZ]();for(;;){let G;try{G=W.next()}catch(Y){return J.error(Y),J}if(G.done){J.complete();break}if(J.next(G.value),J.closed)break}return"function"==typeof W.return&&J.add(()=>{W.return&&W.return()}),J})(Q);{const W=`You provided ${(0,j.K)(Q)?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(W)}}},15:(It,Ae,R)=>{"use strict";R.d(Ae,{V:()=>x});const x=m=>k=>{for(let oe=0,Z=m.length;oe<Z&&!k.closed;oe++)k.next(m[oe]);k.complete()}},782:(It,Ae,R)=>{"use strict";R.d(Ae,{e:()=>Z});var x=R(0),k=R(340),oe=R(639);let Z=(()=>{class F{constructor(){this.manager=new x.UserManager({authority:k.N.IDENTITY_SERVER,client_id:k.N.CLIENT_ID,redirect_uri:k.N.REDIRECT_URI,post_logout_redirect_uri:k.N.POSTLOGOUT_URI,response_type:k.N.RESPONSE_TYPE,scope:k.N.SCOPE,filterProtocolClaims:!0,loadUserInfo:!0}),this.manager.getUser().then(N=>{this.user=N})}isLoggedIn(){return null!=this.user&&!this.user.expired}getClaims(){return this.user.profile}getAuthorizationHeaderValue(){return`${this.user.token_type} ${this.user.access_token}`}startAuthentication(){return this.manager.signinRedirect()}signOut(){return this.manager.signoutRedirect()}completeAuthentication(){return this.manager.signinRedirectCallback().then(N=>{this.user=N,console.log(this.user)})}}return F.\u0275fac=function(N){return new(N||F)},F.\u0275prov=oe.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})()},340:(It,Ae,R)=>{"use strict";R.d(Ae,{N:()=>x});const x={production:!0,IDENTITY_SERVER:"https://spiceopedia-identity.azurewebsites.net/",CLIENT_ID:"spicyui",REDIRECT_URI:"https://spiceopedia.azurewebsites.net/auth-callback",POSTLOGOUT_URI:"https://spiceopedia.azurewebsites.net/logout",RESPONSE_TYPE:"code",SCOPE:"openid profile email role api1.read",WEBAPI_URI:"https://spiceopediaapi.azurewebsites.net/api/"}},544:(It,Ae,R)=>{"use strict";var x=R(583),m=R(639);class k extends x.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends k{static makeCurrent(){(0,x.HT)(new oe)}onAndCancel(H,M,E){return H.addEventListener(M,E,!1),()=>{H.removeEventListener(M,E,!1)}}dispatchEvent(H,M){H.dispatchEvent(M)}remove(H){H.parentNode&&H.parentNode.removeChild(H)}createElement(H,M){return(M=M||this.getDefaultDocument()).createElement(H)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(H){return H.nodeType===Node.ELEMENT_NODE}isShadowRoot(H){return H instanceof DocumentFragment}getGlobalEventTarget(H,M){return"window"===M?window:"document"===M?H:"body"===M?H.body:null}getBaseHref(H){const M=(Z=Z||document.querySelector("base"),Z?Z.getAttribute("href"):null);return null==M?null:function(O){F=F||document.createElement("a"),F.setAttribute("href",O);const H=F.pathname;return"/"===H.charAt(0)?H:`/${H}`}(M)}resetBaseElement(){Z=null}getUserAgent(){return window.navigator.userAgent}getCookie(H){return(0,x.Mx)(document.cookie,H)}}let F,Z=null;const N=new m.OlP("TRANSITION_ID"),L=[{provide:m.ip1,useFactory:function(O,H,M){return()=>{M.get(m.CZH).donePromise.then(()=>{const E=(0,x.q)(),U=H.querySelectorAll(`style[ng-transition="${O}"]`);for(let ne=0;ne<U.length;ne++)E.remove(U[ne])})}},deps:[N,x.K0,m.zs3],multi:!0}];class Q{static init(){(0,m.VLi)(new Q)}addToWindow(H){m.dqk.getAngularTestability=(E,U=!0)=>{const ne=H.findTestabilityInTree(E,U);if(null==ne)throw new Error("Could not find testability for element.");return ne},m.dqk.getAllAngularTestabilities=()=>H.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>H.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(E=>{const U=m.dqk.getAllAngularTestabilities();let ne=U.length,se=!1;const be=function(Fe){se=se||Fe,ne--,0==ne&&E(se)};U.forEach(function(Fe){Fe.whenStable(be)})})}findTestabilityInTree(H,M,E){if(null==M)return null;const U=H.getTestability(M);return null!=U?U:E?(0,x.q)().isShadowRoot(M)?this.findTestabilityInTree(H,M.host,!0):this.findTestabilityInTree(H,M.parentElement,!0):null}}let J=(()=>{class O{build(){return new XMLHttpRequest}}return O.\u0275fac=function(M){return new(M||O)},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})();const at=new m.OlP("EventManagerPlugins");let tt=(()=>{class O{constructor(M,E){this._zone=E,this._eventNameToPlugin=new Map,M.forEach(U=>U.manager=this),this._plugins=M.slice().reverse()}addEventListener(M,E,U){return this._findPluginFor(E).addEventListener(M,E,U)}addGlobalEventListener(M,E,U){return this._findPluginFor(E).addGlobalEventListener(M,E,U)}getZone(){return this._zone}_findPluginFor(M){const E=this._eventNameToPlugin.get(M);if(E)return E;const U=this._plugins;for(let ne=0;ne<U.length;ne++){const se=U[ne];if(se.supports(M))return this._eventNameToPlugin.set(M,se),se}throw new Error(`No event manager plugin found for event ${M}`)}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(at),m.LFG(m.R0b))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})();class ot{constructor(H){this._doc=H}addGlobalEventListener(H,M,E){const U=(0,x.q)().getGlobalEventTarget(this._doc,H);if(!U)throw new Error(`Unsupported event target ${U} for event ${M}`);return this.addEventListener(U,M,E)}}let Re=(()=>{class O{constructor(){this._stylesSet=new Set}addStyles(M){const E=new Set;M.forEach(U=>{this._stylesSet.has(U)||(this._stylesSet.add(U),E.add(U))}),this.onStylesAdded(E)}onStylesAdded(M){}getAllStyles(){return Array.from(this._stylesSet)}}return O.\u0275fac=function(M){return new(M||O)},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})(),ht=(()=>{class O extends Re{constructor(M){super(),this._doc=M,this._hostNodes=new Map,this._hostNodes.set(M.head,[])}_addStylesToHost(M,E,U){M.forEach(ne=>{const se=this._doc.createElement("style");se.textContent=ne,U.push(E.appendChild(se))})}addHost(M){const E=[];this._addStylesToHost(this._stylesSet,M,E),this._hostNodes.set(M,E)}removeHost(M){const E=this._hostNodes.get(M);E&&E.forEach(At),this._hostNodes.delete(M)}onStylesAdded(M){this._hostNodes.forEach((E,U)=>{this._addStylesToHost(M,U,E)})}ngOnDestroy(){this._hostNodes.forEach(M=>M.forEach(At))}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(x.K0))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})();function At(O){(0,x.q)().remove(O)}const En={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ut=/%COMP%/g;function Wt(O,H,M){for(let E=0;E<H.length;E++){let U=H[E];Array.isArray(U)?Wt(O,U,M):(U=U.replace(Ut,O),M.push(U))}return M}function he(O){return H=>{if("__ngUnwrap__"===H)return O;!1===O(H)&&(H.preventDefault(),H.returnValue=!1)}}let A=(()=>{class O{constructor(M,E,U){this.eventManager=M,this.sharedStylesHost=E,this.appId=U,this.rendererByCompId=new Map,this.defaultRenderer=new ge(M)}createRenderer(M,E){if(!M||!E)return this.defaultRenderer;switch(E.encapsulation){case m.ifc.Emulated:{let U=this.rendererByCompId.get(E.id);return U||(U=new We(this.eventManager,this.sharedStylesHost,E,this.appId),this.rendererByCompId.set(E.id,U)),U.applyToHost(M),U}case 1:case m.ifc.ShadowDom:return new Ge(this.eventManager,this.sharedStylesHost,M,E);default:if(!this.rendererByCompId.has(E.id)){const U=Wt(E.id,E.styles,[]);this.sharedStylesHost.addStyles(U),this.rendererByCompId.set(E.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(tt),m.LFG(ht),m.LFG(m.AFp))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})();class ge{constructor(H){this.eventManager=H,this.data=Object.create(null)}destroy(){}createElement(H,M){return M?document.createElementNS(En[M]||M,H):document.createElement(H)}createComment(H){return document.createComment(H)}createText(H){return document.createTextNode(H)}appendChild(H,M){H.appendChild(M)}insertBefore(H,M,E){H&&H.insertBefore(M,E)}removeChild(H,M){H&&H.removeChild(M)}selectRootElement(H,M){let E="string"==typeof H?document.querySelector(H):H;if(!E)throw new Error(`The selector "${H}" did not match any elements`);return M||(E.textContent=""),E}parentNode(H){return H.parentNode}nextSibling(H){return H.nextSibling}setAttribute(H,M,E,U){if(U){M=U+":"+M;const ne=En[U];ne?H.setAttributeNS(ne,M,E):H.setAttribute(M,E)}else H.setAttribute(M,E)}removeAttribute(H,M,E){if(E){const U=En[E];U?H.removeAttributeNS(U,M):H.removeAttribute(`${E}:${M}`)}else H.removeAttribute(M)}addClass(H,M){H.classList.add(M)}removeClass(H,M){H.classList.remove(M)}setStyle(H,M,E,U){U&(m.JOm.DashCase|m.JOm.Important)?H.style.setProperty(M,E,U&m.JOm.Important?"important":""):H.style[M]=E}removeStyle(H,M,E){E&m.JOm.DashCase?H.style.removeProperty(M):H.style[M]=""}setProperty(H,M,E){H[M]=E}setValue(H,M){H.nodeValue=M}listen(H,M,E){return"string"==typeof H?this.eventManager.addGlobalEventListener(H,M,he(E)):this.eventManager.addEventListener(H,M,he(E))}}class We extends ge{constructor(H,M,E,U){super(H),this.component=E;const ne=Wt(U+"-"+E.id,E.styles,[]);M.addStyles(ne),this.contentAttr="_ngcontent-%COMP%".replace(Ut,U+"-"+E.id),this.hostAttr="_nghost-%COMP%".replace(Ut,U+"-"+E.id)}applyToHost(H){super.setAttribute(H,this.hostAttr,"")}createElement(H,M){const E=super.createElement(H,M);return super.setAttribute(E,this.contentAttr,""),E}}class Ge extends ge{constructor(H,M,E,U){super(H),this.sharedStylesHost=M,this.hostEl=E,this.shadowRoot=E.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ne=Wt(U.id,U.styles,[]);for(let se=0;se<ne.length;se++){const be=document.createElement("style");be.textContent=ne[se],this.shadowRoot.appendChild(be)}}nodeOrShadowRoot(H){return H===this.hostEl?this.shadowRoot:H}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(H,M){return super.appendChild(this.nodeOrShadowRoot(H),M)}insertBefore(H,M,E){return super.insertBefore(this.nodeOrShadowRoot(H),M,E)}removeChild(H,M){return super.removeChild(this.nodeOrShadowRoot(H),M)}parentNode(H){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(H)))}}let pt=(()=>{class O extends ot{constructor(M){super(M)}supports(M){return!0}addEventListener(M,E,U){return M.addEventListener(E,U,!1),()=>this.removeEventListener(M,E,U)}removeEventListener(M,E,U){return M.removeEventListener(E,U)}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(x.K0))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})();const Kt=["alt","control","meta","shift"],nt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},an={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},tr={alt:O=>O.altKey,control:O=>O.ctrlKey,meta:O=>O.metaKey,shift:O=>O.shiftKey};let yt=(()=>{class O extends ot{constructor(M){super(M)}supports(M){return null!=O.parseEventName(M)}addEventListener(M,E,U){const ne=O.parseEventName(E),se=O.eventCallback(ne.fullKey,U,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,x.q)().onAndCancel(M,ne.domEventName,se))}static parseEventName(M){const E=M.toLowerCase().split("."),U=E.shift();if(0===E.length||"keydown"!==U&&"keyup"!==U)return null;const ne=O._normalizeKey(E.pop());let se="";if(Kt.forEach(Fe=>{const $e=E.indexOf(Fe);$e>-1&&(E.splice($e,1),se+=Fe+".")}),se+=ne,0!=E.length||0===ne.length)return null;const be={};return be.domEventName=U,be.fullKey=se,be}static getEventFullKey(M){let E="",U=function(O){let H=O.key;if(null==H){if(H=O.keyIdentifier,null==H)return"Unidentified";H.startsWith("U+")&&(H=String.fromCharCode(parseInt(H.substring(2),16)),3===O.location&&an.hasOwnProperty(H)&&(H=an[H]))}return nt[H]||H}(M);return U=U.toLowerCase()," "===U?U="space":"."===U&&(U="dot"),Kt.forEach(ne=>{ne!=U&&tr[ne](M)&&(E+=ne+".")}),E+=U,E}static eventCallback(M,E,U){return ne=>{O.getEventFullKey(ne)===M&&U.runGuarded(()=>E(ne))}}static _normalizeKey(M){switch(M){case"esc":return"escape";default:return M}}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(x.K0))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})();const Ar=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:x.bD},{provide:m.g9A,useValue:function(){oe.makeCurrent(),Q.init()},multi:!0},{provide:x.K0,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),pi=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:at,useClass:pt,multi:!0,deps:[x.K0,m.R0b,m.Lbi]},{provide:at,useClass:yt,multi:!0,deps:[x.K0]},[],{provide:A,useClass:A,deps:[tt,ht,m.AFp]},{provide:m.FYo,useExisting:A},{provide:Re,useExisting:ht},{provide:ht,useClass:ht,deps:[x.K0]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:tt,useClass:tt,deps:[at,m.R0b]},{provide:x.JF,useClass:J,deps:[]},[]];let Pn=(()=>{class O{constructor(M){if(M)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(M){return{ngModule:O,providers:[{provide:m.AFp,useValue:M.appId},{provide:N,useExisting:m.AFp},L]}}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(O,12))},O.\u0275mod=m.oAB({type:O}),O.\u0275inj=m.cJS({providers:pi,imports:[x.ez,m.hGG]}),O})();"undefined"!=typeof window&&window;var Ht=R(353);let ir=(()=>{class O{constructor(M,E){this.router=M,this.route=E,this.title="spiceopedia",M.events.subscribe(U=>{})}}return O.\u0275fac=function(M){return new(M||O)(m.Y36(Ht.F0),m.Y36(Ht.gz))},O.\u0275cmp=m.Xpm({type:O,selectors:[["app-root"]],decls:1,vars:0,template:function(M,E){1&M&&m._UZ(0,"router-outlet")},directives:[Ht.lC],styles:[""]}),O})();var Qt=R(782);let a=(()=>{class O{constructor(M){this.authService=M}canActivate(){return!!this.authService.isLoggedIn()||(this.authService.startAuthentication(),!1)}}return O.\u0275fac=function(M){return new(M||O)(m.LFG(Qt.e))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),s=(()=>{class O{constructor(M){this.authService=M}ngOnInit(){}signout(){this.authService.signOut()}}return O.\u0275fac=function(M){return new(M||O)(m.Y36(Qt.e))},O.\u0275cmp=m.Xpm({type:O,selectors:[["app-header"]],decls:18,vars:0,consts:[[1,"navbar","col-lg-12","col-12","p-0","fixed-top","d-flex","flex-row","default-layout-navbar"],[1,"text-center","navbar-brand-wrapper","d-flex","align-items-center","justify-content-center"],["href","index.html",1,"navbar-brand","brand-logo"],["src","../assets/images/logo.svg","alt","logo"],["href","index.html",1,"navbar-brand","brand-logo-mini"],["src","../assets/images/logo-mini.svg","alt","logo"],[1,"navbar-menu-wrapper","d-flex","align-items-stretch"],["type","button","data-toggle","minimize",1,"navbar-toggler","navbar-toggler","align-self-center"],[1,"fas","fa-bars"],[1,"navbar-nav","navbar-nav-right"],[1,"nav-item","nav-profile","dropdown"],["href","#","data-toggle","dropdown","id","profileDropdown",1,"nav-link","dropdown-toggle"],["src","http://via.placeholder.com/30x30","alt","profile"],["aria-labelledby","profileDropdown",1,"dropdown-menu","dropdown-menu-right","navbar-dropdown"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],[1,"fas","fa-power-off","text-primary"]],template:function(M,E){1&M&&(m.TgZ(0,"nav",0),m.TgZ(1,"div",1),m.TgZ(2,"a",2),m._UZ(3,"img",3),m.qZA(),m.TgZ(4,"a",4),m._UZ(5,"img",5),m.qZA(),m.qZA(),m.TgZ(6,"div",6),m.TgZ(7,"button",7),m._UZ(8,"span",8),m.qZA(),m.TgZ(9,"ul",9),m.TgZ(10,"li",10),m.TgZ(11,"a",11),m._UZ(12,"img",12),m.qZA(),m.TgZ(13,"div",13),m._UZ(14,"div",14),m.TgZ(15,"a",15),m.NdJ("click",function(){return E.signout()}),m._UZ(16,"i",16),m._uU(17," Logout "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA())},styles:[""]}),O})();const c=function(){return["/dashboard"]},h=function(){return["/taxonomy"]},y=function(){return["/authcallback"]};let T=(()=>{class O{constructor(M){this.authService=M}ngOnInit(){this.userName=this.authService.getClaims().given_name,this.role=this.authService.getClaims().role}}return O.\u0275fac=function(M){return new(M||O)(m.Y36(Qt.e))},O.\u0275cmp=m.Xpm({type:O,selectors:[["app-sidebar"]],decls:31,vars:8,consts:[["id","sidebar",1,"sidebar","sidebar-offcanvas"],[1,"nav"],[1,"nav-item","nav-profile"],[1,"nav-link"],[1,"profile-image"],["src","http://via.placeholder.com/40x40","alt","image"],[1,"profile-name"],[1,"name"],[1,"designation"],[1,"nav-item","active"],[1,"nav-link",3,"routerLink"],[1,"fa","fa-home","menu-icon"],[1,"menu-title"],[1,"nav-item"],[1,"fa","fa-puzzle-piece","menu-icon"],["href","pages/documentation.html",1,"nav-link"],[1,"far","fa-file-alt","menu-icon"]],template:function(M,E){1&M&&(m.TgZ(0,"nav",0),m.TgZ(1,"ul",1),m.TgZ(2,"li",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m._UZ(5,"img",5),m.qZA(),m.TgZ(6,"div",6),m.TgZ(7,"p",7),m._uU(8),m.qZA(),m.TgZ(9,"p",8),m._uU(10),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"li",9),m.TgZ(12,"a",10),m._UZ(13,"i",11),m.TgZ(14,"span",12),m._uU(15,"Dashboard"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(16,"li",13),m.TgZ(17,"a",10),m._UZ(18,"i",14),m.TgZ(19,"span",12),m._uU(20,"Taxonomy"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"li",13),m.TgZ(22,"a",10),m._UZ(23,"i",14),m.TgZ(24,"span",12),m._uU(25,"Authcallback"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"li",13),m.TgZ(27,"a",15),m._UZ(28,"i",16),m.TgZ(29,"span",12),m._uU(30,"Documentation"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&M&&(m.xp6(8),m.hij(" Welcome ",E.userName," "),m.xp6(2),m.hij(" ",E.role," "),m.xp6(2),m.Q6J("routerLink",m.DdM(5,c)),m.xp6(5),m.Q6J("routerLink",m.DdM(6,h)),m.xp6(5),m.Q6J("routerLink",m.DdM(7,y)))},directives:[Ht.yS],styles:[""]}),O})(),B=(()=>{class O{constructor(){}ngOnInit(){}}return O.\u0275fac=function(M){return new(M||O)},O.\u0275cmp=m.Xpm({type:O,selectors:[["app-footer"]],decls:10,vars:0,consts:[[1,"footer"],[1,"d-sm-flex","justify-content-center","justify-content-sm-between"],[1,"text-muted","text-center","text-sm-left","d-block","d-sm-inline-block"],["href","#","target","_blank"],[1,"float-none","float-sm-right","d-block","mt-1","mt-sm-0","text-center"],[1,"far","fa-heart","text-danger"]],template:function(M,E){1&M&&(m.TgZ(0,"footer",0),m.TgZ(1,"div",1),m.TgZ(2,"span",2),m._uU(3,"Copyright \xa9 2021 "),m.TgZ(4,"a",3),m._uU(5,"Spiceopedia"),m.qZA(),m._uU(6,". All rights reserved."),m.qZA(),m.TgZ(7,"span",4),m._uU(8,"Hand-crafted & made with "),m._UZ(9,"i",5),m.qZA(),m.qZA(),m.qZA())},styles:[""]}),O})(),ie=(()=>{class O{constructor(){}ngOnInit(){}}return O.\u0275fac=function(M){return new(M||O)},O.\u0275cmp=m.Xpm({type:O,selectors:[["app-main-layout"]],decls:6,vars:0,consts:[[1,"container-fluid","page-body-wrapper",2,"padding-top","70px"],[1,"main-panel"]],template:function(M,E){1&M&&(m._UZ(0,"app-header"),m.TgZ(1,"div",0),m._UZ(2,"app-sidebar"),m.TgZ(3,"div",1),m._UZ(4,"router-outlet"),m.qZA(),m.qZA(),m._UZ(5,"app-footer"))},directives:[s,T,Ht.lC,B],styles:[""]}),O})(),q=(()=>{class O{constructor(){}ngOnInit(){}}return O.\u0275fac=function(M){return new(M||O)},O.\u0275cmp=m.Xpm({type:O,selectors:[["app-plain-layout"]],decls:1,vars:0,template:function(M,E){1&M&&m._UZ(0,"router-outlet")},directives:[Ht.lC],styles:[""]}),O})();const te=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"",component:ie,children:[{path:"dashboard",loadChildren:()=>R.e(152).then(R.bind(R,152)).then(O=>O.DashboardModule)},{path:"taxonomy",loadChildren:()=>R.e(555).then(R.bind(R,763)).then(O=>O.TaxonomyModule)},{path:"logout",loadChildren:()=>R.e(513).then(R.bind(R,513)).then(O=>O.LogoutModule)}],canActivate:[a]},{path:"",component:q,children:[{path:"login",loadChildren:"../login/login.module#LoginModule"},{path:"registration",loadChildren:"../registration/registration.module#RegistrationModule"}]},{path:"",component:q,children:[{path:"auth-callback",loadChildren:()=>R.e(464).then(R.bind(R,464)).then(O=>O.AuthCallbackModule)}]}];let ae=(()=>{class O{}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=m.oAB({type:O}),O.\u0275inj=m.cJS({imports:[[Ht.Bz.forChild(te)],Ht.Bz]}),O})(),ue=(()=>{class O{}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=m.oAB({type:O}),O.\u0275inj=m.cJS({imports:[[x.ez,ae]]}),O})(),ce=(()=>{class O{}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=m.oAB({type:O,bootstrap:[ir]}),O.\u0275inj=m.cJS({providers:[],imports:[[Pn,Ht.Bz.forRoot([]),ue]]}),O})();R(340).N.production&&(0,m.G48)(),Ar().bootstrapModule(ce).catch(O=>console.error(O))}},It=>{It(It.s=544)}]);
(self.webpackChunkspiceopedia=self.webpackChunkspiceopedia||[]).push([[179],{255:It=>{function Ae(P){return Promise.resolve().then(()=>{var F=new Error("Cannot find module '"+P+"'");throw F.code="MODULE_NOT_FOUND",F})}Ae.keys=()=>[],Ae.resolve=Ae,Ae.id=255,It.exports=Ae},583:(It,Ae,P)=>{"use strict";P.d(Ae,{mr:()=>de,ez:()=>vi,K0:()=>D,Do:()=>Pe,V_:()=>j,Ye:()=>Oe,S$:()=>we,b0:()=>ie,lw:()=>E,EM:()=>yr,JF:()=>ur,w_:()=>b,bD:()=>mr,q:()=>k,Mx:()=>s,HT:()=>J});var F=P(639);let m=null;function k(){return m}function J(w){m||(m=w)}class b{}const D=new F.OlP("DocumentToken");let E=(()=>{class w{historyGo(C){throw new Error("Not implemented")}}return w.\u0275fac=function(C){return new(C||w)},w.\u0275prov=(0,F.Yz7)({factory:O,token:w,providedIn:"platform"}),w})();function O(){return(0,F.LFG)(L)}const j=new F.OlP("Location Initialized");let L=(()=>{class w extends E{constructor(C){super(),this._doc=C,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(C){const Q=k().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",C,!1),()=>Q.removeEventListener("popstate",C)}onHashChange(C){const Q=k().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",C,!1),()=>Q.removeEventListener("hashchange",C)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(C){this.location.pathname=C}pushState(C,Q,ve){Z()?this._history.pushState(C,Q,ve):this.location.hash=ve}replaceState(C,Q,ve){Z()?this._history.replaceState(C,Q,ve):this.location.hash=ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(C=0){this._history.go(C)}getState(){return this._history.state}}return w.\u0275fac=function(C){return new(C||w)(F.LFG(D))},w.\u0275prov=(0,F.Yz7)({factory:Y,token:w,providedIn:"platform"}),w})();function Z(){return!!window.history.pushState}function Y(){return new L((0,F.LFG)(D))}function K(w,V){if(0==w.length)return V;if(0==V.length)return w;let C=0;return w.endsWith("/")&&C++,V.startsWith("/")&&C++,2==C?w+V.substring(1):1==C?w+V:w+"/"+V}function z(w){const V=w.match(/#|\?|$/),C=V&&V.index||w.length;return w.slice(0,C-("/"===w[C-1]?1:0))+w.slice(C)}function G(w){return w&&"?"!==w[0]?"?"+w:w}let we=(()=>{class w{historyGo(C){throw new Error("Not implemented")}}return w.\u0275fac=function(C){return new(C||w)},w.\u0275prov=(0,F.Yz7)({factory:he,token:w,providedIn:"root"}),w})();function he(w){const V=(0,F.LFG)(D).location;return new ie((0,F.LFG)(E),V&&V.origin||"")}const de=new F.OlP("appBaseHref");let ie=(()=>{class w extends we{constructor(C,Q){if(super(),this._platformLocation=C,this._removeListenerFns=[],null==Q&&(Q=this._platformLocation.getBaseHrefFromDOM()),null==Q)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Q}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}prepareExternalUrl(C){return K(this._baseHref,C)}path(C=!1){const Q=this._platformLocation.pathname+G(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&C?`${Q}${ve}`:Q}pushState(C,Q,ve,Te){const je=this.prepareExternalUrl(ve+G(Te));this._platformLocation.pushState(C,Q,je)}replaceState(C,Q,ve,Te){const je=this.prepareExternalUrl(ve+G(Te));this._platformLocation.replaceState(C,Q,je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(C=0){var Q,ve;null===(ve=(Q=this._platformLocation).historyGo)||void 0===ve||ve.call(Q,C)}}return w.\u0275fac=function(C){return new(C||w)(F.LFG(E),F.LFG(de,8))},w.\u0275prov=F.Yz7({token:w,factory:w.\u0275fac}),w})(),Pe=(()=>{class w extends we{constructor(C,Q){super(),this._platformLocation=C,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}path(C=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(C){const Q=K(this._baseHref,C);return Q.length>0?"#"+Q:Q}pushState(C,Q,ve,Te){let je=this.prepareExternalUrl(ve+G(Te));0==je.length&&(je=this._platformLocation.pathname),this._platformLocation.pushState(C,Q,je)}replaceState(C,Q,ve,Te){let je=this.prepareExternalUrl(ve+G(Te));0==je.length&&(je=this._platformLocation.pathname),this._platformLocation.replaceState(C,Q,je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(C=0){var Q,ve;null===(ve=(Q=this._platformLocation).historyGo)||void 0===ve||ve.call(Q,C)}}return w.\u0275fac=function(C){return new(C||w)(F.LFG(E),F.LFG(de,8))},w.\u0275prov=F.Yz7({token:w,factory:w.\u0275fac}),w})(),Oe=(()=>{class w{constructor(C,Q){this._subject=new F.vpe,this._urlChangeListeners=[],this._platformStrategy=C;const ve=this._platformStrategy.getBaseHref();this._platformLocation=Q,this._baseHref=z(ze(ve)),this._platformStrategy.onPopState(Te=>{this._subject.emit({url:this.path(!0),pop:!0,state:Te.state,type:Te.type})})}path(C=!1){return this.normalize(this._platformStrategy.path(C))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(C,Q=""){return this.path()==this.normalize(C+G(Q))}normalize(C){return w.stripTrailingSlash(function(w,V){return w&&V.startsWith(w)?V.substring(w.length):V}(this._baseHref,ze(C)))}prepareExternalUrl(C){return C&&"/"!==C[0]&&(C="/"+C),this._platformStrategy.prepareExternalUrl(C)}go(C,Q="",ve=null){this._platformStrategy.pushState(ve,"",C,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+G(Q)),ve)}replaceState(C,Q="",ve=null){this._platformStrategy.replaceState(ve,"",C,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+G(Q)),ve)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(C=0){var Q,ve;null===(ve=(Q=this._platformStrategy).historyGo)||void 0===ve||ve.call(Q,C)}onUrlChange(C){this._urlChangeListeners.push(C),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)}))}_notifyUrlChangeListeners(C="",Q){this._urlChangeListeners.forEach(ve=>ve(C,Q))}subscribe(C,Q,ve){return this._subject.subscribe({next:C,error:Q,complete:ve})}}return w.\u0275fac=function(C){return new(C||w)(F.LFG(we),F.LFG(E))},w.normalizeQueryParams=G,w.joinWithSlash=K,w.stripTrailingSlash=z,w.\u0275prov=(0,F.Yz7)({factory:Ve,token:w,providedIn:"root"}),w})();function Ve(){return new Oe((0,F.LFG)(we),(0,F.LFG)(E))}function ze(w){return w.replace(/\/index.html$/,"")}var Et=(()=>((Et=Et||{})[Et.Zero=0]="Zero",Et[Et.One=1]="One",Et[Et.Two=2]="Two",Et[Et.Few=3]="Few",Et[Et.Many=4]="Many",Et[Et.Other=5]="Other",Et))();const xe=F.kL8;class Zt{}let nn=(()=>{class w extends Zt{constructor(C){super(),this.locale=C}getPluralCategory(C,Q){switch(xe(Q||this.locale)(C)){case Et.Zero:return"zero";case Et.One:return"one";case Et.Two:return"two";case Et.Few:return"few";case Et.Many:return"many";default:return"other"}}}return w.\u0275fac=function(C){return new(C||w)(F.LFG(F.soG))},w.\u0275prov=F.Yz7({token:w,factory:w.\u0275fac}),w})();function s(w,V){V=encodeURIComponent(V);for(const C of w.split(";")){const Q=C.indexOf("="),[ve,Te]=-1==Q?[C,""]:[C.slice(0,Q),C.slice(Q+1)];if(ve.trim()===V)return decodeURIComponent(Te)}return null}let vi=(()=>{class w{}return w.\u0275fac=function(C){return new(C||w)},w.\u0275mod=F.oAB({type:w}),w.\u0275inj=F.cJS({providers:[{provide:Zt,useClass:nn}]}),w})();const mr="browser";let yr=(()=>{class w{}return w.\u0275prov=(0,F.Yz7)({token:w,providedIn:"root",factory:()=>new vr((0,F.LFG)(D),window)}),w})();class vr{constructor(V,C){this.document=V,this.window=C,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const C=function(w,V){const C=w.getElementById(V)||w.getElementsByName(V)[0];if(C)return C;if("function"==typeof w.createTreeWalker&&w.body&&(w.body.createShadowRoot||w.body.attachShadow)){const Q=w.createTreeWalker(w.body,NodeFilter.SHOW_ELEMENT);let ve=Q.currentNode;for(;ve;){const Te=ve.shadowRoot;if(Te){const je=Te.getElementById(V)||Te.querySelector(`[name="${V}"]`);if(je)return je}ve=Q.nextNode()}}return null}(this.document,V);C&&(this.scrollToElement(C),this.attemptFocus(C))}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const C=this.window.history;C&&C.scrollRestoration&&(C.scrollRestoration=V)}}scrollToElement(V){const C=V.getBoundingClientRect(),Q=C.left+this.window.pageXOffset,ve=C.top+this.window.pageYOffset,Te=this.offset();this.window.scrollTo(Q-Te[0],ve-Te[1])}attemptFocus(V){return V.focus(),this.document.activeElement===V}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=Kt(this.window.history)||Kt(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch(V){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(V){return!1}}}function Kt(w){return Object.getOwnPropertyDescriptor(w,"scrollRestoration")}class ur{}},639:(It,Ae,P)=>{"use strict";P.d(Ae,{deG:()=>H,tb:()=>Dy,AFp:()=>wy,ip1:()=>kd,CZH:()=>Ls,hGG:()=>bD,z2F:()=>Ba,sBO:()=>o1,Sil:()=>Va,_Vd:()=>Ro,EJc:()=>xy,SBq:()=>Ni,qLn:()=>as,vpe:()=>Oi,gxx:()=>hs,tBr:()=>rs,XFs:()=>Je,OlP:()=>S,zs3:()=>Qt,ZZ4:()=>Bu,aQg:()=>Hu,soG:()=>Xu,YKP:()=>ym,v3s:()=>XS,h0i:()=>Po,PXZ:()=>zS,R0b:()=>Ur,FiY:()=>qi,Lbi:()=>Sy,g9A:()=>Cy,Qsj:()=>Kw,FYo:()=>Vu,JOm:()=>Ti,Tiy:()=>ud,q3G:()=>In,tp0:()=>uo,EAV:()=>rD,Rgc:()=>Ia,dDg:()=>Ry,DyG:()=>Or,GfV:()=>cm,s_b:()=>qu,ifc:()=>yt,eFA:()=>Ly,G48:()=>VS,_c5:()=>hD,VLi:()=>US,c2e:()=>Fy,zSh:()=>ma,wAp:()=>ft,vHH:()=>Ve,EiD:()=>Af,mCW:()=>ua,qzn:()=>ss,JVY:()=>$0,pB0:()=>z0,eBb:()=>q0,L6k:()=>K0,LAX:()=>W0,cg1:()=>Xl,Tjo:()=>dD,kL8:()=>Pg,yhl:()=>Ef,dqk:()=>ct,sIi:()=>_a,CqO:()=>zl,QGY:()=>Wl,F4k:()=>jp,RDi:()=>Te,AaK:()=>G,z3N:()=>Wi,TTD:()=>ar,xp6:()=>hh,uIk:()=>Ll,Suo:()=>ey,Xpm:()=>Vr,lG2:()=>Tr,Yz7:()=>xe,cJS:()=>Ge,oAB:()=>Br,Yjl:()=>yi,Y36:()=>Ea,_UZ:()=>Np,qZA:()=>ql,TgZ:()=>Kl,Ikx:()=>Ql,LFG:()=>Vn,$8M:()=>na,NdJ:()=>Gl,CRH:()=>ty,Q6J:()=>Hl,DdM:()=>qm,iGM:()=>Xm,LSH:()=>zc,kYT:()=>Nt,_uU:()=>fg,hij:()=>Mu});var F=P(574),m=P(869),k=P(282),oe=P(693),b=P(709),D=P(319),E=P(441);var L=P(307);function Z(){return new b.xQ}function K(e){for(let t in e)if(e[t]===K)return t;throw Error("Could not find renamed property on target object.")}function G(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(G).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const he=K({__forward_ref__:K});function de(e){return e.__forward_ref__=de,e.toString=function(){return G(this())},e}function ie(e){return function(e){return"function"==typeof e&&e.hasOwnProperty(he)&&e.__forward_ref__===de}(e)?e():e}class Ve extends Error{constructor(t,n){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(t,n)),this.code=t}}function He(e){return"string"==typeof e?e:null==e?"":String(e)}function Xe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():He(e)}function ot(e,t){const n=t?` in ${t}`:"";throw new Ve("201",`No provider for ${Xe(e)} found${n}`)}function M(e,t){null==e&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function xe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ge(e){return{providers:e.providers||[],imports:e.imports||[]}}function pt(e){return wt(e,Dn)||wt(e,Ht)}function wt(e,t){return e.hasOwnProperty(t)?e[t]:null}function yn(e){return e&&(e.hasOwnProperty(Ze)||e.hasOwnProperty(vt))?e[Ze]:null}const Dn=K({\u0275prov:K}),Ze=K({\u0275inj:K}),Ht=K({ngInjectableDef:K}),vt=K({ngInjectorDef:K});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let $t;function nt(e){const t=$t;return $t=e,t}function an(e,t,n){const r=pt(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Je.Optional?null:void 0!==t?t:void ot(G(e),"Injector")}function vn(e){return{toString:e}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),yt=(()=>((yt=yt||{})[yt.Emulated=0]="Emulated",yt[yt.None=2]="None",yt[yt.ShadowDom=3]="ShadowDom",yt))();const Ir="undefined"!=typeof globalThis&&globalThis,ut="undefined"!=typeof window&&window,Vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rr="undefined"!=typeof global&&global,ct=Ir||rr||ut||Vt,Qn={},Tt=[],pr=K({\u0275cmp:K}),dn=K({\u0275dir:K}),On=K({\u0275pipe:K}),Ar=K({\u0275mod:K}),pi=K({\u0275loc:K}),Pn=K({\u0275fac:K}),ir=K({__NG_ELEMENT_ID__:K});let gi=0;function Vr(e){return vn(()=>{const n={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Tt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||yt.Emulated,id:"c",styles:e.styles||Tt,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,o=e.features,u=e.pipes;return r.id+=gi++,r.inputs=Sr(e.inputs,n),r.outputs=Sr(e.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Cr):null,r.pipeDefs=u?()=>("function"==typeof u?u():u).map(Fn):null,r})}function Cr(e){return fn(e)||function(e){return e[dn]||null}(e)}function Fn(e){return function(e){return e[On]||null}(e)}const lt={};function Br(e){return vn(()=>{const t={type:e.type,bootstrap:e.bootstrap||Tt,declarations:e.declarations||Tt,imports:e.imports||Tt,exports:e.exports||Tt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(lt[e.id]=e.type),t})}function Nt(e,t){return vn(()=>{const n=Mn(e,!0);n.declarations=t.declarations||Tt,n.imports=t.imports||Tt,n.exports=t.exports||Tt})}function Sr(e,t){if(null==e)return Qn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Tr=Vr;function yi(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function fn(e){return e[pr]||null}function Mn(e,t){const n=e[Ar]||null;if(!n&&!0===t)throw new Error(`Type ${G(e)} does not have '\u0275mod' property.`);return n}const y=11,x=20;function $e(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ne(e){return Array.isArray(e)&&!0===e[1]}function _t(e){return 0!=(8&e.flags)}function qe(e){return 2==(2&e.flags)}function Qe(e){return 1==(1&e.flags)}function Ct(e){return null!==e.template}function Wt(e){return 0!=(512&e[2])}function hn(e,t){return e.hasOwnProperty(Pn)?e[Pn]:null}class Dr{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ar(){return Gt}function Gt(e){return e.type.prototype.ngOnChanges&&(e.setInput=vr),yr}function yr(){const e=Kr(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Qn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function vr(e,t,n,r){const i=Kr(e)||function(e,t){return e[Kt]=t}(e,{previous:Qn,current:null}),o=i.current||(i.current={}),u=i.previous,l=this.declaredInputs[n],p=u[l];o[l]=new Dr(p&&p.currentValue,t,u===Qn),e[r]=t}ar.ngInherit=!0;const Kt="__ngSimpleChanges__";function Kr(e){return e[Kt]||null}let ve;function Te(e){ve=e}function st(e){return!!e.listen}const Yt={createRenderer:(e,t)=>void 0!==ve?ve:"undefined"!=typeof document?document:void 0};function Rt(e){for(;Array.isArray(e);)e=e[0];return e}function bn(e,t){return Rt(t[e.index])}function Wr(e,t){return e.data[t]}function $n(e,t){const n=t[e];return $e(n)?n:n[0]}function po(e){return 4==(4&e[2])}function $s(e){return 128==(128&e[2])}function Fr(e,t){return null==t?null:e[t]}function Qi(e){e[18]=0}function Lo(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const gt={lFrame:Xa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qs(){return gt.bindingsEnabled}function Le(){return gt.lFrame.lView}function Ot(){return gt.lFrame.tView}function kn(){let e=Ga();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ga(){return gt.lFrame.currentTNode}function kr(e,t){const n=gt.lFrame;n.currentTNode=e,n.isParent=t}function Uo(){return gt.lFrame.isParent}function go(){return gt.isInCheckNoChangesMode}function Bo(e){gt.isInCheckNoChangesMode=e}function Xi(){return gt.lFrame.bindingIndex++}function Ho(e,t){const n=gt.lFrame;n.bindingIndex=n.bindingRootIndex=e,zs(t)}function zs(e){gt.lFrame.currentDirectiveIndex=e}function Ja(){return gt.lFrame.currentQueryIndex}function Ui(e){gt.lFrame.currentQueryIndex=e}function mc(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Za(e,t,n){if(n&Je.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&Je.Host||(i=mc(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=gt.lFrame=Qa();return r.currentTNode=t,r.lView=e,!0}function Ei(e){const t=Qa(),n=e[1];gt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Qa(){const e=gt.lFrame,t=null===e?null:e.child;return null===t?Xa(e):t}function Xa(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function eu(){const e=gt.lFrame;return gt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const tu=eu;function $o(){const e=eu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function tr(){return gt.lFrame.selectedIndex}function wi(e){gt.lFrame.selectedIndex=e}function pn(){const e=gt.lFrame;return Wr(e.tView,e.selectedIndex)}function Gs(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:l,ngAfterViewInit:p,ngAfterViewChecked:_,ngOnDestroy:A}=o;u&&(e.contentHooks||(e.contentHooks=[])).push(-n,u),l&&((e.contentHooks||(e.contentHooks=[])).push(n,l),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,l)),p&&(e.viewHooks||(e.viewHooks=[])).push(-n,p),_&&((e.viewHooks||(e.viewHooks=[])).push(n,_),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,_)),null!=A&&(e.destroyHooks||(e.destroyHooks=[])).push(n,A)}}function mo(e,t,n){Ys(e,t,3,n)}function yo(e,t,n,r){(3&e[2])===n&&Ys(e,t,n,r)}function Ko(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ys(e,t,n,r){const o=null!=r?r:-1,u=t.length-1;let l=0;for(let p=void 0!==r?65535&e[18]:0;p<u;p++)if("number"==typeof t[p+1]){if(l=t[p],null!=r&&l>=r)break}else t[p]<0&&(e[18]+=65536),(l<o||-1==o)&&(Sc(e,n,t,p),e[18]=(4294901760&e[18])+p+2),p++}function Sc(e,t,n,r){const i=n[r]<0,o=n[r+1],l=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class vo{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function qo(e,t,n){const r=st(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const u=n[i++],l=n[i++],p=n[i++];r?e.setAttribute(t,l,p,u):t.setAttributeNS(u,l,p)}else{const u=o,l=n[++i];Zs(u)?r&&e.setProperty(t,u,l):r?e.setAttribute(t,u,l):t.setAttribute(u,l),i++}}return i}function Bi(e){return 3===e||4===e||6===e}function Zs(e){return 64===e.charCodeAt(0)}function Wo(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||iu(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function iu(e,t,n,r,i){let o=0,u=e.length;if(-1===t)u=-1;else for(;o<e.length;){const l=e[o++];if("number"==typeof l){if(l===t){u=-1;break}if(l>t){u=o-1;break}}}for(;o<e.length;){const l=e[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==u&&(e.splice(u,0,t),o=u+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function ou(e){return-1!==e}function Hi(e){return 32767&e}function to(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Kn=!0;function zo(e){const t=Kn;return Kn=e,t}let no=0;function bo(e,t){const n=Xs(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Eo(r.data,e),Eo(t,null),Eo(r.blueprint,null));const i=wo(e,t),o=e.injectorIndex;if(ou(i)){const u=Hi(i),l=to(i,t),p=l[1].data;for(let _=0;_<8;_++)t[o+_]=l[u+_]|p[u+_]}return t[o+8]=i,o}function Eo(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Xs(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function wo(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const o=i[1],u=o.type;if(r=2===u?o.declTNode:1===u?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Yo(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ir)&&(r=n[ir]),null==r&&(r=n[ir]=no++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function ea(e,t,n){if(n&Je.Optional)return e;ot(t,"NodeInjector")}function Jo(e,t,n,r){if(n&Je.Optional&&void 0===r&&(r=null),0==(n&(Je.Self|Je.Host))){const i=e[9],o=nt(void 0);try{return i?i.get(t,r,n&Je.Optional):an(t,r,n&Je.Optional)}finally{nt(o)}}return ea(r,t,n)}function Pc(e,t,n,r=Je.Default,i){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ir)?e[ir]:void 0;return"number"==typeof t?t>=0?255&t:au:t}(n);if("function"==typeof o){if(!Za(t,e,r))return r&Je.Host?ea(i,n,r):Jo(t,n,r,i);try{const u=o(r);if(null!=u||r&Je.Optional)return u;ot(n)}finally{tu()}}else if("number"==typeof o){let u=null,l=Xs(e,t),p=-1,_=r&Je.Host?t[16][6]:null;for((-1===l||r&Je.SkipSelf)&&(p=-1===l?wo(e,t):t[l+8],-1!==p&&cu(r,!1)?(u=t[1],l=Hi(p),t=to(p,t)):l=-1);-1!==l;){const A=t[1];if(uu(o,l,A.data)){const W=Mc(l,t,n,u,r,_);if(W!==Si)return W}p=t[l+8],-1!==p&&cu(r,t[1].data[l+8]===_)&&uu(o,l,t)?(u=A,l=Hi(p),t=to(p,t)):l=-1}}}return Jo(t,n,r,i)}const Si={};function au(){return new ro(kn(),Le())}function Mc(e,t,n,r,i,o){const u=t[1],l=u.data[e+8],A=Zo(l,u,n,null==r?qe(l)&&Kn:r!=u&&0!=(3&l.type),i&Je.Host&&o===l);return null!==A?Co(t,u,A,l):Si}function Zo(e,t,n,r,i){const o=e.providerIndexes,u=t.data,l=1048575&o,p=e.directiveStart,A=o>>20,te=i?l+A:e.directiveEnd;for(let me=r?l:l+A;me<te;me++){const Ce=u[me];if(me<p&&n===Ce||me>=p&&Ce.type===n)return me}if(i){const me=u[p];if(me&&Ct(me)&&me.type===n)return p}return null}function Co(e,t,n,r){let i=e[n];const o=t.data;if(function(e){return e instanceof vo}(i)){const u=i;u.resolving&&function(e,t){throw new Ve("200",`Circular dependency in DI detected for ${e}`)}(Xe(o[n]));const l=zo(u.canSeeViewProviders);u.resolving=!0;const p=u.injectImpl?nt(u.injectImpl):null;Za(e,r,Je.Default);try{i=e[n]=u.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const u=Gt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==p&&nt(p),zo(l),u.resolving=!1,tu()}}return i}function uu(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function cu(e,t){return!(e&Je.Self||e&Je.Host&&t)}class ro{constructor(t,n){this._tNode=t,this._lView=n}get(t,n){return Pc(this._tNode,this._lView,t,void 0,n)}}function na(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Bi(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(kn(),e)}const Di="__parameters__";function $i(e,t,n){return vn(()=>{const r=function(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const u=new i(...o);return l.annotation=u,l;function l(p,_,A){const W=p.hasOwnProperty(Di)?p[Di]:Object.defineProperty(p,Di,{value:[]})[Di];for(;W.length<=A;)W.push(null);return(W[A]=W[A]||[]).push(u),p}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class S{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=xe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const H=new S("AnalyzeForEntryComponents"),Or=Function;function Gr(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Gr(r,t)):t!==e&&t.push(r)}return t}function xi(e,t){e.forEach(n=>Array.isArray(n)?xi(n,t):t(n))}function du(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Do(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const ia={},Lc="__NG_DI_FLAG__",ts="ngTempTokenPath",S0=/\n/gm,jc="__source",Uc=K({provide:String,useValue:K});let oa;function ns(e){const t=oa;return oa=e,t}function F0(e,t=Je.Default){if(void 0===oa)throw new Error("inject() must be called from an injection context");return null===oa?an(e,void 0,t):oa.get(e,t&Je.Optional?null:void 0,t)}function Vn(e,t=Je.Default){return($t||F0)(ie(e),t)}function Fo(e){const t=[];for(let n=0;n<e.length;n++){const r=ie(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=Je.Default;for(let u=0;u<r.length;u++){const l=r[u],p=x0(l);"number"==typeof p?-1===p?i=l.token:o|=p:i=l}t.push(Vn(i,o))}else t.push(Vn(r))}return t}function sa(e,t){return e[Lc]=t,e.prototype[Lc]=t,e}function x0(e){return e[Lc]}function hf(e,t,n,r){const i=e[ts];throw t[jc]&&i.unshift(t[jc]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=G(t);if(Array.isArray(t))i=t.map(G).join(" -> ");else if("object"==typeof t){let o=[];for(let u in t)if(t.hasOwnProperty(u)){let l=t[u];o.push(u+":"+("string"==typeof l?JSON.stringify(l):G(l)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(S0,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[ts]=null,e}const rs=sa($i("Inject",e=>({token:e})),-1),qi=sa($i("Optional"),8),uo=sa($i("SkipSelf"),4);let gu;function os(e){var t;return(null===(t=function(){if(void 0===gu&&(gu=null,ct.trustedTypes))try{gu=ct.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return gu}())||void 0===t?void 0:t.createHTML(e))||e}class xo{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class j0 extends xo{getTypeName(){return"HTML"}}class U0 extends xo{getTypeName(){return"Style"}}class V0 extends xo{getTypeName(){return"Script"}}class B0 extends xo{getTypeName(){return"URL"}}class H0 extends xo{getTypeName(){return"ResourceURL"}}function Wi(e){return e instanceof xo?e.changingThisBreaksApplicationSecurity:e}function ss(e,t){const n=Ef(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Ef(e){return e instanceof xo&&e.getTypeName()||null}function $0(e){return new j0(e)}function K0(e){return new U0(e)}function q0(e){return new V0(e)}function W0(e){return new B0(e)}function z0(e){return new H0(e)}class G0{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(os(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch(n){return null}}}class Y0{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const r=this.inertDocument.createElement("body");n.appendChild(r)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=os(t),n;const r=this.inertDocument.createElement("body");return r.innerHTML=os(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(t){const n=t.attributes;for(let i=n.length-1;0<i;i--){const u=n.item(i).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&t.removeAttribute(u)}let r=t.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const Z0=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Q0=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ua(e){return(e=String(e)).match(Z0)||e.match(Q0)?e:"unsafe:"+e}function Ii(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function ca(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const Sf=Ii("area,br,col,hr,img,wbr"),Df=Ii("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ff=Ii("rp,rt"),$c=ca(Sf,ca(Df,Ii("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ca(Ff,Ii("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ca(Ff,Df)),Kc=Ii("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qc=Ii("srcset"),xf=ca(Kc,qc,Ii("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ii("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),X0=Ii("script,style,template");class ev{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!$c.hasOwnProperty(n))return this.sanitizedSomething=!0,!X0.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),u=o.name,l=u.toLowerCase();if(!xf.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let p=o.value;Kc[l]&&(p=ua(p)),qc[l]&&(e=p,p=(e=String(e)).split(",").map(t=>ua(t.trim())).join(", ")),this.buf.push(" ",u,'="',If(p),'"')}var e;return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();$c.hasOwnProperty(n)&&!Sf.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(If(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const tv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nv=/([^\#-~ |!])/g;function If(e){return e.replace(/&/g,"&amp;").replace(tv,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nv,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yu;function Af(e,t){let n=null;try{yu=yu||function(e){const t=new Y0(e);return function(){try{return!!(new window.DOMParser).parseFromString(os(""),"text/html")}catch(e){return!1}}()?new G0(t):t}(e);let r=t?String(t):"";n=yu.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=yu.getInertBodyElement(r)}while(r!==o);return os((new ev).sanitizeChildren(Wc(n)||n))}finally{if(n){const r=Wc(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Wc(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var In=(()=>((In=In||{})[In.NONE=0]="NONE",In[In.HTML=1]="HTML",In[In.STYLE=2]="STYLE",In[In.SCRIPT=3]="SCRIPT",In[In.URL=4]="URL",In[In.RESOURCE_URL=5]="RESOURCE_URL",In))();function zc(e){const t=function(){const e=Le();return e&&e[12]}();return t?t.sanitize(In.URL,e)||"":ss(e,"URL")?Wi(e):ua(He(e))}const Pf="__ngContext__";function lr(e,t){e[Pf]=t}function Yc(e){const t=function(e){return e[Pf]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function vu(e){return e.ngOriginalError}function bv(e,...t){e.error(...t)}class as{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=this._findContext(t),i=(e=t)&&e.ngErrorLogger||bv;var e;i(this._console,"ERROR",t),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?t.ngDebugContext||this._findContext(vu(t)):null}_findOriginalError(t){let n=t&&vu(t);for(;n&&vu(n);)n=vu(n);return n||null}}const Bf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ct))();function Ai(e){return e instanceof Function?e():e}var Ti=(()=>((Ti=Ti||{})[Ti.Important=1]="Important",Ti[Ti.DashCase=2]="DashCase",Ti))();function Qc(e,t){return undefined(e,t)}function fa(e){const t=e[3];return Ne(t)?t[3]:t}function Xc(e){return Wf(e[13])}function el(e){return Wf(e[4])}function Wf(e){for(;null!==e&&!Ne(e);)e=e[4];return e}function cs(e,t,n,r,i){if(null!=r){let o,u=!1;Ne(r)?o=r:$e(r)&&(u=!0,r=r[0]);const l=Rt(r);0===e&&null!==n?null==i?Qf(t,n,l):Io(t,n,l,i||null,!0):1===e&&null!==n?Io(t,n,l,i||null,!0):2===e?function(e,t,n){const r=bu(e,t);r&&function(e,t,n,r){st(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,l,u):3===e&&t.destroyNode(l),null!=o&&function(e,t,n,r,i){const o=n[7];o!==Rt(n)&&cs(t,e,r,o,i);for(let l=10;l<n.length;l++){const p=n[l];ha(p[1],p,e,t,r,o)}}(t,e,o,n,i)}}function nl(e,t,n){return st(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Gf(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Lo(i,-1)),n.splice(r,1)}function rl(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Gf(i,r),t>0&&(e[n-1][4]=r[4]);const o=Do(e,10+t);!function(e,t){ha(e,t,t[y],2,null,null),t[0]=null,t[6]=null}(r[1],r);const u=o[19];null!==u&&u.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Yf(e,t){if(!(256&t[2])){const n=t[y];st(n)&&n.destroyNode&&ha(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return il(e[1],e);for(;t;){let n=null;if($e(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)$e(t)&&il(t[1],t),t=t[3];null===t&&(t=e),$e(t)&&il(t[1],t),n=t&&t[4]}t=n}}(t)}}function il(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof vo)){const o=n[r+1];if(Array.isArray(o))for(let u=0;u<o.length;u+=2){const l=i[o[u]],p=o[u+1];try{p.call(l)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const u=n[o+1],l="function"==typeof u?u(t):Rt(t[u]),p=r[i=n[o+2]],_=n[o+3];"boolean"==typeof _?l.removeEventListener(n[o],p,_):_>=0?r[i=_]():r[i=-_].unsubscribe(),o+=2}else{const u=r[i=n[o+1]];n[o].call(u)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&st(t[y])&&t[y].destroy();const n=t[17];if(null!==n&&Ne(t[3])){n!==t[3]&&Gf(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Jf(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===yt.None||i===yt.Emulated)return null}return bn(r,n)}(e,t.parent,n)}function Io(e,t,n,r,i){st(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Qf(e,t,n){st(e)?e.appendChild(t,n):t.appendChild(n)}function Xf(e,t,n,r,i){null!==r?Io(e,t,n,r,i):Qf(e,t,n)}function bu(e,t){return st(e)?e.parentNode(t):t.parentNode}let nh=function(e,t,n){return 40&e.type?bn(e,n):null};function Eu(e,t,n,r){const i=Jf(e,r,t),o=t[y],l=function(e,t,n){return nh(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let p=0;p<n.length;p++)Xf(o,i,n[p],l,!1);else Xf(o,i,n,l,!1)}function wu(e,t){if(null!==t){const n=t.type;if(3&n)return bn(t,e);if(4&n)return sl(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return wu(e,r);{const i=e[t.index];return Ne(i)?sl(-1,i):Rt(i)}}if(32&n)return Qc(t,e)()||Rt(e[t.index]);{const r=ih(e,t);return null!==r?Array.isArray(r)?r[0]:wu(fa(e[16]),r):wu(e,t.next)}}return null}function ih(e,t){return null!==t?e[16][6].projection[t.projection]:null}function sl(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return wu(r,i)}return t[7]}function al(e,t,n,r,i,o,u){for(;null!=n;){const l=r[n.index],p=n.type;if(u&&0===t&&(l&&lr(Rt(l),r),n.flags|=4),64!=(64&n.flags))if(8&p)al(e,t,n.child,r,i,o,!1),cs(t,e,i,l,o);else if(32&p){const _=Qc(n,r);let A;for(;A=_();)cs(t,e,i,A,o);cs(t,e,i,l,o)}else 16&p?sh(e,t,r,n,i,o):cs(t,e,i,l,o);n=u?n.projectionNext:n.next}}function ha(e,t,n,r,i,o){al(n,r,e.firstChild,t,i,o,!1)}function sh(e,t,n,r,i,o){const u=n[16],p=u[6].projection[r.projection];if(Array.isArray(p))for(let _=0;_<p.length;_++)cs(t,e,i,p[_],o);else al(e,t,p,u[3],i,o,!0)}function ah(e,t,n){st(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ul(e,t,n){st(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function uh(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const ch="ng-template";function Wv(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==uh(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function lh(e){return 4===e.type&&e.value!==ch}function zv(e,t,n){return t===(4!==e.type||n?e.value:ch)}function Gv(e,t,n){let r=4;const i=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(Bi(e[t]))return t;return e.length}(i);let u=!1;for(let l=0;l<t.length;l++){const p=t[l];if("number"!=typeof p){if(!u)if(4&r){if(r=2|1&r,""!==p&&!zv(e,p,n)||""===p&&1===t.length){if(ri(r))return!1;u=!0}}else{const _=8&r?p:t[++l];if(8&r&&null!==e.attrs){if(!Wv(e.attrs,_,n)){if(ri(r))return!1;u=!0}continue}const W=Yv(8&r?"class":p,i,lh(e),n);if(-1===W){if(ri(r))return!1;u=!0;continue}if(""!==_){let te;te=W>o?"":i[W+1].toLowerCase();const me=8&r?te:null;if(me&&-1!==uh(me,_,0)||2&r&&_!==te){if(ri(r))return!1;u=!0}}}}else{if(!u&&!ri(r)&&!ri(p))return!1;if(u&&ri(p))continue;u=!1,r=p|1&r}}return ri(r)||u}function ri(e){return 0==(1&e)}function Yv(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const u=t[i];if(u===e)return i;if(3===u||6===u)o=!0;else{if(1===u||2===u){let l=t[++i];for(;"string"==typeof l;)l=t[++i];continue}if(4===u)break;if(0===u){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function dh(e,t,n=!1){for(let r=0;r<t.length;r++)if(Gv(e,t[r],n))return!0;return!1}function fh(e,t){return e?":not("+t.trim()+")":t}function e_(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let u=e[n];if("string"==typeof u)if(2&r){const l=e[++n];i+="["+u+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+u:4&r&&(i+=" "+u);else""!==i&&!ri(u)&&(t+=fh(o,i),i=""),r=u,o=o||!ri(r);n++}return""!==i&&(t+=fh(o,i)),t}const St={};function hh(e){ph(Ot(),Le(),tr()+e,go())}function ph(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&mo(t,o,n)}else{const o=e.preOrderHooks;null!==o&&yo(t,o,0,n)}wi(n)}function Sh(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const u=e.data[o];Ui(i),u.contentQueries(2,t[o],o)}}}function pa(e,t,n,r,i,o,u,l,p,_){const A=t.blueprint.slice();return A[0]=i,A[2]=140|r,Qi(A),A[3]=A[15]=e,A[8]=n,A[10]=u||e&&e[10],A[y]=l||e&&e[y],A[12]=p||e&&e[12]||null,A[9]=_||e&&e[9]||null,A[6]=o,A[16]=2==t.type?e[16]:A,A}function ls(e,t,n,r,i){let o=e.data[t];if(null===o)o=function(e,t,n,r,i){const o=Ga(),u=Uo(),p=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=p),null!==o&&(u?null==o.child&&null!==p.parent&&(o.child=p):null===o.next&&(o.next=p)),p}(e,t,n,r,i),gt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const u=function(){const e=gt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===u?-1:u.injectorIndex}return kr(o,!0),o}function ds(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ga(e,t,n){Ei(t);try{const r=e.viewQuery;null!==r&&xl(1,r,n);const i=e.template;null!==i&&Dh(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Sh(e,t),e.staticViewQueries&&xl(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)M_(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,$o()}}function fs(e,t,n,r){const i=t[2];if(256==(256&i))return;Ei(t);const o=go();try{Qi(t),function(e){gt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Dh(e,t,n,2,r);const u=3==(3&i);if(!o)if(u){const _=e.preOrderCheckHooks;null!==_&&mo(t,_,null)}else{const _=e.preOrderHooks;null!==_&&yo(t,_,0,null),Ko(t,0)}if(function(e){for(let t=Xc(e);null!==t;t=el(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&Lo(o,1),i[2]|=1024}}}(t),function(e){for(let t=Xc(e);null!==t;t=el(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];$s(r)&&fs(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Sh(e,t),!o)if(u){const _=e.contentCheckHooks;null!==_&&mo(t,_)}else{const _=e.contentHooks;null!==_&&yo(t,_,1),Ko(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)wi(~i);else{const o=i,u=n[++r],l=n[++r];Ho(u,o),l(2,t[o])}}}finally{wi(-1)}}(e,t);const l=e.components;null!==l&&function(e,t){for(let n=0;n<t.length;n++)P_(e,t[n])}(t,l);const p=e.viewQuery;if(null!==p&&xl(2,p,r),!o)if(u){const _=e.viewCheckHooks;null!==_&&mo(t,_)}else{const _=e.viewHooks;null!==_&&yo(t,_,2),Ko(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Lo(t[3],-1))}finally{$o()}}function h_(e,t,n,r){const i=t[10],o=!go(),u=po(t);try{o&&!u&&i.begin&&i.begin(),u&&ga(e,t,r),fs(e,t,n,r)}finally{o&&!u&&i.end&&i.end()}}function Dh(e,t,n,r,i){const o=tr(),u=2&r;try{wi(-1),u&&t.length>x&&ph(e,t,x,go()),n(r,i)}finally{wi(o)}}function xh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Fu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Fu(e,t,n,r,i,o,u,l,p,_){const A=x+r,W=A+i,te=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:St);return n}(A,W),me="function"==typeof _?_():_;return te[1]={type:e,blueprint:te,template:n,queries:null,viewQuery:l,declTNode:t,data:te.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:p,consts:me,incompleteFirstPass:!1}}function Th(e,t,n,r){const i=Vh(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Bh(e).push(r,i.length-1))}function Rh(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function jr(e,t,n,r,i,o,u,l){const p=bn(t,n);let A,_=t.inputs;!l&&null!=_&&(A=_[r])?(Kh(e,n,A,r,i),qe(t)&&function(e,t){const n=$n(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=u?u(i,t.value||"",r):i,st(o)?o.setProperty(p,r,i):Zs(r)||(p.setProperty?p.setProperty(r,i):p[r]=i))}function Mh(e,t,n,r,i,o){const u=o.hostBindings;if(u){let l=e.hostBindingOpCodes;null===l&&(l=e.hostBindingOpCodes=[]);const p=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(l)!=p&&l.push(p),l.push(r,i,u)}}function kh(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Nh(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function F_(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ct(t)&&(n[""]=e)}}function Oh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Lh(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=hn(i.type)),u=new vo(o,Ct(i),null);e.blueprint[r]=u,n[r]=u,Mh(e,t,0,r,ds(e,n,i.hostVars,St),i)}function x_(e,t,n){const r=bn(t,e),i=xh(n),o=e[10],u=xu(e,pa(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=u}function Ri(e,t,n,r,i,o){const u=bn(e,t);!function(e,t,n,r,i,o,u){if(null==o)st(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const l=null==u?He(o):u(o,r||"",i);st(e)?e.setAttribute(t,i,l,n):n?t.setAttributeNS(n,i,l):t.setAttribute(i,l)}}(t[y],u,o,e.value,n,r,i)}function I_(e,t,n,r,i,o){const u=o[t];if(null!==u){const l=r.setInput;for(let p=0;p<u.length;){const _=u[p++],A=u[p++],W=u[p++];null!==l?r.setInput(n,W,_,A):n[A]=W}}}function A_(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function P_(e,t){const n=$n(t,e);if($s(n)){const r=n[1];80&n[2]?fs(r,n,r.template,n[8]):n[5]>0&&Cl(n)}}function Cl(e){for(let r=Xc(e);null!==r;r=el(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const u=o[1];fs(u,o,u.template,o[8])}else o[5]>0&&Cl(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=$n(n[r],e);$s(i)&&i[5]>0&&Cl(i)}}function M_(e,t){const n=$n(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),ga(r,n,n[8])}function xu(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Sl(e){for(;e;){e[2]|=64;const t=fa(e);if(Wt(e)&&!t)return e;e=t}return null}function Fl(e,t,n){const r=t[10];r.begin&&r.begin();try{fs(e,t,e.template,n)}catch(i){throw $h(t,i),i}finally{r.end&&r.end()}}function Uh(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Yc(n),i=r[1];h_(i,r,i.template,n)}}(e[8])}function xl(e,t,n){Ui(0),t(e,n)}const j_=(()=>Promise.resolve(null))();function Vh(e){return e[7]||(e[7]=[])}function Bh(e){return e.cleanup||(e.cleanup=[])}function $h(e,t){const n=e[9],r=n?n.get(as,null):null;r&&r.handleError(t)}function Kh(e,t,n,r,i){for(let o=0;o<n.length;){const u=n[o++],l=n[o++],p=t[u],_=e.data[u];null!==_.setInput?_.setInput(p,i,r,l):p[l]=i}}function Yi(e,t,n){const r=function(e,t){return Rt(t[e])}(t,e);!function(e,t,n){st(e)?e.setValue(t,n):t.textContent=n}(e[y],r,n)}function Iu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let u=0;u<t.length;u++){const l=t[u];"number"==typeof l?o=l:1==o?i=we(i,l):2==o&&(r=we(r,l+": "+t[++u]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const hs=new S("INJECTOR",-1);class qh{get(t,n=ia){if(n===ia){const r=new Error(`NullInjectorError: No provider for ${G(t)}!`);throw r.name="NullInjectorError",r}return n}}const ma=new S("Set Injector scope."),ya={},B_={};let Il;function Wh(){return void 0===Il&&(Il=new qh),Il}function zh(e,t=null,n=null,r){return new $_(e,n,t||Wh(),r)}class $_{constructor(t,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&xi(n,l=>this.processProvider(l,t,n)),xi([t],l=>this.processInjectorType(l,[],o)),this.records.set(hs,ps(void 0,this));const u=this.records.get(ma);this.scope=null!=u?u.value:null,this.source=i||("object"==typeof t?null:G(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=ia,r=Je.Default){this.assertNotDestroyed();const i=ns(this),o=nt(void 0);try{if(!(r&Je.SkipSelf)){let l=this.records.get(t);if(void 0===l){const p=("function"==typeof(e=t)||"object"==typeof e&&e instanceof S)&&pt(t);l=p&&this.injectableDefInScope(p)?ps(Al(t),ya):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&Je.Self?Wh():this.parent).get(t,n=r&Je.Optional&&n===ia?null:n)}catch(u){if("NullInjectorError"===u.name){if((u[ts]=u[ts]||[]).unshift(G(t)),i)throw u;return hf(u,t,"R3InjectorError",this.source)}throw u}finally{nt(o),ns(i)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,i)=>t.push(G(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,r){if(!(t=ie(t)))return!1;let i=yn(t);const o=null==i&&t.ngModule||void 0,u=void 0===o?t:o,l=-1!==r.indexOf(u);if(void 0!==o&&(i=yn(o)),null==i)return!1;if(null!=i.imports&&!l){let A;r.push(u);try{xi(i.imports,W=>{this.processInjectorType(W,n,r)&&(void 0===A&&(A=[]),A.push(W))})}finally{}if(void 0!==A)for(let W=0;W<A.length;W++){const{ngModule:te,providers:me}=A[W];xi(me,Ce=>this.processProvider(Ce,te,me||Tt))}}this.injectorDefTypes.add(u);const p=hn(u)||(()=>new u);this.records.set(u,ps(p,ya));const _=i.providers;if(null!=_&&!l){const A=t;xi(_,W=>this.processProvider(W,A,_))}return void 0!==o&&void 0!==t.providers}processProvider(t,n,r){let i=gs(t=ie(t))?t:ie(t&&t.provide);const o=Yh(e=t)?ps(void 0,e.useValue):ps(function(e,t,n){let r;if(gs(e)){const i=ie(e);return hn(i)||Al(i)}if(Yh(e))r=()=>ie(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Fo(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Vn(ie(e.useExisting));else{const i=ie(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return hn(i)||Al(i);r=()=>new i(...Fo(e.deps))}return r}(e),ya);var e;if(gs(t)||!0!==t.multi)this.records.get(i);else{let u=this.records.get(i);u||(u=ps(void 0,ya,!0),u.factory=()=>Fo(u.multi),this.records.set(i,u)),i=t,u.multi.push(t)}this.records.set(i,o)}hydrate(t,n){return n.value===ya&&(n.value=B_,n.value=n.factory()),"object"==typeof n.value&&n.value&&null!==(e=n.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(n.value),n.value;var e}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ie(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Al(e){const t=pt(e),n=null!==t?t.factory:hn(e);if(null!==n)return n;if(e instanceof S)throw new Error(`Token ${G(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const r=function(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?");throw new Error(`Can't resolve all parameters for ${G(e)}: (${r.join(", ")}).`)}const n=function(e){const t=e&&(e[Dn]||e[Ht]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ps(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Yh(e){return null!==e&&"object"==typeof e&&Uc in e}function gs(e){return"function"==typeof e}const Jh=function(e,t,n){return function(e,t=null,n=null,r){const i=zh(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class Qt{static create(t,n){return Array.isArray(t)?Jh(t,n,""):Jh(t.providers,t.parent,t.name||"")}}function lb(e,t){Gs(Yc(e)[1],kn())}Qt.THROW_IF_NOT_FOUND=ia,Qt.NULL=new qh,Qt.\u0275prov=xe({token:Qt,providedIn:"any",factory:()=>Vn(hs)}),Qt.__NG_ELEMENT_ID__=-1;let Au=null;function ms(){if(!Au){const e=ct.Symbol;if(e&&e.iterator)Au=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Au=r)}}}return Au}function _a(e){return!!Ol(e)&&(Array.isArray(e)||!(e instanceof Map)&&ms()in e)}function Ol(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function dr(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ll(e,t,n,r){const i=Le();return dr(i,Xi(),t)&&(Ot(),Ri(pn(),i,e,t,n,r)),Ll}function Ea(e,t=Je.Default){const n=Le();return null===n?Vn(e,t):Pc(kn(),n,ie(e),t)}function Hl(e,t,n){const r=Le();return dr(r,Xi(),t)&&jr(Ot(),pn(),r,e,t,r[y],n,!1),Hl}function $l(e,t,n,r,i){const u=i?"class":"style";Kh(e,n,t.inputs[u],u,r)}function Kl(e,t,n,r){const i=Le(),o=Ot(),u=x+e,l=i[y],p=i[u]=nl(l,t,gt.lFrame.currentNamespace),_=o.firstCreatePass?function(e,t,n,r,i,o,u){const l=t.consts,_=ls(t,e,2,i,Fr(l,o));return function(e,t,n,r){let i=!1;if(qs()){const o=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const u=r[o];dh(n,u.selectors,!1)&&(i||(i=[]),Yo(bo(n,t),e,u.type),Ct(u)?(Nh(e,n),i.unshift(u)):i.push(u))}return i}(e,t,n),u=null===r?null:{"":-1};if(null!==o){i=!0,Oh(n,e.data.length,o.length);for(let A=0;A<o.length;A++){const W=o[A];W.providersResolver&&W.providersResolver(W)}let l=!1,p=!1,_=ds(e,t,o.length,null);for(let A=0;A<o.length;A++){const W=o[A];n.mergedAttrs=Wo(n.mergedAttrs,W.hostAttrs),Lh(e,n,t,_,W),F_(_,W,u),null!==W.contentQueries&&(n.flags|=8),(null!==W.hostBindings||null!==W.hostAttrs||0!==W.hostVars)&&(n.flags|=128);const te=W.type.prototype;!l&&(te.ngOnChanges||te.ngOnInit||te.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),l=!0),!p&&(te.ngOnChanges||te.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),p=!0),_++}!function(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,u=[];let l=null,p=null;for(let _=t.directiveStart;_<r;_++){const A=i[_],W=A.inputs,te=null===o||lh(t)?null:A_(W,o);u.push(te),l=Rh(W,_,l),p=Rh(A.outputs,_,p)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=u,t.inputs=l,t.outputs=p}(e,n)}u&&function(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new Ve("301",`Export of name '${t[i+1]}' not found!`);r.push(t[i],o)}}}(n,r,u)}n.mergedAttrs=Wo(n.mergedAttrs,n.attrs)}(t,n,_,Fr(l,u)),null!==_.attrs&&Iu(_,_.attrs,!1),null!==_.mergedAttrs&&Iu(_,_.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,_),_}(u,o,i,0,t,n,r):o.data[u];kr(_,!0);const A=_.mergedAttrs;null!==A&&qo(l,p,A);const W=_.classes;null!==W&&ul(l,p,W);const te=_.styles;null!==te&&ah(l,p,te),64!=(64&_.flags)&&Eu(o,i,p,_),0===gt.lFrame.elementDepthCount&&lr(p,i),gt.lFrame.elementDepthCount++,Qe(_)&&(function(e,t,n){!qs()||(function(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||bo(n,t),lr(r,t);const u=n.initialInputs;for(let l=i;l<o;l++){const p=e.data[l],_=Ct(p);_&&x_(t,n,p);const A=Co(t,e,l,n);lr(A,t),null!==u&&I_(0,l-i,A,p,0,u),_&&($n(n.index,t)[8]=A)}}(e,t,n,bn(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,u=n.index,l=gt.lFrame.currentDirectiveIndex;try{wi(u);for(let p=r;p<i;p++){const _=e.data[p],A=t[p];zs(p),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&kh(_,A)}}finally{wi(-1),zs(l)}}(e,t,n))}(o,i,_),function(e,t,n){if(_t(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const u=e.data[o];u.contentQueries&&u.contentQueries(1,n[o],o)}}}(o,_,i)),null!==r&&function(e,t,n=bn){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const u=r[o+1],l=-1===u?n(t,e):e[u];e[i++]=l}}}(i,_)}function ql(){let e=kn();Uo()?gt.lFrame.isParent=!1:(e=e.parent,kr(e,!1));const t=e;gt.lFrame.elementDepthCount--;const n=Ot();n.firstCreatePass&&(Gs(n,e),_t(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&$l(n,t,Le(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&$l(n,t,Le(),t.stylesWithoutHost,!1)}function Np(e,t,n,r){Kl(e,t,n,r),ql()}function Wl(e){return!!e&&"function"==typeof e.then}function jp(e){return!!e&&"function"==typeof e.subscribe}const zl=jp;function Gl(e,t,n,r){const i=Le(),o=Ot(),u=kn();return function(e,t,n,r,i,o,u,l){const p=Qe(r),A=e.firstCreatePass&&Bh(e),W=t[8],te=Vh(t);let me=!0;if(3&r.type||l){const De=bn(r,t),Ue=l?l(De):De,ke=te.length,rt=l?mt=>l(Rt(mt[r.index])):r.index;if(st(n)){let mt=null;if(!l&&p&&(mt=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const u=i[o];if(u===n&&i[o+1]===r){const l=t[7],p=i[o+2];return l.length>p?l[p]:null}"string"==typeof u&&(o+=2)}return null}(e,t,i,r.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=o,mt.__ngLastListenerFn__=o,me=!1;else{o=Yl(r,t,W,o,!1);const kt=n.listen(Ue,i,o);te.push(o,kt),A&&A.push(i,rt,ke,ke+1)}}else o=Yl(r,t,W,o,!0),Ue.addEventListener(i,o,u),te.push(o),A&&A.push(i,rt,ke,u)}else o=Yl(r,t,W,o,!1);const Ce=r.outputs;let Ie;if(me&&null!==Ce&&(Ie=Ce[i])){const De=Ie.length;if(De)for(let Ue=0;Ue<De;Ue+=2){const Wn=t[Ie[Ue]][Ie[Ue+1]].subscribe(o),Xr=te.length;te.push(o,Wn),A&&A.push(i,r.index,Xr,-(Xr+1))}}}(o,i,i[y],u,e,t,!!n,r),Gl}function Bp(e,t,n,r){try{return!1!==n(r)}catch(i){return $h(e,i),!1}}function Yl(e,t,n,r,i){return function o(u){if(u===Function)return r;const l=2&e.flags?$n(e.index,t):t;0==(32&t[2])&&Sl(l);let p=Bp(t,0,r,u),_=o.__ngNextListenerFn__;for(;_;)p=Bp(t,0,_,u)&&p,_=_.__ngNextListenerFn__;return i&&!1===p&&(u.preventDefault(),u.returnValue=!1),p}}function fg(e,t=""){const n=Le(),r=Ot(),i=e+x,o=r.firstCreatePass?ls(r,i,1,t,null):r.data[i],u=n[i]=function(e,t){return st(e)?e.createText(t):e.createTextNode(t)}(n[y],t);Eu(r,n,u,o),kr(o,!1)}function Mu(e,t,n){const r=Le(),i=function(e,t,n,r){return dr(e,Xi(),n)?t+He(n)+r:St}(r,e,t,n);return i!==St&&Yi(r,tr(),i),Mu}function Ql(e,t,n){const r=Le();return dr(r,Xi(),t)&&jr(Ot(),pn(),r,e,t,r[y],n,!0),Ql}const To=void 0;var UE=["en",[["a","p"],["AM","PM"],To],[["AM","PM"],To,To],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],To,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],To,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",To,"{1} 'at' {0}",To],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Is={};function Xl(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Mg(t);if(n)return n;const r=t.split("-")[0];if(n=Mg(r),n)return n;if("en"===r)return UE;throw new Error(`Missing locale data for the locale "${e}".`)}function Pg(e){return Xl(e)[ft.PluralCase]}function Mg(e){return e in Is||(Is[e]=ct.ng&&ct.ng.common&&ct.ng.common.locales&&ct.ng.common.locales[e]),Is[e]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const ku="en-US";let kg=ku;function ed(e){M(e,"Expected localeId to be defined"),"string"==typeof e&&(kg=e.toLowerCase().replace(/_/g,"-"))}class om{}const am="ngComponent";class Vw{resolveComponentFactory(t){throw function(e){const t=Error(`No component factory found for ${G(e)}. Did you add it to @NgModule.entryComponents?`);return t[am]=e,t}(t)}}class Ro{}function Uu(...e){}function Ts(e,t){return new Ni(bn(e,t))}Ro.NULL=new Vw;const $w=function(){return Ts(kn(),Le())};let Ni=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=$w,e})();function um(e){return e instanceof Ni?e.nativeElement:e}class Vu{}let Kw=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ww(),e})();const Ww=function(){const e=Le(),n=$n(kn().index,e);return function(e){return e[y]}($e(n)?n:e)};let ud=(()=>{class e{}return e.\u0275prov=xe({token:e,providedIn:"root",factory:()=>null}),e})();class cm{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const lm=new cm("12.2.4");class dm{constructor(){}supports(t){return _a(t)}create(t){return new Jw(t)}}const Yw=(e,t)=>t;class Jw{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Yw}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const u=!r||n&&n.currentIndex<hm(r,i,o)?n:r,l=hm(u,i,o),p=u.currentIndex;if(u===r)i--,r=r._nextRemoved;else if(n=n._next,null==u.previousIndex)i++;else{o||(o=[]);const _=l-i,A=p-i;if(_!=A){for(let te=0;te<_;te++){const me=te<o.length?o[te]:o[te]=0,Ce=me+te;A<=Ce&&Ce<_&&(o[te]=me+1)}o[u.previousIndex]=A-_}}l!==p&&t(u,l,p)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!_a(t))throw new Error(`Error trying to diff '${G(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,u,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)o=t[l],u=this._trackByFn(l,o),null!==n&&Object.is(n.trackById,u)?(r&&(n=this._verifyReinsertion(n,o,u,l)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,u,l),r=!0),n=n._next}else i=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ms()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,l=>{u=this._trackByFn(i,l),null!==n&&Object.is(n.trackById,u)?(r&&(n=this._verifyReinsertion(n,l,u,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)):(n=this._mismatch(n,l,u,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new Zw(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new fm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Zw{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qw{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class fm{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new Qw,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hm(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class pm{constructor(){}supports(t){return t instanceof Map||Ol(t)}create(){return new Xw}}class Xw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Ol(t)))throw new Error(`Error trying to diff '${G(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const o=i._prev,u=i._next;return o&&(o._next=u),u&&(u._prev=o),i._next=null,i._prev=null,i}const r=new e1(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class e1{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gm(){return new Bu([new dm])}let Bu=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||gm()),deps:[[e,new uo,new qi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(e){return e.name||typeof e}(n)}'`)}}return e.\u0275prov=xe({token:e,providedIn:"root",factory:gm}),e})();function mm(){return new Hu([new pm])}let Hu=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||mm()),deps:[[e,new uo,new qi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return e.\u0275prov=xe({token:e,providedIn:"root",factory:mm}),e})();function $u(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Rt(o)),Ne(o))for(let l=10;l<o.length;l++){const p=o[l],_=p[1].firstChild;null!==_&&$u(p[1],p,_,r)}const u=n.type;if(8&u)$u(e,t,n.child,r);else if(32&u){const l=Qc(n,t);let p;for(;p=l();)r.push(p)}else if(16&u){const l=ih(t,n);if(Array.isArray(l))r.push(...l);else{const p=fa(t[16]);$u(p[1],p,l,r,!0)}}n=i?n.projectionNext:n.next}return r}class xa{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return $u(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ne(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(rl(t,r),Do(n,r))}this._attachedToViewContainer=!1}Yf(this._lView[1],this._lView)}onDestroy(t){Th(this._lView[1],this._lView,null,t)}markForCheck(){Sl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Bo(!0);try{Fl(e,t,n)}finally{Bo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ha(this._lView[1],t=this._lView,t[y],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class n1 extends xa{constructor(t){super(t),this._view=t}detectChanges(){Uh(this._view)}checkNoChanges(){!function(e){Bo(!0);try{Uh(e)}finally{Bo(!1)}}(this._view)}get context(){return null}}const i1=function(e){return function(e,t,n){if(qe(e)&&!n){const r=$n(e.index,t);return new xa(r,r)}return 47&e.type?new xa(t[16],t):null}(kn(),Le(),16==(16&e))};let o1=(()=>{class e{}return e.__NG_ELEMENT_ID__=i1,e})();const u1=[new pm],l1=new Bu([new dm]),d1=new Hu(u1),h1=function(){return Ku(kn(),Le())};let Ia=(()=>{class e{}return e.__NG_ELEMENT_ID__=h1,e})();const p1=Ia,g1=class extends p1{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t){const n=this._declarationTContainer.tViews,r=pa(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),ga(n,r,t),new xa(r)}};function Ku(e,t){return 4&e.type?new g1(t,e,Ts(e,t)):null}class Po{}class ym{}const v1=function(){return bm(kn(),Le())};let qu=(()=>{class e{}return e.__NG_ELEMENT_ID__=v1,e})();const b1=qu,vm=class extends b1{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ts(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const t=wo(this._hostTNode,this._hostLView);if(ou(t)){const n=to(t,this._hostLView),r=Hi(t);return new ro(n[1].data[r+8],n)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=_m(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){const i=t.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(t,n,r,i,o){const u=r||this.parentInjector;if(!o&&null==t.ngModule&&u){const p=u.get(Po,null);p&&(o=p)}const l=t.create(u,i,void 0,o);return this.insert(l.hostView,n),l}insert(t,n){const r=t._lView,i=r[1];if(Ne(r[3])){const A=this.indexOf(t);if(-1!==A)this.detach(A);else{const W=r[3],te=new vm(W,W[6],W[3]);te.detach(te.indexOf(t))}}const o=this._adjustIndex(n),u=this._lContainer;!function(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],du(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const u=t[17];null!==u&&n!==u&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(u,t);const l=t[19];null!==l&&l.insertView(e),t[2]|=128}(i,r,u,o);const l=sl(o,u),p=r[y],_=bu(p,u[7]);return null!==_&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,ha(e,r,n,1,i,o)}(i,u[6],p,r,_,l),t.attachToViewContainerRef(),du(cd(u),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=_m(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=rl(this._lContainer,n);r&&(Do(cd(this._lContainer),n),Yf(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=rl(this._lContainer,n);return r&&null!=Do(cd(this._lContainer),n)?new xa(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function _m(e){return e[8]}function cd(e){return e[8]||(e[8]=[])}function bm(e,t){let n;const r=t[e.index];if(Ne(r))n=r;else{let i;if(8&e.type)i=Rt(r);else{const o=t[y];i=o.createComment("");const u=bn(e,t);Io(o,bu(o,u),i,function(e,t){return st(e)?e.nextSibling(t):t.nextSibling}(o,u),!1)}t[e.index]=n=function(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}(r,t,i,e),xu(t,n)}return new vm(n,e,t)}const ks={};class Vm extends Ro{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=fn(t);return new Hm(n,this.ngModule)}}function Bm(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const mC=new S("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bf});class Hm extends om{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=t.selectors.map(e_).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Bm(this.componentDef.inputs)}get outputs(){return Bm(this.componentDef.outputs)}create(t,n,r,i){const o=(i=i||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const o=e.get(n,ks,i);return o!==ks||r===ks?o:t.get(n,r,i)}}}(t,i.injector):t,u=o.get(Vu,Yt),l=o.get(ud,null),p=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",A=r?function(e,t,n){if(st(e))return e.selectRootElement(t,n===yt.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(p,r,this.componentDef.encapsulation):nl(u.createRenderer(null,this.componentDef),_,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(_)),W=this.componentDef.onPush?576:528,te=function(e,t){return{components:[],scheduler:e||Bf,clean:j_,playerHandler:t||null,flags:0}}(),me=Fu(0,null,null,1,0,null,null,null,null,null),Ce=pa(null,me,te,W,null,null,u,p,l,o);let Ie,De;Ei(Ce);try{const Ue=function(e,t,n,r,i,o){const u=n[1];n[20]=e;const p=ls(u,20,2,"#host",null),_=p.mergedAttrs=t.hostAttrs;null!==_&&(Iu(p,_,!0),null!==e&&(qo(i,e,_),null!==p.classes&&ul(i,e,p.classes),null!==p.styles&&ah(i,e,p.styles)));const A=r.createRenderer(e,t),W=pa(n,xh(t),null,t.onPush?64:16,n[20],p,r,A,o||null,null);return u.firstCreatePass&&(Yo(bo(p,n),u,t.type),Nh(u,p),Oh(p,n.length,1)),xu(n,W),n[20]=W}(A,this.componentDef,Ce,u,p);if(A)if(r)qo(p,A,["ng-version",lm.full]);else{const{attrs:ke,classes:rt}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!ri(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);ke&&qo(p,A,ke),rt&&rt.length>0&&ul(p,A,rt.join(" "))}if(De=Wr(me,x),void 0!==n){const ke=De.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const mt=n[rt];ke.push(null!=mt?Array.from(mt):null)}}Ie=function(e,t,n,r,i){const o=n[1],u=function(e,t,n){const r=kn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Lh(e,r,t,ds(e,t,1,null),n));const i=Co(t,e,r.directiveStart,r);lr(i,t);const o=bn(r,t);return o&&lr(o,t),i}(o,n,t);if(r.components.push(u),e[8]=u,i&&i.forEach(p=>p(u,t)),t.contentQueries){const p=kn();t.contentQueries(1,u,p.directiveStart)}const l=kn();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(wi(l.index),Mh(n[1],l,0,l.directiveStart,l.directiveEnd,t),kh(t,u)),u}(Ue,this.componentDef,Ce,te,[lb]),ga(me,Ce,null)}finally{$o()}return new _C(this.componentType,Ie,Ts(De,Ce),Ce,De)}}class _C extends class{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new n1(i),this.componentType=t}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ns=new Map;class wC extends Po{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Vm(this);const r=Mn(t),i=t[pi]||null;i&&ed(i),this._bootstrapComponents=Ai(r.bootstrap),this._r3Injector=zh(t,n,[{provide:Po,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],G(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Qt.THROW_IF_NOT_FOUND,r=Je.Default){return t===Qt||t===Po||t===hs?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class wd extends ym{constructor(t){super(),this.moduleType=t,null!==Mn(t)&&function(e){const t=new Set;!function n(r){const i=Mn(r,!0),o=i.id;null!==o&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${G(t)} vs ${G(t.name)}`)}(o,Ns.get(o),r),Ns.set(o,r));const u=Ai(i.imports);for(const l of u)t.has(l)||(t.add(l),n(l))}(e)}(t)}create(t){return new wC(this.moduleType,t)}}function qm(e,t,n){const r=function(){const e=gt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}()+e,i=Le();return i[r]===St?function(e,t,n){return e[t]=n}(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Cd(e){return t=>{setTimeout(e,void 0,t)}}const Oi=class extends b.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var i,o,u;let l=t,p=n||(()=>null),_=r;if(t&&"object"==typeof t){const W=t;l=null===(i=W.next)||void 0===i?void 0:i.bind(W),p=null===(o=W.error)||void 0===o?void 0:o.bind(W),_=null===(u=W.complete)||void 0===u?void 0:u.bind(W)}this.__isAsync&&(p=Cd(p),l&&(l=Cd(l)),_&&(_=Cd(_)));const A=super.subscribe({next:l,error:p,complete:_});return t instanceof D.w&&t.add(A),A}};function VC(){return this._results[ms()]()}class Ju{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ms(),r=Ju.prototype;r[n]||(r[n]=VC)}get changes(){return this._changes||(this._changes=new Oi)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=Gr(t);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Sd{constructor(t){this.queryList=t,this.matches=null}clone(){return new Sd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const u=n.getByIndex(o);i.push(this.queries[u.indexInDeclarationView].clone())}return new Dd(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==iy(t,n).matches&&this.queries[n].setDirty()}}class Zm{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class Fd{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new Fd(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class xd{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new xd(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,$C(n,o)),this.matchTNodeWithReadOption(t,n,Zo(n,t,o,!1,!1))}else r===Ia?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Zo(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ni||i===qu||i===Ia&&4&n.type)this.addMatch(n.index,-2);else{const o=Zo(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function $C(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function qC(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Ts(e,t):4&e.type?Ku(e,t):null}(t,e):-2===n?function(e,t,n){return n===Ni?Ts(t,e):n===Ia?Ku(t,e):n===qu?bm(t,e):void 0}(e,t,r):Co(e,e[1],n,t)}function Qm(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const o=e.data,u=n.matches,l=[];for(let p=0;p<u.length;p+=2){const _=u[p];l.push(_<0?null:qC(t,o[_],u[p+1],n.metadata.read))}i.matches=l}return i.matches}function Id(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const u=Qm(e,t,i,n);for(let l=0;l<o.length;l+=2){const p=o[l];if(p>0)r.push(u[l/2]);else{const _=o[l+1],A=t[-p];for(let W=10;W<A.length;W++){const te=A[W];te[17]===te[3]&&Id(te[1],te,_,r)}if(null!==A[9]){const W=A[9];for(let te=0;te<W.length;te++){const me=W[te];Id(me[1],me,_,r)}}}}}return r}function Xm(e){const t=Le(),n=Ot(),r=Ja();Ui(r+1);const i=iy(n,r);if(e.dirty&&po(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Id(n,t,r,[]):Qm(n,t,i,r);e.reset(o,um),e.notifyOnChanges()}return!0}return!1}function ey(e,t,n,r){const i=Ot();if(i.firstCreatePass){const o=kn();(function(e,t,n){null===e.queries&&(e.queries=new Fd),e.queries.track(new xd(t,n))})(i,new Zm(t,n,r),o.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function(e,t,n){const r=new Ju(4==(4&n));Th(e,t,r,r.destroy),null===t[19]&&(t[19]=new Dd),t[19].queries.push(new Sd(r))}(i,Le(),n)}function ty(){return e=Le(),t=Ja(),e[19].queries[t].queryList;var e,t}function iy(e,t){return e.queries.getByIndex(t)}const kd=new S("Application Initializer");let Ls=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Uu,this.reject=Uu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Wl(o))n.push(o);else if(zl(o)){const u=new Promise((l,p)=>{o.subscribe({complete:l,error:p})});n.push(u)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Vn(kd,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();const wy=new S("AppId"),CS={provide:wy,useFactory:function(){return`${Nd()}${Nd()}${Nd()}`},deps:[]};function Nd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cy=new S("Platform Initializer"),Sy=new S("Platform ID"),Dy=new S("appBootstrapListener");let Fy=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();const Xu=new S("LocaleId"),xy=new S("DefaultCurrencyCode");class DS{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const Od=function(e){return new wd(e)},FS=Od,xS=function(e){return Promise.resolve(Od(e))},Iy=function(e){const t=Od(e),r=Ai(Mn(e).declarations).reduce((i,o)=>{const u=fn(o);return u&&i.push(new Hm(u)),i},[]);return new DS(t,r)},IS=Iy,AS=function(e){return Promise.resolve(Iy(e))};let Va=(()=>{class e{constructor(){this.compileModuleSync=FS,this.compileModuleAsync=xS,this.compileModuleAndAllComponentsSync=IS,this.compileModuleAndAllComponentsAsync=AS}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();const PS=(()=>Promise.resolve(0))();function Ld(e){"undefined"==typeof Zone?PS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ur{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oi(!1),this.onMicrotaskEmpty=new Oi(!1),this.onStable=new Oi(!1),this.onError=new Oi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let e=ct.requestAnimationFrame,t=ct.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ct,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ud(e),e.isCheckStableRunning=!0,jd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ud(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,u,l)=>{try{return Ay(e),n.invokeTask(i,o,u,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Ty(e)}},onInvoke:(n,r,i,o,u,l,p)=>{try{return Ay(e),n.invoke(i,o,u,l,p)}finally{e.shouldCoalesceRunChangeDetection&&t(),Ty(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Ud(e),jd(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ur.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ur.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,u=o.scheduleEventTask("NgZoneEvent: "+i,t,kS,Uu,Uu);try{return o.runTask(u,n,r)}finally{o.cancelTask(u)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const kS={};function jd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ud(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Ay(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ty(e){e._nesting--,jd(e)}class LS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oi,this.onMicrotaskEmpty=new Oi,this.onStable=new Oi,this.onError=new Oi}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}let Ry=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ur.assertNotInAngularZone(),Ld(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ld(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(Vn(Ur))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})(),Py=(()=>{class e{constructor(){this._applications=new Map,Vd.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Vd.findTestabilityInTree(this,n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();class jS{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}function US(e){Vd=e}let Vd=new jS,My=!0,ky=!1;function VS(){if(ky)throw new Error("Cannot enable prod mode after platform setup.");My=!1}let di;const Oy=new S("AllowMultipleToken");class zS{constructor(t,n){this.name=t,this.token=n}}function Ly(e,t,n=[]){const r=`Platform: ${t}`,i=new S(r);return(o=[])=>{let u=jy();if(!u||u.injector.get(Oy,!1))if(e)e(n.concat(o).concat({provide:i,useValue:!0}));else{const l=n.concat(o).concat({provide:i,useValue:!0},{provide:ma,useValue:"platform"});!function(e){if(di&&!di.destroyed&&!di.injector.get(Oy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");di=e.get(Uy);const t=e.get(Cy,null);t&&t.forEach(n=>n())}(Qt.create({providers:l,name:r}))}return function(e){const t=jy();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function jy(){return di&&!di.destroyed?di:null}let Uy=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const l=function(e,t){let n;return n="noop"===e?new LS:("zone.js"===e?void 0:e)||new Ur({enableLongStackTrace:(ky=!0,My),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),p=[{provide:Ur,useValue:l}];return l.run(()=>{const _=Qt.create({providers:p,parent:this.injector,name:n.moduleType.name}),A=n.create(_),W=A.injector.get(as,null);if(!W)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return l.runOutsideAngular(()=>{const te=l.onError.subscribe({next:me=>{W.handleError(me)}});A.onDestroy(()=>{Bd(this._modules,A),te.unsubscribe()})}),function(e,t,n){try{const r=n();return Wl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(W,l,()=>{const te=A.injector.get(Ls);return te.runInitializers(),te.donePromise.then(()=>(ed(A.injector.get(Xu,ku)||ku),this._moduleDoBootstrap(A),A))})})}bootstrapModule(n,r=[]){const i=Vy({},r);return function(e,t,n){const r=new wd(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Ba);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${G(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Vn(Qt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();function Vy(e,t){return Array.isArray(t)?t.reduce(Vy,e):Object.assign(Object.assign({},e),t)}let Ba=(()=>{class e{constructor(n,r,i,o,u){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new F.y(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),p=new F.y(_=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ur.assertNotInAngularZone(),Ld(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{Ur.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{A.unsubscribe(),W.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return(0,m.K)(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof F.y?e[0]:(0,k.J)(t)((0,oe.n)(e,n))}(l,p.pipe(e=>(0,L.x)()(function(e,t){return function(r){let i;i="function"==typeof e?e:function(){return e};const o=Object.create(r,E.N);return o.source=r,o.subjectFactory=i,o}}(Z)(e))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof om?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(e){return e.isBoundToModule}(i)?void 0:this._injector.get(Po),l=i.create(Qt.NULL,[],r||i.selector,o),p=l.location.nativeElement,_=l.injector.get(Ry,null),A=_&&l.injector.get(Py);return _&&A&&A.registerApplication(p,_),l.onDestroy(()=>{this.detachView(l.hostView),Bd(this.components,l),A&&A.unregisterApplication(p)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Bd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Dy,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(Vn(Ur),Vn(Qt),Vn(as),Vn(Ro),Vn(Ls))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();function Bd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class XS{}class tD{}const nD={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let rD=(()=>{class e{constructor(n,r){this._compiler=n,this._config=r||nD}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),P(255)(r).then(o=>o[i]).then(o=>Ky(o,r,i)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(n){let[r,i]=n.split("#"),o="NgFactory";return void 0===i&&(i="default",o=""),P(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(u=>u[i+o]).then(u=>Ky(u,r,i))}}return e.\u0275fac=function(n){return new(n||e)(Vn(Va),Vn(tD,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac}),e})();function Ky(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const dD=function(e){return null},hD=Ly(null,"core",[{provide:Sy,useValue:"unknown"},{provide:Uy,deps:[Qt]},{provide:Py,deps:[]},{provide:Fy,deps:[]}]),vD=[{provide:Ba,useClass:Ba,deps:[Ur,Qt,as,Ro,Ls]},{provide:mC,deps:[Ur],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:Ls,useClass:Ls,deps:[[new qi,kd]]},{provide:Va,useClass:Va,deps:[]},CS,{provide:Bu,useFactory:function(){return l1},deps:[]},{provide:Hu,useFactory:function(){return d1},deps:[]},{provide:Xu,useFactory:function(e){return ed(e=e||"undefined"!=typeof $localize&&$localize.locale||ku),e},deps:[[new rs(Xu),new qi,new uo]]},{provide:xy,useValue:"USD"}];let bD=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Vn(Ba))},e.\u0275mod=Br({type:e}),e.\u0275inj=Ge({providers:vD}),e})()},353:(It,Ae,P)=>{"use strict";P.d(Ae,{gz:()=>or,F0:()=>Kn,yS:()=>_o,Bz:()=>kc,lC:()=>Eo});var F=P(583),m=P(639),k=P(869),oe=P(693),J=P(87);function b(...g){let f=g[g.length-1];return(0,k.K)(f)?(g.pop(),(0,J.r)(g,f)):(0,oe.n)(g)}var D=P(709),E=P(971);class O extends D.xQ{constructor(f){super(),this._value=f}get value(){return this.getValue()}_subscribe(f){const d=super._subscribe(f);return d&&!d.closed&&f.next(this._value),d}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E.N;return this._value}next(f){super.next(this._value=f)}}var j=P(796),L=P(393);class Z extends L.L{notifyNext(f,d,v,S,H){this.destination.next(d)}notifyError(f,d){this.destination.error(f)}notifyComplete(f){this.destination.complete()}}class Y extends L.L{constructor(f,d,v){super(),this.parent=f,this.outerValue=d,this.outerIndex=v,this.index=0}_next(f){this.parent.notifyNext(this.outerValue,f,this.outerIndex,this.index++,this)}_error(f){this.parent.notifyError(f,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var K=P(444),z=P(574);function G(g,f,d,v,S=new Y(g,d,v)){if(!S.closed)return f instanceof z.y?f.subscribe(S):(0,K.s)(f)(S)}const we={};class de{constructor(f){this.resultSelector=f}call(f,d){return d.subscribe(new ie(f,this.resultSelector))}}class ie extends Z{constructor(f,d){super(f),this.resultSelector=d,this.active=0,this.values=[],this.observables=[]}_next(f){this.values.push(we),this.observables.push(f)}_complete(){const f=this.observables,d=f.length;if(0===d)this.destination.complete();else{this.active=d,this.toRespond=d;for(let v=0;v<d;v++)this.add(G(this,f[v],void 0,v))}}notifyComplete(f){0==(this.active-=1)&&this.destination.complete()}notifyNext(f,d,v){const S=this.values,fe=this.toRespond?S[v]===we?--this.toRespond:this.toRespond:0;S[v]=d,0===fe&&(this.resultSelector?this._tryResultSelector(S):this.destination.next(S.slice()))}_tryResultSelector(f){let d;try{d=this.resultSelector.apply(this,f)}catch(v){return void this.destination.error(v)}this.destination.next(d)}}const Oe=(()=>{function g(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return g.prototype=Object.create(Error.prototype),g})();var Ve=P(282);function ze(...g){return(0,Ve.J)(1)(b(...g))}var He=P(402);const Xe=new z.y(g=>g.complete());function Et(g){return g?function(g){return new z.y(f=>g.schedule(()=>f.complete()))}(g):Xe}function tt(g){return new z.y(f=>{let d;try{d=g()}catch(S){return void f.error(S)}return(d?(0,He.D)(d):Et()).subscribe(f)})}var ot=P(441),Re=P(2),ht=P(345);function At(g,f){return"function"==typeof f?d=>d.pipe(At((v,S)=>(0,He.D)(g(v,S)).pipe((0,Re.U)((H,fe)=>f(v,H,S,fe))))):d=>d.lift(new En(g))}class En{constructor(f){this.project=f}call(f,d){return d.subscribe(new Ut(f,this.project))}}class Ut extends ht.Ds{constructor(f,d){super(f),this.project=d,this.index=0}_next(f){let d;const v=this.index++;try{d=this.project(f,v)}catch(S){return void this.destination.error(S)}this._innerSub(d)}_innerSub(f){const d=this.innerSubscription;d&&d.unsubscribe();const v=new ht.IY(this),S=this.destination;S.add(v),this.innerSubscription=(0,ht.ft)(f,v),this.innerSubscription!==v&&S.add(this.innerSubscription)}_complete(){const{innerSubscription:f}=this;(!f||f.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(f){this.destination.next(f)}}const Sn=(()=>{function g(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return g.prototype=Object.create(Error.prototype),g})();function Zn(g){return f=>0===g?Et():f.lift(new zn(g))}class zn{constructor(f){if(this.total=f,this.total<0)throw new Sn}call(f,d){return d.subscribe(new Xt(f,this.total))}}class Xt extends L.L{constructor(f,d){super(f),this.total=d,this.count=0}_next(f){const d=this.total,v=++this.count;v<=d&&(this.destination.next(f),v===d&&(this.destination.complete(),this.unsubscribe()))}}function qt(g,f){let d=!1;return arguments.length>=2&&(d=!0),function(S){return S.lift(new pe(g,f,d))}}class pe{constructor(f,d,v=!1){this.accumulator=f,this.seed=d,this.hasSeed=v}call(f,d){return d.subscribe(new M(f,this.accumulator,this.seed,this.hasSeed))}}class M extends L.L{constructor(f,d,v,S){super(f),this.accumulator=d,this._seed=v,this.hasSeed=S,this.index=0}get seed(){return this._seed}set seed(f){this.hasSeed=!0,this._seed=f}_next(f){if(this.hasSeed)return this._tryNext(f);this.seed=f,this.destination.next(f)}_tryNext(f){const d=this.index++;let v;try{v=this.accumulator(this.seed,f,d)}catch(S){this.destination.error(S)}this.seed=v,this.destination.next(v)}}function T(g,f){return function(v){return v.lift(new ge(g,f))}}class ge{constructor(f,d){this.predicate=f,this.thisArg=d}call(f,d){return d.subscribe(new _e(f,this.predicate,this.thisArg))}}class _e extends L.L{constructor(f,d,v){super(f),this.predicate=d,this.thisArg=v,this.count=0}_next(f){let d;try{d=this.predicate.call(this.thisArg,f,this.count++)}catch(v){return void this.destination.error(v)}d&&this.destination.next(f)}}function Se(g){return function(d){const v=new xe(g),S=d.lift(v);return v.caught=S}}class xe{constructor(f){this.selector=f}call(f,d){return d.subscribe(new We(f,this.selector,this.caught))}}class We extends ht.Ds{constructor(f,d,v){super(f),this.selector=d,this.caught=v}error(f){if(!this.isStopped){let d;try{d=this.selector(f,this.caught)}catch(H){return void super.error(H)}this._unsubscribeAndRecycle();const v=new ht.IY(this);this.add(v);const S=(0,ht.ft)(d,v);S!==v&&this.add(S)}}}var Ge=P(773);function pt(g,f){return(0,Ge.zg)(g,f,1)}function wt(g){return function(d){return 0===g?Et():d.lift(new Ft(g))}}class Ft{constructor(f){if(this.total=f,this.total<0)throw new Sn}call(f,d){return d.subscribe(new tn(f,this.total))}}class tn extends L.L{constructor(f,d){super(f),this.total=d,this.ring=new Array,this.count=0}_next(f){const d=this.ring,v=this.total,S=this.count++;d.length<v?d.push(f):d[S%v]=f}_complete(){const f=this.destination;let d=this.count;if(d>0){const v=this.count>=this.total?this.total:this.count,S=this.ring;for(let H=0;H<v;H++){const fe=d++%v;f.next(S[fe])}}f.complete()}}function yn(g=Ht){return f=>f.lift(new Dn(g))}class Dn{constructor(f){this.errorFactory=f}call(f,d){return d.subscribe(new Ze(f,this.errorFactory))}}class Ze extends L.L{constructor(f,d){super(f),this.errorFactory=d,this.hasValue=!1}_next(f){this.hasValue=!0,this.destination.next(f)}_complete(){if(this.hasValue)return this.destination.complete();{let f;try{f=this.errorFactory()}catch(d){f=d}this.destination.error(f)}}}function Ht(){return new Oe}function vt(g=null){return f=>f.lift(new Je(g))}class Je{constructor(f){this.defaultValue=f}call(f,d){return d.subscribe(new $t(f,this.defaultValue))}}class $t extends L.L{constructor(f,d){super(f),this.defaultValue=d,this.isEmpty=!0}_next(f){this.isEmpty=!1,this.destination.next(f)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var $=P(487);function an(g,f){const d=arguments.length>=2;return v=>v.pipe(g?T((S,H)=>g(S,H,v)):$.y,Zn(1),d?vt(f):yn(()=>new Oe))}function Be(){}var vn=P(105);function Lt(g,f,d){return function(S){return S.lift(new Nn(g,f,d))}}class Nn{constructor(f,d,v){this.nextOrObserver=f,this.error=d,this.complete=v}call(f,d){return d.subscribe(new nr(f,this.nextOrObserver,this.error,this.complete))}}class nr extends L.L{constructor(f,d,v,S){super(f),this._tapNext=Be,this._tapError=Be,this._tapComplete=Be,this._tapError=v||Be,this._tapComplete=S||Be,(0,vn.m)(d)?(this._context=this,this._tapNext=d):d&&(this._context=d,this._tapNext=d.next||Be,this._tapError=d.error||Be,this._tapComplete=d.complete||Be)}_next(f){try{this._tapNext.call(this._context,f)}catch(d){return void this.destination.error(d)}this.destination.next(f)}_error(f){try{this._tapError.call(this._context,f)}catch(d){return void this.destination.error(d)}this.destination.error(f)}_complete(){try{this._tapComplete.call(this._context)}catch(f){return void this.destination.error(f)}return this.destination.complete()}}var yt=P(319);class ut{constructor(f){this.callback=f}call(f,d){return d.subscribe(new Vt(f,this.callback))}}class Vt extends L.L{constructor(f,d){super(f),this.add(new yt.w(d))}}var rr=P(307);class ct{constructor(f,d){this.id=f,this.url=d}}class ln extends ct{constructor(f,d,v="imperative",S=null){super(f,d),this.navigationTrigger=v,this.restoredState=S}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rn extends ct{constructor(f,d,v){super(f,d),this.urlAfterRedirects=v}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qn extends ct{constructor(f,d,v){super(f,d),this.reason=v}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tt extends ct{constructor(f,d,v){super(f,d),this.error=v}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pr extends ct{constructor(f,d,v,S){super(f,d),this.urlAfterRedirects=v,this.state=S}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dn extends ct{constructor(f,d,v,S){super(f,d),this.urlAfterRedirects=v,this.state=S}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On extends ct{constructor(f,d,v,S,H){super(f,d),this.urlAfterRedirects=v,this.state=S,this.shouldActivate=H}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ar extends ct{constructor(f,d,v,S){super(f,d),this.urlAfterRedirects=v,this.state=S}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends ct{constructor(f,d,v,S){super(f,d),this.urlAfterRedirects=v,this.state=S}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pn{constructor(f){this.route=f}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ir{constructor(f){this.route=f}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gi{constructor(f){this.snapshot=f}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vr{constructor(f){this.snapshot=f}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mi{constructor(f){this.snapshot=f}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cr{constructor(f){this.snapshot=f}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fn{constructor(f,d,v){this.routerEvent=f,this.position=d,this.anchor=v}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class Br{constructor(f){this.params=f||{}}has(f){return Object.prototype.hasOwnProperty.call(this.params,f)}get(f){if(this.has(f)){const d=this.params[f];return Array.isArray(d)?d[0]:d}return null}getAll(f){if(this.has(f)){const d=this.params[f];return Array.isArray(d)?d:[d]}return[]}get keys(){return Object.keys(this.params)}}function Nt(g){return new Br(g)}const Sr="ngNavigationCancelingError";function Tr(g){const f=Error("NavigationCancelingError: "+g);return f[Sr]=!0,f}function fn(g,f,d){const v=d.path.split("/");if(v.length>g.length||"full"===d.pathMatch&&(f.hasChildren()||v.length<g.length))return null;const S={};for(let H=0;H<v.length;H++){const fe=v[H],be=g[H];if(fe.startsWith(":"))S[fe.substring(1)]=be;else if(fe!==be.path)return null}return{consumed:g.slice(0,v.length),posParams:S}}function wn(g,f){const d=g?Object.keys(g):void 0,v=f?Object.keys(f):void 0;if(!d||!v||d.length!=v.length)return!1;let S;for(let H=0;H<d.length;H++)if(S=d[H],!Mn(g[S],f[S]))return!1;return!0}function Mn(g,f){if(Array.isArray(g)&&Array.isArray(f)){if(g.length!==f.length)return!1;const d=[...g].sort(),v=[...f].sort();return d.every((S,H)=>v[H]===S)}return g===f}function ei(g){return Array.prototype.concat.apply([],g)}function Ln(g){return g.length>0?g[g.length-1]:null}function et(g,f){for(const d in g)g.hasOwnProperty(d)&&f(g[d],d)}function xt(g){return(0,m.CqO)(g)?g:(0,m.QGY)(g)?(0,He.D)(Promise.resolve(g)):b(g)}const Gn={exact:function c(g,f,d){if(!ue(g.segments,f.segments)||!B(g.segments,f.segments,d)||g.numberOfChildren!==f.numberOfChildren)return!1;for(const v in f.children)if(!g.children[v]||!c(g.children[v],f.children[v],d))return!1;return!0},subset:y},nn={exact:function(g,f){return wn(g,f)},subset:function(g,f){return Object.keys(f).length<=Object.keys(g).length&&Object.keys(f).every(d=>Mn(g[d],f[d]))},ignored:()=>!0};function a(g,f,d){return Gn[d.paths](g.root,f.root,d.matrixParams)&&nn[d.queryParams](g.queryParams,f.queryParams)&&!("exact"===d.fragment&&g.fragment!==f.fragment)}function y(g,f,d){return R(g,f,f.segments,d)}function R(g,f,d,v){if(g.segments.length>d.length){const S=g.segments.slice(0,d.length);return!(!ue(S,d)||f.hasChildren()||!B(S,d,v))}if(g.segments.length===d.length){if(!ue(g.segments,d)||!B(g.segments,d,v))return!1;for(const S in f.children)if(!g.children[S]||!y(g.children[S],f.children[S],v))return!1;return!0}{const S=d.slice(0,g.segments.length),H=d.slice(g.segments.length);return!!(ue(g.segments,S)&&B(g.segments,S,v)&&g.children[lt])&&R(g.children[lt],f,H,v)}}function B(g,f,d){return f.every((v,S)=>nn[d](g[S].parameters,v.parameters))}class re{constructor(f,d,v){this.root=f,this.queryParams=d,this.fragment=v}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nt(this.queryParams)),this._queryParamMap}toString(){return N.serialize(this)}}class q{constructor(f,d){this.segments=f,this.children=d,this.parent=null,et(d,(v,S)=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return X(this)}}class ne{constructor(f,d){this.path=f,this.parameters=d}get parameterMap(){return this._parameterMap||(this._parameterMap=Nt(this.parameters)),this._parameterMap}toString(){return Ne(this)}}function ue(g,f){return g.length===f.length&&g.every((d,v)=>d.path===f[v].path)}class x{}class U{parse(f){const d=new Un(f);return new re(d.parseRootSegment(),d.parseQueryParams(),d.parseFragment())}serialize(f){var g;return`${`/${I(f.root,!0)}`}${function(g){const f=Object.keys(g).map(d=>{const v=g[d];return Array.isArray(v)?v.map(S=>`${se(d)}=${se(S)}`).join("&"):`${se(d)}=${se(v)}`}).filter(d=>!!d);return f.length?`?${f.join("&")}`:""}(f.queryParams)}${"string"==typeof f.fragment?`#${g=f.fragment,encodeURI(g)}`:""}`}}const N=new U;function X(g){return g.segments.map(f=>Ne(f)).join("/")}function I(g,f){if(!g.hasChildren())return X(g);if(f){const d=g.children[lt]?I(g.children[lt],!1):"",v=[];return et(g.children,(S,H)=>{H!==lt&&v.push(`${H}:${I(S,!1)}`)}),v.length>0?`${d}(${v.join("//")})`:d}{const d=function(g,f){let d=[];return et(g.children,(v,S)=>{S===lt&&(d=d.concat(f(v,S)))}),et(g.children,(v,S)=>{S!==lt&&(d=d.concat(f(v,S)))}),d}(g,(v,S)=>S===lt?[I(g.children[lt],!1)]:[`${S}:${I(v,!1)}`]);return 1===Object.keys(g.children).length&&null!=g.children[lt]?`${X(g)}/${d[0]}`:`${X(g)}/(${d.join("//")})`}}function ee(g){return encodeURIComponent(g).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function se(g){return ee(g).replace(/%3B/gi,";")}function Ee(g){return ee(g).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fe(g){return decodeURIComponent(g)}function $e(g){return Fe(g.replace(/\+/g,"%20"))}function Ne(g){return`${Ee(g.path)}${function(g){return Object.keys(g).map(f=>`;${Ee(f)}=${Ee(g[f])}`).join("")}(g.parameters)}`}const Qe=/^[^\/()?;=#]+/;function Ct(g){const f=g.match(Qe);return f?f[0]:""}const Wt=/^[^=?&#]+/,jn=/^[^?&#]+/;class Un{constructor(f){this.url=f,this.remaining=f}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){const f={};if(this.consumeOptional("?"))do{this.parseQueryParam(f)}while(this.consumeOptional("&"));return f}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const f=[];for(this.peekStartsWith("(")||f.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),f.push(this.parseSegment());let d={};this.peekStartsWith("/(")&&(this.capture("/"),d=this.parseParens(!0));let v={};return this.peekStartsWith("(")&&(v=this.parseParens(!1)),(f.length>0||Object.keys(d).length>0)&&(v[lt]=new q(f,d)),v}parseSegment(){const f=Ct(this.remaining);if(""===f&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(f),new ne(Fe(f),this.parseMatrixParams())}parseMatrixParams(){const f={};for(;this.consumeOptional(";");)this.parseParam(f);return f}parseParam(f){const d=Ct(this.remaining);if(!d)return;this.capture(d);let v="";if(this.consumeOptional("=")){const S=Ct(this.remaining);S&&(v=S,this.capture(v))}f[Fe(d)]=Fe(v)}parseQueryParam(f){const d=function(g){const f=g.match(Wt);return f?f[0]:""}(this.remaining);if(!d)return;this.capture(d);let v="";if(this.consumeOptional("=")){const fe=function(g){const f=g.match(jn);return f?f[0]:""}(this.remaining);fe&&(v=fe,this.capture(v))}const S=$e(d),H=$e(v);if(f.hasOwnProperty(S)){let fe=f[S];Array.isArray(fe)||(fe=[fe],f[S]=fe),fe.push(H)}else f[S]=H}parseParens(f){const d={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const v=Ct(this.remaining),S=this.remaining[v.length];if("/"!==S&&")"!==S&&";"!==S)throw new Error(`Cannot parse url '${this.url}'`);let H;v.indexOf(":")>-1?(H=v.substr(0,v.indexOf(":")),this.capture(H),this.capture(":")):f&&(H=lt);const fe=this.parseChildren();d[H]=1===Object.keys(fe).length?fe[lt]:new q([],fe),this.consumeOptional("//")}return d}peekStartsWith(f){return this.remaining.startsWith(f)}consumeOptional(f){return!!this.peekStartsWith(f)&&(this.remaining=this.remaining.substring(f.length),!0)}capture(f){if(!this.consumeOptional(f))throw new Error(`Expected "${f}".`)}}class rn{constructor(f){this._root=f}get root(){return this._root.value}parent(f){const d=this.pathFromRoot(f);return d.length>1?d[d.length-2]:null}children(f){const d=un(f,this._root);return d?d.children.map(v=>v.value):[]}firstChild(f){const d=un(f,this._root);return d&&d.children.length>0?d.children[0].value:null}siblings(f){const d=_n(f,this._root);return d.length<2?[]:d[d.length-2].children.map(S=>S.value).filter(S=>S!==f)}pathFromRoot(f){return _n(f,this._root).map(d=>d.value)}}function un(g,f){if(g===f.value)return f;for(const d of f.children){const v=un(g,d);if(v)return v}return null}function _n(g,f){if(g===f.value)return[f];for(const d of f.children){const v=_n(g,d);if(v.length)return v.unshift(f),v}return[]}class en{constructor(f,d){this.value=f,this.children=d}toString(){return`TreeNode(${this.value})`}}function gr(g){const f={};return g&&g.children.forEach(d=>f[d.value.outlet]=d),f}class Hr extends rn{constructor(f,d){super(f),this.snapshot=d,mr(this,f)}toString(){return this.snapshot.toString()}}function ti(g,f){const d=function(g,f){const fe=new Bn([],{},{},"",{},lt,f,null,g.root,-1,{});return new vi("",new en(fe,[]))}(g,f),v=new O([new ne("",{})]),S=new O({}),H=new O({}),fe=new O({}),be=new O(""),Me=new or(v,S,fe,be,H,lt,f,d.root);return Me.snapshot=d.root,new Hr(new en(Me,[]),d)}class or{constructor(f,d,v,S,H,fe,be,Me){this.url=f,this.params=d,this.queryParams=v,this.fragment=S,this.data=H,this.outlet=fe,this.component=be,this._futureSnapshot=Me}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Re.U)(f=>Nt(f)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Re.U)(f=>Nt(f)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rr(g,f="emptyOnly"){const d=g.pathFromRoot;let v=0;if("always"!==f)for(v=d.length-1;v>=1;){const S=d[v],H=d[v-1];if(S.routeConfig&&""===S.routeConfig.path)v--;else{if(H.component)break;v--}}return function(g){return g.reduce((f,d)=>({params:Object.assign(Object.assign({},f.params),d.params),data:Object.assign(Object.assign({},f.data),d.data),resolve:Object.assign(Object.assign({},f.resolve),d._resolvedData)}),{params:{},data:{},resolve:{}})}(d.slice(v))}class Bn{constructor(f,d,v,S,H,fe,be,Me,Ye,dt,Pt){this.url=f,this.params=d,this.queryParams=v,this.fragment=S,this.data=H,this.outlet=fe,this.component=be,this.routeConfig=Me,this._urlSegment=Ye,this._lastPathIndex=dt,this._resolve=Pt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(v=>v.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vi extends rn{constructor(f,d){super(d),this.url=f,mr(this,d)}toString(){return Pr(this._root)}}function mr(g,f){f.value._routerState=g,f.children.forEach(d=>mr(g,d))}function Pr(g){const f=g.children.length>0?` { ${g.children.map(Pr).join(", ")} } `:"";return`${g.value}${f}`}function $r(g){if(g.snapshot){const f=g.snapshot,d=g._futureSnapshot;g.snapshot=d,wn(f.queryParams,d.queryParams)||g.queryParams.next(d.queryParams),f.fragment!==d.fragment&&g.fragment.next(d.fragment),wn(f.params,d.params)||g.params.next(d.params),function(g,f){if(g.length!==f.length)return!1;for(let d=0;d<g.length;++d)if(!wn(g[d],f[d]))return!1;return!0}(f.url,d.url)||g.url.next(d.url),wn(f.data,d.data)||g.data.next(d.data)}else g.snapshot=g._futureSnapshot,g.data.next(g._futureSnapshot.data)}function _i(g,f){return wn(g.params,f.params)&&function(g,f){return ue(g,f)&&g.every((d,v)=>wn(d.parameters,f[v].parameters))}(g.url,f.url)&&!(!g.parent!=!f.parent)&&(!g.parent||_i(g.parent,f.parent))}function hn(g,f,d){if(d&&g.shouldReuseRoute(f.value,d.value.snapshot)){const v=d.value;v._futureSnapshot=f.value;const S=function(g,f,d){return f.children.map(v=>{for(const S of d.children)if(g.shouldReuseRoute(v.value,S.value.snapshot))return hn(g,v,S);return hn(g,v)})}(g,f,d);return new en(v,S)}{if(g.shouldAttach(f.value)){const H=g.retrieve(f.value);if(null!==H){const fe=H.route;return Dr(f,fe),fe}}const v=function(g){return new or(new O(g.url),new O(g.params),new O(g.queryParams),new O(g.fragment),new O(g.data),g.outlet,g.component,g)}(f.value),S=f.children.map(H=>hn(g,H));return new en(v,S)}}function Dr(g,f){if(g.value.routeConfig!==f.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(g.children.length!==f.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");f.value._futureSnapshot=g.value;for(let d=0;d<g.children.length;++d)Dr(g.children[d],f.children[d])}function vr(g){return"object"==typeof g&&null!=g&&!g.outlets&&!g.segmentPath}function Kt(g){return"object"==typeof g&&null!=g&&g.outlets}function Kr(g,f,d,v,S){let H={};return v&&et(v,(fe,be)=>{H[be]=Array.isArray(fe)?fe.map(Me=>`${Me}`):`${fe}`}),new re(d.root===g?f:Mr(d.root,g,f),H,S)}function Mr(g,f,d){const v={};return et(g.children,(S,H)=>{v[H]=S===f?d:Mr(S,f,d)}),new q(g.segments,v)}class ur{constructor(f,d,v){if(this.isAbsolute=f,this.numberOfDoubleDots=d,this.commands=v,f&&v.length>0&&vr(v[0]))throw new Error("Root segment cannot have matrix parameters");const S=v.find(Kt);if(S&&S!==Ln(v))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class V{constructor(f,d,v){this.segmentGroup=f,this.processChildren=d,this.index=v}}function Te(g,f,d){if(g||(g=new q([],{})),0===g.segments.length&&g.hasChildren())return je(g,f,d);const v=function(g,f,d){let v=0,S=f;const H={match:!1,pathIndex:0,commandIndex:0};for(;S<g.segments.length;){if(v>=d.length)return H;const fe=g.segments[S],be=d[v];if(Kt(be))break;const Me=`${be}`,Ye=v<d.length-1?d[v+1]:null;if(S>0&&void 0===Me)break;if(Me&&Ye&&"object"==typeof Ye&&void 0===Ye.outlets){if(!Mt(Me,Ye,fe))return H;v+=2}else{if(!Mt(Me,{},fe))return H;v++}S++}return{match:!0,pathIndex:S,commandIndex:v}}(g,f,d),S=d.slice(v.commandIndex);if(v.match&&v.pathIndex<g.segments.length){const H=new q(g.segments.slice(0,v.pathIndex),{});return H.children[lt]=new q(g.segments.slice(v.pathIndex),g.children),je(H,0,S)}return v.match&&0===S.length?new q(g.segments,{}):v.match&&!g.hasChildren()?st(g,f,d):v.match?je(g,0,S):st(g,f,d)}function je(g,f,d){if(0===d.length)return new q(g.segments,{});{const v=function(g){return Kt(g[0])?g[0].outlets:{[lt]:g}}(d),S={};return et(v,(H,fe)=>{"string"==typeof H&&(H=[H]),null!==H&&(S[fe]=Te(g.children[fe],f,H))}),et(g.children,(H,fe)=>{void 0===v[fe]&&(S[fe]=H)}),new q(g.segments,S)}}function st(g,f,d){const v=g.segments.slice(0,f);let S=0;for(;S<d.length;){const H=d[S];if(Kt(H)){const Me=on(H.outlets);return new q(v,Me)}if(0===S&&vr(d[0])){v.push(new ne(g.segments[f].path,Yt(d[0]))),S++;continue}const fe=Kt(H)?H.outlets[lt]:`${H}`,be=S<d.length-1?d[S+1]:null;fe&&be&&vr(be)?(v.push(new ne(fe,Yt(be))),S+=2):(v.push(new ne(fe,{})),S++)}return new q(v,{})}function on(g){const f={};return et(g,(d,v)=>{"string"==typeof d&&(d=[d]),null!==d&&(f[v]=st(new q([],{}),0,d))}),f}function Yt(g){const f={};return et(g,(d,v)=>f[v]=`${d}`),f}function Mt(g,f,d){return g==d.path&&wn(f,d.parameters)}class sn{constructor(f,d,v,S){this.routeReuseStrategy=f,this.futureState=d,this.currState=v,this.forwardEvent=S}activate(f){const d=this.futureState._root,v=this.currState?this.currState._root:null;this.deactivateChildRoutes(d,v,f),$r(this.futureState.root),this.activateChildRoutes(d,v,f)}deactivateChildRoutes(f,d,v){const S=gr(d);f.children.forEach(H=>{const fe=H.value.outlet;this.deactivateRoutes(H,S[fe],v),delete S[fe]}),et(S,(H,fe)=>{this.deactivateRouteAndItsChildren(H,v)})}deactivateRoutes(f,d,v){const S=f.value,H=d?d.value:null;if(S===H)if(S.component){const fe=v.getContext(S.outlet);fe&&this.deactivateChildRoutes(f,d,fe.children)}else this.deactivateChildRoutes(f,d,v);else H&&this.deactivateRouteAndItsChildren(d,v)}deactivateRouteAndItsChildren(f,d){this.routeReuseStrategy.shouldDetach(f.value.snapshot)?this.detachAndStoreRouteSubtree(f,d):this.deactivateRouteAndOutlet(f,d)}detachAndStoreRouteSubtree(f,d){const v=d.getContext(f.value.outlet);if(v&&v.outlet){const S=v.outlet.detach(),H=v.children.onOutletDeactivated();this.routeReuseStrategy.store(f.value.snapshot,{componentRef:S,route:f,contexts:H})}}deactivateRouteAndOutlet(f,d){const v=d.getContext(f.value.outlet),S=v&&f.value.component?v.children:d,H=gr(f);for(const fe of Object.keys(H))this.deactivateRouteAndItsChildren(H[fe],S);v&&v.outlet&&(v.outlet.deactivate(),v.children.onOutletDeactivated(),v.attachRef=null,v.resolver=null,v.route=null)}activateChildRoutes(f,d,v){const S=gr(d);f.children.forEach(H=>{this.activateRoutes(H,S[H.value.outlet],v),this.forwardEvent(new Cr(H.value.snapshot))}),f.children.length&&this.forwardEvent(new Vr(f.value.snapshot))}activateRoutes(f,d,v){const S=f.value,H=d?d.value:null;if($r(S),S===H)if(S.component){const fe=v.getOrCreateContext(S.outlet);this.activateChildRoutes(f,d,fe.children)}else this.activateChildRoutes(f,d,v);else if(S.component){const fe=v.getOrCreateContext(S.outlet);if(this.routeReuseStrategy.shouldAttach(S.snapshot)){const be=this.routeReuseStrategy.retrieve(S.snapshot);this.routeReuseStrategy.store(S.snapshot,null),fe.children.onOutletReAttached(be.contexts),fe.attachRef=be.componentRef,fe.route=be.route.value,fe.outlet&&fe.outlet.attach(be.componentRef,be.route.value),Hn(be.route)}else{const be=function(g){for(let f=g.parent;f;f=f.parent){const d=f.routeConfig;if(d&&d._loadedConfig)return d._loadedConfig;if(d&&d.component)return null}return null}(S.snapshot),Me=be?be.module.componentFactoryResolver:null;fe.attachRef=null,fe.route=S,fe.resolver=Me,fe.outlet&&fe.outlet.activateWith(S,Me),this.activateChildRoutes(f,null,fe.children)}}else this.activateChildRoutes(f,null,v)}}function Hn(g){$r(g.value),g.children.forEach(Hn)}class bn{constructor(f,d){this.routes=f,this.module=d}}function _r(g){return"function"==typeof g}function Xn(g){return g instanceof re}const Fr=Symbol("INITIAL_VALUE");function Qi(){return At(g=>function(...g){let f,d;return(0,k.K)(g[g.length-1])&&(d=g.pop()),"function"==typeof g[g.length-1]&&(f=g.pop()),1===g.length&&(0,j.k)(g[0])&&(g=g[0]),(0,oe.n)(g,d).lift(new de(f))}(g.map(f=>f.pipe(Zn(1),function(...g){const f=g[g.length-1];return(0,k.K)(f)?(g.pop(),d=>ze(g,d,f)):d=>ze(g,d)}(Fr)))).pipe(qt((f,d)=>{let v=!1;return d.reduce((S,H,fe)=>S!==Fr?S:(H===Fr&&(v=!0),v||!1!==H&&fe!==d.length-1&&!Xn(H)?S:H),f)},Fr),T(f=>f!==Fr),(0,Re.U)(f=>Xn(f)?f:!0===f),Zn(1)))}let Lo=(()=>{class g{}return g.\u0275fac=function(d){return new(d||g)},g.\u0275cmp=m.Xpm({type:g,selectors:[["ng-component"]],decls:1,vars:0,template:function(d,v){1&d&&m._UZ(0,"router-outlet")},directives:function(){return[Eo]},encapsulation:2}),g})();function gt(g,f=""){for(let d=0;d<g.length;d++){const v=g[d];uf(v,dc(f,v))}}function uf(g,f){g.children&&gt(g.children,f)}function dc(g,f){return f?g||f.path?g&&!f.path?`${g}/`:!g&&f.path?f.path:`${g}/${f.path}`:"":g}function Ks(g){const f=g.children&&g.children.map(Ks),d=f?Object.assign(Object.assign({},g),{children:f}):Object.assign({},g);return!d.component&&(f||d.loadChildren)&&d.outlet&&d.outlet!==lt&&(d.component=Lo),d}function xr(g){return g.outlet||lt}function qs(g,f){const d=g.filter(v=>xr(v)===f);return d.push(...g.filter(v=>xr(v)!==f)),d}const za={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function jo(g,f,d){var v;if(""===f.path)return"full"===f.pathMatch&&(g.hasChildren()||d.length>0)?Object.assign({},za):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const H=(f.matcher||fn)(d,g,f);if(!H)return Object.assign({},za);const fe={};et(H.posParams,(Me,Ye)=>{fe[Ye]=Me.path});const be=H.consumed.length>0?Object.assign(Object.assign({},fe),H.consumed[H.consumed.length-1].parameters):fe;return{matched:!0,consumedSegments:H.consumed,lastChild:H.consumed.length,parameters:be,positionalParamSegments:null!==(v=H.posParams)&&void 0!==v?v:{}}}function Le(g,f,d,v,S="corrected"){if(d.length>0&&function(g,f,d){return d.some(v=>bi(g,f,v)&&xr(v)!==lt)}(g,d,v)){const fe=new q(f,function(g,f,d,v){const S={};S[lt]=v,v._sourceSegment=g,v._segmentIndexShift=f.length;for(const H of d)if(""===H.path&&xr(H)!==lt){const fe=new q([],{});fe._sourceSegment=g,fe._segmentIndexShift=f.length,S[xr(H)]=fe}return S}(g,f,v,new q(d,g.children)));return fe._sourceSegment=g,fe._segmentIndexShift=f.length,{segmentGroup:fe,slicedSegments:[]}}if(0===d.length&&function(g,f,d){return d.some(v=>bi(g,f,v))}(g,d,v)){const fe=new q(g.segments,function(g,f,d,v,S,H){const fe={};for(const be of v)if(bi(g,d,be)&&!S[xr(be)]){const Me=new q([],{});Me._sourceSegment=g,Me._segmentIndexShift="legacy"===H?g.segments.length:f.length,fe[xr(be)]=Me}return Object.assign(Object.assign({},S),fe)}(g,f,d,v,g.children,S));return fe._sourceSegment=g,fe._segmentIndexShift=f.length,{segmentGroup:fe,slicedSegments:d}}const H=new q(g.segments,g.children);return H._sourceSegment=g,H._segmentIndexShift=f.length,{segmentGroup:H,slicedSegments:d}}function bi(g,f,d){return(!(g.hasChildren()||f.length>0)||"full"!==d.pathMatch)&&""===d.path}function kr(g,f,d,v){return!!(xr(g)===v||v!==lt&&bi(f,d,g))&&("**"===g.path||jo(f,g,d).matched)}function Uo(g,f,d){return 0===f.length&&!g.children[d]}class ji{constructor(f){this.segmentGroup=f||null}}class hc{constructor(f){this.urlTree=f}}function Vo(g){return new z.y(f=>f.error(new ji(g)))}function go(g){return new z.y(f=>f.error(new hc(g)))}function Bo(g){return new z.y(f=>f.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${g}'`)))}class Ya{constructor(f,d,v,S,H){this.configLoader=d,this.urlSerializer=v,this.urlTree=S,this.config=H,this.allowRedirects=!0,this.ngModule=f.get(m.h0i)}apply(){const f=Le(this.urlTree.root,[],[],this.config).segmentGroup,d=new q(f.segments,f.children);return this.expandSegmentGroup(this.ngModule,this.config,d,lt).pipe((0,Re.U)(H=>this.createUrlTree(Nr(H),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Se(H=>{if(H instanceof hc)return this.allowRedirects=!1,this.match(H.urlTree);throw H instanceof ji?this.noMatchError(H):H}))}match(f){return this.expandSegmentGroup(this.ngModule,this.config,f.root,lt).pipe((0,Re.U)(S=>this.createUrlTree(Nr(S),f.queryParams,f.fragment))).pipe(Se(S=>{throw S instanceof ji?this.noMatchError(S):S}))}noMatchError(f){return new Error(`Cannot match any routes. URL Segment: '${f.segmentGroup}'`)}createUrlTree(f,d,v){const S=f.segments.length>0?new q([],{[lt]:f}):f;return new re(S,d,v)}expandSegmentGroup(f,d,v,S){return 0===v.segments.length&&v.hasChildren()?this.expandChildren(f,d,v).pipe((0,Re.U)(H=>new q([],H))):this.expandSegment(f,v,d,v.segments,S,!0)}expandChildren(f,d,v){const S=[];for(const H of Object.keys(v.children))"primary"===H?S.unshift(H):S.push(H);return(0,He.D)(S).pipe(pt(H=>{const fe=v.children[H],be=qs(d,H);return this.expandSegmentGroup(f,be,fe,H).pipe((0,Re.U)(Me=>({segment:Me,outlet:H})))}),qt((H,fe)=>(H[fe.outlet]=fe.segment,H),{}),function(g,f){const d=arguments.length>=2;return v=>v.pipe(g?T((S,H)=>g(S,H,v)):$.y,wt(1),d?vt(f):yn(()=>new Oe))}())}expandSegment(f,d,v,S,H,fe){return(0,He.D)(v).pipe(pt(be=>this.expandSegmentAgainstRoute(f,d,v,be,S,H,fe).pipe(Se(Ye=>{if(Ye instanceof ji)return b(null);throw Ye}))),an(be=>!!be),Se((be,Me)=>{if(be instanceof Oe||"EmptyError"===be.name){if(Uo(d,S,H))return b(new q([],{}));throw new ji(d)}throw be}))}expandSegmentAgainstRoute(f,d,v,S,H,fe,be){return kr(S,d,H,fe)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(f,d,S,H,fe):be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(f,d,v,S,H,fe):Vo(d):Vo(d)}expandSegmentAgainstRouteUsingRedirect(f,d,v,S,H,fe){return"**"===S.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(f,v,S,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(f,d,v,S,H,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(f,d,v,S){const H=this.applyRedirectCommands([],v.redirectTo,{});return v.redirectTo.startsWith("/")?go(H):this.lineralizeSegments(v,H).pipe((0,Ge.zg)(fe=>{const be=new q(fe,{});return this.expandSegment(f,be,d,fe,S,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(f,d,v,S,H,fe){const{matched:be,consumedSegments:Me,lastChild:Ye,positionalParamSegments:dt}=jo(d,S,H);if(!be)return Vo(d);const Pt=this.applyRedirectCommands(Me,S.redirectTo,dt);return S.redirectTo.startsWith("/")?go(Pt):this.lineralizeSegments(S,Pt).pipe((0,Ge.zg)(gn=>this.expandSegment(f,d,v,gn.concat(H.slice(Ye)),fe,!1)))}matchSegmentAgainstRoute(f,d,v,S,H){if("**"===v.path)return v.loadChildren?(v._loadedConfig?b(v._loadedConfig):this.configLoader.load(f.injector,v)).pipe((0,Re.U)(gn=>(v._loadedConfig=gn,new q(S,{})))):b(new q(S,{}));const{matched:fe,consumedSegments:be,lastChild:Me}=jo(d,v,S);if(!fe)return Vo(d);const Ye=S.slice(Me);return this.getChildConfig(f,v,S).pipe((0,Ge.zg)(Pt=>{const gn=Pt.module,Bt=Pt.routes,{segmentGroup:Ki,slicedSegments:Fi}=Le(d,be,Ye,Bt),cr=new q(Ki.segments,Ki.children);if(0===Fi.length&&cr.hasChildren())return this.expandChildren(gn,Bt,cr).pipe((0,Re.U)(so=>new q(be,so)));if(0===Bt.length&&0===Fi.length)return b(new q(be,{}));const Xo=xr(v)===H;return this.expandSegment(gn,cr,Bt,Fi,Xo?lt:H,!0).pipe((0,Re.U)(Or=>new q(be.concat(Or.segments),Or.children)))}))}getChildConfig(f,d,v){return d.children?b(new bn(d.children,f)):d.loadChildren?void 0!==d._loadedConfig?b(d._loadedConfig):this.runCanLoadGuards(f.injector,d,v).pipe((0,Ge.zg)(S=>{return S?this.configLoader.load(f.injector,d).pipe((0,Re.U)(H=>(d._loadedConfig=H,H))):(g=d,new z.y(f=>f.error(Tr(`Cannot load children because the guard of the route "path: '${g.path}'" returned false`))));var g})):b(new bn([],f))}runCanLoadGuards(f,d,v){const S=d.canLoad;return S&&0!==S.length?b(S.map(fe=>{const be=f.get(fe);let Me;if((g=be)&&_r(g.canLoad))Me=be.canLoad(d,v);else{if(!_r(be))throw new Error("Invalid CanLoad guard");Me=be(d,v)}var g;return xt(Me)})).pipe(Qi(),Lt(fe=>{if(!Xn(fe))return;const be=Tr(`Redirecting to "${this.urlSerializer.serialize(fe)}"`);throw be.url=fe,be}),(0,Re.U)(fe=>!0===fe)):b(!0)}lineralizeSegments(f,d){let v=[],S=d.root;for(;;){if(v=v.concat(S.segments),0===S.numberOfChildren)return b(v);if(S.numberOfChildren>1||!S.children[lt])return Bo(f.redirectTo);S=S.children[lt]}}applyRedirectCommands(f,d,v){return this.applyRedirectCreatreUrlTree(d,this.urlSerializer.parse(d),f,v)}applyRedirectCreatreUrlTree(f,d,v,S){const H=this.createSegmentGroup(f,d.root,v,S);return new re(H,this.createQueryParams(d.queryParams,this.urlTree.queryParams),d.fragment)}createQueryParams(f,d){const v={};return et(f,(S,H)=>{if("string"==typeof S&&S.startsWith(":")){const be=S.substring(1);v[H]=d[be]}else v[H]=S}),v}createSegmentGroup(f,d,v,S){const H=this.createSegments(f,d.segments,v,S);let fe={};return et(d.children,(be,Me)=>{fe[Me]=this.createSegmentGroup(f,be,v,S)}),new q(H,fe)}createSegments(f,d,v,S){return d.map(H=>H.path.startsWith(":")?this.findPosParam(f,H,S):this.findOrReturn(H,v))}findPosParam(f,d,v){const S=v[d.path.substring(1)];if(!S)throw new Error(`Cannot redirect to '${f}'. Cannot find '${d.path}'.`);return S}findOrReturn(f,d){let v=0;for(const S of d){if(S.path===f.path)return d.splice(v),S;v++}return f}}function Nr(g){const f={};for(const v of Object.keys(g.children)){const H=Nr(g.children[v]);(H.segments.length>0||H.hasChildren())&&(f[v]=H)}return function(g){if(1===g.numberOfChildren&&g.children[lt]){const f=g.children[lt];return new q(g.segments.concat(f.segments),f.children)}return g}(new q(g.segments,f))}class Ws{constructor(f){this.path=f,this.route=this.path[this.path.length-1]}}class Ho{constructor(f,d){this.component=f,this.route=d}}function gc(g,f,d){const v=g._root;return Ui(v,f?f._root:null,d,[v.value])}function eo(g,f,d){const v=function(g){if(!g)return null;for(let f=g.parent;f;f=f.parent){const d=f.routeConfig;if(d&&d._loadedConfig)return d._loadedConfig}return null}(f);return(v?v.module.injector:d).get(g)}function Ui(g,f,d,v,S={canDeactivateChecks:[],canActivateChecks:[]}){const H=gr(f);return g.children.forEach(fe=>{(function(g,f,d,v,S={canDeactivateChecks:[],canActivateChecks:[]}){const H=g.value,fe=f?f.value:null,be=d?d.getContext(g.value.outlet):null;if(fe&&H.routeConfig===fe.routeConfig){const Me=function(g,f,d){if("function"==typeof d)return d(g,f);switch(d){case"pathParamsChange":return!ue(g.url,f.url);case"pathParamsOrQueryParamsChange":return!ue(g.url,f.url)||!wn(g.queryParams,f.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_i(g,f)||!wn(g.queryParams,f.queryParams);case"paramsChange":default:return!_i(g,f)}}(fe,H,H.routeConfig.runGuardsAndResolvers);Me?S.canActivateChecks.push(new Ws(v)):(H.data=fe.data,H._resolvedData=fe._resolvedData),Ui(g,f,H.component?be?be.children:null:d,v,S),Me&&be&&be.outlet&&be.outlet.isActivated&&S.canDeactivateChecks.push(new Ho(be.outlet.component,fe))}else fe&&Ei(f,be,S),S.canActivateChecks.push(new Ws(v)),Ui(g,null,H.component?be?be.children:null:d,v,S)})(fe,H[fe.value.outlet],d,v.concat([fe.value]),S),delete H[fe.value.outlet]}),et(H,(fe,be)=>Ei(fe,d.getContext(be),S)),S}function Ei(g,f,d){const v=gr(g),S=g.value;et(v,(H,fe)=>{Ei(H,S.component?f?f.children.getContext(fe):null:f,d)}),d.canDeactivateChecks.push(new Ho(S.component&&f&&f.outlet&&f.outlet.isActivated?f.outlet.component:null,S))}class wi{}function pn(g){return new z.y(f=>f.error(g))}class bc{constructor(f,d,v,S,H,fe){this.rootComponentType=f,this.config=d,this.urlTree=v,this.url=S,this.paramsInheritanceStrategy=H,this.relativeLinkResolution=fe}recognize(){const f=Le(this.urlTree.root,[],[],this.config.filter(fe=>void 0===fe.redirectTo),this.relativeLinkResolution).segmentGroup,d=this.processSegmentGroup(this.config,f,lt);if(null===d)return null;const v=new Bn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),S=new en(v,d),H=new vi(this.url,S);return this.inheritParamsAndData(H._root),H}inheritParamsAndData(f){const d=f.value,v=Rr(d,this.paramsInheritanceStrategy);d.params=Object.freeze(v.params),d.data=Object.freeze(v.data),f.children.forEach(S=>this.inheritParamsAndData(S))}processSegmentGroup(f,d,v){return 0===d.segments.length&&d.hasChildren()?this.processChildren(f,d):this.processSegment(f,d,d.segments,v)}processChildren(f,d){const v=[];for(const H of Object.keys(d.children)){const fe=d.children[H],be=qs(f,H),Me=this.processSegmentGroup(be,fe,H);if(null===Me)return null;v.push(...Me)}const S=nu(v);return S.sort((f,d)=>f.value.outlet===lt?-1:d.value.outlet===lt?1:f.value.outlet.localeCompare(d.value.outlet)),S}processSegment(f,d,v,S){for(const H of f){const fe=this.processSegmentAgainstRoute(H,d,v,S);if(null!==fe)return fe}return Uo(d,v,S)?[]:null}processSegmentAgainstRoute(f,d,v,S){if(f.redirectTo||!kr(f,d,v,S))return null;let H,fe=[],be=[];if("**"===f.path){const Bt=v.length>0?Ln(v).parameters:{};H=new Bn(v,Bt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(f),xr(f),f.component,f,mo(d),yo(d)+v.length,Ys(f))}else{const Bt=jo(d,f,v);if(!Bt.matched)return null;fe=Bt.consumedSegments,be=v.slice(Bt.lastChild),H=new Bn(fe,Bt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(f),xr(f),f.component,f,mo(d),yo(d)+fe.length,Ys(f))}const Me=(g=f).children?g.children:g.loadChildren?g._loadedConfig.routes:[],{segmentGroup:Ye,slicedSegments:dt}=Le(d,fe,be,Me.filter(Bt=>void 0===Bt.redirectTo),this.relativeLinkResolution);var g;if(0===dt.length&&Ye.hasChildren()){const Bt=this.processChildren(Me,Ye);return null===Bt?null:[new en(H,Bt)]}if(0===Me.length&&0===dt.length)return[new en(H,[])];const Pt=xr(f)===S,gn=this.processSegment(Me,Ye,dt,Pt?lt:S);return null===gn?null:[new en(H,gn)]}}function Cc(g){const f=g.value.routeConfig;return f&&""===f.path&&void 0===f.redirectTo}function nu(g){const f=[],d=new Set;for(const v of g){if(!Cc(v)){f.push(v);continue}const S=f.find(H=>v.value.routeConfig===H.value.routeConfig);void 0!==S?(S.children.push(...v.children),d.add(S)):f.push(v)}for(const v of d){const S=nu(v.children);f.push(new en(v.value,S))}return f.filter(v=>!d.has(v))}function mo(g){let f=g;for(;f._sourceSegment;)f=f._sourceSegment;return f}function yo(g){let f=g,d=f._segmentIndexShift?f._segmentIndexShift:0;for(;f._sourceSegment;)f=f._sourceSegment,d+=f._segmentIndexShift?f._segmentIndexShift:0;return d-1}function Ko(g){return g.data||{}}function Ys(g){return g.resolve||{}}function Vi(g){return At(f=>{const d=g(f);return d?(0,He.D)(d).pipe((0,Re.U)(()=>f)):b(f)})}class Ic extends class{shouldDetach(f){return!1}store(f,d){}shouldAttach(f){return!1}retrieve(f){return null}shouldReuseRoute(f,d){return f.routeConfig===d.routeConfig}}{}const ru=new m.OlP("ROUTES");class Ac{constructor(f,d,v,S){this.loader=f,this.compiler=d,this.onLoadStartListener=v,this.onLoadEndListener=S}load(f,d){if(d._loader$)return d._loader$;this.onLoadStartListener&&this.onLoadStartListener(d);const S=this.loadModuleFactory(d.loadChildren).pipe((0,Re.U)(H=>{this.onLoadEndListener&&this.onLoadEndListener(d);const fe=H.create(f);return new bn(ei(fe.injector.get(ru,void 0,m.XFs.Self|m.XFs.Optional)).map(Ks),fe)}),Se(H=>{throw d._loader$=void 0,H}));return d._loader$=new ot.c(S,()=>new D.xQ).pipe((0,rr.x)()),d._loader$}loadModuleFactory(f){return"string"==typeof f?(0,He.D)(this.loader.load(f)):xt(f()).pipe((0,Ge.zg)(d=>d instanceof m.YKP?b(d):(0,He.D)(this.compiler.compileModuleAsync(d))))}}class qo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Bi,this.attachRef=null}}class Bi{constructor(){this.contexts=new Map}onChildOutletCreated(f,d){const v=this.getOrCreateContext(f);v.outlet=d,this.contexts.set(f,v)}onChildOutletDestroyed(f){const d=this.getContext(f);d&&(d.outlet=null)}onOutletDeactivated(){const f=this.contexts;return this.contexts=new Map,f}onOutletReAttached(f){this.contexts=f}getOrCreateContext(f){let d=this.getContext(f);return d||(d=new qo,this.contexts.set(f,d)),d}getContext(f){return this.contexts.get(f)||null}}class Wo{shouldProcessUrl(f){return!0}extract(f){return f}merge(f,d){return f}}function iu(g){throw g}function ou(g,f,d){return f.parse("/")}function Hi(g,f){return b(null)}const Tc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},to={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kn=(()=>{class g{constructor(d,v,S,H,fe,be,Me,Ye){this.rootComponentType=d,this.urlSerializer=v,this.rootContexts=S,this.location=H,this.config=Ye,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new D.xQ,this.errorHandler=iu,this.malformedUriErrorHandler=ou,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hi,afterPreactivation:Hi},this.urlHandlingStrategy=new Wo,this.routeReuseStrategy=new Ic,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=fe.get(m.h0i),this.console=fe.get(m.c2e);const gn=fe.get(m.R0b);this.isNgZoneEnabled=gn instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(Ye),this.currentUrlTree=new re(new q([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ac(be,Me,Bt=>this.triggerEvent(new Pn(Bt)),Bt=>this.triggerEvent(new ir(Bt))),this.routerState=ti(this.currentUrlTree,this.rootComponentType),this.transitions=new O({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var d;return null===(d=this.location.getState())||void 0===d?void 0:d.\u0275routerPageId}setupNavigations(d){const v=this.events;return d.pipe(T(S=>0!==S.id),(0,Re.U)(S=>Object.assign(Object.assign({},S),{extractedUrl:this.urlHandlingStrategy.extract(S.rawUrl)})),At(S=>{let H=!1,fe=!1;return b(S).pipe(Lt(be=>{this.currentNavigation={id:be.id,initialUrl:be.currentRawUrl,extractedUrl:be.extractedUrl,trigger:be.source,extras:be.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),At(be=>{const Me=!this.navigated||be.extractedUrl.toString()!==this.browserUrlTree.toString(),Ye=("reload"===this.onSameUrlNavigation||Me)&&this.urlHandlingStrategy.shouldProcessUrl(be.rawUrl);if(Qs(be.source)&&(this.browserUrlTree=be.rawUrl),Ye)return b(be).pipe(At(dt=>{const Pt=this.transitions.getValue();return v.next(new ln(dt.id,this.serializeUrl(dt.extractedUrl),dt.source,dt.restoredState)),Pt!==this.transitions.getValue()?Xe:Promise.resolve(dt)}),function(g,f,d,v){return At(S=>function(g,f,d,v,S){return new Ya(g,f,d,v,S).apply()}(g,f,d,S.extractedUrl,v).pipe((0,Re.U)(H=>Object.assign(Object.assign({},S),{urlAfterRedirects:H}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Lt(dt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:dt.urlAfterRedirects})}),function(g,f,d,v,S){return(0,Ge.zg)(H=>function(g,f,d,v,S="emptyOnly",H="legacy"){try{const fe=new bc(g,f,d,v,S,H).recognize();return null===fe?pn(new wi):b(fe)}catch(fe){return pn(fe)}}(g,f,H.urlAfterRedirects,d(H.urlAfterRedirects),v,S).pipe((0,Re.U)(fe=>Object.assign(Object.assign({},H),{targetSnapshot:fe}))))}(this.rootComponentType,this.config,dt=>this.serializeUrl(dt),this.paramsInheritanceStrategy,this.relativeLinkResolution),Lt(dt=>{"eager"===this.urlUpdateStrategy&&(dt.extras.skipLocationChange||this.setBrowserUrl(dt.urlAfterRedirects,dt),this.browserUrlTree=dt.urlAfterRedirects);const Pt=new pr(dt.id,this.serializeUrl(dt.extractedUrl),this.serializeUrl(dt.urlAfterRedirects),dt.targetSnapshot);v.next(Pt)}));if(Me&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Pt,extractedUrl:gn,source:Bt,restoredState:Ki,extras:Fi}=be,cr=new ln(Pt,this.serializeUrl(gn),Bt,Ki);v.next(cr);const Xo=ti(gn,this.rootComponentType).snapshot;return b(Object.assign(Object.assign({},be),{targetSnapshot:Xo,urlAfterRedirects:gn,extras:Object.assign(Object.assign({},Fi),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=be.rawUrl,this.browserUrlTree=be.urlAfterRedirects,be.resolve(null),Xe}),Vi(be=>{const{targetSnapshot:Me,id:Ye,extractedUrl:dt,rawUrl:Pt,extras:{skipLocationChange:gn,replaceUrl:Bt}}=be;return this.hooks.beforePreactivation(Me,{navigationId:Ye,appliedUrlTree:dt,rawUrlTree:Pt,skipLocationChange:!!gn,replaceUrl:!!Bt})}),Lt(be=>{const Me=new dn(be.id,this.serializeUrl(be.extractedUrl),this.serializeUrl(be.urlAfterRedirects),be.targetSnapshot);this.triggerEvent(Me)}),(0,Re.U)(be=>Object.assign(Object.assign({},be),{guards:gc(be.targetSnapshot,be.currentSnapshot,this.rootContexts)})),function(g,f){return(0,Ge.zg)(d=>{const{targetSnapshot:v,currentSnapshot:S,guards:{canActivateChecks:H,canDeactivateChecks:fe}}=d;return 0===fe.length&&0===H.length?b(Object.assign(Object.assign({},d),{guardsResult:!0})):function(g,f,d,v){return(0,He.D)(g).pipe((0,Ge.zg)(S=>function(g,f,d,v,S){const H=f&&f.routeConfig?f.routeConfig.canDeactivate:null;return H&&0!==H.length?b(H.map(be=>{const Me=eo(be,f,S);let Ye;if(function(g){return g&&_r(g.canDeactivate)}(Me))Ye=xt(Me.canDeactivate(g,f,d,v));else{if(!_r(Me))throw new Error("Invalid CanDeactivate guard");Ye=xt(Me(g,f,d,v))}return Ye.pipe(an())})).pipe(Qi()):b(!0)}(S.component,S.route,d,f,v)),an(S=>!0!==S,!0))}(fe,v,S,g).pipe((0,Ge.zg)(be=>be&&function(g){return"boolean"==typeof g}(be)?function(g,f,d,v){return(0,He.D)(f).pipe(pt(S=>ze(function(g,f){return null!==g&&f&&f(new gi(g)),b(!0)}(S.route.parent,v),function(g,f){return null!==g&&f&&f(new mi(g)),b(!0)}(S.route,v),function(g,f,d){const v=f[f.length-1],H=f.slice(0,f.length-1).reverse().map(fe=>function(g){const f=g.routeConfig?g.routeConfig.canActivateChild:null;return f&&0!==f.length?{node:g,guards:f}:null}(fe)).filter(fe=>null!==fe).map(fe=>tt(()=>b(fe.guards.map(Me=>{const Ye=eo(Me,fe.node,d);let dt;if(function(g){return g&&_r(g.canActivateChild)}(Ye))dt=xt(Ye.canActivateChild(v,g));else{if(!_r(Ye))throw new Error("Invalid CanActivateChild guard");dt=xt(Ye(v,g))}return dt.pipe(an())})).pipe(Qi())));return b(H).pipe(Qi())}(g,S.path,d),function(g,f,d){const v=f.routeConfig?f.routeConfig.canActivate:null;return v&&0!==v.length?b(v.map(H=>tt(()=>{const fe=eo(H,f,d);let be;if(function(g){return g&&_r(g.canActivate)}(fe))be=xt(fe.canActivate(f,g));else{if(!_r(fe))throw new Error("Invalid CanActivate guard");be=xt(fe(f,g))}return be.pipe(an())}))).pipe(Qi()):b(!0)}(g,S.route,d))),an(S=>!0!==S,!0))}(v,H,g,f):b(be)),(0,Re.U)(be=>Object.assign(Object.assign({},d),{guardsResult:be})))})}(this.ngModule.injector,be=>this.triggerEvent(be)),Lt(be=>{if(Xn(be.guardsResult)){const Ye=Tr(`Redirecting to "${this.serializeUrl(be.guardsResult)}"`);throw Ye.url=be.guardsResult,Ye}const Me=new On(be.id,this.serializeUrl(be.extractedUrl),this.serializeUrl(be.urlAfterRedirects),be.targetSnapshot,!!be.guardsResult);this.triggerEvent(Me)}),T(be=>!!be.guardsResult||(this.restoreHistory(be),this.cancelNavigationTransition(be,""),!1)),Vi(be=>{if(be.guards.canActivateChecks.length)return b(be).pipe(Lt(Me=>{const Ye=new Ar(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(Ye)}),At(Me=>{let Ye=!1;return b(Me).pipe(function(g,f){return(0,Ge.zg)(d=>{const{targetSnapshot:v,guards:{canActivateChecks:S}}=d;if(!S.length)return b(d);let H=0;return(0,He.D)(S).pipe(pt(fe=>function(g,f,d,v){return function(g,f,d,v){const S=Object.keys(g);if(0===S.length)return b({});const H={};return(0,He.D)(S).pipe((0,Ge.zg)(fe=>function(g,f,d,v){const S=eo(g,f,v);return xt(S.resolve?S.resolve(f,d):S(f,d))}(g[fe],f,d,v).pipe(Lt(be=>{H[fe]=be}))),wt(1),(0,Ge.zg)(()=>Object.keys(H).length===S.length?b(H):Xe))}(g._resolve,g,f,v).pipe((0,Re.U)(H=>(g._resolvedData=H,g.data=Object.assign(Object.assign({},g.data),Rr(g,d).resolve),null)))}(fe.route,v,g,f)),Lt(()=>H++),wt(1),(0,Ge.zg)(fe=>H===S.length?b(d):Xe))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Lt({next:()=>Ye=!0,complete:()=>{Ye||(this.restoreHistory(Me),this.cancelNavigationTransition(Me,"At least one route resolver didn't emit any value."))}}))}),Lt(Me=>{const Ye=new pi(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(Ye)}))}),Vi(be=>{const{targetSnapshot:Me,id:Ye,extractedUrl:dt,rawUrl:Pt,extras:{skipLocationChange:gn,replaceUrl:Bt}}=be;return this.hooks.afterPreactivation(Me,{navigationId:Ye,appliedUrlTree:dt,rawUrlTree:Pt,skipLocationChange:!!gn,replaceUrl:!!Bt})}),(0,Re.U)(be=>{const Me=function(g,f,d){const v=hn(g,f._root,d?d._root:void 0);return new Hr(v,f)}(this.routeReuseStrategy,be.targetSnapshot,be.currentRouterState);return Object.assign(Object.assign({},be),{targetRouterState:Me})}),Lt(be=>{this.currentUrlTree=be.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,be.rawUrl),this.routerState=be.targetRouterState,"deferred"===this.urlUpdateStrategy&&(be.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,be),this.browserUrlTree=be.urlAfterRedirects)}),((g,f,d)=>(0,Re.U)(v=>(new sn(f,v.targetRouterState,v.currentRouterState,d).activate(g),v)))(this.rootContexts,this.routeReuseStrategy,be=>this.triggerEvent(be)),Lt({next(){H=!0},complete(){H=!0}}),function(g){return f=>f.lift(new ut(g))}(()=>{if(!H&&!fe){const be=`Navigation ID ${S.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(S),this.cancelNavigationTransition(S,be)):this.cancelNavigationTransition(S,be)}this.currentNavigation=null}),Se(be=>{if(fe=!0,function(g){return g&&g[Sr]}(be)){const Me=Xn(be.url);Me||(this.navigated=!0,this.restoreHistory(S,!0));const Ye=new Qn(S.id,this.serializeUrl(S.extractedUrl),be.message);v.next(Ye),Me?setTimeout(()=>{const dt=this.urlHandlingStrategy.merge(be.url,this.rawUrlTree),Pt={skipLocationChange:S.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Qs(S.source)};this.scheduleNavigation(dt,"imperative",null,Pt,{resolve:S.resolve,reject:S.reject,promise:S.promise})},0):S.resolve(!1)}else{this.restoreHistory(S,!0);const Me=new Tt(S.id,this.serializeUrl(S.extractedUrl),be);v.next(Me);try{S.resolve(this.errorHandler(be))}catch(Ye){S.reject(Ye)}}return Xe}))}))}resetRootComponentType(d){this.rootComponentType=d,this.routerState.root.component=this.rootComponentType}getTransition(){const d=this.transitions.value;return d.urlAfterRedirects=this.browserUrlTree,d}setTransition(d){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),d))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(d=>{const v=this.extractLocationChangeInfoFromEvent(d);this.shouldScheduleNavigation(this.lastLocationChangeInfo,v)&&setTimeout(()=>{const{source:S,state:H,urlTree:fe}=v,be={replaceUrl:!0};if(H){const Me=Object.assign({},H);delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&(be.state=Me)}this.scheduleNavigation(fe,S,H,be)},0),this.lastLocationChangeInfo=v}))}extractLocationChangeInfoFromEvent(d){var v;return{source:"popstate"===d.type?"popstate":"hashchange",urlTree:this.parseUrl(d.url),state:(null===(v=d.state)||void 0===v?void 0:v.navigationId)?d.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(d,v){if(!d)return!0;const S=v.urlTree.toString()===d.urlTree.toString();return v.transitionId!==d.transitionId||!S||!("hashchange"===v.source&&"popstate"===d.source||"popstate"===v.source&&"hashchange"===d.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(d){this.events.next(d)}resetConfig(d){gt(d),this.config=d.map(Ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(d,v={}){const{relativeTo:S,queryParams:H,fragment:fe,queryParamsHandling:be,preserveFragment:Me}=v,Ye=S||this.routerState.root,dt=Me?this.currentUrlTree.fragment:fe;let Pt=null;switch(be){case"merge":Pt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),H);break;case"preserve":Pt=this.currentUrlTree.queryParams;break;default:Pt=H||null}return null!==Pt&&(Pt=this.removeEmptyProps(Pt)),function(g,f,d,v,S){if(0===d.length)return Kr(f.root,f.root,f,v,S);const H=function(g){if("string"==typeof g[0]&&1===g.length&&"/"===g[0])return new ur(!0,0,g);let f=0,d=!1;const v=g.reduce((S,H,fe)=>{if("object"==typeof H&&null!=H){if(H.outlets){const be={};return et(H.outlets,(Me,Ye)=>{be[Ye]="string"==typeof Me?Me.split("/"):Me}),[...S,{outlets:be}]}if(H.segmentPath)return[...S,H.segmentPath]}return"string"!=typeof H?[...S,H]:0===fe?(H.split("/").forEach((be,Me)=>{0==Me&&"."===be||(0==Me&&""===be?d=!0:".."===be?f++:""!=be&&S.push(be))}),S):[...S,H]},[]);return new ur(d,f,v)}(d);if(H.toRoot())return Kr(f.root,new q([],{}),f,v,S);const fe=function(g,f,d){if(g.isAbsolute)return new V(f.root,!0,0);if(-1===d.snapshot._lastPathIndex){const H=d.snapshot._urlSegment;return new V(H,H===f.root,0)}const v=vr(g.commands[0])?0:1;return function(g,f,d){let v=g,S=f,H=d;for(;H>S;){if(H-=S,v=v.parent,!v)throw new Error("Invalid number of '../'");S=v.segments.length}return new V(v,!1,S-H)}(d.snapshot._urlSegment,d.snapshot._lastPathIndex+v,g.numberOfDoubleDots)}(H,f,g),be=fe.processChildren?je(fe.segmentGroup,fe.index,H.commands):Te(fe.segmentGroup,fe.index,H.commands);return Kr(fe.segmentGroup,be,f,v,S)}(Ye,this.currentUrlTree,d,Pt,null!=dt?dt:null)}navigateByUrl(d,v={skipLocationChange:!1}){const S=Xn(d)?d:this.parseUrl(d),H=this.urlHandlingStrategy.merge(S,this.rawUrlTree);return this.scheduleNavigation(H,"imperative",null,v)}navigate(d,v={skipLocationChange:!1}){return function(g){for(let f=0;f<g.length;f++){const d=g[f];if(null==d)throw new Error(`The requested path contains ${d} segment at index ${f}`)}}(d),this.navigateByUrl(this.createUrlTree(d,v),v)}serializeUrl(d){return this.urlSerializer.serialize(d)}parseUrl(d){let v;try{v=this.urlSerializer.parse(d)}catch(S){v=this.malformedUriErrorHandler(S,this.urlSerializer,d)}return v}isActive(d,v){let S;if(S=!0===v?Object.assign({},Tc):!1===v?Object.assign({},to):v,Xn(d))return a(this.currentUrlTree,d,S);const H=this.parseUrl(d);return a(this.currentUrlTree,H,S)}removeEmptyProps(d){return Object.keys(d).reduce((v,S)=>{const H=d[S];return null!=H&&(v[S]=H),v},{})}processNavigations(){this.navigations.subscribe(d=>{this.navigated=!0,this.lastSuccessfulId=d.id,this.currentPageId=d.targetPageId,this.events.next(new Rn(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,d.resolve(!0)},d=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(d,v,S,H,fe){var be,Me;if(this.disposed)return Promise.resolve(!1);const Ye=this.getTransition(),dt=Qs(v)&&Ye&&!Qs(Ye.source),Bt=(this.lastSuccessfulId===Ye.id||this.currentNavigation?Ye.rawUrl:Ye.urlAfterRedirects).toString()===d.toString();if(dt&&Bt)return Promise.resolve(!0);let Ki,Fi,cr;fe?(Ki=fe.resolve,Fi=fe.reject,cr=fe.promise):cr=new Promise((Or,so)=>{Ki=Or,Fi=so});const Xo=++this.navigationId;let cn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(S=this.location.getState()),cn=S&&S.\u0275routerPageId?S.\u0275routerPageId:H.replaceUrl||H.skipLocationChange?null!==(be=this.browserPageId)&&void 0!==be?be:0:(null!==(Me=this.browserPageId)&&void 0!==Me?Me:0)+1):cn=0,this.setTransition({id:Xo,targetPageId:cn,source:v,restoredState:S,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:d,extras:H,resolve:Ki,reject:Fi,promise:cr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),cr.catch(Or=>Promise.reject(Or))}setBrowserUrl(d,v){const S=this.urlSerializer.serialize(d),H=Object.assign(Object.assign({},v.extras.state),this.generateNgRouterState(v.id,v.targetPageId));this.location.isCurrentPathEqualTo(S)||v.extras.replaceUrl?this.location.replaceState(S,"",H):this.location.go(S,"",H)}restoreHistory(d,v=!1){var S,H;if("computed"===this.canceledNavigationResolution){const fe=this.currentPageId-d.targetPageId;"popstate"!==d.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(S=this.currentNavigation)||void 0===S?void 0:S.finalUrl)||0===fe?this.currentUrlTree===(null===(H=this.currentNavigation)||void 0===H?void 0:H.finalUrl)&&0===fe&&(this.resetState(d),this.browserUrlTree=d.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(fe)}else"replace"===this.canceledNavigationResolution&&(v&&this.resetState(d),this.resetUrlToCurrentUrlTree())}resetState(d){this.routerState=d.currentRouterState,this.currentUrlTree=d.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,d.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(d,v){const S=new Qn(d.id,this.serializeUrl(d.extractedUrl),v);this.triggerEvent(S),d.resolve(!1)}generateNgRouterState(d,v){return"computed"===this.canceledNavigationResolution?{navigationId:d,\u0275routerPageId:v}:{navigationId:d}}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(m.DyG),m.LFG(x),m.LFG(Bi),m.LFG(F.Ye),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})();function Qs(g){return"imperative"!==g}let _o=(()=>{class g{constructor(d,v,S){this.router=d,this.route=v,this.locationStrategy=S,this.commands=[],this.onChanges=new D.xQ,this.subscription=d.events.subscribe(H=>{H instanceof Rn&&this.updateTargetUrlAndHref()})}set routerLink(d){this.commands=null!=d?Array.isArray(d)?d:[d]:[]}ngOnChanges(d){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(d,v,S,H,fe){if(0!==d||v||S||H||fe||"string"==typeof this.target&&"_self"!=this.target)return!0;const be={skipLocationChange:no(this.skipLocationChange),replaceUrl:no(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,be),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:no(this.preserveFragment)})}}return g.\u0275fac=function(d){return new(d||g)(m.Y36(Kn),m.Y36(or),m.Y36(F.S$))},g.\u0275dir=m.lG2({type:g,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(d,v){1&d&&m.NdJ("click",function(H){return v.onClick(H.button,H.ctrlKey,H.shiftKey,H.altKey,H.metaKey)}),2&d&&(m.Ikx("href",v.href,m.LSH),m.uIk("target",v.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[m.TTD]}),g})();function no(g){return""===g||!!g}let Eo=(()=>{class g{constructor(d,v,S,H,fe){this.parentContexts=d,this.location=v,this.resolver=S,this.changeDetector=fe,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=H||lt,d.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const d=this.parentContexts.getContext(this.name);d&&d.route&&(d.attachRef?this.attach(d.attachRef,d.route):this.activateWith(d.route,d.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const d=this.activated;return this.activated=null,this._activatedRoute=null,d}attach(d,v){this.activated=d,this._activatedRoute=v,this.location.insert(d.hostView)}deactivate(){if(this.activated){const d=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(d)}}activateWith(d,v){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=d;const fe=(v=v||this.resolver).resolveComponentFactory(d._futureSnapshot.routeConfig.component),be=this.parentContexts.getOrCreateContext(this.name).children,Me=new Xs(d,be,this.location.injector);this.activated=this.location.createComponent(fe,this.location.length,Me),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return g.\u0275fac=function(d){return new(d||g)(m.Y36(Bi),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},g.\u0275dir=m.lG2({type:g,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),g})();class Xs{constructor(f,d,v){this.route=f,this.childContexts=d,this.parent=v}get(f,d){return f===or?this.route:f===Bi?this.childContexts:this.parent.get(f,d)}}class wo{}class su{preload(f,d){return b(null)}}let ea=(()=>{class g{constructor(d,v,S,H,fe){this.router=d,this.injector=H,this.preloadingStrategy=fe,this.loader=new Ac(v,S,Ye=>d.triggerEvent(new Pn(Ye)),Ye=>d.triggerEvent(new ir(Ye)))}setUpPreloading(){this.subscription=this.router.events.pipe(T(d=>d instanceof Rn),pt(()=>this.preload())).subscribe(()=>{})}preload(){const d=this.injector.get(m.h0i);return this.processRoutes(d,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(d,v){const S=[];for(const H of v)if(H.loadChildren&&!H.canLoad&&H._loadedConfig){const fe=H._loadedConfig;S.push(this.processRoutes(fe.module,fe.routes))}else H.loadChildren&&!H.canLoad?S.push(this.preloadConfig(d,H)):H.children&&S.push(this.processRoutes(d,H.children));return(0,He.D)(S).pipe((0,Ve.J)(),(0,Re.U)(H=>{}))}preloadConfig(d,v){return this.preloadingStrategy.preload(v,()=>(v._loadedConfig?b(v._loadedConfig):this.loader.load(d.injector,v)).pipe((0,Ge.zg)(H=>(v._loadedConfig=H,this.processRoutes(H.module,H.routes)))))}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(Kn),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(wo))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})(),Jo=(()=>{class g{constructor(d,v,S={}){this.router=d,this.viewportScroller=v,this.options=S,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},S.scrollPositionRestoration=S.scrollPositionRestoration||"disabled",S.anchorScrolling=S.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(d=>{d instanceof ln?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=d.navigationTrigger,this.restoredId=d.restoredState?d.restoredState.navigationId:0):d instanceof Rn&&(this.lastId=d.id,this.scheduleScrollEvent(d,this.router.parseUrl(d.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(d=>{d instanceof Fn&&(d.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(d.position):d.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(d.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(d,v){this.router.triggerEvent(new Fn(d,"popstate"===this.lastSource?this.store[this.restoredId]:null,v))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(Kn),m.LFG(F.EM),m.LFG(void 0))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})();const Si=new m.OlP("ROUTER_CONFIGURATION"),au=new m.OlP("ROUTER_FORROOT_GUARD"),Zo=[F.Ye,{provide:x,useClass:U},{provide:Kn,useFactory:function(g,f,d,v,S,H,fe,be={},Me,Ye){const dt=new Kn(null,g,f,d,v,S,H,ei(fe));return Me&&(dt.urlHandlingStrategy=Me),Ye&&(dt.routeReuseStrategy=Ye),function(g,f){g.errorHandler&&(f.errorHandler=g.errorHandler),g.malformedUriErrorHandler&&(f.malformedUriErrorHandler=g.malformedUriErrorHandler),g.onSameUrlNavigation&&(f.onSameUrlNavigation=g.onSameUrlNavigation),g.paramsInheritanceStrategy&&(f.paramsInheritanceStrategy=g.paramsInheritanceStrategy),g.relativeLinkResolution&&(f.relativeLinkResolution=g.relativeLinkResolution),g.urlUpdateStrategy&&(f.urlUpdateStrategy=g.urlUpdateStrategy)}(be,dt),be.enableTracing&&dt.events.subscribe(Pt=>{var gn,Bt;null===(gn=console.group)||void 0===gn||gn.call(console,`Router Event: ${Pt.constructor.name}`),console.log(Pt.toString()),console.log(Pt),null===(Bt=console.groupEnd)||void 0===Bt||Bt.call(console)}),dt},deps:[x,Bi,F.Ye,m.zs3,m.v3s,m.Sil,ru,Si,[class{},new m.FiY],[class{},new m.FiY]]},Bi,{provide:or,useFactory:function(g){return g.routerState.root},deps:[Kn]},{provide:m.v3s,useClass:m.EAV},ea,su,class{preload(f,d){return d().pipe(Se(()=>b(null)))}},{provide:Si,useValue:{enableTracing:!1}}];function Co(){return new m.PXZ("Router",Kn)}let kc=(()=>{class g{constructor(d,v){}static forRoot(d,v){return{ngModule:g,providers:[Zo,lu(d),{provide:au,useFactory:ro,deps:[[Kn,new m.FiY,new m.tp0]]},{provide:Si,useValue:v||{}},{provide:F.S$,useFactory:cu,deps:[F.lw,[new m.tBr(F.mr),new m.FiY],Si]},{provide:Jo,useFactory:uu,deps:[Kn,F.EM,Si]},{provide:wo,useExisting:v&&v.preloadingStrategy?v.preloadingStrategy:su},{provide:m.PXZ,multi:!0,useFactory:Co},[Di,{provide:m.ip1,multi:!0,useFactory:oo,deps:[Di]},{provide:Qo,useFactory:So,deps:[Di]},{provide:m.tb,multi:!0,useExisting:Qo}]]}}static forChild(d){return{ngModule:g,providers:[lu(d)]}}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(au,8),m.LFG(Kn,8))},g.\u0275mod=m.oAB({type:g}),g.\u0275inj=m.cJS({}),g})();function uu(g,f,d){return d.scrollOffset&&f.setOffset(d.scrollOffset),new Jo(g,f,d)}function cu(g,f,d={}){return d.useHash?new F.Do(g,f):new F.b0(g,f)}function ro(g){return"guarded"}function lu(g){return[{provide:m.deG,multi:!0,useValue:g},{provide:ru,multi:!0,useValue:g}]}let Di=(()=>{class g{constructor(d){this.injector=d,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new D.xQ}appInitializer(){return this.injector.get(F.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let v=null;const S=new Promise(be=>v=be),H=this.injector.get(Kn),fe=this.injector.get(Si);return"disabled"===fe.initialNavigation?(H.setUpLocationChangeListener(),v(!0)):"enabled"===fe.initialNavigation||"enabledBlocking"===fe.initialNavigation?(H.hooks.afterPreactivation=()=>this.initNavigation?b(null):(this.initNavigation=!0,v(!0),this.resultOfPreactivationDone),H.initialNavigation()):v(!0),S})}bootstrapListener(d){const v=this.injector.get(Si),S=this.injector.get(ea),H=this.injector.get(Jo),fe=this.injector.get(Kn),be=this.injector.get(m.z2F);d===be.components[0]&&(("enabledNonBlocking"===v.initialNavigation||void 0===v.initialNavigation)&&fe.initialNavigation(),S.setUpPreloading(),H.init(),fe.resetRootComponentType(be.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return g.\u0275fac=function(d){return new(d||g)(m.LFG(m.zs3))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac}),g})();function oo(g){return g.appInitializer.bind(g)}function So(g){return g.bootstrapListener.bind(g)}const Qo=new m.OlP("Router Initializer")},0:function(It){It.exports=function(Ae){var P={};function F(m){if(P[m])return P[m].exports;var k=P[m]={i:m,l:!1,exports:{}};return Ae[m].call(k.exports,k,k.exports,F),k.l=!0,k.exports}return F.m=Ae,F.c=P,F.d=function(m,k,oe){F.o(m,k)||Object.defineProperty(m,k,{enumerable:!0,get:oe})},F.r=function(m){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},F.t=function(m,k){if(1&k&&(m=F(m)),8&k||4&k&&"object"==typeof m&&m&&m.__esModule)return m;var oe=Object.create(null);if(F.r(oe),Object.defineProperty(oe,"default",{enumerable:!0,value:m}),2&k&&"string"!=typeof m)for(var J in m)F.d(oe,J,function(b){return m[b]}.bind(null,J));return oe},F.n=function(m){var k=m&&m.__esModule?function(){return m.default}:function(){return m};return F.d(k,"a",k),k},F.o=function(m,k){return Object.prototype.hasOwnProperty.call(m,k)},F.p="",F(F.s=22)}([function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var m=function(){function b(D,E){for(var O=0;O<E.length;O++){var j=E[O];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(D,j.key,j)}}return function(D,E,O){return E&&b(D.prototype,E),O&&b(D,O),D}}(),k={debug:function(){},info:function(){},warn:function(){},error:function(){}},oe=void 0,J=void 0;(P.Log=function(){function b(){!function(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}(this,b)}return b.reset=function(){J=3,oe=k},b.debug=function(){if(J>=4){for(var E=arguments.length,O=Array(E),j=0;j<E;j++)O[j]=arguments[j];oe.debug.apply(oe,Array.from(O))}},b.info=function(){if(J>=3){for(var E=arguments.length,O=Array(E),j=0;j<E;j++)O[j]=arguments[j];oe.info.apply(oe,Array.from(O))}},b.warn=function(){if(J>=2){for(var E=arguments.length,O=Array(E),j=0;j<E;j++)O[j]=arguments[j];oe.warn.apply(oe,Array.from(O))}},b.error=function(){if(J>=1){for(var E=arguments.length,O=Array(E),j=0;j<E;j++)O[j]=arguments[j];oe.error.apply(oe,Array.from(O))}},m(b,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return J},set:function(E){if(!(0<=E&&E<=4))throw new Error("Invalid log level");J=E}},{key:"logger",get:function(){return oe},set:function(E){if(!E.debug&&E.info&&(E.debug=E.info),!(E.debug&&E.info&&E.warn&&E.error))throw new Error("Invalid logger");oe=E}}]),b}()).reset()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var m=function(){function b(D,E){for(var O=0;O<E.length;O++){var j=E[O];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(D,j.key,j)}}return function(D,E,O){return E&&b(D.prototype,E),O&&b(D,O),D}}(),k={setInterval:function(b){function D(E,O){return b.apply(this,arguments)}return D.toString=function(){return b.toString()},D}(function(b,D){return setInterval(b,D)}),clearInterval:function(b){function D(E){return b.apply(this,arguments)}return D.toString=function(){return b.toString()},D}(function(b){return clearInterval(b)})},oe=!1,J=null;P.Global=function(){function b(){!function(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}(this,b)}return b._testing=function(){oe=!0},b.setXMLHttpRequest=function(E){J=E},m(b,null,[{key:"location",get:function(){if(!oe)return location}},{key:"localStorage",get:function(){if(!oe&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!oe&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!oe&&"undefined"!=typeof window)return J||XMLHttpRequest}},{key:"timer",get:function(){if(!oe)return k}}]),b}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.MetadataService=void 0;var m=function(){function D(E,O){for(var j=0;j<O.length;j++){var L=O[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,O,j){return O&&D(E.prototype,O),j&&D(E,j),E}}(),k=F(0),oe=F(7);function J(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}var b=".well-known/openid-configuration";P.MetadataService=function(){function D(E){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.JsonService;if(J(this,D),!E)throw k.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=E,this._jsonService=new O(["application/jwk-set+json"])}return D.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},D.prototype.getMetadata=function(){var O=this;return this._settings.metadata?(k.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(k.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(j){return k.Log.debug("MetadataService.getMetadata: json received"),O._settings.metadata=Object.assign({},O._settings.metadataSeed||{},j),O._settings.metadata})):(k.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},D.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},D.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},D.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},D.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},D.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},D.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},D.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},D.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},D.prototype._getMetadataProperty=function(O){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k.Log.debug("MetadataService.getMetadataProperty for: "+O),this.getMetadata().then(function(L){if(k.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===L[O]){if(!0===j)return void k.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+O);throw k.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+O),new Error("Metadata does not contain property "+O)}return L[O]})},D.prototype.getSigningKeys=function(){var O=this;return this._settings.signingKeys?(k.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(j){return k.Log.debug("MetadataService.getSigningKeys: jwks_uri received",j),O._jsonService.getJson(j).then(function(L){if(k.Log.debug("MetadataService.getSigningKeys: key set received",L),!L.keys)throw k.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return O._settings.signingKeys=L.keys,O._settings.signingKeys})})},m(D,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(b)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=b))),this._metadataUrl}}]),D}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.UrlUtility=void 0;var m=F(0),k=F(1);P.UrlUtility=function(){function oe(){!function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.addQueryParam=function(b,D,E){return b.indexOf("?")<0&&(b+="?"),"?"!==b[b.length-1]&&(b+="&"),b+=encodeURIComponent(D),(b+="=")+encodeURIComponent(E)},oe.parseUrlFragment=function(b){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof b&&(b=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.Global).location.href);var O=b.lastIndexOf(D);O>=0&&(b=b.substr(O+1)),"?"===D&&(O=b.indexOf("#"))>=0&&(b=b.substr(0,O));for(var j,L={},Z=/([^&=]+)=([^&]*)/g,Y=0;j=Z.exec(b);)if(L[decodeURIComponent(j[1])]=decodeURIComponent(j[2].replace(/\+/g," ")),Y++>50)return m.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",b),{error:"Response exceeded expected number of parameters"};for(var K in L)return L;return{}},oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.JoseUtil=void 0;var J,m=F(26),k=(J=F(33))&&J.__esModule?J:{default:J};P.JoseUtil=(0,k.default)({jws:m.jws,KeyUtil:m.KeyUtil,X509:m.X509,crypto:m.crypto,hextob64u:m.hextob64u,b64tohex:m.b64tohex,AllowedSigningAlgs:m.AllowedSigningAlgs})},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.OidcClientSettings=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},k=function(){function K(z,G){for(var we=0;we<G.length;we++){var he=G[we];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(z,he.key,he)}}return function(z,G,we){return G&&K(z.prototype,G),we&&K(z,we),z}}(),oe=F(0),J=F(23),b=F(6),D=F(24),E=F(2);function O(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}var j=".well-known/openid-configuration",L="id_token",Z="openid",Y="client_secret_post";P.OidcClientSettings=function(){function K(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},G=z.authority,we=z.metadataUrl,he=z.metadata,de=z.signingKeys,ie=z.metadataSeed,Pe=z.client_id,Oe=z.client_secret,Ve=z.response_type,ye=void 0===Ve?L:Ve,ze=z.scope,He=void 0===ze?Z:ze,Xe=z.redirect_uri,Et=z.post_logout_redirect_uri,at=z.client_authentication,tt=void 0===at?Y:at,ot=z.prompt,Re=z.display,ht=z.max_age,At=z.ui_locales,En=z.acr_values,Ut=z.resource,Tn=z.response_mode,Sn=z.filterProtocolClaims,Zn=void 0===Sn||Sn,zn=z.loadUserInfo,Xt=void 0===zn||zn,mn=z.staleStateAge,qt=void 0===mn?900:mn,pe=z.clockSkew,M=void 0===pe?300:pe,T=z.clockService,ge=void 0===T?new J.ClockService:T,_e=z.userInfoJwtIssuer,Se=void 0===_e?"OP":_e,xe=z.mergeClaims,We=void 0!==xe&&xe,Ge=z.stateStore,pt=void 0===Ge?new b.WebStorageStateStore:Ge,wt=z.ResponseValidatorCtor,Ft=void 0===wt?D.ResponseValidator:wt,tn=z.MetadataServiceCtor,yn=void 0===tn?E.MetadataService:tn,Dn=z.extraQueryParams,Ze=void 0===Dn?{}:Dn,Ht=z.extraTokenParams,vt=void 0===Ht?{}:Ht;O(this,K),this._authority=G,this._metadataUrl=we,this._metadata=he,this._metadataSeed=ie,this._signingKeys=de,this._client_id=Pe,this._client_secret=Oe,this._response_type=ye,this._scope=He,this._redirect_uri=Xe,this._post_logout_redirect_uri=Et,this._client_authentication=tt,this._prompt=ot,this._display=Re,this._max_age=ht,this._ui_locales=At,this._acr_values=En,this._resource=Ut,this._response_mode=Tn,this._filterProtocolClaims=!!Zn,this._loadUserInfo=!!Xt,this._staleStateAge=qt,this._clockSkew=M,this._clockService=ge,this._userInfoJwtIssuer=Se,this._mergeClaims=!!We,this._stateStore=pt,this._validator=new Ft(this),this._metadataService=new yn(this),this._extraQueryParams="object"===(void 0===Ze?"undefined":m(Ze))?Ze:{},this._extraTokenParams="object"===(void 0===vt?"undefined":m(vt))?vt:{}}return K.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},k(K,[{key:"client_id",get:function(){return this._client_id},set:function(G){if(this._client_id)throw oe.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=G}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(G){if(this._authority)throw oe.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=G}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(j)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=j)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(G){this._metadata=G}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(G){this._metadataSeed=G}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(G){this._signingKeys=G}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(G){this._extraQueryParams="object"===(void 0===G?"undefined":m(G))?G:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(G){this._extraTokenParams="object"===(void 0===G?"undefined":m(G))?G:{}}}]),K}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.WebStorageStateStore=void 0;var m=F(0),k=F(1);function oe(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}P.WebStorageStateStore=function(){function J(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},D=b.prefix,E=void 0===D?"oidc.":D,O=b.store,j=void 0===O?k.Global.localStorage:O;oe(this,J),this._store=j,this._prefix=E}return J.prototype.set=function(D,E){return m.Log.debug("WebStorageStateStore.set",D),this._store.setItem(D=this._prefix+D,E),Promise.resolve()},J.prototype.get=function(D){m.Log.debug("WebStorageStateStore.get",D);var E=this._store.getItem(D=this._prefix+D);return Promise.resolve(E)},J.prototype.remove=function(D){m.Log.debug("WebStorageStateStore.remove",D);var E=this._store.getItem(D=this._prefix+D);return this._store.removeItem(D),Promise.resolve(E)},J.prototype.getAllKeys=function(){m.Log.debug("WebStorageStateStore.getAllKeys");for(var D=[],E=0;E<this._store.length;E++){var O=this._store.key(E);0===O.indexOf(this._prefix)&&D.push(O.substr(this._prefix.length))}return Promise.resolve(D)},J}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.JsonService=void 0;var m=F(0),k=F(1);function oe(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}P.JsonService=function(){function J(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.Global.XMLHttpRequest,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;oe(this,J),this._contentTypes=b&&Array.isArray(b)?b.slice():[],this._contentTypes.push("application/json"),E&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=D,this._jwtHandler=E}return J.prototype.getJson=function(D,E){var O=this;if(!D)throw m.Log.error("JsonService.getJson: No url passed"),new Error("url");return m.Log.debug("JsonService.getJson, url: ",D),new Promise(function(j,L){var Z=new O._XMLHttpRequest;Z.open("GET",D);var Y=O._contentTypes,K=O._jwtHandler;Z.onload=function(){if(m.Log.debug("JsonService.getJson: HTTP response received, status",Z.status),200===Z.status){var z=Z.getResponseHeader("Content-Type");if(z){var G=Y.find(function(we){if(z.startsWith(we))return!0});if("application/jwt"==G)return void K(Z).then(j,L);if(G)try{return void j(JSON.parse(Z.responseText))}catch(we){return m.Log.error("JsonService.getJson: Error parsing JSON response",we.message),void L(we)}}L(Error("Invalid response Content-Type: "+z+", from URL: "+D))}else L(Error(Z.statusText+" ("+Z.status+")"))},Z.onerror=function(){m.Log.error("JsonService.getJson: network error"),L(Error("Network Error"))},E&&(m.Log.debug("JsonService.getJson: token passed, setting Authorization header"),Z.setRequestHeader("Authorization","Bearer "+E)),Z.send()})},J.prototype.postForm=function(D,E,O){var j=this;if(!D)throw m.Log.error("JsonService.postForm: No url passed"),new Error("url");return m.Log.debug("JsonService.postForm, url: ",D),new Promise(function(L,Z){var Y=new j._XMLHttpRequest;Y.open("POST",D);var K=j._contentTypes;Y.onload=function(){if(m.Log.debug("JsonService.postForm: HTTP response received, status",Y.status),200!==Y.status){if(400===Y.status&&(de=Y.getResponseHeader("Content-Type"))&&K.find(function(ie){if(de.startsWith(ie))return!0}))try{var he=JSON.parse(Y.responseText);if(he&&he.error)return m.Log.error("JsonService.postForm: Error from server: ",he.error),void Z(new Error(he.error))}catch(ie){return m.Log.error("JsonService.postForm: Error parsing JSON response",ie.message),void Z(ie)}Z(Error(Y.statusText+" ("+Y.status+")"))}else{var de;if((de=Y.getResponseHeader("Content-Type"))&&K.find(function(ie){if(de.startsWith(ie))return!0}))try{return void L(JSON.parse(Y.responseText))}catch(ie){return m.Log.error("JsonService.postForm: Error parsing JSON response",ie.message),void Z(ie)}Z(Error("Invalid response Content-Type: "+de+", from URL: "+D))}},Y.onerror=function(){m.Log.error("JsonService.postForm: network error"),Z(Error("Network Error"))};var z="";for(var G in E){var we=E[G];we&&(z.length>0&&(z+="&"),z+=encodeURIComponent(G),z+="=",z+=encodeURIComponent(we))}Y.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==O&&Y.setRequestHeader("Authorization","Basic "+btoa(O)),Y.send(z)})},J}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SigninRequest=void 0;var m=F(0),k=F(3),oe=F(13);P.SigninRequest=function(){function J(b){var D=b.url,E=b.client_id,O=b.redirect_uri,j=b.response_type,L=b.scope,Z=b.authority,Y=b.data,K=b.prompt,z=b.display,G=b.max_age,we=b.ui_locales,he=b.id_token_hint,de=b.login_hint,ie=b.acr_values,Pe=b.resource,Oe=b.response_mode,Ve=b.request,ye=b.request_uri,ze=b.extraQueryParams,He=b.request_type,Xe=b.client_secret,Et=b.extraTokenParams,at=b.skipUserInfo;if(function(Ut,Tn){if(!(Ut instanceof Tn))throw new TypeError("Cannot call a class as a function")}(this,J),!D)throw m.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!E)throw m.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!O)throw m.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!j)throw m.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!L)throw m.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!Z)throw m.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var tt=J.isOidc(j),ot=J.isCode(j);Oe||(Oe=J.isCode(j)?"query":null),this.state=new oe.SigninState({nonce:tt,data:Y,client_id:E,authority:Z,redirect_uri:O,code_verifier:ot,request_type:He,response_mode:Oe,client_secret:Xe,scope:L,extraTokenParams:Et,skipUserInfo:at}),D=k.UrlUtility.addQueryParam(D,"client_id",E),D=k.UrlUtility.addQueryParam(D,"redirect_uri",O),D=k.UrlUtility.addQueryParam(D,"response_type",j),D=k.UrlUtility.addQueryParam(D,"scope",L),D=k.UrlUtility.addQueryParam(D,"state",this.state.id),tt&&(D=k.UrlUtility.addQueryParam(D,"nonce",this.state.nonce)),ot&&(D=k.UrlUtility.addQueryParam(D,"code_challenge",this.state.code_challenge),D=k.UrlUtility.addQueryParam(D,"code_challenge_method","S256"));var Re={prompt:K,display:z,max_age:G,ui_locales:we,id_token_hint:he,login_hint:de,acr_values:ie,resource:Pe,request:Ve,request_uri:ye,response_mode:Oe};for(var ht in Re)Re[ht]&&(D=k.UrlUtility.addQueryParam(D,ht,Re[ht]));for(var At in ze)D=k.UrlUtility.addQueryParam(D,At,ze[At]);this.url=D}return J.isOidc=function(D){return!!D.split(/\s+/g).filter(function(E){return"id_token"===E})[0]},J.isOAuth=function(D){return!!D.split(/\s+/g).filter(function(E){return"token"===E})[0]},J.isCode=function(D){return!!D.split(/\s+/g).filter(function(E){return"code"===E})[0]},J}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.State=void 0;var D,m=function(){function b(D,E){for(var O=0;O<E.length;O++){var j=E[O];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(D,j.key,j)}}return function(D,E,O){return E&&b(D.prototype,E),O&&b(D,O),D}}(),k=F(0),oe=(D=F(14))&&D.__esModule?D:{default:D};function J(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}P.State=function(){function b(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=D.id,O=D.data,j=D.created,L=D.request_type;J(this,b),this._id=E||(0,oe.default)(),this._data=O,this._created="number"==typeof j&&j>0?j:parseInt(Date.now()/1e3),this._request_type=L}return b.prototype.toStorageString=function(){return k.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},b.fromStorageString=function(E){return k.Log.debug("State.fromStorageString"),new b(JSON.parse(E))},b.clearStaleState=function(E,O){var j=Date.now()/1e3-O;return E.getAllKeys().then(function(L){k.Log.debug("State.clearStaleState: got keys",L);for(var Z=[],Y=function(we){var he=L[we];z=E.get(he).then(function(de){var ie=!1;if(de)try{var Pe=b.fromStorageString(de);k.Log.debug("State.clearStaleState: got item from key: ",he,Pe.created),Pe.created<=j&&(ie=!0)}catch(Oe){k.Log.error("State.clearStaleState: Error parsing state for key",he,Oe.message),ie=!0}else k.Log.debug("State.clearStaleState: no item in storage for key: ",he),ie=!0;if(ie)return k.Log.debug("State.clearStaleState: removed item for key: ",he),E.remove(he)}),Z.push(z)},K=0;K<L.length;K++){var z;Y(K)}return k.Log.debug("State.clearStaleState: waiting on promise count:",Z.length),Promise.all(Z)})},m(b,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),b}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.OidcClient=void 0;var m=function(){function Y(K,z){for(var G=0;G<z.length;G++){var we=z[G];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(K,we.key,we)}}return function(K,z,G){return z&&Y(K.prototype,z),G&&Y(K,G),K}}(),k=F(0),oe=F(5),J=F(12),b=F(8),D=F(34),E=F(35),O=F(36),j=F(13),L=F(9);function Z(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}P.OidcClient=function(){function Y(){var K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Z(this,Y),this._settings=K instanceof oe.OidcClientSettings?K:new oe.OidcClientSettings(K)}return Y.prototype.createSigninRequest=function(){var z=this,G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},we=G.response_type,he=G.scope,de=G.redirect_uri,ie=G.data,Pe=G.state,Oe=G.prompt,Ve=G.display,ye=G.max_age,ze=G.ui_locales,He=G.id_token_hint,Xe=G.login_hint,Et=G.acr_values,at=G.resource,tt=G.request,ot=G.request_uri,Re=G.response_mode,ht=G.extraQueryParams,At=G.extraTokenParams,En=G.request_type,Ut=G.skipUserInfo,Tn=arguments[1];k.Log.debug("OidcClient.createSigninRequest");var Sn=this._settings.client_id;he=he||this._settings.scope,de=de||this._settings.redirect_uri,Oe=Oe||this._settings.prompt,Ve=Ve||this._settings.display,ye=ye||this._settings.max_age,ze=ze||this._settings.ui_locales,Et=Et||this._settings.acr_values,at=at||this._settings.resource,Re=Re||this._settings.response_mode,ht=ht||this._settings.extraQueryParams,At=At||this._settings.extraTokenParams;var Zn=this._settings.authority;return b.SigninRequest.isCode(we=we||this._settings.response_type)&&"code"!==we?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(zn){k.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",zn);var Xt=new b.SigninRequest({url:zn,client_id:Sn,redirect_uri:de,response_type:we,scope:he,data:ie||Pe,authority:Zn,prompt:Oe,display:Ve,max_age:ye,ui_locales:ze,id_token_hint:He,login_hint:Xe,acr_values:Et,resource:at,request:tt,request_uri:ot,extraQueryParams:ht,extraTokenParams:At,request_type:En,response_mode:Re,client_secret:z._settings.client_secret,skipUserInfo:Ut}),mn=Xt.state;return(Tn=Tn||z._stateStore).set(mn.id,mn.toStorageString()).then(function(){return Xt})})},Y.prototype.readSigninResponseState=function(z,G){var we=arguments.length>2&&void 0!==arguments[2]&&arguments[2];k.Log.debug("OidcClient.readSigninResponseState");var he="query"===this._settings.response_mode||!this._settings.response_mode&&b.SigninRequest.isCode(this._settings.response_type),ie=new D.SigninResponse(z,he?"?":"#");return ie.state?(G=G||this._stateStore,(we?G.remove.bind(G):G.get.bind(G))(ie.state).then(function(Oe){if(!Oe)throw k.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:j.SigninState.fromStorageString(Oe),response:ie}})):(k.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},Y.prototype.processSigninResponse=function(z,G){var we=this;return k.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(z,G,!0).then(function(he){var de=he.state,ie=he.response;return k.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),we._validator.validateSigninResponse(de,ie)})},Y.prototype.createSignoutRequest=function(){var z=this,G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},we=G.id_token_hint,he=G.data,de=G.state,ie=G.post_logout_redirect_uri,Pe=G.extraQueryParams,Oe=G.request_type,Ve=arguments[1];return k.Log.debug("OidcClient.createSignoutRequest"),ie=ie||this._settings.post_logout_redirect_uri,Pe=Pe||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ye){if(!ye)throw k.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");k.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ye);var ze=new E.SignoutRequest({url:ye,id_token_hint:we,post_logout_redirect_uri:ie,data:he||de,extraQueryParams:Pe,request_type:Oe}),He=ze.state;return He&&(k.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(Ve=Ve||z._stateStore).set(He.id,He.toStorageString())),ze})},Y.prototype.readSignoutResponseState=function(z,G){var we=arguments.length>2&&void 0!==arguments[2]&&arguments[2];k.Log.debug("OidcClient.readSignoutResponseState");var he=new O.SignoutResponse(z);if(!he.state)return k.Log.debug("OidcClient.readSignoutResponseState: No state in response"),he.error?(k.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",he.error),Promise.reject(new J.ErrorResponse(he))):Promise.resolve({state:void 0,response:he});var de=he.state;return G=G||this._stateStore,(we?G.remove.bind(G):G.get.bind(G))(de).then(function(Pe){if(!Pe)throw k.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:L.State.fromStorageString(Pe),response:he}})},Y.prototype.processSignoutResponse=function(z,G){var we=this;return k.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(z,G,!0).then(function(he){var de=he.state,ie=he.response;return de?(k.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),we._validator.validateSignoutResponse(de,ie)):(k.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),ie)})},Y.prototype.clearStaleState=function(z){return k.Log.debug("OidcClient.clearStaleState"),L.State.clearStaleState(z=z||this._stateStore,this.settings.staleStateAge)},m(Y,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),Y}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TokenClient=void 0;var m=F(7),k=F(2),oe=F(0);function J(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}P.TokenClient=function(){function b(D){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.JsonService,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.MetadataService;if(J(this,b),!D)throw oe.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=D,this._jsonService=new E,this._metadataService=new O(this._settings)}return b.prototype.exchangeCode=function(){var E=this,O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(O=Object.assign({},O)).grant_type=O.grant_type||"authorization_code",O.client_id=O.client_id||this._settings.client_id,O.client_secret=O.client_secret||this._settings.client_secret,O.redirect_uri=O.redirect_uri||this._settings.redirect_uri;var j=void 0,L=O._client_authentication||this._settings._client_authentication;return delete O._client_authentication,O.code?O.redirect_uri?O.code_verifier?O.client_id?O.client_secret||"client_secret_basic"!=L?("client_secret_basic"==L&&(j=O.client_id+":"+O.client_secret,delete O.client_id,delete O.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(Z){return oe.Log.debug("TokenClient.exchangeCode: Received token endpoint"),E._jsonService.postForm(Z,O,j).then(function(Y){return oe.Log.debug("TokenClient.exchangeCode: response received"),Y})})):(oe.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(oe.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(oe.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(oe.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(oe.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},b.prototype.exchangeRefreshToken=function(){var E=this,O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(O=Object.assign({},O)).grant_type=O.grant_type||"refresh_token",O.client_id=O.client_id||this._settings.client_id,O.client_secret=O.client_secret||this._settings.client_secret;var j=void 0,L=O._client_authentication||this._settings._client_authentication;return delete O._client_authentication,O.refresh_token?O.client_id?("client_secret_basic"==L&&(j=O.client_id+":"+O.client_secret,delete O.client_id,delete O.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(Z){return oe.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),E._jsonService.postForm(Z,O,j).then(function(Y){return oe.Log.debug("TokenClient.exchangeRefreshToken: response received"),Y})})):(oe.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(oe.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},b}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ErrorResponse=void 0;var m=F(0);function k(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}function oe(J,b){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?J:b}P.ErrorResponse=function(J){function b(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=D.error,O=D.error_description,j=D.error_uri,L=D.state,Z=D.session_state;if(k(this,b),!E)throw m.Log.error("No error passed to ErrorResponse"),new Error("error");var Y=oe(this,J.call(this,O||E));return Y.name="ErrorResponse",Y.error=E,Y.error_description=O,Y.error_uri=j,Y.state=L,Y.session_state=Z,Y}return function(E,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(E,O):E.__proto__=O)}(b,J),b}(Error)},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SigninState=void 0;var j,m=function(){function O(j,L){for(var Z=0;Z<L.length;Z++){var Y=L[Z];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(j,Y.key,Y)}}return function(j,L,Z){return L&&O(j.prototype,L),Z&&O(j,Z),j}}(),k=F(0),oe=F(9),J=F(4),b=(j=F(14))&&j.__esModule?j:{default:j};function D(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")}function E(O,j){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?O:j}P.SigninState=function(O){function j(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Z=L.nonce,Y=L.authority,K=L.client_id,z=L.redirect_uri,G=L.code_verifier,we=L.response_mode,he=L.client_secret,de=L.scope,ie=L.extraTokenParams,Pe=L.skipUserInfo;D(this,j);var Oe=E(this,O.call(this,arguments[0]));if(!0===Z?Oe._nonce=(0,b.default)():Z&&(Oe._nonce=Z),!0===G?Oe._code_verifier=(0,b.default)()+(0,b.default)()+(0,b.default)():G&&(Oe._code_verifier=G),Oe.code_verifier){var Ve=J.JoseUtil.hashString(Oe.code_verifier,"SHA256");Oe._code_challenge=J.JoseUtil.hexToBase64Url(Ve)}return Oe._redirect_uri=z,Oe._authority=Y,Oe._client_id=K,Oe._response_mode=we,Oe._client_secret=he,Oe._scope=de,Oe._extraTokenParams=ie,Oe._skipUserInfo=Pe,Oe}return function(Z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Y):Z.__proto__=Y)}(j,O),j.prototype.toStorageString=function(){return k.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},j.fromStorageString=function(Z){return k.Log.debug("SigninState.fromStorageString"),new j(JSON.parse(Z))},m(j,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),j}(oe.State)},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(){return("undefined"!=m&&null!==m&&void 0!==m.getRandomValues?k:oe)().replace(/-/g,"")};var m="undefined"!=typeof window?window.crypto||window.msCrypto:null;function k(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(J){return(J^m.getRandomValues(new Uint8Array(1))[0]&15>>J/4).toString(16)})}function oe(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(J){return(J^16*Math.random()>>J/4).toString(16)})}Ae.exports=P.default},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.User=void 0;var m=function(){function oe(J,b){for(var D=0;D<b.length;D++){var E=b[D];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(J,E.key,E)}}return function(J,b,D){return b&&oe(J.prototype,b),D&&oe(J,D),J}}(),k=F(0);P.User=function(){function oe(J){var b=J.id_token,D=J.session_state,E=J.access_token,O=J.refresh_token,j=J.token_type,L=J.scope,Z=J.profile,Y=J.expires_at,K=J.state;(function(G,we){if(!(G instanceof we))throw new TypeError("Cannot call a class as a function")})(this,oe),this.id_token=b,this.session_state=D,this.access_token=E,this.refresh_token=O,this.token_type=j,this.scope=L,this.profile=Z,this.expires_at=Y,this.state=K}return oe.prototype.toStorageString=function(){return k.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},oe.fromStorageString=function(b){return k.Log.debug("User.fromStorageString"),new oe(JSON.parse(b))},m(oe,[{key:"expires_in",get:function(){if(this.expires_at){var b=parseInt(Date.now()/1e3);return this.expires_at-b}},set:function(b){var D=parseInt(b);if("number"==typeof D&&D>0){var E=parseInt(Date.now()/1e3);this.expires_at=E+D}}},{key:"expired",get:function(){var b=this.expires_in;if(void 0!==b)return b<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.AccessTokenEvents=void 0;var m=F(0),k=F(46);function oe(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}P.AccessTokenEvents=function(){function J(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},D=b.accessTokenExpiringNotificationTime,E=void 0===D?60:D,O=b.accessTokenExpiringTimer,j=void 0===O?new k.Timer("Access token expiring"):O,L=b.accessTokenExpiredTimer,Z=void 0===L?new k.Timer("Access token expired"):L;oe(this,J),this._accessTokenExpiringNotificationTime=E,this._accessTokenExpiring=j,this._accessTokenExpired=Z}return J.prototype.load=function(D){if(D.access_token&&void 0!==D.expires_in){var E=D.expires_in;if(m.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",E),E>0){var O=E-this._accessTokenExpiringNotificationTime;O<=0&&(O=1),m.Log.debug("AccessTokenEvents.load: registering expiring timer in:",O),this._accessTokenExpiring.init(O)}else m.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var j=E+1;m.Log.debug("AccessTokenEvents.load: registering expired timer in:",j),this._accessTokenExpired.init(j)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},J.prototype.unload=function(){m.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},J.prototype.addAccessTokenExpiring=function(D){this._accessTokenExpiring.addHandler(D)},J.prototype.removeAccessTokenExpiring=function(D){this._accessTokenExpiring.removeHandler(D)},J.prototype.addAccessTokenExpired=function(D){this._accessTokenExpired.addHandler(D)},J.prototype.removeAccessTokenExpired=function(D){this._accessTokenExpired.removeHandler(D)},J}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Event=void 0;var m=F(0);P.Event=function(){function k(oe){(function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")})(this,k),this._name=oe,this._callbacks=[]}return k.prototype.addHandler=function(J){this._callbacks.push(J)},k.prototype.removeHandler=function(J){var b=this._callbacks.findIndex(function(D){return D===J});b>=0&&this._callbacks.splice(b,1)},k.prototype.raise=function(){m.Log.debug("Event: Raising event: "+this._name);for(var J=0;J<this._callbacks.length;J++){var b;(b=this._callbacks)[J].apply(b,arguments)}},k}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SessionMonitor=void 0;var m=function(){function D(E,O){for(var j=0;j<O.length;j++){var L=O[j];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,O,j){return O&&D(E.prototype,O),j&&D(E,j),E}}(),k=F(0),oe=F(19),J=F(1);function b(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}P.SessionMonitor=function(){function D(E){var O=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.CheckSessionIFrame,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J.Global.timer;if(b(this,D),!E)throw k.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=E,this._CheckSessionIFrameCtor=j,this._timer=L,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(Z){Z?O._start(Z):O._settings.monitorAnonymousSession&&O._userManager.querySessionStatus().then(function(Y){var K={session_state:Y.session_state};Y.sub&&Y.sid&&(K.profile={sub:Y.sub,sid:Y.sid}),O._start(K)}).catch(function(Y){k.Log.error("SessionMonitor ctor: error from querySessionStatus:",Y.message)})}).catch(function(Z){k.Log.error("SessionMonitor ctor: error from getUser:",Z.message)}))}return D.prototype._start=function(O){var j=this,L=O.session_state;L&&(O.profile?(this._sub=O.profile.sub,this._sid=O.profile.sid,k.Log.debug("SessionMonitor._start: session_state:",L,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,k.Log.debug("SessionMonitor._start: session_state:",L,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(L):this._metadataService.getCheckSessionIframe().then(function(Z){if(Z){k.Log.debug("SessionMonitor._start: Initializing check session iframe");var Y=j._client_id,K=j._checkSessionInterval,z=j._stopCheckSessionOnError;j._checkSessionIFrame=new j._CheckSessionIFrameCtor(j._callback.bind(j),Y,Z,K,z),j._checkSessionIFrame.load().then(function(){j._checkSessionIFrame.start(L)})}else k.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(Z){k.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",Z.message)}))},D.prototype._stop=function(){var O=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(k.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var j=this._timer.setInterval(function(){O._timer.clearInterval(j),O._userManager.querySessionStatus().then(function(L){var Z={session_state:L.session_state};L.sub&&L.sid&&(Z.profile={sub:L.sub,sid:L.sid}),O._start(Z)}).catch(function(L){k.Log.error("SessionMonitor: error from querySessionStatus:",L.message)})},1e3)},D.prototype._callback=function(){var O=this;this._userManager.querySessionStatus().then(function(j){var L=!0;j?j.sub===O._sub?(L=!1,O._checkSessionIFrame.start(j.session_state),j.sid===O._sid?k.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",j.session_state):(k.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",j.session_state),O._userManager.events._raiseUserSessionChanged())):k.Log.debug("SessionMonitor._callback: Different subject signed into OP:",j.sub):k.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),L&&(O._sub?(k.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),O._userManager.events._raiseUserSignedOut()):(k.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),O._userManager.events._raiseUserSignedIn()))}).catch(function(j){O._sub&&(k.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",j.message),O._userManager.events._raiseUserSignedOut())})},m(D,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),D}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CheckSessionIFrame=void 0;var m=F(0);function k(oe,J){if(!(oe instanceof J))throw new TypeError("Cannot call a class as a function")}P.CheckSessionIFrame=function(){function oe(J,b,D,E){var O=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];k(this,oe),this._callback=J,this._client_id=b,this._url=D,this._interval=E||2e3,this._stopOnError=O;var j=D.indexOf("/",D.indexOf("//")+2);this._frame_origin=D.substr(0,j),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=D}return oe.prototype.load=function(){var b=this;return new Promise(function(D){b._frame.onload=function(){D()},window.document.body.appendChild(b._frame),b._boundMessageEvent=b._message.bind(b),window.addEventListener("message",b._boundMessageEvent,!1)})},oe.prototype._message=function(b){b.origin===this._frame_origin&&b.source===this._frame.contentWindow&&("error"===b.data?(m.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===b.data?(m.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):m.Log.debug("CheckSessionIFrame: "+b.data+" message from check session op iframe"))},oe.prototype.start=function(b){var D=this;if(this._session_state!==b){m.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=b;var E=function(){D._frame.contentWindow.postMessage(D._client_id+" "+D._session_state,D._frame_origin)};E(),this._timer=window.setInterval(E,this._interval)}},oe.prototype.stop=function(){this._session_state=null,this._timer&&(m.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TokenRevocationClient=void 0;var m=F(0),k=F(2),oe=F(1);function J(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}var b="access_token",D="refresh_token";P.TokenRevocationClient=function(){function E(O){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.Global.XMLHttpRequest,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.MetadataService;if(J(this,E),!O)throw m.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=O,this._XMLHttpRequestCtor=j,this._metadataService=new L(this._settings)}return E.prototype.revoke=function(j,L){var Z=this,Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!j)throw m.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(Y!==b&&Y!=D)throw m.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(K){if(K)return m.Log.debug("TokenRevocationClient.revoke: Revoking "+Y),Z._revoke(K,Z._settings.client_id,Z._settings.client_secret,j,Y);if(L)throw m.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},E.prototype._revoke=function(j,L,Z,Y,K){var z=this;return new Promise(function(G,we){var he=new z._XMLHttpRequestCtor;he.open("POST",j),he.onload=function(){m.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",he.status),200===he.status?G():we(Error(he.statusText+" ("+he.status+")"))},he.onerror=function(){m.Log.debug("TokenRevocationClient.revoke: Network Error."),we("Network Error")};var de="client_id="+encodeURIComponent(L);Z&&(de+="&client_secret="+encodeURIComponent(Z)),de+="&token_type_hint="+encodeURIComponent(K),de+="&token="+encodeURIComponent(Y),he.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),he.send(de)})},E}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CordovaPopupWindow=void 0;var m=function(){function oe(J,b){for(var D=0;D<b.length;D++){var E=b[D];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(J,E.key,E)}}return function(J,b,D){return b&&oe(J.prototype,b),D&&oe(J,D),J}}(),k=F(0);P.CordovaPopupWindow=function(){function oe(J){var b=this;(function(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")})(this,oe),this._promise=new Promise(function(D,E){b._resolve=D,b._reject=E}),this.features=J.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=J.popupWindowTarget||"_blank",this.redirect_uri=J.startUrl,k.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return oe.prototype._isInAppBrowserInstalled=function(b){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(D){return b.hasOwnProperty(D)})},oe.prototype.navigate=function(b){if(b&&b.url){if(!window.cordova)return this._error("cordova is undefined");var D=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(D))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(b.url,this.target,this.features),this._popup?(k.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},oe.prototype._loadStartCallback=function(b){0===b.url.indexOf(this.redirect_uri)&&this._success({url:b.url})},oe.prototype._exitCallback=function(b){this._error(b)},oe.prototype._success=function(b){this._cleanup(),k.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(b)},oe.prototype._error=function(b){this._cleanup(),k.Log.error(b),this._reject(new Error(b))},oe.prototype.close=function(){this._cleanup()},oe.prototype._cleanup=function(){this._popup&&(k.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},m(oe,[{key:"promise",get:function(){return this._promise}}]),oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var m=F(0),k=F(10),oe=F(5),J=F(6),b=F(37),D=F(38),E=F(16),O=F(2),j=F(48),L=F(49),Z=F(19),Y=F(20),K=F(18),z=F(1),G=F(15),we=F(50);P.default={Version:we.Version,Log:m.Log,OidcClient:k.OidcClient,OidcClientSettings:oe.OidcClientSettings,WebStorageStateStore:J.WebStorageStateStore,InMemoryWebStorage:b.InMemoryWebStorage,UserManager:D.UserManager,AccessTokenEvents:E.AccessTokenEvents,MetadataService:O.MetadataService,CordovaPopupNavigator:j.CordovaPopupNavigator,CordovaIFrameNavigator:L.CordovaIFrameNavigator,CheckSessionIFrame:Z.CheckSessionIFrame,TokenRevocationClient:Y.TokenRevocationClient,SessionMonitor:K.SessionMonitor,Global:z.Global,User:G.User},Ae.exports=P.default},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ClockService=function(){function m(){!function(oe,J){if(!(oe instanceof J))throw new TypeError("Cannot call a class as a function")}(this,m)}return m.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},m}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ResponseValidator=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},k=F(0),oe=F(2),J=F(25),b=F(11),D=F(12),E=F(4);function O(L,Z){if(!(L instanceof Z))throw new TypeError("Cannot call a class as a function")}var j=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];P.ResponseValidator=function(){function L(Z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.MetadataService,K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J.UserInfoService,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.JoseUtil,G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b.TokenClient;if(O(this,L),!Z)throw k.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=Z,this._metadataService=new Y(this._settings),this._userInfoService=new K(this._settings),this._joseUtil=z,this._tokenClient=new G(this._settings)}return L.prototype.validateSigninResponse=function(Y,K){var z=this;return k.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(Y,K).then(function(G){return k.Log.debug("ResponseValidator.validateSigninResponse: state processed"),z._validateTokens(Y,G).then(function(we){return k.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),z._processClaims(Y,we).then(function(he){return k.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),he})})})},L.prototype.validateSignoutResponse=function(Y,K){return Y.id!==K.state?(k.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(k.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),K.state=Y.data,K.error?(k.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",K.error),Promise.reject(new D.ErrorResponse(K))):Promise.resolve(K))},L.prototype._processSigninParams=function(Y,K){if(Y.id!==K.state)return k.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!Y.client_id)return k.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!Y.authority)return k.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==Y.authority)return k.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=Y.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==Y.client_id)return k.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=Y.client_id;return k.Log.debug("ResponseValidator._processSigninParams: state validated"),K.state=Y.data,K.error?(k.Log.warn("ResponseValidator._processSigninParams: Response was error",K.error),Promise.reject(new D.ErrorResponse(K))):Y.nonce&&!K.id_token?(k.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!Y.nonce&&K.id_token?(k.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):Y.code_verifier&&!K.code?(k.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!Y.code_verifier&&K.code?(k.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(K.scope||(K.scope=Y.scope),Promise.resolve(K))},L.prototype._processClaims=function(Y,K){var z=this;if(K.isOpenIdConnect){if(k.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),K.profile=this._filterProtocolClaims(K.profile),!0!==Y.skipUserInfo&&this._settings.loadUserInfo&&K.access_token)return k.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(K.access_token).then(function(G){return k.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),G.sub!==K.profile.sub?(k.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(K.profile=z._mergeClaims(K.profile,G),k.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",K.profile),K)});k.Log.debug("ResponseValidator._processClaims: not loading user info")}else k.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(K)},L.prototype._mergeClaims=function(Y,K){var z=Object.assign({},Y);for(var G in K){var we=K[G];Array.isArray(we)||(we=[we]);for(var he=0;he<we.length;he++){var de=we[he];z[G]?Array.isArray(z[G])?z[G].indexOf(de)<0&&z[G].push(de):z[G]!==de&&(z[G]="object"===(void 0===de?"undefined":m(de))&&this._settings.mergeClaims?this._mergeClaims(z[G],de):[z[G],de]):z[G]=de}}return z},L.prototype._filterProtocolClaims=function(Y){k.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",Y);var K=Object.assign({},Y);return this._settings._filterProtocolClaims?(j.forEach(function(z){delete K[z]}),k.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",K)):k.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),K},L.prototype._validateTokens=function(Y,K){return K.code?(k.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(Y,K)):K.id_token?K.access_token?(k.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(Y,K)):(k.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(Y,K)):(k.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(K))},L.prototype._processCode=function(Y,K){var z=this,G={client_id:Y.client_id,client_secret:Y.client_secret,code:K.code,redirect_uri:Y.redirect_uri,code_verifier:Y.code_verifier};return Y.extraTokenParams&&"object"===m(Y.extraTokenParams)&&Object.assign(G,Y.extraTokenParams),this._tokenClient.exchangeCode(G).then(function(we){for(var he in we)K[he]=we[he];return K.id_token?(k.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),z._validateIdTokenAttributes(Y,K)):(k.Log.debug("ResponseValidator._processCode: token response successful, returning response"),K)})},L.prototype._validateIdTokenAttributes=function(Y,K){var z=this;return this._metadataService.getIssuer().then(function(G){var we=Y.client_id,he=z._settings.clockSkew;return k.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",he),z._settings.getEpochTime().then(function(de){return z._joseUtil.validateJwtAttributes(K.id_token,G,we,he,de).then(function(ie){return Y.nonce&&Y.nonce!==ie.nonce?(k.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):ie.sub?(K.profile=ie,K):(k.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},L.prototype._validateIdTokenAndAccessToken=function(Y,K){var z=this;return this._validateIdToken(Y,K).then(function(G){return z._validateAccessToken(G)})},L.prototype._getSigningKeyForJwt=function(Y){var K=this;return this._metadataService.getSigningKeys().then(function(z){var G=Y.header.kid;if(!z)return k.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));k.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var we=void 0;if(G)we=z.filter(function(he){return he.kid===G})[0];else{if((z=K._filterByAlg(z,Y.header.alg)).length>1)return k.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));we=z[0]}return Promise.resolve(we)})},L.prototype._getSigningKeyForJwtWithSingleRetry=function(Y){var K=this;return this._getSigningKeyForJwt(Y).then(function(z){return z?Promise.resolve(z):(K._metadataService.resetSigningKeys(),K._getSigningKeyForJwt(Y))})},L.prototype._validateIdToken=function(Y,K){var z=this;if(!Y.nonce)return k.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var G=this._joseUtil.parseJwt(K.id_token);return G&&G.header&&G.payload?Y.nonce!==G.payload.nonce?(k.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(we){return k.Log.debug("ResponseValidator._validateIdToken: Received issuer"),z._getSigningKeyForJwtWithSingleRetry(G).then(function(he){if(!he)return k.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var de=Y.client_id,ie=z._settings.clockSkew;return k.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",ie),z._joseUtil.validateJwt(K.id_token,he,we,de,ie).then(function(){return k.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),G.payload.sub?(K.profile=G.payload,K):(k.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(k.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",G),Promise.reject(new Error("Failed to parse id_token")))},L.prototype._filterByAlg=function(Y,K){var z=null;if(K.startsWith("RS"))z="RSA";else if(K.startsWith("PS"))z="PS";else{if(!K.startsWith("ES"))return k.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",K),[];z="EC"}return k.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",z),Y=Y.filter(function(G){return G.kty===z}),k.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",z,Y.length),Y},L.prototype._validateAccessToken=function(Y){if(!Y.profile)return k.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!Y.profile.at_hash)return k.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!Y.id_token)return k.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var K=this._joseUtil.parseJwt(Y.id_token);if(!K||!K.header)return k.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",K),Promise.reject(new Error("Failed to parse id_token"));var z=K.header.alg;if(!z||5!==z.length)return k.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",z),Promise.reject(new Error("Unsupported alg: "+z));var G=z.substr(2,3);if(!G)return k.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",z,G),Promise.reject(new Error("Unsupported alg: "+z));if(256!==(G=parseInt(G))&&384!==G&&512!==G)return k.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",z,G),Promise.reject(new Error("Unsupported alg: "+z));var we="sha"+G,he=this._joseUtil.hashString(Y.access_token,we);if(!he)return k.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",we),Promise.reject(new Error("Failed to validate at_hash"));var de=he.substr(0,he.length/2),ie=this._joseUtil.hexToBase64Url(de);return ie!==Y.profile.at_hash?(k.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",ie,Y.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(k.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(Y))},L}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.UserInfoService=void 0;var m=F(7),k=F(2),oe=F(0),J=F(4);function b(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}P.UserInfoService=function(){function D(E){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.JsonService,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.MetadataService,L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J.JoseUtil;if(b(this,D),!E)throw oe.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=E,this._jsonService=new O(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new j(this._settings),this._joseUtil=L}return D.prototype.getClaims=function(O){var j=this;return O?this._metadataService.getUserInfoEndpoint().then(function(L){return oe.Log.debug("UserInfoService.getClaims: received userinfo url",L),j._jsonService.getJson(L,O).then(function(Z){return oe.Log.debug("UserInfoService.getClaims: claims received",Z),Z})}):(oe.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},D.prototype._getClaimsFromJwt=function(O){var j=this;try{var L=this._joseUtil.parseJwt(O.responseText);if(!L||!L.header||!L.payload)return oe.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",L),Promise.reject(new Error("Failed to parse id_token"));var Z=L.header.kid,Y=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":Y=this._metadataService.getIssuer();break;case"ANY":Y=Promise.resolve(L.payload.iss);break;default:Y=Promise.resolve(this._settings.userInfoJwtIssuer)}return Y.then(function(K){return oe.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+K),j._metadataService.getSigningKeys().then(function(z){if(!z)return oe.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));oe.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var G=void 0;if(Z)G=z.filter(function(de){return de.kid===Z})[0];else{if((z=j._filterByAlg(z,L.header.alg)).length>1)return oe.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));G=z[0]}if(!G)return oe.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var we=j._settings.client_id,he=j._settings.clockSkew;return oe.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",he),j._joseUtil.validateJwt(O.responseText,G,K,we,he,void 0,!0).then(function(){return oe.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),L.payload})})})}catch(K){return oe.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",K.message),void reject(K)}},D.prototype._filterByAlg=function(O,j){var L=null;if(j.startsWith("RS"))L="RSA";else if(j.startsWith("PS"))L="PS";else{if(!j.startsWith("ES"))return oe.Log.debug("UserInfoService._filterByAlg: alg not supported: ",j),[];L="EC"}return oe.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",L),O=O.filter(function(Z){return Z.kty===L}),oe.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",L,O.length),O},D}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.AllowedSigningAlgs=P.b64tohex=P.hextob64u=P.crypto=P.X509=P.KeyUtil=P.jws=void 0;var m=F(27);P.jws=m.jws,P.KeyUtil=m.KEYUTIL,P.X509=m.X509,P.crypto=m.crypto,P.hextob64u=m.hextob64u,P.b64tohex=m.b64tohex,P.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(Ae,P,F){"use strict";(function(m){Object.defineProperty(P,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},oe={userAgent:!1},J={};if(void 0===b)var b={};b.lang={extend:function(s,c,h){if(!c||!s)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var y=function(){};if(y.prototype=c.prototype,s.prototype=new y,s.prototype.constructor=s,s.superclass=c.prototype,c.prototype.constructor==Object.prototype.constructor&&(c.prototype.constructor=c),h){var R;for(R in h)s.prototype[R]=h[R];var B=function(){},re=["toString","valueOf"];try{/MSIE/.test(oe.userAgent)&&(B=function(ne,ae){for(R=0;R<re.length;R+=1){var ue=re[R],le=ae[ue];"function"==typeof le&&le!=Object.prototype[ue]&&(ne[ue]=le)}})}catch(q){}B(s.prototype,h)}}};var D,E,O,j,L,Z,Y,K,z,G,we,s,c,h,y,he=he||(D=Math,O=(E={}).lib={},j=O.Base=function(){function a(){}return{extend:function(c){a.prototype=this;var h=new a;return c&&h.mixIn(c),h.hasOwnProperty("init")||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var h in c)c.hasOwnProperty(h)&&(this[h]=c[h]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),L=O.WordArray=j.extend({init:function(s,c){s=this.words=s||[],this.sigBytes=null!=c?c:4*s.length},toString:function(s){return(s||Y).stringify(this)},concat:function(s){var c=this.words,h=s.words,y=this.sigBytes,R=s.sigBytes;if(this.clamp(),y%4)for(var B=0;B<R;B++)c[y+B>>>2]|=(h[B>>>2]>>>24-B%4*8&255)<<24-(y+B)%4*8;else for(B=0;B<R;B+=4)c[y+B>>>2]=h[B>>>2];return this.sigBytes+=R,this},clamp:function(){var s=this.words,c=this.sigBytes;s[c>>>2]&=4294967295<<32-c%4*8,s.length=D.ceil(c/4)},clone:function(){var s=j.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var c=[],h=0;h<s;h+=4)c.push(4294967296*D.random()|0);return new L.init(c,s)}}),Z=E.enc={},Y=Z.Hex={stringify:function(s){for(var c=s.words,h=s.sigBytes,y=[],R=0;R<h;R++){var B=c[R>>>2]>>>24-R%4*8&255;y.push((B>>>4).toString(16)),y.push((15&B).toString(16))}return y.join("")},parse:function(s){for(var c=s.length,h=[],y=0;y<c;y+=2)h[y>>>3]|=parseInt(s.substr(y,2),16)<<24-y%8*4;return new L.init(h,c/2)}},K=Z.Latin1={stringify:function(s){for(var c=s.words,h=s.sigBytes,y=[],R=0;R<h;R++)y.push(String.fromCharCode(c[R>>>2]>>>24-R%4*8&255));return y.join("")},parse:function(s){for(var c=s.length,h=[],y=0;y<c;y++)h[y>>>2]|=(255&s.charCodeAt(y))<<24-y%4*8;return new L.init(h,c)}},z=Z.Utf8={stringify:function(s){try{return decodeURIComponent(escape(K.stringify(s)))}catch(c){throw new Error("Malformed UTF-8 data")}},parse:function(s){return K.parse(unescape(encodeURIComponent(s)))}},G=O.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new L.init,this._nDataBytes=0},_append:function(s){"string"==typeof s&&(s=z.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var c=this._data,h=c.words,y=c.sigBytes,R=this.blockSize,B=y/(4*R),re=(B=s?D.ceil(B):D.max((0|B)-this._minBufferSize,0))*R,q=D.min(4*re,y);if(re){for(var ne=0;ne<re;ne+=R)this._doProcessBlock(h,ne);var ae=h.splice(0,re);c.sigBytes-=q}return new L.init(ae,q)},clone:function(){var s=j.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0}),O.Hasher=G.extend({cfg:j.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){G.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){return s&&this._append(s),this._doFinalize()},blockSize:16,_createHelper:function(s){return function(c,h){return new s.init(h).finalize(c)}},_createHmacHelper:function(s){return function(c,h){return new we.HMAC.init(s,h).finalize(c)}}}),we=E.algo={},E);c=(s=he).lib,h=c.Base,y=c.WordArray,(s=s.x64={}).Word=h.extend({init:function(B,re){this.high=B,this.low=re}}),s.WordArray=h.extend({init:function(B,re){B=this.words=B||[],this.sigBytes=null!=re?re:8*B.length},toX32:function(){for(var B=this.words,re=B.length,q=[],ne=0;ne<re;ne++){var ae=B[ne];q.push(ae.high),q.push(ae.low)}return y.create(q,this.sigBytes)},clone:function(){for(var B=h.clone.call(this),re=B.words=this.words.slice(0),q=re.length,ne=0;ne<q;ne++)re[ne]=re[ne].clone();return B}}),function(){var s=he.lib.WordArray;he.enc.Base64={stringify:function(h){var y=h.words,R=h.sigBytes,B=this._map;h.clamp(),h=[];for(var re=0;re<R;re+=3)for(var q=(y[re>>>2]>>>24-re%4*8&255)<<16|(y[re+1>>>2]>>>24-(re+1)%4*8&255)<<8|y[re+2>>>2]>>>24-(re+2)%4*8&255,ne=0;4>ne&&re+.75*ne<R;ne++)h.push(B.charAt(q>>>6*(3-ne)&63));if(y=B.charAt(64))for(;h.length%4;)h.push(y);return h.join("")},parse:function(h){var y=h.length,R=this._map;(B=R.charAt(64))&&-1!=(B=h.indexOf(B))&&(y=B);for(var B=[],re=0,q=0;q<y;q++)if(q%4){var ne=R.indexOf(h.charAt(q-1))<<q%4*2,ae=R.indexOf(h.charAt(q))>>>6-q%4*2;B[re>>>2]|=(ne|ae)<<24-re%4*8,re++}return s.create(B,re)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){for(var s=he,c=(y=s.lib).WordArray,h=y.Hasher,y=s.algo,R=[],B=[],re=function(N){return 4294967296*(N-(0|N))|0},q=2,ne=0;64>ne;){var ae;e:{for(var ue=a.sqrt(ae=q),le=2;le<=ue;le++)if(!(ae%le)){ae=!1;break e}ae=!0}ae&&(8>ne&&(R[ne]=re(a.pow(q,.5))),B[ne]=re(a.pow(q,1/3)),ne++),q++}var x=[];y=y.SHA256=h.extend({_doReset:function(){this._hash=new c.init(R.slice(0))},_doProcessBlock:function(N,X){for(var I=this._hash.words,ee=I[0],se=I[1],ce=I[2],Ee=I[3],Fe=I[4],$e=I[5],Ne=I[6],_t=I[7],qe=0;64>qe;qe++){if(16>qe)x[qe]=0|N[X+qe];else{var Qe=x[qe-15],Ct=x[qe-2];x[qe]=((Qe<<25|Qe>>>7)^(Qe<<14|Qe>>>18)^Qe>>>3)+x[qe-7]+((Ct<<15|Ct>>>17)^(Ct<<13|Ct>>>19)^Ct>>>10)+x[qe-16]}Qe=_t+((Fe<<26|Fe>>>6)^(Fe<<21|Fe>>>11)^(Fe<<7|Fe>>>25))+(Fe&$e^~Fe&Ne)+B[qe]+x[qe],Ct=((ee<<30|ee>>>2)^(ee<<19|ee>>>13)^(ee<<10|ee>>>22))+(ee&se^ee&ce^se&ce),_t=Ne,Ne=$e,$e=Fe,Fe=Ee+Qe|0,Ee=ce,ce=se,se=ee,ee=Qe+Ct|0}I[0]=I[0]+ee|0,I[1]=I[1]+se|0,I[2]=I[2]+ce|0,I[3]=I[3]+Ee|0,I[4]=I[4]+Fe|0,I[5]=I[5]+$e|0,I[6]=I[6]+Ne|0,I[7]=I[7]+_t|0},_doFinalize:function(){var N=this._data,X=N.words,I=8*this._nDataBytes,ee=8*N.sigBytes;return X[ee>>>5]|=128<<24-ee%32,X[14+(ee+64>>>9<<4)]=a.floor(I/4294967296),X[15+(ee+64>>>9<<4)]=I,N.sigBytes=4*X.length,this._process(),this._hash},clone:function(){var N=h.clone.call(this);return N._hash=this._hash.clone(),N}}),s.SHA256=h._createHelper(y),s.HmacSHA256=h._createHmacHelper(y)}(Math),function(){function a(){return h.create.apply(h,arguments)}for(var s=he,c=s.lib.Hasher,h=(R=s.x64).Word,y=R.WordArray,R=s.algo,B=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],re=[],q=0;80>q;q++)re[q]=a();R=R.SHA512=c.extend({_doReset:function(){this._hash=new y.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(ae,ue){for(var le=(se=this._hash.words)[0],x=se[1],U=se[2],N=se[3],X=se[4],I=se[5],ee=se[6],se=se[7],ce=le.high,Ee=le.low,Fe=x.high,$e=x.low,Ne=U.high,_t=U.low,qe=N.high,Qe=N.low,Ct=X.high,Wt=X.low,zt=I.high,jn=I.low,xn=ee.high,Un=ee.low,rn=se.high,un=se.low,_n=ce,en=Ee,gr=Fe,Hr=$e,ti=Ne,ni=_t,or=qe,Rr=Qe,sr=Ct,Bn=Wt,vi=zt,mr=jn,Pr=xn,$r=Un,_i=rn,Li=un,hn=0;80>hn;hn++){var Dr=re[hn];if(16>hn)var ar=Dr.high=0|ae[ue+2*hn],Gt=Dr.low=0|ae[ue+2*hn+1];else{ar=((Gt=(ar=re[hn-15]).high)>>>1|(yr=ar.low)<<31)^(Gt>>>8|yr<<24)^Gt>>>7;var yr=(yr>>>1|Gt<<31)^(yr>>>8|Gt<<24)^(yr>>>7|Gt<<25),vr=((Gt=(vr=re[hn-2]).high)>>>19|(Kt=vr.low)<<13)^(Gt<<3|Kt>>>29)^Gt>>>6,Kt=(Kt>>>19|Gt<<13)^(Kt<<3|Gt>>>29)^(Kt>>>6|Gt<<26),Kr=(Gt=re[hn-7]).high,Mr=(ur=re[hn-16]).high,ur=ur.low;ar=(ar=(ar=ar+Kr+((Gt=yr+Gt.low)>>>0<yr>>>0?1:0))+vr+((Gt+=Kt)>>>0<Kt>>>0?1:0))+Mr+((Gt+=ur)>>>0<ur>>>0?1:0),Dr.high=ar,Dr.low=Gt}Kr=sr&vi^~sr&Pr,ur=Bn&mr^~Bn&$r,Dr=_n&gr^_n&ti^gr&ti;var w=en&Hr^en&ni^Hr&ni,V=(yr=(_n>>>28|en<<4)^(_n<<30|en>>>2)^(_n<<25|en>>>7),vr=(en>>>28|_n<<4)^(en<<30|_n>>>2)^(en<<25|_n>>>7),(Kt=B[hn]).high),C=Kt.low;Mr=_i+((sr>>>14|Bn<<18)^(sr>>>18|Bn<<14)^(sr<<23|Bn>>>9))+((Kt=Li+((Bn>>>14|sr<<18)^(Bn>>>18|sr<<14)^(Bn<<23|sr>>>9)))>>>0<Li>>>0?1:0),_i=Pr,Li=$r,Pr=vi,$r=mr,vi=sr,mr=Bn,sr=or+(Mr=(Mr=(Mr=Mr+Kr+((Kt+=ur)>>>0<ur>>>0?1:0))+V+((Kt+=C)>>>0<C>>>0?1:0))+ar+((Kt+=Gt)>>>0<Gt>>>0?1:0))+((Bn=Rr+Kt|0)>>>0<Rr>>>0?1:0)|0,or=ti,Rr=ni,ti=gr,ni=Hr,gr=_n,Hr=en,_n=Mr+(Dr=yr+Dr+((Gt=vr+w)>>>0<vr>>>0?1:0))+((en=Kt+Gt|0)>>>0<Kt>>>0?1:0)|0}Ee=le.low=Ee+en,le.high=ce+_n+(Ee>>>0<en>>>0?1:0),$e=x.low=$e+Hr,x.high=Fe+gr+($e>>>0<Hr>>>0?1:0),_t=U.low=_t+ni,U.high=Ne+ti+(_t>>>0<ni>>>0?1:0),Qe=N.low=Qe+Rr,N.high=qe+or+(Qe>>>0<Rr>>>0?1:0),Wt=X.low=Wt+Bn,X.high=Ct+sr+(Wt>>>0<Bn>>>0?1:0),jn=I.low=jn+mr,I.high=zt+vi+(jn>>>0<mr>>>0?1:0),Un=ee.low=Un+$r,ee.high=xn+Pr+(Un>>>0<$r>>>0?1:0),un=se.low=un+Li,se.high=rn+_i+(un>>>0<Li>>>0?1:0)},_doFinalize:function(){var ae=this._data,ue=ae.words,le=8*this._nDataBytes,x=8*ae.sigBytes;return ue[x>>>5]|=128<<24-x%32,ue[30+(x+128>>>10<<5)]=Math.floor(le/4294967296),ue[31+(x+128>>>10<<5)]=le,ae.sigBytes=4*ue.length,this._process(),this._hash.toX32()},clone:function(){var ae=c.clone.call(this);return ae._hash=this._hash.clone(),ae},blockSize:32}),s.SHA512=c._createHelper(R),s.HmacSHA512=c._createHmacHelper(R)}(),function(){var a=he,s=(y=a.x64).Word,c=y.WordArray,h=(y=a.algo).SHA512,y=y.SHA384=h.extend({_doReset:function(){this._hash=new c.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var B=h._doFinalize.call(this);return B.sigBytes-=16,B}});a.SHA384=h._createHelper(y),a.HmacSHA384=h._createHmacHelper(y)}();var de,ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Pe(a){var s,c,h="";for(s=0;s+3<=a.length;s+=3)c=parseInt(a.substring(s,s+3),16),h+=ie.charAt(c>>6)+ie.charAt(63&c);for(s+1==a.length?(c=parseInt(a.substring(s,s+1),16),h+=ie.charAt(c<<2)):s+2==a.length&&(c=parseInt(a.substring(s,s+2),16),h+=ie.charAt(c>>2)+ie.charAt((3&c)<<4));(3&h.length)>0;)h+="=";return h}function Oe(a){var s,c,h,y="",R=0;for(s=0;s<a.length&&"="!=a.charAt(s);++s)(h=ie.indexOf(a.charAt(s)))<0||(0==R?(y+=at(h>>2),c=3&h,R=1):1==R?(y+=at(c<<2|h>>4),c=15&h,R=2):2==R?(y+=at(c),y+=at(h>>2),c=3&h,R=3):(y+=at(c<<2|h>>4),y+=at(15&h),R=0));return 1==R&&(y+=at(c<<2)),y}function Ve(a){var s,c=Oe(a),h=new Array;for(s=0;2*s<c.length;++s)h[s]=parseInt(c.substring(2*s,2*s+2),16);return h}function ye(a,s,c){null!=a&&("number"==typeof a?this.fromNumber(a,s,c):this.fromString(a,null==s&&"string"!=typeof a?256:s))}function ze(){return new ye(null)}"Microsoft Internet Explorer"==oe.appName?(ye.prototype.am=function(s,c,h,y,R,B){for(var re=32767&c,q=c>>15;--B>=0;){var ne=32767&this[s],ae=this[s++]>>15,ue=q*ne+ae*re;R=((ne=re*ne+((32767&ue)<<15)+h[y]+(1073741823&R))>>>30)+(ue>>>15)+q*ae+(R>>>30),h[y++]=1073741823&ne}return R},de=30):"Netscape"!=oe.appName?(ye.prototype.am=function(s,c,h,y,R,B){for(;--B>=0;){var re=c*this[s++]+h[y]+R;R=Math.floor(re/67108864),h[y++]=67108863&re}return R},de=26):(ye.prototype.am=function(s,c,h,y,R,B){for(var re=16383&c,q=c>>14;--B>=0;){var ne=16383&this[s],ae=this[s++]>>14,ue=q*ne+ae*re;R=((ne=re*ne+((16383&ue)<<14)+h[y]+R)>>28)+(ue>>14)+q*ae,h[y++]=268435455&ne}return R},de=28),ye.prototype.DB=de,ye.prototype.DM=(1<<de)-1,ye.prototype.DV=1<<de,ye.prototype.FV=Math.pow(2,52),ye.prototype.F1=52-de,ye.prototype.F2=2*de-52;var He,Xe,Et=new Array;for(He="0".charCodeAt(0),Xe=0;Xe<=9;++Xe)Et[He++]=Xe;for(He="a".charCodeAt(0),Xe=10;Xe<36;++Xe)Et[He++]=Xe;for(He="A".charCodeAt(0),Xe=10;Xe<36;++Xe)Et[He++]=Xe;function at(a){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(a)}function tt(a,s){var c=Et[a.charCodeAt(s)];return null==c?-1:c}function ot(a){var s=ze();return s.fromInt(a),s}function Re(a){var s,c=1;return 0!=(s=a>>>16)&&(a=s,c+=16),0!=(s=a>>8)&&(a=s,c+=8),0!=(s=a>>4)&&(a=s,c+=4),0!=(s=a>>2)&&(a=s,c+=2),0!=(s=a>>1)&&(a=s,c+=1),c}function ht(a){this.m=a}function At(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function En(a,s){return a&s}function Ut(a,s){return a|s}function Tn(a,s){return a^s}function Sn(a,s){return a&~s}function Zn(a){if(0==a)return-1;var s=0;return 0==(65535&a)&&(a>>=16,s+=16),0==(255&a)&&(a>>=8,s+=8),0==(15&a)&&(a>>=4,s+=4),0==(3&a)&&(a>>=2,s+=2),0==(1&a)&&++s,s}function zn(a){for(var s=0;0!=a;)a&=a-1,++s;return s}function Xt(){}function mn(a){return a}function qt(a){this.r2=ze(),this.q3=ze(),ye.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}ht.prototype.convert=function(s){return s.s<0||s.compareTo(this.m)>=0?s.mod(this.m):s},ht.prototype.revert=function(s){return s},ht.prototype.reduce=function(s){s.divRemTo(this.m,null,s)},ht.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h),this.reduce(h)},ht.prototype.sqrTo=function(s,c){s.squareTo(c),this.reduce(c)},At.prototype.convert=function(s){var c=ze();return s.abs().dlShiftTo(this.m.t,c),c.divRemTo(this.m,null,c),s.s<0&&c.compareTo(ye.ZERO)>0&&this.m.subTo(c,c),c},At.prototype.revert=function(s){var c=ze();return s.copyTo(c),this.reduce(c),c},At.prototype.reduce=function(s){for(;s.t<=this.mt2;)s[s.t++]=0;for(var c=0;c<this.m.t;++c){var h=32767&s[c],y=h*this.mpl+((h*this.mph+(s[c]>>15)*this.mpl&this.um)<<15)&s.DM;for(s[h=c+this.m.t]+=this.m.am(0,y,s,c,0,this.m.t);s[h]>=s.DV;)s[h]-=s.DV,s[++h]++}s.clamp(),s.drShiftTo(this.m.t,s),s.compareTo(this.m)>=0&&s.subTo(this.m,s)},At.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h),this.reduce(h)},At.prototype.sqrTo=function(s,c){s.squareTo(c),this.reduce(c)},ye.prototype.copyTo=function(s){for(var c=this.t-1;c>=0;--c)s[c]=this[c];s.t=this.t,s.s=this.s},ye.prototype.fromInt=function(s){this.t=1,this.s=s<0?-1:0,s>0?this[0]=s:s<-1?this[0]=s+this.DV:this.t=0},ye.prototype.fromString=function(s,c){var h;if(16==c)h=4;else if(8==c)h=3;else if(256==c)h=8;else if(2==c)h=1;else if(32==c)h=5;else{if(4!=c)return void this.fromRadix(s,c);h=2}this.t=0,this.s=0;for(var y=s.length,R=!1,B=0;--y>=0;){var re=8==h?255&s[y]:tt(s,y);re<0?"-"==s.charAt(y)&&(R=!0):(R=!1,0==B?this[this.t++]=re:B+h>this.DB?(this[this.t-1]|=(re&(1<<this.DB-B)-1)<<B,this[this.t++]=re>>this.DB-B):this[this.t-1]|=re<<B,(B+=h)>=this.DB&&(B-=this.DB))}8==h&&0!=(128&s[0])&&(this.s=-1,B>0&&(this[this.t-1]|=(1<<this.DB-B)-1<<B)),this.clamp(),R&&ye.ZERO.subTo(this,this)},ye.prototype.clamp=function(){for(var s=this.s&this.DM;this.t>0&&this[this.t-1]==s;)--this.t},ye.prototype.dlShiftTo=function(s,c){var h;for(h=this.t-1;h>=0;--h)c[h+s]=this[h];for(h=s-1;h>=0;--h)c[h]=0;c.t=this.t+s,c.s=this.s},ye.prototype.drShiftTo=function(s,c){for(var h=s;h<this.t;++h)c[h-s]=this[h];c.t=Math.max(this.t-s,0),c.s=this.s},ye.prototype.lShiftTo=function(s,c){var h,y=s%this.DB,R=this.DB-y,B=(1<<R)-1,re=Math.floor(s/this.DB),q=this.s<<y&this.DM;for(h=this.t-1;h>=0;--h)c[h+re+1]=this[h]>>R|q,q=(this[h]&B)<<y;for(h=re-1;h>=0;--h)c[h]=0;c[re]=q,c.t=this.t+re+1,c.s=this.s,c.clamp()},ye.prototype.rShiftTo=function(s,c){c.s=this.s;var h=Math.floor(s/this.DB);if(h>=this.t)c.t=0;else{var y=s%this.DB,R=this.DB-y,B=(1<<y)-1;c[0]=this[h]>>y;for(var re=h+1;re<this.t;++re)c[re-h-1]|=(this[re]&B)<<R,c[re-h]=this[re]>>y;y>0&&(c[this.t-h-1]|=(this.s&B)<<R),c.t=this.t-h,c.clamp()}},ye.prototype.subTo=function(s,c){for(var h=0,y=0,R=Math.min(s.t,this.t);h<R;)y+=this[h]-s[h],c[h++]=y&this.DM,y>>=this.DB;if(s.t<this.t){for(y-=s.s;h<this.t;)y+=this[h],c[h++]=y&this.DM,y>>=this.DB;y+=this.s}else{for(y+=this.s;h<s.t;)y-=s[h],c[h++]=y&this.DM,y>>=this.DB;y-=s.s}c.s=y<0?-1:0,y<-1?c[h++]=this.DV+y:y>0&&(c[h++]=y),c.t=h,c.clamp()},ye.prototype.multiplyTo=function(s,c){var h=this.abs(),y=s.abs(),R=h.t;for(c.t=R+y.t;--R>=0;)c[R]=0;for(R=0;R<y.t;++R)c[R+h.t]=h.am(0,y[R],c,R,0,h.t);c.s=0,c.clamp(),this.s!=s.s&&ye.ZERO.subTo(c,c)},ye.prototype.squareTo=function(s){for(var c=this.abs(),h=s.t=2*c.t;--h>=0;)s[h]=0;for(h=0;h<c.t-1;++h){var y=c.am(h,c[h],s,2*h,0,1);(s[h+c.t]+=c.am(h+1,2*c[h],s,2*h+1,y,c.t-h-1))>=c.DV&&(s[h+c.t]-=c.DV,s[h+c.t+1]=1)}s.t>0&&(s[s.t-1]+=c.am(h,c[h],s,2*h,0,1)),s.s=0,s.clamp()},ye.prototype.divRemTo=function(s,c,h){var y=s.abs();if(!(y.t<=0)){var R=this.abs();if(R.t<y.t)return null!=c&&c.fromInt(0),void(null!=h&&this.copyTo(h));null==h&&(h=ze());var B=ze(),re=this.s,q=s.s,ne=this.DB-Re(y[y.t-1]);ne>0?(y.lShiftTo(ne,B),R.lShiftTo(ne,h)):(y.copyTo(B),R.copyTo(h));var ae=B.t,ue=B[ae-1];if(0!=ue){var le=ue*(1<<this.F1)+(ae>1?B[ae-2]>>this.F2:0),x=this.FV/le,U=(1<<this.F1)/le,N=1<<this.F2,X=h.t,I=X-ae,ee=null==c?ze():c;for(B.dlShiftTo(I,ee),h.compareTo(ee)>=0&&(h[h.t++]=1,h.subTo(ee,h)),ye.ONE.dlShiftTo(ae,ee),ee.subTo(B,B);B.t<ae;)B[B.t++]=0;for(;--I>=0;){var se=h[--X]==ue?this.DM:Math.floor(h[X]*x+(h[X-1]+N)*U);if((h[X]+=B.am(0,se,h,I,0,ae))<se)for(B.dlShiftTo(I,ee),h.subTo(ee,h);h[X]<--se;)h.subTo(ee,h)}null!=c&&(h.drShiftTo(ae,c),re!=q&&ye.ZERO.subTo(c,c)),h.t=ae,h.clamp(),ne>0&&h.rShiftTo(ne,h),re<0&&ye.ZERO.subTo(h,h)}}},ye.prototype.invDigit=function(){if(this.t<1)return 0;var s=this[0];if(0==(1&s))return 0;var c=3&s;return(c=(c=(c=(c=c*(2-(15&s)*c)&15)*(2-(255&s)*c)&255)*(2-((65535&s)*c&65535))&65535)*(2-s*c%this.DV)%this.DV)>0?this.DV-c:-c},ye.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ye.prototype.exp=function(s,c){if(s>4294967295||s<1)return ye.ONE;var h=ze(),y=ze(),R=c.convert(this),B=Re(s)-1;for(R.copyTo(h);--B>=0;)if(c.sqrTo(h,y),(s&1<<B)>0)c.mulTo(y,R,h);else{var re=h;h=y,y=re}return c.revert(h)},ye.prototype.toString=function(s){if(this.s<0)return"-"+this.negate().toString(s);var c;if(16==s)c=4;else if(8==s)c=3;else if(2==s)c=1;else if(32==s)c=5;else{if(4!=s)return this.toRadix(s);c=2}var h,y=(1<<c)-1,R=!1,B="",re=this.t,q=this.DB-re*this.DB%c;if(re-- >0)for(q<this.DB&&(h=this[re]>>q)>0&&(R=!0,B=at(h));re>=0;)q<c?(h=(this[re]&(1<<q)-1)<<c-q,h|=this[--re]>>(q+=this.DB-c)):(h=this[re]>>(q-=c)&y,q<=0&&(q+=this.DB,--re)),h>0&&(R=!0),R&&(B+=at(h));return R?B:"0"},ye.prototype.negate=function(){var s=ze();return ye.ZERO.subTo(this,s),s},ye.prototype.abs=function(){return this.s<0?this.negate():this},ye.prototype.compareTo=function(s){var c=this.s-s.s;if(0!=c)return c;var h=this.t;if(0!=(c=h-s.t))return this.s<0?-c:c;for(;--h>=0;)if(0!=(c=this[h]-s[h]))return c;return 0},ye.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Re(this[this.t-1]^this.s&this.DM)},ye.prototype.mod=function(s){var c=ze();return this.abs().divRemTo(s,null,c),this.s<0&&c.compareTo(ye.ZERO)>0&&s.subTo(c,c),c},ye.prototype.modPowInt=function(s,c){var h;return h=s<256||c.isEven()?new ht(c):new At(c),this.exp(s,h)},ye.ZERO=ot(0),ye.ONE=ot(1),Xt.prototype.convert=mn,Xt.prototype.revert=mn,Xt.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h)},Xt.prototype.sqrTo=function(s,c){s.squareTo(c)},qt.prototype.convert=function(s){if(s.s<0||s.t>2*this.m.t)return s.mod(this.m);if(s.compareTo(this.m)<0)return s;var c=ze();return s.copyTo(c),this.reduce(c),c},qt.prototype.revert=function(s){return s},qt.prototype.reduce=function(s){for(s.drShiftTo(this.m.t-1,this.r2),s.t>this.m.t+1&&(s.t=this.m.t+1,s.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);s.compareTo(this.r2)<0;)s.dAddOffset(1,this.m.t+1);for(s.subTo(this.r2,s);s.compareTo(this.m)>=0;)s.subTo(this.m,s)},qt.prototype.mulTo=function(s,c,h){s.multiplyTo(c,h),this.reduce(h)},qt.prototype.sqrTo=function(s,c){s.squareTo(c),this.reduce(c)};var ge,_e,Se,pe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],M=(1<<26)/pe[pe.length-1];function T(){this.i=0,this.j=0,this.S=new Array}function xe(){!function(s){_e[Se++]^=255&s,_e[Se++]^=s>>8&255,_e[Se++]^=s>>16&255,_e[Se++]^=s>>24&255,Se>=256&&(Se-=256)}((new Date).getTime())}if(ye.prototype.chunkSize=function(s){return Math.floor(Math.LN2*this.DB/Math.log(s))},ye.prototype.toRadix=function(s){if(null==s&&(s=10),0==this.signum()||s<2||s>36)return"0";var c=this.chunkSize(s),h=Math.pow(s,c),y=ot(h),R=ze(),B=ze(),re="";for(this.divRemTo(y,R,B);R.signum()>0;)re=(h+B.intValue()).toString(s).substr(1)+re,R.divRemTo(y,R,B);return B.intValue().toString(s)+re},ye.prototype.fromRadix=function(s,c){this.fromInt(0),null==c&&(c=10);for(var h=this.chunkSize(c),y=Math.pow(c,h),R=!1,B=0,re=0,q=0;q<s.length;++q){var ne=tt(s,q);ne<0?"-"==s.charAt(q)&&0==this.signum()&&(R=!0):(re=c*re+ne,++B>=h&&(this.dMultiply(y),this.dAddOffset(re,0),B=0,re=0))}B>0&&(this.dMultiply(Math.pow(c,B)),this.dAddOffset(re,0)),R&&ye.ZERO.subTo(this,this)},ye.prototype.fromNumber=function(s,c,h){if("number"==typeof c)if(s<2)this.fromInt(1);else for(this.fromNumber(s,h),this.testBit(s-1)||this.bitwiseTo(ye.ONE.shiftLeft(s-1),Ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>s&&this.subTo(ye.ONE.shiftLeft(s-1),this);else{var y=new Array,R=7&s;y.length=1+(s>>3),c.nextBytes(y),R>0?y[0]&=(1<<R)-1:y[0]=0,this.fromString(y,256)}},ye.prototype.bitwiseTo=function(s,c,h){var y,R,B=Math.min(s.t,this.t);for(y=0;y<B;++y)h[y]=c(this[y],s[y]);if(s.t<this.t){for(R=s.s&this.DM,y=B;y<this.t;++y)h[y]=c(this[y],R);h.t=this.t}else{for(R=this.s&this.DM,y=B;y<s.t;++y)h[y]=c(R,s[y]);h.t=s.t}h.s=c(this.s,s.s),h.clamp()},ye.prototype.changeBit=function(s,c){var h=ye.ONE.shiftLeft(s);return this.bitwiseTo(h,c,h),h},ye.prototype.addTo=function(s,c){for(var h=0,y=0,R=Math.min(s.t,this.t);h<R;)y+=this[h]+s[h],c[h++]=y&this.DM,y>>=this.DB;if(s.t<this.t){for(y+=s.s;h<this.t;)y+=this[h],c[h++]=y&this.DM,y>>=this.DB;y+=this.s}else{for(y+=this.s;h<s.t;)y+=s[h],c[h++]=y&this.DM,y>>=this.DB;y+=s.s}c.s=y<0?-1:0,y>0?c[h++]=y:y<-1&&(c[h++]=this.DV+y),c.t=h,c.clamp()},ye.prototype.dMultiply=function(s){this[this.t]=this.am(0,s-1,this,0,0,this.t),++this.t,this.clamp()},ye.prototype.dAddOffset=function(s,c){if(0!=s){for(;this.t<=c;)this[this.t++]=0;for(this[c]+=s;this[c]>=this.DV;)this[c]-=this.DV,++c>=this.t&&(this[this.t++]=0),++this[c]}},ye.prototype.multiplyLowerTo=function(s,c,h){var y,R=Math.min(this.t+s.t,c);for(h.s=0,h.t=R;R>0;)h[--R]=0;for(y=h.t-this.t;R<y;++R)h[R+this.t]=this.am(0,s[R],h,R,0,this.t);for(y=Math.min(s.t,c);R<y;++R)this.am(0,s[R],h,R,0,c-R);h.clamp()},ye.prototype.multiplyUpperTo=function(s,c,h){--c;var y=h.t=this.t+s.t-c;for(h.s=0;--y>=0;)h[y]=0;for(y=Math.max(c-this.t,0);y<s.t;++y)h[this.t+y-c]=this.am(c-y,s[y],h,0,0,this.t+y-c);h.clamp(),h.drShiftTo(1,h)},ye.prototype.modInt=function(s){if(s<=0)return 0;var c=this.DV%s,h=this.s<0?s-1:0;if(this.t>0)if(0==c)h=this[0]%s;else for(var y=this.t-1;y>=0;--y)h=(c*h+this[y])%s;return h},ye.prototype.millerRabin=function(s){var c=this.subtract(ye.ONE),h=c.getLowestSetBit();if(h<=0)return!1;var y=c.shiftRight(h);(s=s+1>>1)>pe.length&&(s=pe.length);for(var R=ze(),B=0;B<s;++B){R.fromInt(pe[Math.floor(Math.random()*pe.length)]);var re=R.modPow(y,this);if(0!=re.compareTo(ye.ONE)&&0!=re.compareTo(c)){for(var q=1;q++<h&&0!=re.compareTo(c);)if(0==(re=re.modPowInt(2,this)).compareTo(ye.ONE))return!1;if(0!=re.compareTo(c))return!1}}return!0},ye.prototype.clone=function(){var s=ze();return this.copyTo(s),s},ye.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ye.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ye.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ye.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ye.prototype.toByteArray=function(){var s=this.t,c=new Array;c[0]=this.s;var h,y=this.DB-s*this.DB%8,R=0;if(s-- >0)for(y<this.DB&&(h=this[s]>>y)!=(this.s&this.DM)>>y&&(c[R++]=h|this.s<<this.DB-y);s>=0;)y<8?(h=(this[s]&(1<<y)-1)<<8-y,h|=this[--s]>>(y+=this.DB-8)):(h=this[s]>>(y-=8)&255,y<=0&&(y+=this.DB,--s)),0!=(128&h)&&(h|=-256),0==R&&(128&this.s)!=(128&h)&&++R,(R>0||h!=this.s)&&(c[R++]=h);return c},ye.prototype.equals=function(s){return 0==this.compareTo(s)},ye.prototype.min=function(s){return this.compareTo(s)<0?this:s},ye.prototype.max=function(s){return this.compareTo(s)>0?this:s},ye.prototype.and=function(s){var c=ze();return this.bitwiseTo(s,En,c),c},ye.prototype.or=function(s){var c=ze();return this.bitwiseTo(s,Ut,c),c},ye.prototype.xor=function(s){var c=ze();return this.bitwiseTo(s,Tn,c),c},ye.prototype.andNot=function(s){var c=ze();return this.bitwiseTo(s,Sn,c),c},ye.prototype.not=function(){for(var s=ze(),c=0;c<this.t;++c)s[c]=this.DM&~this[c];return s.t=this.t,s.s=~this.s,s},ye.prototype.shiftLeft=function(s){var c=ze();return s<0?this.rShiftTo(-s,c):this.lShiftTo(s,c),c},ye.prototype.shiftRight=function(s){var c=ze();return s<0?this.lShiftTo(-s,c):this.rShiftTo(s,c),c},ye.prototype.getLowestSetBit=function(){for(var s=0;s<this.t;++s)if(0!=this[s])return s*this.DB+Zn(this[s]);return this.s<0?this.t*this.DB:-1},ye.prototype.bitCount=function(){for(var s=0,c=this.s&this.DM,h=0;h<this.t;++h)s+=zn(this[h]^c);return s},ye.prototype.testBit=function(s){var c=Math.floor(s/this.DB);return c>=this.t?0!=this.s:0!=(this[c]&1<<s%this.DB)},ye.prototype.setBit=function(s){return this.changeBit(s,Ut)},ye.prototype.clearBit=function(s){return this.changeBit(s,Sn)},ye.prototype.flipBit=function(s){return this.changeBit(s,Tn)},ye.prototype.add=function(s){var c=ze();return this.addTo(s,c),c},ye.prototype.subtract=function(s){var c=ze();return this.subTo(s,c),c},ye.prototype.multiply=function(s){var c=ze();return this.multiplyTo(s,c),c},ye.prototype.divide=function(s){var c=ze();return this.divRemTo(s,c,null),c},ye.prototype.remainder=function(s){var c=ze();return this.divRemTo(s,null,c),c},ye.prototype.divideAndRemainder=function(s){var c=ze(),h=ze();return this.divRemTo(s,c,h),new Array(c,h)},ye.prototype.modPow=function(s,c){var h,y,R=s.bitLength(),B=ot(1);if(R<=0)return B;h=R<18?1:R<48?3:R<144?4:R<768?5:6,y=R<8?new ht(c):c.isEven()?new qt(c):new At(c);var re=new Array,q=3,ne=h-1,ae=(1<<h)-1;if(re[1]=y.convert(this),h>1){var ue=ze();for(y.sqrTo(re[1],ue);q<=ae;)re[q]=ze(),y.mulTo(ue,re[q-2],re[q]),q+=2}var le,x,U=s.t-1,N=!0,X=ze();for(R=Re(s[U])-1;U>=0;){for(R>=ne?le=s[U]>>R-ne&ae:(le=(s[U]&(1<<R+1)-1)<<ne-R,U>0&&(le|=s[U-1]>>this.DB+R-ne)),q=h;0==(1&le);)le>>=1,--q;if((R-=q)<0&&(R+=this.DB,--U),N)re[le].copyTo(B),N=!1;else{for(;q>1;)y.sqrTo(B,X),y.sqrTo(X,B),q-=2;q>0?y.sqrTo(B,X):(x=B,B=X,X=x),y.mulTo(X,re[le],B)}for(;U>=0&&0==(s[U]&1<<R);)y.sqrTo(B,X),x=B,B=X,X=x,--R<0&&(R=this.DB-1,--U)}return y.revert(B)},ye.prototype.modInverse=function(s){var c=s.isEven();if(this.isEven()&&c||0==s.signum())return ye.ZERO;for(var h=s.clone(),y=this.clone(),R=ot(1),B=ot(0),re=ot(0),q=ot(1);0!=h.signum();){for(;h.isEven();)h.rShiftTo(1,h),c?(R.isEven()&&B.isEven()||(R.addTo(this,R),B.subTo(s,B)),R.rShiftTo(1,R)):B.isEven()||B.subTo(s,B),B.rShiftTo(1,B);for(;y.isEven();)y.rShiftTo(1,y),c?(re.isEven()&&q.isEven()||(re.addTo(this,re),q.subTo(s,q)),re.rShiftTo(1,re)):q.isEven()||q.subTo(s,q),q.rShiftTo(1,q);h.compareTo(y)>=0?(h.subTo(y,h),c&&R.subTo(re,R),B.subTo(q,B)):(y.subTo(h,y),c&&re.subTo(R,re),q.subTo(B,q))}return 0!=y.compareTo(ye.ONE)?ye.ZERO:q.compareTo(s)>=0?q.subtract(s):q.signum()<0?(q.addTo(s,q),q.signum()<0?q.add(s):q):q},ye.prototype.pow=function(s){return this.exp(s,new Xt)},ye.prototype.gcd=function(s){var c=this.s<0?this.negate():this.clone(),h=s.s<0?s.negate():s.clone();if(c.compareTo(h)<0){var y=c;c=h,h=y}var R=c.getLowestSetBit(),B=h.getLowestSetBit();if(B<0)return c;for(R<B&&(B=R),B>0&&(c.rShiftTo(B,c),h.rShiftTo(B,h));c.signum()>0;)(R=c.getLowestSetBit())>0&&c.rShiftTo(R,c),(R=h.getLowestSetBit())>0&&h.rShiftTo(R,h),c.compareTo(h)>=0?(c.subTo(h,c),c.rShiftTo(1,c)):(h.subTo(c,h),h.rShiftTo(1,h));return B>0&&h.lShiftTo(B,h),h},ye.prototype.isProbablePrime=function(s){var c,h=this.abs();if(1==h.t&&h[0]<=pe[pe.length-1]){for(c=0;c<pe.length;++c)if(h[0]==pe[c])return!0;return!1}if(h.isEven())return!1;for(c=1;c<pe.length;){for(var y=pe[c],R=c+1;R<pe.length&&y<M;)y*=pe[R++];for(y=h.modInt(y);c<R;)if(y%pe[c++]==0)return!1}return h.millerRabin(s)},ye.prototype.square=function(){var s=ze();return this.squareTo(s),s},T.prototype.init=function(s){var c,h,y;for(c=0;c<256;++c)this.S[c]=c;for(h=0,c=0;c<256;++c)y=this.S[c],this.S[c]=this.S[h=h+this.S[c]+s[c%s.length]&255],this.S[h]=y;this.i=0,this.j=0},T.prototype.next=function(){var s;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,s=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=s,this.S[s+this.S[this.i]&255]},null==_e){var We;if(_e=new Array,Se=0,void 0!==J&&(void 0!==J.crypto||void 0!==J.msCrypto)){var Ge=J.crypto||J.msCrypto;if(Ge.getRandomValues){var pt=new Uint8Array(32);for(Ge.getRandomValues(pt),We=0;We<32;++We)_e[Se++]=pt[We]}else if("Netscape"==oe.appName&&oe.appVersion<"5"){var wt=J.crypto.random(32);for(We=0;We<wt.length;++We)_e[Se++]=255&wt.charCodeAt(We)}}for(;Se<256;)We=Math.floor(65536*Math.random()),_e[Se++]=We>>>8,_e[Se++]=255&We;Se=0,xe()}function Ft(){if(null==ge){for(xe(),(ge=new T).init(_e),Se=0;Se<_e.length;++Se)_e[Se]=0;Se=0}return ge.next()}function tn(){}function yn(a,s){return new ye(a,s)}function Dn(a,s,c){for(var h="",y=0;h.length<s;)h+=c(String.fromCharCode.apply(String,a.concat([(4278190080&y)>>24,(16711680&y)>>16,(65280&y)>>8,255&y]))),y+=1;return h}function Ze(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Ht(a,s){this.x=s,this.q=a}function vt(a,s,c,h){this.curve=a,this.x=s,this.y=c,this.z=null==h?ye.ONE:h,this.zinv=null}function Je(a,s,c){this.q=a,this.a=this.fromBigInteger(s),this.b=this.fromBigInteger(c),this.infinity=new vt(this,null,null)}tn.prototype.nextBytes=function(s){var c;for(c=0;c<s.length;++c)s[c]=Ft()},Ze.prototype.doPublic=function(s){return s.modPowInt(this.e,this.n)},Ze.prototype.setPublic=function(s,c){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof s)this.n=s,this.e=c;else{if(!(null!=s&&null!=c&&s.length>0&&c.length>0))throw"Invalid RSA public key";this.n=yn(s,16),this.e=parseInt(c,16)}},Ze.prototype.encrypt=function(s){var c=function(B,re){if(re<B.length+11)throw"Message too long for RSA";for(var q=new Array,ne=B.length-1;ne>=0&&re>0;){var ae=B.charCodeAt(ne--);ae<128?q[--re]=ae:ae>127&&ae<2048?(q[--re]=63&ae|128,q[--re]=ae>>6|192):(q[--re]=63&ae|128,q[--re]=ae>>6&63|128,q[--re]=ae>>12|224)}q[--re]=0;for(var ue=new tn,le=new Array;re>2;){for(le[0]=0;0==le[0];)ue.nextBytes(le);q[--re]=le[0]}return q[--re]=2,q[--re]=0,new ye(q)}(s,this.n.bitLength()+7>>3);if(null==c)return null;var h=this.doPublic(c);if(null==h)return null;var y=h.toString(16);return 0==(1&y.length)?y:"0"+y},Ze.prototype.encryptOAEP=function(s,c,h){var y=function(q,ne,ae,ue){var le=$.crypto.MessageDigest,x=$.crypto.Util,U=null;if(ae||(ae="sha1"),"string"==typeof ae&&(U=le.getCanonicalAlgName(ae),ue=le.getHashLength(U),ae=function(Ne){return ln(x.hashHex(Rn(Ne),U))}),q.length+2*ue+2>ne)throw"Message too long for RSA";var N,X="";for(N=0;N<ne-q.length-2*ue-2;N+=1)X+="\0";var I=ae("")+X+"\x01"+q,ee=new Array(ue);(new tn).nextBytes(ee);var se=Dn(ee,I.length,ae),ce=[];for(N=0;N<I.length;N+=1)ce[N]=I.charCodeAt(N)^se.charCodeAt(N);var Ee=Dn(ce,ee.length,ae),Fe=[0];for(N=0;N<ee.length;N+=1)Fe[N+1]=ee[N]^Ee.charCodeAt(N);return new ye(Fe.concat(ce))}(s,this.n.bitLength()+7>>3,c,h);if(null==y)return null;var R=this.doPublic(y);if(null==R)return null;var B=R.toString(16);return 0==(1&B.length)?B:"0"+B},Ze.prototype.type="RSA",Ht.prototype.equals=function(s){return s==this||this.q.equals(s.q)&&this.x.equals(s.x)},Ht.prototype.toBigInteger=function(){return this.x},Ht.prototype.negate=function(){return new Ht(this.q,this.x.negate().mod(this.q))},Ht.prototype.add=function(s){return new Ht(this.q,this.x.add(s.toBigInteger()).mod(this.q))},Ht.prototype.subtract=function(s){return new Ht(this.q,this.x.subtract(s.toBigInteger()).mod(this.q))},Ht.prototype.multiply=function(s){return new Ht(this.q,this.x.multiply(s.toBigInteger()).mod(this.q))},Ht.prototype.square=function(){return new Ht(this.q,this.x.square().mod(this.q))},Ht.prototype.divide=function(s){return new Ht(this.q,this.x.multiply(s.toBigInteger().modInverse(this.q)).mod(this.q))},vt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},vt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},vt.prototype.equals=function(s){return s==this||(this.isInfinity()?s.isInfinity():s.isInfinity()?this.isInfinity():!!s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(ye.ZERO)&&s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(ye.ZERO))},vt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(ye.ZERO)&&!this.y.toBigInteger().equals(ye.ZERO)},vt.prototype.negate=function(){return new vt(this.curve,this.x,this.y.negate(),this.z)},vt.prototype.add=function(s){if(this.isInfinity())return s;if(s.isInfinity())return this;var c=s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q),h=s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q);if(ye.ZERO.equals(h))return ye.ZERO.equals(c)?this.twice():this.curve.getInfinity();var y=new ye("3"),R=this.x.toBigInteger(),B=this.y.toBigInteger(),re=(s.x.toBigInteger(),s.y.toBigInteger(),h.square()),q=re.multiply(h),ne=R.multiply(re),ae=c.square().multiply(this.z),ue=ae.subtract(ne.shiftLeft(1)).multiply(s.z).subtract(q).multiply(h).mod(this.curve.q),le=ne.multiply(y).multiply(c).subtract(B.multiply(q)).subtract(ae.multiply(c)).multiply(s.z).add(c.multiply(q)).mod(this.curve.q),x=q.multiply(this.z).multiply(s.z).mod(this.curve.q);return new vt(this.curve,this.curve.fromBigInteger(ue),this.curve.fromBigInteger(le),x)},vt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var s=new ye("3"),c=this.x.toBigInteger(),h=this.y.toBigInteger(),y=h.multiply(this.z),R=y.multiply(h).mod(this.curve.q),B=this.curve.a.toBigInteger(),re=c.square().multiply(s);ye.ZERO.equals(B)||(re=re.add(this.z.square().multiply(B)));var q=(re=re.mod(this.curve.q)).square().subtract(c.shiftLeft(3).multiply(R)).shiftLeft(1).multiply(y).mod(this.curve.q),ne=re.multiply(s).multiply(c).subtract(R.shiftLeft(1)).shiftLeft(2).multiply(R).subtract(re.square().multiply(re)).mod(this.curve.q),ae=y.square().multiply(y).shiftLeft(3).mod(this.curve.q);return new vt(this.curve,this.curve.fromBigInteger(q),this.curve.fromBigInteger(ne),ae)},vt.prototype.multiply=function(s){if(this.isInfinity())return this;if(0==s.signum())return this.curve.getInfinity();var c,h=s,y=h.multiply(new ye("3")),R=this.negate(),B=this,re=this.curve.q.subtract(s),q=re.multiply(new ye("3")),ne=new vt(this.curve,this.x,this.y),ae=ne.negate();for(c=y.bitLength()-2;c>0;--c){B=B.twice();var ue=y.testBit(c);ue!=h.testBit(c)&&(B=B.add(ue?this:R))}for(c=q.bitLength()-2;c>0;--c){ne=ne.twice();var le=q.testBit(c);le!=re.testBit(c)&&(ne=ne.add(le?ne:ae))}return B},vt.prototype.multiplyTwo=function(s,c,h){var y;y=s.bitLength()>h.bitLength()?s.bitLength()-1:h.bitLength()-1;for(var R=this.curve.getInfinity(),B=this.add(c);y>=0;)R=R.twice(),s.testBit(y)?R=h.testBit(y)?R.add(B):R.add(this):h.testBit(y)&&(R=R.add(c)),--y;return R},Je.prototype.getQ=function(){return this.q},Je.prototype.getA=function(){return this.a},Je.prototype.getB=function(){return this.b},Je.prototype.equals=function(s){return s==this||this.q.equals(s.q)&&this.a.equals(s.a)&&this.b.equals(s.b)},Je.prototype.getInfinity=function(){return this.infinity},Je.prototype.fromBigInteger=function(s){return new Ht(this.q,s)},Je.prototype.decodePointHex=function(s){switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var c=(s.length-2)/2,h=s.substr(2,c),y=s.substr(c+2,c);return new vt(this,this.fromBigInteger(new ye(h,16)),this.fromBigInteger(new ye(y,16)));default:return null}},Ht.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},vt.prototype.getEncoded=function(a){var s=function(B,re){var q=B.toByteArrayUnsigned();if(re<q.length)q=q.slice(q.length-re);else for(;re>q.length;)q.unshift(0);return q},c=this.getX().toBigInteger(),h=this.getY().toBigInteger(),y=s(c,32);return a?h.isEven()?y.unshift(2):y.unshift(3):(y.unshift(4),y=y.concat(s(h,32))),y},vt.decodeFrom=function(a,s){var c=s.length-1,h=s.slice(1,1+c/2),y=s.slice(1+c/2,1+c);h.unshift(0),y.unshift(0);var R=new ye(h),B=new ye(y);return new vt(a,a.fromBigInteger(R),a.fromBigInteger(B))},vt.decodeFromHex=function(a,s){s.substr(0,2);var c=s.length-2,h=s.substr(2,c/2),y=s.substr(2+c/2,c/2),R=new ye(h,16),B=new ye(y,16);return new vt(a,a.fromBigInteger(R),a.fromBigInteger(B))},vt.prototype.add2D=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;if(this.x.equals(a.x))return this.y.equals(a.y)?this.twice():this.curve.getInfinity();var s=a.x.subtract(this.x),c=a.y.subtract(this.y).divide(s),h=c.square().subtract(this.x).subtract(a.x),y=c.multiply(this.x.subtract(h)).subtract(this.y);return new vt(this.curve,h,y)},vt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var a=this.curve.fromBigInteger(ye.valueOf(2)),s=this.curve.fromBigInteger(ye.valueOf(3)),c=this.x.square().multiply(s).add(this.curve.a).divide(this.y.multiply(a)),h=c.square().subtract(this.x.multiply(a)),y=c.multiply(this.x.subtract(h)).subtract(this.y);return new vt(this.curve,h,y)},vt.prototype.multiply2D=function(a){if(this.isInfinity())return this;if(0==a.signum())return this.curve.getInfinity();var s,c=a,h=c.multiply(new ye("3")),y=this.negate(),R=this;for(s=h.bitLength()-2;s>0;--s){R=R.twice();var B=h.testBit(s);B!=c.testBit(s)&&(R=R.add2D(B?this:y))}return R},vt.prototype.isOnCurve=function(){var a=this.getX().toBigInteger(),s=this.getY().toBigInteger(),c=this.curve.getA().toBigInteger(),h=this.curve.getB().toBigInteger(),y=this.curve.getQ(),R=s.multiply(s).mod(y),B=a.multiply(a).multiply(a).add(c.multiply(a)).add(h).mod(y);return R.equals(B)},vt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},vt.prototype.validate=function(){var a=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var s=this.getX().toBigInteger(),c=this.getY().toBigInteger();if(s.compareTo(ye.ONE)<0||s.compareTo(a.subtract(ye.ONE))>0)throw new Error("x coordinate out of bounds");if(c.compareTo(ye.ONE)<0||c.compareTo(a.subtract(ye.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(a).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var $t=function(){var a=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),s=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),c={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function h(B,re,q){return re?c[re]:String.fromCharCode(parseInt(q,16))}var y=new String(""),R=Object.hasOwnProperty;return function(B,re){var q,ne,ae=B.match(a),ue=ae[0],le=!1;"{"===ue?q={}:"["===ue?q=[]:(q=[],le=!0);for(var x=[q],U=1-le,N=ae.length;U<N;++U){var X;switch((ue=ae[U]).charCodeAt(0)){default:(X=x[0])[ne||X.length]=+ue,ne=void 0;break;case 34:if(-1!==(ue=ue.substring(1,ue.length-1)).indexOf("\\")&&(ue=ue.replace(s,h)),X=x[0],!ne){if(!(X instanceof Array)){ne=ue||y;break}ne=X.length}X[ne]=ue,ne=void 0;break;case 91:x.unshift((X=x[0])[ne||X.length]=[]),ne=void 0;break;case 93:x.shift();break;case 102:(X=x[0])[ne||X.length]=!1,ne=void 0;break;case 110:(X=x[0])[ne||X.length]=null,ne=void 0;break;case 116:(X=x[0])[ne||X.length]=!0,ne=void 0;break;case 123:x.unshift((X=x[0])[ne||X.length]={}),ne=void 0;break;case 125:x.shift()}}if(le){if(1!==x.length)throw new Error;q=q[0]}else if(x.length)throw new Error;return re&&(q=function I(ee,se){var ce=ee[se];if(ce&&"object"===(void 0===ce?"undefined":k(ce))){var Ee=null;for(var Fe in ce)if(R.call(ce,Fe)&&ce!==ee){var $e=I(ce,Fe);void 0!==$e?ce[Fe]=$e:(Ee||(Ee=[]),Ee.push(Fe))}if(Ee)for(var Ne=Ee.length;--Ne>=0;)delete ce[Ee[Ne]]}return re.call(ee,se,ce)}({"":q},"")),q}}();void 0!==$&&$||(P.KJUR=$={}),void 0!==$.asn1&&$.asn1||($.asn1={}),$.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){var s=a.toString(16);return s.length%2==1&&(s="0"+s),s},this.bigIntToMinTwosComplementsHex=function(a){var s=a.toString(16);if("-"!=s.substr(0,1))s.length%2==1?s="0"+s:s.match(/^[0-7]/)||(s="00"+s);else{var c=s.substr(1).length;c%2==1?c+=1:s.match(/^[0-7]/)||(c+=2);for(var h="",y=0;y<c;y++)h+="f";s=new ye(h,16).xor(a).add(ye.ONE).toString(16).replace(/^-/,"")}return s},this.getPEMStringFromHex=function(a,s){return dn(a,s)},this.newObject=function(a){var s=$.asn1,c=s.ASN1Object,h=s.DERBoolean,y=s.DERInteger,R=s.DERBitString,B=s.DEROctetString,re=s.DERNull,q=s.DERObjectIdentifier,ne=s.DEREnumerated,ae=s.DERUTF8String,ue=s.DERNumericString,le=s.DERPrintableString,x=s.DERTeletexString,U=s.DERIA5String,N=s.DERUTCTime,X=s.DERGeneralizedTime,I=s.DERVisibleString,ee=s.DERBMPString,se=s.DERSequence,ce=s.DERSet,Ee=s.DERTaggedObject,Fe=s.ASN1Util.newObject;if(a instanceof s.ASN1Object)return a;var $e=Object.keys(a);if(1!=$e.length)throw new Error("key of param shall be only one.");var Ne=$e[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Ne+":"))throw new Error("undefined key: "+Ne);if("bool"==Ne)return new h(a[Ne]);if("int"==Ne)return new y(a[Ne]);if("bitstr"==Ne)return new R(a[Ne]);if("octstr"==Ne)return new B(a[Ne]);if("null"==Ne)return new re(a[Ne]);if("oid"==Ne)return new q(a[Ne]);if("enum"==Ne)return new ne(a[Ne]);if("utf8str"==Ne)return new ae(a[Ne]);if("numstr"==Ne)return new ue(a[Ne]);if("prnstr"==Ne)return new le(a[Ne]);if("telstr"==Ne)return new x(a[Ne]);if("ia5str"==Ne)return new U(a[Ne]);if("utctime"==Ne)return new N(a[Ne]);if("gentime"==Ne)return new X(a[Ne]);if("visstr"==Ne)return new I(a[Ne]);if("bmpstr"==Ne)return new ee(a[Ne]);if("asn1"==Ne)return new c(a[Ne]);if("seq"==Ne){for(var _t=a[Ne],qe=[],Qe=0;Qe<_t.length;Qe++){var Ct=Fe(_t[Qe]);qe.push(Ct)}return new se({array:qe})}if("set"==Ne){for(_t=a[Ne],qe=[],Qe=0;Qe<_t.length;Qe++)Ct=Fe(_t[Qe]),qe.push(Ct);return new ce({array:qe})}if("tag"==Ne){var Wt=a[Ne];if("[object Array]"===Object.prototype.toString.call(Wt)&&3==Wt.length){var zt=Fe(Wt[2]);return new Ee({tag:Wt[0],explicit:Wt[1],obj:zt})}return new Ee(Wt)}},this.jsonToASN1HEX=function(a){return this.newObject(a).getEncodedHex()}},$.asn1.ASN1Util.oidHexToInt=function(a){for(var s="",c=parseInt(a.substr(0,2),16),h=(s=Math.floor(c/40)+"."+c%40,""),y=2;y<a.length;y+=2){var R=("00000000"+parseInt(a.substr(y,2),16).toString(2)).slice(-8);h+=R.substr(1,7),"0"==R.substr(0,1)&&(s=s+"."+new ye(h,2).toString(10),h="")}return s},$.asn1.ASN1Util.oidIntToHex=function(a){var s=function(q){var ne=q.toString(16);return 1==ne.length&&(ne="0"+ne),ne},c=function(q){var ne="",ae=new ye(q,10).toString(2),ue=7-ae.length%7;7==ue&&(ue=0);for(var le="",x=0;x<ue;x++)le+="0";for(ae=le+ae,x=0;x<ae.length-1;x+=7){var U=ae.substr(x,7);x!=ae.length-7&&(U="1"+U),ne+=s(parseInt(U,2))}return ne};if(!a.match(/^[0-9.]+$/))throw"malformed oid string: "+a;var h="",y=a.split("."),R=40*parseInt(y[0])+parseInt(y[1]);h+=s(R),y.splice(0,2);for(var B=0;B<y.length;B++)h+=c(y[B]);return h},$.asn1.ASN1Object=function(a){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var s=this.hV.length/2,c=s.toString(16);if(c.length%2==1&&(c="0"+c),s<128)return c;var h=c.length/2;if(h>15)throw"ASN.1 length too long to represent by 8x: n = "+s.toString(16);return(128+h).toString(16)+c},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(s){this.params=s},null!=a&&null!=a.tlv&&(this.hTLV=a.tlv,this.isModified=!1)},$.asn1.DERAbstractString=function(a){$.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(s){this.hTLV=null,this.isModified=!0,this.s=s,this.hV=rr(this.s).toLowerCase()},this.setStringHex=function(s){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.getFreshValueHex=function(){return this.hV},void 0!==a&&("string"==typeof a?this.setString(a):void 0!==a.str?this.setString(a.str):void 0!==a.hex&&this.setStringHex(a.hex))},b.lang.extend($.asn1.DERAbstractString,$.asn1.ASN1Object),$.asn1.DERAbstractTime=function(a){$.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(s){var c=s.getTime()+6e4*s.getTimezoneOffset();return new Date(c)},this.formatDate=function(s,c,h){var y=this.zeroPadding,R=this.localDateToUTC(s),B=String(R.getFullYear());"utc"==c&&(B=B.substr(2,2));var re=B+y(String(R.getMonth()+1),2)+y(String(R.getDate()),2)+y(String(R.getHours()),2)+y(String(R.getMinutes()),2)+y(String(R.getSeconds()),2);if(!0===h){var q=R.getMilliseconds();if(0!=q){var ne=y(String(q),3);re=re+"."+(ne=ne.replace(/[0]+$/,""))}}return re+"Z"},this.zeroPadding=function(s,c){return s.length>=c?s:new Array(c-s.length+1).join("0")+s},this.getString=function(){return this.s},this.setString=function(s){this.hTLV=null,this.isModified=!0,this.s=s,this.hV=nr(s)},this.setByDateValue=function(s,c,h,y,R,B){var re=new Date(Date.UTC(s,c-1,h,y,R,B,0));this.setByDate(re)},this.getFreshValueHex=function(){return this.hV}},b.lang.extend($.asn1.DERAbstractTime,$.asn1.ASN1Object),$.asn1.DERAbstractStructured=function(a){$.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array=s},this.appendASN1Object=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array.push(s)},this.asn1Array=new Array,void 0!==a&&void 0!==a.array&&(this.asn1Array=a.array)},b.lang.extend($.asn1.DERAbstractStructured,$.asn1.ASN1Object),$.asn1.DERBoolean=function(a){$.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==a?"010100":"0101ff"},b.lang.extend($.asn1.DERBoolean,$.asn1.ASN1Object),$.asn1.DERInteger=function(a){$.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(s){this.hTLV=null,this.isModified=!0,this.hV=$.asn1.ASN1Util.bigIntToMinTwosComplementsHex(s)},this.setByInteger=function(s){var c=new ye(String(s),10);this.setByBigInteger(c)},this.setValueHex=function(s){this.hV=s},this.getFreshValueHex=function(){return this.hV},void 0!==a&&(void 0!==a.bigint?this.setByBigInteger(a.bigint):void 0!==a.int?this.setByInteger(a.int):"number"==typeof a?this.setByInteger(a):void 0!==a.hex&&this.setValueHex(a.hex))},b.lang.extend($.asn1.DERInteger,$.asn1.ASN1Object),$.asn1.DERBitString=function(a){if(void 0!==a&&void 0!==a.obj){var s=$.asn1.ASN1Util.newObject(a.obj);a.hex="00"+s.getEncodedHex()}$.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(c){this.hTLV=null,this.isModified=!0,this.hV=c},this.setUnusedBitsAndHexValue=function(c,h){if(c<0||7<c)throw"unused bits shall be from 0 to 7: u = "+c;var y="0"+c;this.hTLV=null,this.isModified=!0,this.hV=y+h},this.setByBinaryString=function(c){var h=8-(c=c.replace(/0+$/,"")).length%8;8==h&&(h=0);for(var y=0;y<=h;y++)c+="0";var R="";for(y=0;y<c.length-1;y+=8){var B=c.substr(y,8),re=parseInt(B,2).toString(16);1==re.length&&(re="0"+re),R+=re}this.hTLV=null,this.isModified=!0,this.hV="0"+h+R},this.setByBooleanArray=function(c){for(var h="",y=0;y<c.length;y++)h+=1==c[y]?"1":"0";this.setByBinaryString(h)},this.newFalseArray=function(c){for(var h=new Array(c),y=0;y<c;y++)h[y]=!1;return h},this.getFreshValueHex=function(){return this.hV},void 0!==a&&("string"==typeof a&&a.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(a):void 0!==a.hex?this.setHexValueIncludingUnusedBits(a.hex):void 0!==a.bin?this.setByBinaryString(a.bin):void 0!==a.array&&this.setByBooleanArray(a.array))},b.lang.extend($.asn1.DERBitString,$.asn1.ASN1Object),$.asn1.DEROctetString=function(a){if(void 0!==a&&void 0!==a.obj){var s=$.asn1.ASN1Util.newObject(a.obj);a.hex=s.getEncodedHex()}$.asn1.DEROctetString.superclass.constructor.call(this,a),this.hT="04"},b.lang.extend($.asn1.DEROctetString,$.asn1.DERAbstractString),$.asn1.DERNull=function(){$.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},b.lang.extend($.asn1.DERNull,$.asn1.ASN1Object),$.asn1.DERObjectIdentifier=function(a){$.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(s){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.setValueOidString=function(s){var c=function(y){var R=function(le){var x=le.toString(16);return 1==x.length&&(x="0"+x),x},B=function(le){var x="",U=parseInt(le,10).toString(2),N=7-U.length%7;7==N&&(N=0);for(var X="",I=0;I<N;I++)X+="0";for(U=X+U,I=0;I<U.length-1;I+=7){var ee=U.substr(I,7);I!=U.length-7&&(ee="1"+ee),x+=R(parseInt(ee,2))}return x};try{if(!y.match(/^[0-9.]+$/))return null;var re="",q=y.split("."),ne=40*parseInt(q[0],10)+parseInt(q[1],10);re+=R(ne),q.splice(0,2);for(var ae=0;ae<q.length;ae++)re+=B(q[ae]);return re}catch(ue){return null}}(s);if(null==c)throw new Error("malformed oid string: "+s);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.setValueName=function(s){var c=$.asn1.x509.OID.name2oid(s);if(""===c)throw new Error("DERObjectIdentifier oidName undefined: "+s);this.setValueOidString(c)},this.setValueNameOrOid=function(s){s.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(s):this.setValueName(s)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(s){"string"==typeof s?this.setValueNameOrOid(s):void 0!==s.oid?this.setValueNameOrOid(s.oid):void 0!==s.name?this.setValueNameOrOid(s.name):void 0!==s.hex&&this.setValueHex(s.hex)},void 0!==a&&this.setByParam(a)},b.lang.extend($.asn1.DERObjectIdentifier,$.asn1.ASN1Object),$.asn1.DEREnumerated=function(a){$.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(s){this.hTLV=null,this.isModified=!0,this.hV=$.asn1.ASN1Util.bigIntToMinTwosComplementsHex(s)},this.setByInteger=function(s){var c=new ye(String(s),10);this.setByBigInteger(c)},this.setValueHex=function(s){this.hV=s},this.getFreshValueHex=function(){return this.hV},void 0!==a&&(void 0!==a.int?this.setByInteger(a.int):"number"==typeof a?this.setByInteger(a):void 0!==a.hex&&this.setValueHex(a.hex))},b.lang.extend($.asn1.DEREnumerated,$.asn1.ASN1Object),$.asn1.DERUTF8String=function(a){$.asn1.DERUTF8String.superclass.constructor.call(this,a),this.hT="0c"},b.lang.extend($.asn1.DERUTF8String,$.asn1.DERAbstractString),$.asn1.DERNumericString=function(a){$.asn1.DERNumericString.superclass.constructor.call(this,a),this.hT="12"},b.lang.extend($.asn1.DERNumericString,$.asn1.DERAbstractString),$.asn1.DERPrintableString=function(a){$.asn1.DERPrintableString.superclass.constructor.call(this,a),this.hT="13"},b.lang.extend($.asn1.DERPrintableString,$.asn1.DERAbstractString),$.asn1.DERTeletexString=function(a){$.asn1.DERTeletexString.superclass.constructor.call(this,a),this.hT="14"},b.lang.extend($.asn1.DERTeletexString,$.asn1.DERAbstractString),$.asn1.DERIA5String=function(a){$.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="16"},b.lang.extend($.asn1.DERIA5String,$.asn1.DERAbstractString),$.asn1.DERVisibleString=function(a){$.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="1a"},b.lang.extend($.asn1.DERVisibleString,$.asn1.DERAbstractString),$.asn1.DERBMPString=function(a){$.asn1.DERBMPString.superclass.constructor.call(this,a),this.hT="1e"},b.lang.extend($.asn1.DERBMPString,$.asn1.DERAbstractString),$.asn1.DERUTCTime=function(a){$.asn1.DERUTCTime.superclass.constructor.call(this,a),this.hT="17",this.setByDate=function(s){this.hTLV=null,this.isModified=!0,this.date=s,this.s=this.formatDate(this.date,"utc"),this.hV=nr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=nr(this.s)),this.hV},void 0!==a&&(void 0!==a.str?this.setString(a.str):"string"==typeof a&&a.match(/^[0-9]{12}Z$/)?this.setString(a):void 0!==a.hex?this.setStringHex(a.hex):void 0!==a.date&&this.setByDate(a.date))},b.lang.extend($.asn1.DERUTCTime,$.asn1.DERAbstractTime),$.asn1.DERGeneralizedTime=function(a){$.asn1.DERGeneralizedTime.superclass.constructor.call(this,a),this.hT="18",this.withMillis=!1,this.setByDate=function(s){this.hTLV=null,this.isModified=!0,this.date=s,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=nr(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=nr(this.s)),this.hV},void 0!==a&&(void 0!==a.str?this.setString(a.str):"string"==typeof a&&a.match(/^[0-9]{14}Z$/)?this.setString(a):void 0!==a.hex?this.setStringHex(a.hex):void 0!==a.date&&this.setByDate(a.date),!0===a.millis&&(this.withMillis=!0))},b.lang.extend($.asn1.DERGeneralizedTime,$.asn1.DERAbstractTime),$.asn1.DERSequence=function(a){$.asn1.DERSequence.superclass.constructor.call(this,a),this.hT="30",this.getFreshValueHex=function(){for(var s="",c=0;c<this.asn1Array.length;c++)s+=this.asn1Array[c].getEncodedHex();return this.hV=s,this.hV}},b.lang.extend($.asn1.DERSequence,$.asn1.DERAbstractStructured),$.asn1.DERSet=function(a){$.asn1.DERSet.superclass.constructor.call(this,a),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var s=new Array,c=0;c<this.asn1Array.length;c++)s.push(this.asn1Array[c].getEncodedHex());return 1==this.sortFlag&&s.sort(),this.hV=s.join(""),this.hV},void 0!==a&&void 0!==a.sortflag&&0==a.sortflag&&(this.sortFlag=!1)},b.lang.extend($.asn1.DERSet,$.asn1.DERAbstractStructured),$.asn1.DERTaggedObject=function(a){$.asn1.DERTaggedObject.superclass.constructor.call(this);var s=$.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(c,h,y){this.hT=h,this.isExplicit=c,this.asn1Object=y,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=y.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,h),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(c){null!=c.tag&&(this.hT=c.tag),null!=c.explicit&&(this.isExplicit=c.explicit),null!=c.tage&&(this.hT=c.tage,this.isExplicit=!0),null!=c.tagi&&(this.hT=c.tagi,this.isExplicit=!1),null!=c.obj&&(c.obj instanceof s.ASN1Object?(this.asn1Object=c.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==k(c.obj)&&(this.asn1Object=s.ASN1Util.newObject(c.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=a&&this.setByParam(a)},b.lang.extend($.asn1.DERTaggedObject,$.asn1.ASN1Object);var $,nt,an,Be=new function(){};function vn(a){for(var s=new Array,c=0;c<a.length;c++)s[c]=a.charCodeAt(c);return s}function Lt(a){for(var s="",c=0;c<a.length;c++)s+=String.fromCharCode(a[c]);return s}function Nn(a){for(var s="",c=0;c<a.length;c++){var h=a[c].toString(16);1==h.length&&(h="0"+h),s+=h}return s}function nr(a){return Nn(vn(a))}function yt(a){return(a=(a=a.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ir(a){return a.length%4==2?a+="==":a.length%4==3&&(a+="="),(a=a.replace(/-/g,"+")).replace(/_/g,"/")}function ut(a){return a.length%2==1&&(a="0"+a),yt(Pe(a))}function Vt(a){return Oe(Ir(a))}function rr(a){return Pn(Cr(a))}function ct(a){return decodeURIComponent(ir(a))}function ln(a){for(var s="",c=0;c<a.length-1;c+=2)s+=String.fromCharCode(parseInt(a.substr(c,2),16));return s}function Rn(a){for(var s="",c=0;c<a.length;c++)s+=("0"+a.charCodeAt(c).toString(16)).slice(-2);return s}function Qn(a){return Pe(a)}function Tt(a){return Qn(a).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function pr(a){return Oe(a.replace(/[^0-9A-Za-z\/+=]*/g,""))}function dn(a,s){return"-----BEGIN "+s+"-----\r\n"+Tt(a)+"\r\n-----END "+s+"-----\r\n"}function On(a,s){if(-1==a.indexOf("-----BEGIN "))throw"can't find PEM header: "+s;return pr(a=void 0!==s?(a=a.replace(new RegExp("^[^]*-----BEGIN "+s+"-----"),"")).replace(new RegExp("-----END "+s+"-----[^]*$"),""):(a=a.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Ar(a){var s,c,h,y,R,B,re,q,ne,ae,ue;if(ue=a.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return q=ue[1],s=parseInt(q),2===q.length&&(50<=s&&s<100?s=1900+s:0<=s&&s<50&&(s=2e3+s)),c=parseInt(ue[2])-1,h=parseInt(ue[3]),y=parseInt(ue[4]),R=parseInt(ue[5]),B=parseInt(ue[6]),re=0,""!==(ne=ue[7])&&(ae=(ne.substr(1)+"00").substr(0,3),re=parseInt(ae)),Date.UTC(s,c,h,y,R,B,re);throw"unsupported zulu format: "+a}function pi(a){return~~(Ar(a)/1e3)}function Pn(a){return a.replace(/%/g,"")}function ir(a){return a.replace(/(..)/g,"%$1")}function gi(a){var s="malformed IPv6 address";if(!a.match(/^[0-9A-Fa-f:]+$/))throw s;var c=(a=a.toLowerCase()).split(":").length-1;if(c<2)throw s;var h=":".repeat(7-c+2),y=(a=a.replace("::",h)).split(":");if(8!=y.length)throw s;for(var R=0;R<8;R++)y[R]=("0000"+y[R]).slice(-4);return y.join("")}function Vr(a){if(!a.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var s=(a=a.toLowerCase()).match(/.{1,4}/g),c=0;c<8;c++)s[c]=s[c].replace(/^0+/,""),""==s[c]&&(s[c]="0");var h=(a=":"+s.join(":")+":").match(/:(0:){2,}/g);if(null===h)return a.slice(1,-1);var y="";for(c=0;c<h.length;c++)h[c].length>y.length&&(y=h[c]);return(a=a.replace(y,"::")).slice(1,-1)}function mi(a){var s="malformed hex value";if(!a.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw s;if(8!=a.length)return 32==a.length?Vr(a):a;try{return parseInt(a.substr(0,2),16)+"."+parseInt(a.substr(2,2),16)+"."+parseInt(a.substr(4,2),16)+"."+parseInt(a.substr(6,2),16)}catch(c){throw s}}function Cr(a){for(var s=encodeURIComponent(a),c="",h=0;h<s.length;h++)"%"==s[h]?(c+=s.substr(h,3),h+=2):c=c+"%"+nr(s[h]);return c}function Fn(a){return!(a.length%2!=0||!a.match(/^[0-9a-f]+$/)&&!a.match(/^[0-9A-F]+$/))}function lt(a){return a.length%2==1?"0"+a:a.substr(0,1)>"7"?"00"+a:a}Be.getLblen=function(a,s){if("8"!=a.substr(s+2,1))return 1;var c=parseInt(a.substr(s+3,1));return 0==c?-1:0<c&&c<10?c+1:-2},Be.getL=function(a,s){var c=Be.getLblen(a,s);return c<1?"":a.substr(s+2,2*c)},Be.getVblen=function(a,s){var c;return""==(c=Be.getL(a,s))?-1:("8"===c.substr(0,1)?new ye(c.substr(2),16):new ye(c,16)).intValue()},Be.getVidx=function(a,s){var c=Be.getLblen(a,s);return c<0?c:s+2*(c+1)},Be.getV=function(a,s){var c=Be.getVidx(a,s),h=Be.getVblen(a,s);return a.substr(c,2*h)},Be.getTLV=function(a,s){return a.substr(s,2)+Be.getL(a,s)+Be.getV(a,s)},Be.getTLVblen=function(a,s){return 2+2*Be.getLblen(a,s)+2*Be.getVblen(a,s)},Be.getNextSiblingIdx=function(a,s){return Be.getVidx(a,s)+2*Be.getVblen(a,s)},Be.getChildIdx=function(a,s){var c,h,y,R=Be,B=[];c=R.getVidx(a,s),h=2*R.getVblen(a,s),"03"==a.substr(s,2)&&(c+=2,h-=2),y=0;for(var re=c;y<=h;){var q=R.getTLVblen(a,re);if((y+=q)<=h&&B.push(re),re+=q,y>=h)break}return B},Be.getNthChildIdx=function(a,s,c){return Be.getChildIdx(a,s)[c]},Be.getIdxbyList=function(a,s,c,h){var y,R,B=Be;return 0==c.length?void 0!==h&&a.substr(s,2)!==h?-1:s:(y=c.shift())>=(R=B.getChildIdx(a,s)).length?-1:B.getIdxbyList(a,R[y],c,h)},Be.getIdxbyListEx=function(a,s,c,h){var y,R,B=Be;if(0==c.length)return void 0!==h&&a.substr(s,2)!==h?-1:s;y=c.shift(),R=B.getChildIdx(a,s);for(var re=0,q=0;q<R.length;q++){var ne=a.substr(R[q],2);if("number"==typeof y&&!B.isContextTag(ne)&&re==y||"string"==typeof y&&B.isContextTag(ne,y))return B.getIdxbyListEx(a,R[q],c,h);B.isContextTag(ne)||re++}return-1},Be.getTLVbyList=function(a,s,c,h){var y=Be,R=y.getIdxbyList(a,s,c,h);return-1==R||R>=a.length?null:y.getTLV(a,R)},Be.getTLVbyListEx=function(a,s,c,h){var y=Be,R=y.getIdxbyListEx(a,s,c,h);return-1==R?null:y.getTLV(a,R)},Be.getVbyList=function(a,s,c,h,y){var R,B,re=Be;return-1==(R=re.getIdxbyList(a,s,c,h))||R>=a.length?null:(B=re.getV(a,R),!0===y&&(B=B.substr(2)),B)},Be.getVbyListEx=function(a,s,c,h,y){var R,B,re=Be;return-1==(R=re.getIdxbyListEx(a,s,c,h))?null:(B=re.getV(a,R),"03"==a.substr(R,2)&&!1!==y&&(B=B.substr(2)),B)},Be.getInt=function(a,s,c){null==c&&(c=-1);try{var h=a.substr(s,2);if("02"!=h&&"03"!=h)return c;var y=Be.getV(a,s);return"02"==h?parseInt(y,16):function(B){try{var re=B.substr(0,2);if("00"==re)return parseInt(B.substr(2),16);var q=parseInt(re,16),ne=B.substr(2),ae=parseInt(ne,16).toString(2);return"0"==ae&&(ae="00000000"),ae=ae.slice(0,0-q),parseInt(ae,2)}catch(ue){return-1}}(y)}catch(R){return c}},Be.getOID=function(a,s,c){null==c&&(c=null);try{return"06"!=a.substr(s,2)?c:function(y){if(!Fn(y))return null;try{var R=[],B=y.substr(0,2),re=parseInt(B,16);R[0]=new String(Math.floor(re/40)),R[1]=new String(re%40);for(var q=y.substr(2),ne=[],ae=0;ae<q.length/2;ae++)ne.push(parseInt(q.substr(2*ae,2),16));var ue=[],le="";for(ae=0;ae<ne.length;ae++)128&ne[ae]?le+=Br((127&ne[ae]).toString(2),7):(le+=Br((127&ne[ae]).toString(2),7),ue.push(new String(parseInt(le,2))),le="");var x=R.join(".");return ue.length>0&&(x=x+"."+ue.join(".")),x}catch(U){return null}}(Be.getV(a,s))}catch(h){return c}},Be.getOIDName=function(a,s,c){null==c&&(c=null);try{var h=Be.getOID(a,s,c);if(h==c)return c;var y=$.asn1.x509.OID.oid2name(h);return""==y?h:y}catch(R){return c}},Be.getString=function(a,s,c){null==c&&(c=null);try{return ln(Be.getV(a,s))}catch(h){return c}},Be.hextooidstr=function(a){var s=function(le,x){return le.length>=x?le:new Array(x-le.length+1).join("0")+le},c=[],h=a.substr(0,2),y=parseInt(h,16);c[0]=new String(Math.floor(y/40)),c[1]=new String(y%40);for(var R=a.substr(2),B=[],re=0;re<R.length/2;re++)B.push(parseInt(R.substr(2*re,2),16));var q=[],ne="";for(re=0;re<B.length;re++)128&B[re]?ne+=s((127&B[re]).toString(2),7):(ne+=s((127&B[re]).toString(2),7),q.push(new String(parseInt(ne,2))),ne="");var ae=c.join(".");return q.length>0&&(ae=ae+"."+q.join(".")),ae},Be.dump=function(a,s,c,h){var y=Be,R=y.getV,B=y.dump,re=y.getChildIdx,q=a;a instanceof $.asn1.ASN1Object&&(q=a.getEncodedHex());var ne=function(Ne,_t){return Ne.length<=2*_t?Ne:Ne.substr(0,_t)+"..(total "+Ne.length/2+"bytes).."+Ne.substr(Ne.length-_t,_t)};void 0===s&&(s={ommit_long_octet:32}),void 0===c&&(c=0),void 0===h&&(h="");var ae,ue=s.ommit_long_octet;if("01"==(ae=q.substr(c,2)))return"00"==(le=R(q,c))?h+"BOOLEAN FALSE\n":h+"BOOLEAN TRUE\n";if("02"==ae)return h+"INTEGER "+ne(le=R(q,c),ue)+"\n";if("03"==ae){var le=R(q,c);return y.isASN1HEX(le.substr(2))?(x=h+"BITSTRING, encapsulates\n")+B(le.substr(2),s,0,h+"  "):h+"BITSTRING "+ne(le,ue)+"\n"}if("04"==ae)return le=R(q,c),y.isASN1HEX(le)?(x=h+"OCTETSTRING, encapsulates\n",x+=B(le,s,0,h+"  ")):h+"OCTETSTRING "+ne(le,ue)+"\n";if("05"==ae)return h+"NULL\n";if("06"==ae){var U=R(q,c),N=$.asn1.ASN1Util.oidHexToInt(U),X=$.asn1.x509.OID.oid2name(N),I=N.replace(/\./g," ");return""!=X?h+"ObjectIdentifier "+X+" ("+I+")\n":h+"ObjectIdentifier ("+I+")\n"}if("0a"==ae)return h+"ENUMERATED "+parseInt(R(q,c))+"\n";if("0c"==ae)return h+"UTF8String '"+ct(R(q,c))+"'\n";if("13"==ae)return h+"PrintableString '"+ct(R(q,c))+"'\n";if("14"==ae)return h+"TeletexString '"+ct(R(q,c))+"'\n";if("16"==ae)return h+"IA5String '"+ct(R(q,c))+"'\n";if("17"==ae)return h+"UTCTime "+ct(R(q,c))+"\n";if("18"==ae)return h+"GeneralizedTime "+ct(R(q,c))+"\n";if("1a"==ae)return h+"VisualString '"+ct(R(q,c))+"'\n";if("1e"==ae)return h+"BMPString '"+ct(R(q,c))+"'\n";if("30"==ae){if("3000"==q.substr(c,4))return h+"SEQUENCE {}\n";x=h+"SEQUENCE\n";var ee=s;if((2==(Ee=re(q,c)).length||3==Ee.length)&&"06"==q.substr(Ee[0],2)&&"04"==q.substr(Ee[Ee.length-1],2)){X=y.oidname(R(q,Ee[0]));var se=JSON.parse(JSON.stringify(s));se.x509ExtName=X,ee=se}for(var ce=0;ce<Ee.length;ce++)x+=B(q,ee,Ee[ce],h+"  ");return x}if("31"==ae){x=h+"SET\n";var Ee=re(q,c);for(ce=0;ce<Ee.length;ce++)x+=B(q,s,Ee[ce],h+"  ");return x}if(0!=(128&(ae=parseInt(ae,16)))){var x,Fe=31&ae;if(0!=(32&ae)){for(x=h+"["+Fe+"]\n",Ee=re(q,c),ce=0;ce<Ee.length;ce++)x+=B(q,s,Ee[ce],h+"  ");return x}return le=R(q,c),Be.isASN1HEX(le)?(x=h+"["+Fe+"]\n")+B(le,s,0,h+"  "):(("68747470"==le.substr(0,8)||"subjectAltName"===s.x509ExtName&&2==Fe)&&(le=ct(le)),h+"["+Fe+"] "+le+"\n")}return h+"UNKNOWN("+ae+") "+R(q,c)+"\n"},Be.isContextTag=function(a,s){var c,h;a=a.toLowerCase();try{c=parseInt(a,16)}catch(y){return-1}if(void 0===s)return 128==(192&c);try{return null!=s.match(/^\[[0-9]+\]$/)&&!((h=parseInt(s.substr(1,s.length-1),10))>31)&&128==(192&c)&&(31&c)==h}catch(y){return!1}},Be.isASN1HEX=function(a){var s=Be;if(a.length%2==1)return!1;var c=s.getVblen(a,0),h=a.substr(0,2),y=s.getL(a,0);return a.length-h.length-y.length==2*c},Be.checkStrictDER=function(a,s,c,h,y){var R=Be;if(void 0===c){if("string"!=typeof a)throw new Error("not hex string");if(a=a.toLowerCase(),!$.lang.String.isHex(a))throw new Error("not hex string");c=a.length,y=(h=a.length/2)<128?1:Math.ceil(h.toString(16))+1}if(R.getL(a,s).length>2*y)throw new Error("L of TLV too long: idx="+s);var B=R.getVblen(a,s);if(B>h)throw new Error("value of L too long than hex: idx="+s);var re=R.getTLV(a,s),q=re.length-2-R.getL(a,s).length;if(q!==2*B)throw new Error("V string length and L's value not the same:"+q+"/"+2*B);if(0===s&&a.length!=re.length)throw new Error("total length and TLV length unmatch:"+a.length+"!="+re.length);var ne=a.substr(s,2);if("02"===ne){var ae=R.getVidx(a,s);if("00"==a.substr(ae,2)&&a.charCodeAt(ae+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(ne,16)){for(var ue=R.getVblen(a,s),le=0,x=R.getChildIdx(a,s),U=0;U<x.length;U++)le+=R.getTLV(a,x[U]).length,R.checkStrictDER(a,x[U],c,h,y);if(2*ue!=le)throw new Error("sum of children's TLV length and L unmatch: "+2*ue+"!="+le)}},Be.oidname=function(a){var s=$.asn1;$.lang.String.isHex(a)&&(a=s.ASN1Util.oidHexToInt(a));var c=s.x509.OID.oid2name(a);return""===c&&(c=a),c},void 0!==$&&$||(P.KJUR=$={}),void 0!==$.lang&&$.lang||($.lang={}),$.lang.String=function(){},"function"==typeof m?(P.utf8tob64u=nt=function(s){return yt(m.from(s,"utf8").toString("base64"))},P.b64utoutf8=an=function(s){return m.from(Ir(s),"base64").toString("utf8")}):(P.utf8tob64u=nt=function(s){return ut(Pn(Cr(s)))},P.b64utoutf8=an=function(s){return decodeURIComponent(ir(Vt(s)))}),$.lang.String.isInteger=function(a){return!!a.match(/^[0-9]+$/)||!!a.match(/^-[0-9]+$/)},$.lang.String.isHex=function(a){return Fn(a)},$.lang.String.isBase64=function(a){return!(!(a=a.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||a.length%4!=0)},$.lang.String.isBase64URL=function(a){return!a.match(/[+/=]/)&&(a=Ir(a),$.lang.String.isBase64(a))},$.lang.String.isIntegerArray=function(a){return!!(a=a.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},$.lang.String.isPrintable=function(a){return null!==a.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},$.lang.String.isIA5=function(a){return null!==a.match(/^[\x20-\x21\x23-\x7f]*$/)},$.lang.String.isMail=function(a){return null!==a.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Br=function(s,c,h){return null==h&&(h="0"),s.length>=c?s:new Array(c-s.length+1).join(h)+s};void 0!==$&&$||(P.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:he.algo.MD5,sha1:he.algo.SHA1,sha224:he.algo.SHA224,sha256:he.algo.SHA256,sha384:he.algo.SHA384,sha512:he.algo.SHA512,ripemd160:he.algo.RIPEMD160},this.getDigestInfoHex=function(a,s){if(void 0===this.DIGESTINFOHEAD[s])throw"alg not supported in Util.DIGESTINFOHEAD: "+s;return this.DIGESTINFOHEAD[s]+a},this.getPaddedDigestInfoHex=function(a,s,c){var h=this.getDigestInfoHex(a,s),y=c/4;if(h.length+22>y)throw"key is too short for SigAlg: keylen="+c+","+s;for(var R="0001",B="00"+h,re="",q=y-R.length-B.length,ne=0;ne<q;ne+=2)re+="ff";return R+re+B},this.hashString=function(a,s){return new $.crypto.MessageDigest({alg:s}).digestString(a)},this.hashHex=function(a,s){return new $.crypto.MessageDigest({alg:s}).digestHex(a)},this.sha1=function(a){return this.hashString(a,"sha1")},this.sha256=function(a){return this.hashString(a,"sha256")},this.sha256Hex=function(a){return this.hashHex(a,"sha256")},this.sha512=function(a){return this.hashString(a,"sha512")},this.sha512Hex=function(a){return this.hashHex(a,"sha512")},this.isKey=function(a){return a instanceof Ze||a instanceof $.crypto.DSA||a instanceof $.crypto.ECDSA}},$.crypto.Util.md5=function(a){return new $.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(a)},$.crypto.Util.ripemd160=function(a){return new $.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(a)},$.crypto.Util.SECURERANDOMGEN=new tn,$.crypto.Util.getRandomHexOfNbytes=function(a){var s=new Array(a);return $.crypto.Util.SECURERANDOMGEN.nextBytes(s),Nn(s)},$.crypto.Util.getRandomBigIntegerOfNbytes=function(a){return new ye($.crypto.Util.getRandomHexOfNbytes(a),16)},$.crypto.Util.getRandomHexOfNbits=function(a){var s=a%8,c=new Array((a-s)/8+1);return $.crypto.Util.SECURERANDOMGEN.nextBytes(c),c[0]=(255<<s&255^255)&c[0],Nn(c)},$.crypto.Util.getRandomBigIntegerOfNbits=function(a){return new ye($.crypto.Util.getRandomHexOfNbits(a),16)},$.crypto.Util.getRandomBigIntegerZeroToMax=function(a){for(var s=a.bitLength();;){var c=$.crypto.Util.getRandomBigIntegerOfNbits(s);if(-1!=a.compareTo(c))return c}},$.crypto.Util.getRandomBigIntegerMinToMax=function(a,s){var c=a.compareTo(s);if(1==c)throw"biMin is greater than biMax";if(0==c)return a;var h=s.subtract(a);return $.crypto.Util.getRandomBigIntegerZeroToMax(h).add(a)},$.crypto.MessageDigest=function(a){this.setAlgAndProvider=function(s,c){if(null!==(s=$.crypto.MessageDigest.getCanonicalAlgName(s))&&void 0===c&&(c=$.crypto.Util.DEFAULTPROVIDER[s]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(s)&&"cryptojs"==c){try{this.md=$.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[s].create()}catch(h){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+h}this.updateString=function(h){this.md.update(h)},this.updateHex=function(h){var y=he.enc.Hex.parse(h);this.md.update(y)},this.digest=function(){return this.md.finalize().toString(he.enc.Hex)},this.digestString=function(h){return this.updateString(h),this.digest()},this.digestHex=function(h){return this.updateHex(h),this.digest()}}if(-1!=":sha256:".indexOf(s)&&"sjcl"==c){try{this.md=new sjcl.hash.sha256}catch(h){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+h}this.updateString=function(h){this.md.update(h)},this.updateHex=function(h){var y=sjcl.codec.hex.toBits(h);this.md.update(y)},this.digest=function(){var h=this.md.finalize();return sjcl.codec.hex.fromBits(h)},this.digestString=function(h){return this.updateString(h),this.digest()},this.digestHex=function(h){return this.updateHex(h),this.digest()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==a&&void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov&&(this.provName=$.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},$.crypto.MessageDigest.getCanonicalAlgName=function(a){return"string"==typeof a&&(a=(a=a.toLowerCase()).replace(/-/,"")),a},$.crypto.MessageDigest.getHashLength=function(a){var s=$.crypto.MessageDigest,c=s.getCanonicalAlgName(a);if(void 0===s.HASHLENGTH[c])throw"not supported algorithm: "+a;return s.HASHLENGTH[c]},$.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},$.crypto.Mac=function(a){this.setAlgAndProvider=function(s,c){if(null==(s=s.toLowerCase())&&(s="hmacsha1"),"hmac"!=(s=s.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+s;void 0===c&&(c=$.crypto.Util.DEFAULTPROVIDER[s]),this.algProv=s+"/"+c;var h=s.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(h)&&"cryptojs"==c){try{this.mac=he.algo.HMAC.create($.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[h],this.pass)}catch(R){throw"setAlgAndProvider hash alg set fail hashAlg="+h+"/"+R}this.updateString=function(R){this.mac.update(R)},this.updateHex=function(R){var B=he.enc.Hex.parse(R);this.mac.update(B)},this.doFinal=function(){return this.mac.finalize().toString(he.enc.Hex)},this.doFinalString=function(R){return this.updateString(R),this.doFinal()},this.doFinalHex=function(R){return this.updateHex(R),this.doFinal()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(s){if("string"==typeof s){var c=s;return s.length%2!=1&&s.match(/^[0-9A-Fa-f]+$/)||(c=Rn(s)),void(this.pass=he.enc.Hex.parse(c))}if("object"!=(void 0===s?"undefined":k(s)))throw"KJUR.crypto.Mac unsupported password type: "+s;if(c=null,void 0!==s.hex){if(s.hex.length%2!=0||!s.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+s.hex;c=s.hex}if(void 0!==s.utf8&&(c=rr(s.utf8)),void 0!==s.rstr&&(c=Rn(s.rstr)),void 0!==s.b64&&(c=Oe(s.b64)),void 0!==s.b64u&&(c=Vt(s.b64u)),null==c)throw"KJUR.crypto.Mac unsupported password type: "+s;this.pass=he.enc.Hex.parse(c)},void 0!==a&&(void 0!==a.pass&&this.setPassword(a.pass),void 0!==a.alg&&(this.algName=a.alg,void 0===a.prov&&(this.provName=$.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},$.crypto.Signature=function(a){var s=null;if(this._setAlgNames=function(){var c=this.algName.match(/^(.+)with(.+)$/);c&&(this.mdAlgName=c[1].toLowerCase(),this.pubkeyAlgName=c[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(c,h){for(var y="",R=h/4-c.length,B=0;B<R;B++)y+="0";return y+c},this.setAlgAndProvider=function(c,h){if(this._setAlgNames(),"cryptojs/jsrsa"!=h)throw new Error("provider not supported: "+h);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new $.crypto.MessageDigest({alg:this.mdAlgName})}catch(y){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+y)}this.init=function(y,R){var B=null;try{B=void 0===R?Nt.getKey(y):Nt.getKey(y,R)}catch(re){throw"init failed:"+re}if(!0===B.isPrivate)this.prvKey=B,this.state="SIGN";else{if(!0!==B.isPublic)throw"init failed.:"+B;this.pubKey=B,this.state="VERIFY"}},this.updateString=function(y){this.md.updateString(y)},this.updateHex=function(y){this.md.updateHex(y)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==$.crypto.ECDSA&&(this.prvKey=new $.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Ze&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Ze&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof $.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof $.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(y){return this.updateString(y),this.sign()},this.signHex=function(y){return this.updateHex(y),this.sign()},this.verify=function(y){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==$.crypto.ECDSA&&(this.pubKey=new $.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Ze&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,y,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Ze&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);if(void 0!==$.crypto.ECDSA&&this.pubKey instanceof $.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);if(void 0!==$.crypto.DSA&&this.pubKey instanceof $.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(c,h){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(c){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(c){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(c){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(c){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=a,void 0!==a&&(void 0!==a.alg&&(this.algName=a.alg,this.provName=void 0===a.prov?$.crypto.Util.DEFAULTPROVIDER[this.algName]:a.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==a.psssaltlen&&(this.pssSaltLen=a.psssaltlen),void 0!==a.prvkeypem)){if(void 0!==a.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{s=Nt.getKey(a.prvkeypem),this.init(s)}catch(c){throw"fatal error to load pem private key: "+c}}},$.crypto.Cipher=function(a){},$.crypto.Cipher.encrypt=function(a,s,c){if(s instanceof Ze&&s.isPublic){var h=$.crypto.Cipher.getAlgByKeyAndName(s,c);if("RSA"===h)return s.encrypt(a);if("RSAOAEP"===h)return s.encryptOAEP(a,"sha1");var y=h.match(/^RSAOAEP(\d+)$/);if(null!==y)return s.encryptOAEP(a,"sha"+y[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.encrypt: unsupported key or algorithm"},$.crypto.Cipher.decrypt=function(a,s,c){if(s instanceof Ze&&s.isPrivate){var h=$.crypto.Cipher.getAlgByKeyAndName(s,c);if("RSA"===h)return s.decrypt(a);if("RSAOAEP"===h)return s.decryptOAEP(a,"sha1");var y=h.match(/^RSAOAEP(\d+)$/);if(null!==y)return s.decryptOAEP(a,"sha"+y[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+c}throw"Cipher.decrypt: unsupported key or algorithm"},$.crypto.Cipher.getAlgByKeyAndName=function(a,s){if(a instanceof Ze){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(s))return s;if(null==s)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+s}throw"getAlgByKeyAndName: not supported algorithm name: "+s},$.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==$&&$||(P.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.ECDSA=function(a){var s=Error,c=ye,h=vt,y=$.crypto.ECDSA,R=$.crypto.ECParameterDB,B=y.getName,q=Be.getVbyListEx,ne=Be.isASN1HEX,ae=new tn;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(ue){return new c(ue.bitLength(),ae).mod(ue.subtract(c.ONE)).add(c.ONE)},this.setNamedCurve=function(ue){this.ecparams=R.getByName(ue),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=ue},this.setPrivateKeyHex=function(ue){this.isPrivate=!0,this.prvKeyHex=ue},this.setPublicKeyHex=function(ue){this.isPublic=!0,this.pubKeyHex=ue},this.getPublicKeyXYHex=function(){var ue=this.pubKeyHex;if("04"!==ue.substr(0,2))throw"this method supports uncompressed format(04) only";var le=this.ecparams.keylen/4;if(ue.length!==2+2*le)throw"malformed public key hex length";var x={};return x.x=ue.substr(2,le),x.y=ue.substr(2+le),x},this.getShortNISTPCurveName=function(){var ue=this.curveName;return"secp256r1"===ue||"NIST P-256"===ue||"P-256"===ue||"prime256v1"===ue?"P-256":"secp384r1"===ue||"NIST P-384"===ue||"P-384"===ue?"P-384":null},this.generateKeyPairHex=function(){var le=this.getBigRandom(this.ecparams.n),x=this.ecparams.G.multiply(le),U=x.getX().toBigInteger(),N=x.getY().toBigInteger(),X=this.ecparams.keylen/4,I=("0000000000"+le.toString(16)).slice(-X),ee="04"+("0000000000"+U.toString(16)).slice(-X)+("0000000000"+N.toString(16)).slice(-X);return this.setPrivateKeyHex(I),this.setPublicKeyHex(ee),{ecprvhex:I,ecpubhex:ee}},this.signWithMessageHash=function(ue){return this.signHex(ue,this.prvKeyHex)},this.signHex=function(ue,le){var x=new c(le,16),U=this.ecparams.n,N=new c(ue.substring(0,this.ecparams.keylen/4),16);do{var X=this.getBigRandom(U),I=this.ecparams.G.multiply(X).getX().toBigInteger().mod(U)}while(I.compareTo(c.ZERO)<=0);var ee=X.modInverse(U).multiply(N.add(x.multiply(I))).mod(U);return y.biRSSigToASN1Sig(I,ee)},this.sign=function(ue,le){var x=le,U=this.ecparams.n,N=c.fromByteArrayUnsigned(ue);do{var X=this.getBigRandom(U),I=this.ecparams.G.multiply(X).getX().toBigInteger().mod(U)}while(I.compareTo(ye.ZERO)<=0);var ee=X.modInverse(U).multiply(N.add(x.multiply(I))).mod(U);return this.serializeSig(I,ee)},this.verifyWithMessageHash=function(ue,le){return this.verifyHex(ue,le,this.pubKeyHex)},this.verifyHex=function(ue,le,x){try{var U,N,X=y.parseSigHex(le);U=X.r,N=X.s;var I=h.decodeFromHex(this.ecparams.curve,x),ee=new c(ue.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(ee,U,N,I)}catch(se){return!1}},this.verify=function(ue,le,x){var U,N,X;if(Bitcoin.Util.isArray(le)){var I=this.parseSig(le);U=I.r,N=I.s}else{if("object"!==(void 0===le?"undefined":k(le))||!le.r||!le.s)throw"Invalid value for signature";U=le.r,N=le.s}if(x instanceof vt)X=x;else{if(!Bitcoin.Util.isArray(x))throw"Invalid format for pubkey value, must be byte array or ECPointFp";X=h.decodeFrom(this.ecparams.curve,x)}var ee=c.fromByteArrayUnsigned(ue);return this.verifyRaw(ee,U,N,X)},this.verifyRaw=function(ue,le,x,U){var N=this.ecparams.n,X=this.ecparams.G;if(le.compareTo(c.ONE)<0||le.compareTo(N)>=0||x.compareTo(c.ONE)<0||x.compareTo(N)>=0)return!1;var I=x.modInverse(N),ee=ue.multiply(I).mod(N),se=le.multiply(I).mod(N);return X.multiply(ee).add(U.multiply(se)).getX().toBigInteger().mod(N).equals(le)},this.serializeSig=function(ue,le){var x=ue.toByteArraySigned(),U=le.toByteArraySigned(),N=[];return N.push(2),N.push(x.length),(N=N.concat(x)).push(2),N.push(U.length),(N=N.concat(U)).unshift(N.length),N.unshift(48),N},this.parseSig=function(ue){var le;if(48!=ue[0])throw new Error("Signature not a valid DERSequence");if(2!=ue[le=2])throw new Error("First element in signature must be a DERInteger");var x=ue.slice(le+2,le+2+ue[le+1]);if(2!=ue[le+=2+ue[le+1]])throw new Error("Second element in signature must be a DERInteger");var U=ue.slice(le+2,le+2+ue[le+1]);return le+=2+ue[le+1],{r:c.fromByteArrayUnsigned(x),s:c.fromByteArrayUnsigned(U)}},this.parseSigCompact=function(ue){if(65!==ue.length)throw"Signature has the wrong length";var le=ue[0]-27;if(le<0||le>7)throw"Invalid signature type";var x=this.ecparams.n;return{r:c.fromByteArrayUnsigned(ue.slice(1,33)).mod(x),s:c.fromByteArrayUnsigned(ue.slice(33,65)).mod(x),i:le}},this.readPKCS5PrvKeyHex=function(ue){if(!1===ne(ue))throw new Error("not ASN.1 hex string");var le,x,U;try{le=q(ue,0,["[0]",0],"06"),x=q(ue,0,[1],"04");try{U=q(ue,0,["[1]",0],"03")}catch(N){}}catch(N){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=B(le),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(U),this.setPrivateKeyHex(x),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(ue){if(!1===ne(ue))throw new s("not ASN.1 hex string");var le,x,U;try{q(ue,0,[1,0],"06"),le=q(ue,0,[1,1],"06"),x=q(ue,0,[2,0,1],"04");try{U=q(ue,0,[2,0,"[1]",0],"03")}catch(N){}}catch(N){throw new s("malformed PKCS#8 plain ECC private key")}if(this.curveName=B(le),void 0===this.curveName)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(U),this.setPrivateKeyHex(x),this.isPublic=!1},this.readPKCS8PubKeyHex=function(ue){if(!1===ne(ue))throw new s("not ASN.1 hex string");var le,x;try{q(ue,0,[0,0],"06"),le=q(ue,0,[0,1],"06"),x=q(ue,0,[1],"03")}catch(U){throw new s("malformed PKCS#8 ECC public key")}if(this.curveName=B(le),null===this.curveName)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(x)},this.readCertPubKeyHex=function(ue,le){if(!1===ne(ue))throw new s("not ASN.1 hex string");var x,U;try{x=q(ue,0,[0,5,0,1],"06"),U=q(ue,0,[0,5,1],"03")}catch(N){throw new s("malformed X.509 certificate ECC public key")}if(this.curveName=B(x),null===this.curveName)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(U)},void 0!==a&&void 0!==a.curve&&(this.curveName=a.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==a&&(void 0!==a.prv&&this.setPrivateKeyHex(a.prv),void 0!==a.pub&&this.setPublicKeyHex(a.pub))},$.crypto.ECDSA.parseSigHex=function(a){var s=$.crypto.ECDSA.parseSigHexInHexRS(a);return{r:new ye(s.r,16),s:new ye(s.s,16)}},$.crypto.ECDSA.parseSigHexInHexRS=function(a){var c=Be.getChildIdx,h=Be.getV;if(Be.checkStrictDER(a,0),"30"!=a.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var y=c(a,0);if(2!=y.length)throw new Error("signature shall have two elements");var R=y[0],B=y[1];if("02"!=a.substr(R,2))throw new Error("1st item not ASN.1 integer");if("02"!=a.substr(B,2))throw new Error("2nd item not ASN.1 integer");return{r:h(a,R),s:h(a,B)}},$.crypto.ECDSA.asn1SigToConcatSig=function(a){var s=$.crypto.ECDSA.parseSigHexInHexRS(a),c=s.r,h=s.s;if("00"==c.substr(0,2)&&c.length%32==2&&(c=c.substr(2)),"00"==h.substr(0,2)&&h.length%32==2&&(h=h.substr(2)),c.length%32==30&&(c="00"+c),h.length%32==30&&(h="00"+h),c.length%32!=0)throw"unknown ECDSA sig r length error";if(h.length%32!=0)throw"unknown ECDSA sig s length error";return c+h},$.crypto.ECDSA.concatSigToASN1Sig=function(a){if(a.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var s=a.substr(0,a.length/2),c=a.substr(a.length/2);return $.crypto.ECDSA.hexRSSigToASN1Sig(s,c)},$.crypto.ECDSA.hexRSSigToASN1Sig=function(a,s){var c=new ye(a,16),h=new ye(s,16);return $.crypto.ECDSA.biRSSigToASN1Sig(c,h)},$.crypto.ECDSA.biRSSigToASN1Sig=function(a,s){var c=$.asn1,h=new c.DERInteger({bigint:a}),y=new c.DERInteger({bigint:s});return new c.DERSequence({array:[h,y]}).getEncodedHex()},$.crypto.ECDSA.getName=function(a){return"2b8104001f"===a?"secp192k1":"2a8648ce3d030107"===a?"secp256r1":"2b8104000a"===a?"secp256k1":"2b81040021"===a?"secp224r1":"2b81040022"===a?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(a)?"secp256r1":-1!=="|secp256k1|".indexOf(a)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(a)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(a)?"secp384r1":null},void 0!==$&&$||(P.KJUR=$={}),void 0!==$.crypto&&$.crypto||($.crypto={}),$.crypto.ECParameterDB=new function(){var a={},s={};function c(h){return new ye(h,16)}this.getByName=function(h){var y=h;if(void 0!==s[y]&&(y=s[h]),void 0!==a[y])return a[y];throw"unregistered EC curve name: "+y},this.regist=function(h,y,R,B,re,q,ne,ae,ue,le,x,U){a[h]={};var N=c(R),X=c(B),I=c(re),ee=c(q),se=c(ne),ce=new Je(N,X,I),Ee=ce.decodePointHex("04"+ae+ue);a[h].name=h,a[h].keylen=y,a[h].curve=ce,a[h].G=Ee,a[h].n=ee,a[h].h=se,a[h].oid=x,a[h].info=U;for(var Fe=0;Fe<le.length;Fe++)s[le[Fe]]=h}},$.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),$.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),$.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),$.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),$.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),$.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),$.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),$.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),$.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),$.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Nt=function(){var a=function(ne,ae,ue){return s(he.AES,ne,ae,ue)},s=function(ne,ae,ue,le){var x=he.enc.Hex.parse(ae),U=he.enc.Hex.parse(ue),N=he.enc.Hex.parse(le),X={};X.key=U,X.iv=N,X.ciphertext=x;var I=ne.decrypt(X,U,{iv:N});return he.enc.Hex.stringify(I)},c=function(ne,ae,ue){return h(he.AES,ne,ae,ue)},h=function(ne,ae,ue,le){var x=he.enc.Hex.parse(ae),U=he.enc.Hex.parse(ue),N=he.enc.Hex.parse(le),X=ne.encrypt(x,U,{iv:N}),I=he.enc.Hex.parse(X.toString());return he.enc.Base64.stringify(I)},y={"AES-256-CBC":{proc:a,eproc:c,keylen:32,ivlen:16},"AES-192-CBC":{proc:a,eproc:c,keylen:24,ivlen:16},"AES-128-CBC":{proc:a,eproc:c,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ne,ae,ue){return s(he.TripleDES,ne,ae,ue)},eproc:function(ne,ae,ue){return h(he.TripleDES,ne,ae,ue)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ne,ae,ue){return s(he.DES,ne,ae,ue)},eproc:function(ne,ae,ue){return h(he.DES,ne,ae,ue)},keylen:8,ivlen:8}},R=function(ne){var ae={},ue=ne.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ue&&(ae.cipher=ue[1],ae.ivsalt=ue[2]);var le=ne.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));le&&(ae.type=le[1]);var x=-1,U=0;-1!=ne.indexOf("\r\n\r\n")&&(x=ne.indexOf("\r\n\r\n"),U=2),-1!=ne.indexOf("\n\n")&&(x=ne.indexOf("\n\n"),U=1);var N=ne.indexOf("-----END");if(-1!=x&&-1!=N){var X=ne.substring(x+2*U,N-U);X=X.replace(/\s+/g,""),ae.data=X}return ae},B=function(ne,ae,ue){for(var le=ue.substring(0,16),x=he.enc.Hex.parse(le),U=he.enc.Utf8.parse(ae),N=y[ne].keylen+y[ne].ivlen,X="",I=null;;){var ee=he.algo.MD5.create();if(null!=I&&ee.update(I),ee.update(U),ee.update(x),I=ee.finalize(),(X+=he.enc.Hex.stringify(I)).length>=2*N)break}var se={};return se.keyhex=X.substr(0,2*y[ne].keylen),se.ivhex=X.substr(2*y[ne].keylen,2*y[ne].ivlen),se},re=function(ne,ae,ue,le){var x=he.enc.Base64.parse(ne),U=he.enc.Hex.stringify(x);return(0,y[ae].proc)(U,ue,le)};return{version:"1.0.0",parsePKCS5PEM:function(ne){return R(ne)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ne,ae,ue){return B(ne,ae,ue)},decryptKeyB64:function(ne,ae,ue,le){return re(ne,ae,ue,le)},getDecryptedKeyHex:function(ne,ae){var ue=R(ne),le=ue.cipher,x=ue.ivsalt,U=ue.data,N=B(le,ae,x).keyhex;return re(U,le,N,x)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ne,ae,ue,le,x){var I,ee,U="";if(void 0!==le&&null!=le||(le="AES-256-CBC"),void 0===y[le])throw"KEYUTIL unsupported algorithm: "+le;return void 0!==x&&null!=x||(x=(I=y[le].ivlen,ee=he.lib.WordArray.random(I),he.enc.Hex.stringify(ee)).toUpperCase()),U="-----BEGIN "+ne+" PRIVATE KEY-----\r\n",U+="Proc-Type: 4,ENCRYPTED\r\n",U+="DEK-Info: "+le+","+x+"\r\n",U+="\r\n",(U+=function(I,ee,se,ce){return(0,y[ee].eproc)(I,se,ce)}(ae,le,B(le,ue,x).keyhex,x).replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+ne+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(ne){var ue=Be.getChildIdx,le=Be.getV,x={},U=ue(ne,0);if(2!=U.length)throw"malformed format: SEQUENCE(0).items != 2: "+U.length;x.ciphertext=le(ne,U[1]);var N=ue(ne,U[0]);if(2!=N.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+N.length;if("2a864886f70d01050d"!=le(ne,N[0]))throw"this only supports pkcs5PBES2";var X=ue(ne,N[1]);if(2!=N.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+X.length;var I=ue(ne,X[1]);if(2!=I.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+I.length;if("2a864886f70d0307"!=le(ne,I[0]))throw"this only supports TripleDES";x.encryptionSchemeAlg="TripleDES",x.encryptionSchemeIV=le(ne,I[1]);var ee=ue(ne,X[0]);if(2!=ee.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+ee.length;if("2a864886f70d01050c"!=le(ne,ee[0]))throw"this only supports pkcs5PBKDF2";var se=ue(ne,ee[1]);if(se.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+se.length;x.pbkdf2Salt=le(ne,se[0]);var ce=le(ne,se[1]);try{x.pbkdf2Iter=parseInt(ce,16)}catch(Ee){throw"malformed format pbkdf2Iter: "+ce}return x},getPBKDF2KeyHexFromParam:function(ne,ae){var ue=he.enc.Hex.parse(ne.pbkdf2Salt),x=he.PBKDF2(ae,ue,{keySize:6,iterations:ne.pbkdf2Iter});return he.enc.Hex.stringify(x)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ne,ae){var ue=On(ne,"ENCRYPTED PRIVATE KEY"),le=this.parseHexOfEncryptedPKCS8(ue),x=Nt.getPBKDF2KeyHexFromParam(le,ae),U={};U.ciphertext=he.enc.Hex.parse(le.ciphertext);var N=he.enc.Hex.parse(x),X=he.enc.Hex.parse(le.encryptionSchemeIV),I=he.TripleDES.decrypt(U,N,{iv:X});return he.enc.Hex.stringify(I)},getKeyFromEncryptedPKCS8PEM:function(ne,ae){var ue=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ne,ae);return this.getKeyFromPlainPrivatePKCS8Hex(ue)},parsePlainPrivatePKCS8Hex:function(ne){var ae=Be,ue=ae.getChildIdx,le=ae.getV,x={algparam:null};if("30"!=ne.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var U=ue(ne,0);if(3!=U.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=ne.substr(U[1],2))throw"malformed PKCS8 private key(code:003)";var N=ue(ne,U[1]);if(2!=N.length)throw"malformed PKCS8 private key(code:004)";if("06"!=ne.substr(N[0],2))throw"malformed PKCS8 private key(code:005)";if(x.algoid=le(ne,N[0]),"06"==ne.substr(N[1],2)&&(x.algparam=le(ne,N[1])),"04"!=ne.substr(U[2],2))throw"malformed PKCS8 private key(code:006)";return x.keyidx=ae.getVidx(ne,U[2]),x},getKeyFromPlainPrivatePKCS8PEM:function(ne){var ae=On(ne,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(ae)},getKeyFromPlainPrivatePKCS8Hex:function(ne){var ae,ue=this.parsePlainPrivatePKCS8Hex(ne);if("2a864886f70d010101"==ue.algoid)ae=new Ze;else if("2a8648ce380401"==ue.algoid)ae=new $.crypto.DSA;else{if("2a8648ce3d0201"!=ue.algoid)throw"unsupported private key algorithm";ae=new $.crypto.ECDSA}return ae.readPKCS8PrvKeyHex(ne),ae},_getKeyFromPublicPKCS8Hex:function(ne){var ae,ue=Be.getVbyList(ne,0,[0,0],"06");if("2a864886f70d010101"===ue)ae=new Ze;else if("2a8648ce380401"===ue)ae=new $.crypto.DSA;else{if("2a8648ce3d0201"!==ue)throw"unsupported PKCS#8 public key hex";ae=new $.crypto.ECDSA}return ae.readPKCS8PubKeyHex(ne),ae},parsePublicRawRSAKeyHex:function(ne){var ue=Be.getChildIdx,le=Be.getV,x={};if("30"!=ne.substr(0,2))throw"malformed RSA key(code:001)";var U=ue(ne,0);if(2!=U.length)throw"malformed RSA key(code:002)";if("02"!=ne.substr(U[0],2))throw"malformed RSA key(code:003)";if(x.n=le(ne,U[0]),"02"!=ne.substr(U[1],2))throw"malformed RSA key(code:004)";return x.e=le(ne,U[1]),x},parsePublicPKCS8Hex:function(ne){var ae=Be,ue=ae.getChildIdx,le=ae.getV,x={algparam:null},U=ue(ne,0);if(2!=U.length)throw"outer DERSequence shall have 2 elements: "+U.length;var N=U[0];if("30"!=ne.substr(N,2))throw"malformed PKCS8 public key(code:001)";var X=ue(ne,N);if(2!=X.length)throw"malformed PKCS8 public key(code:002)";if("06"!=ne.substr(X[0],2))throw"malformed PKCS8 public key(code:003)";if(x.algoid=le(ne,X[0]),"06"==ne.substr(X[1],2)?x.algparam=le(ne,X[1]):"30"==ne.substr(X[1],2)&&(x.algparam={},x.algparam.p=ae.getVbyList(ne,X[1],[0],"02"),x.algparam.q=ae.getVbyList(ne,X[1],[1],"02"),x.algparam.g=ae.getVbyList(ne,X[1],[2],"02")),"03"!=ne.substr(U[1],2))throw"malformed PKCS8 public key(code:004)";return x.key=le(ne,U[1]).substr(2),x}}}();Nt.getKey=function(a,s,c){var zt,h=(X=Be).getChildIdx,y=X.getVbyList,R=$.crypto,B=R.ECDSA,re=R.DSA,q=Ze,ne=On,ae=Nt;if(void 0!==q&&a instanceof q||void 0!==B&&a instanceof B||void 0!==re&&a instanceof re)return a;if(void 0!==a.curve&&void 0!==a.xy&&void 0===a.d)return new B({pub:a.xy,curve:a.curve});if(void 0!==a.curve&&void 0!==a.d)return new B({prv:a.d,curve:a.curve});if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0===a.d)return(Qe=new q).setPublic(a.n,a.e),Qe;if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0!==a.p&&void 0!==a.q&&void 0!==a.dp&&void 0!==a.dq&&void 0!==a.co&&void 0===a.qi)return(Qe=new q).setPrivateEx(a.n,a.e,a.d,a.p,a.q,a.dp,a.dq,a.co),Qe;if(void 0===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0===a.p)return(Qe=new q).setPrivate(a.n,a.e,a.d),Qe;if(void 0!==a.p&&void 0!==a.q&&void 0!==a.g&&void 0!==a.y&&void 0===a.x)return(Qe=new re).setPublic(a.p,a.q,a.g,a.y),Qe;if(void 0!==a.p&&void 0!==a.q&&void 0!==a.g&&void 0!==a.y&&void 0!==a.x)return(Qe=new re).setPrivate(a.p,a.q,a.g,a.y,a.x),Qe;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0===a.d)return(Qe=new q).setPublic(Vt(a.n),Vt(a.e)),Qe;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d&&void 0!==a.p&&void 0!==a.q&&void 0!==a.dp&&void 0!==a.dq&&void 0!==a.qi)return(Qe=new q).setPrivateEx(Vt(a.n),Vt(a.e),Vt(a.d),Vt(a.p),Vt(a.q),Vt(a.dp),Vt(a.dq),Vt(a.qi)),Qe;if("RSA"===a.kty&&void 0!==a.n&&void 0!==a.e&&void 0!==a.d)return(Qe=new q).setPrivate(Vt(a.n),Vt(a.e),Vt(a.d)),Qe;if("EC"===a.kty&&void 0!==a.crv&&void 0!==a.x&&void 0!==a.y&&void 0===a.d){var ue=(qe=new B({curve:a.crv})).ecparams.keylen/4,le="04"+("0000000000"+Vt(a.x)).slice(-ue)+("0000000000"+Vt(a.y)).slice(-ue);return qe.setPublicKeyHex(le),qe}if("EC"===a.kty&&void 0!==a.crv&&void 0!==a.x&&void 0!==a.y&&void 0!==a.d){ue=(qe=new B({curve:a.crv})).ecparams.keylen/4,le="04"+("0000000000"+Vt(a.x)).slice(-ue)+("0000000000"+Vt(a.y)).slice(-ue);var x=("0000000000"+Vt(a.d)).slice(-ue);return qe.setPublicKeyHex(le),qe.setPrivateKeyHex(x),qe}if("pkcs5prv"===c){var U,N=a,X=Be;if(9===(U=h(N,0)).length)(Qe=new q).readPKCS5PrvKeyHex(N);else if(6===U.length)(Qe=new re).readPKCS5PrvKeyHex(N);else{if(!(U.length>2&&"04"===N.substr(U[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(Qe=new B).readPKCS5PrvKeyHex(N)}return Qe}if("pkcs8prv"===c)return ae.getKeyFromPlainPrivatePKCS8Hex(a);if("pkcs8pub"===c)return ae._getKeyFromPublicPKCS8Hex(a);if("x509pub"===c)return jt.getPublicKeyFromCertHex(a);if(-1!=a.indexOf("-END CERTIFICATE-",0)||-1!=a.indexOf("-END X509 CERTIFICATE-",0)||-1!=a.indexOf("-END TRUSTED CERTIFICATE-",0))return jt.getPublicKeyFromCertPEM(a);if(-1!=a.indexOf("-END PUBLIC KEY-")){var I=On(a,"PUBLIC KEY");return ae._getKeyFromPublicPKCS8Hex(I)}if(-1!=a.indexOf("-END RSA PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED")){var ee=ne(a,"RSA PRIVATE KEY");return ae.getKey(ee,null,"pkcs5prv")}if(-1!=a.indexOf("-END DSA PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED")){var se=y(zt=ne(a,"DSA PRIVATE KEY"),0,[1],"02"),ce=y(zt,0,[2],"02"),Ee=y(zt,0,[3],"02"),Fe=y(zt,0,[4],"02"),$e=y(zt,0,[5],"02");return(Qe=new re).setPrivate(new ye(se,16),new ye(ce,16),new ye(Ee,16),new ye(Fe,16),new ye($e,16)),Qe}if(-1!=a.indexOf("-END EC PRIVATE KEY-")&&-1==a.indexOf("4,ENCRYPTED"))return ee=ne(a,"EC PRIVATE KEY"),ae.getKey(ee,null,"pkcs5prv");if(-1!=a.indexOf("-END PRIVATE KEY-"))return ae.getKeyFromPlainPrivatePKCS8PEM(a);if(-1!=a.indexOf("-END RSA PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){var Ne=ae.getDecryptedKeyHex(a,s),_t=new Ze;return _t.readPKCS5PrvKeyHex(Ne),_t}if(-1!=a.indexOf("-END EC PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED")){var qe,Qe=y(zt=ae.getDecryptedKeyHex(a,s),0,[1],"04"),Ct=y(zt,0,[2,0],"06"),Wt=y(zt,0,[3,0],"03").substr(2);if(void 0===$.crypto.OID.oidhex2name[Ct])throw"undefined OID(hex) in KJUR.crypto.OID: "+Ct;return(qe=new B({curve:$.crypto.OID.oidhex2name[Ct]})).setPublicKeyHex(Wt),qe.setPrivateKeyHex(Qe),qe.isPublic=!1,qe}if(-1!=a.indexOf("-END DSA PRIVATE KEY-")&&-1!=a.indexOf("4,ENCRYPTED"))return se=y(zt=ae.getDecryptedKeyHex(a,s),0,[1],"02"),ce=y(zt,0,[2],"02"),Ee=y(zt,0,[3],"02"),Fe=y(zt,0,[4],"02"),$e=y(zt,0,[5],"02"),(Qe=new re).setPrivate(new ye(se,16),new ye(ce,16),new ye(Ee,16),new ye(Fe,16),new ye($e,16)),Qe;if(-1!=a.indexOf("-END ENCRYPTED PRIVATE KEY-"))return ae.getKeyFromEncryptedPKCS8PEM(a,s);throw new Error("not supported argument")},Nt.generateKeypair=function(a,s){if("RSA"==a){var c=s;(B=new Ze).generate(c,"10001"),B.isPrivate=!0,B.isPublic=!0;var h=new Ze,y=B.n.toString(16),R=B.e.toString(16);return h.setPublic(y,R),h.isPrivate=!1,h.isPublic=!0,(re={}).prvKeyObj=B,re.pubKeyObj=h,re}if("EC"==a){var B,re,q=s,ne=new $.crypto.ECDSA({curve:q}).generateKeyPairHex();return(B=new $.crypto.ECDSA({curve:q})).setPublicKeyHex(ne.ecpubhex),B.setPrivateKeyHex(ne.ecprvhex),B.isPrivate=!0,B.isPublic=!1,(h=new $.crypto.ECDSA({curve:q})).setPublicKeyHex(ne.ecpubhex),h.isPrivate=!1,h.isPublic=!0,(re={}).prvKeyObj=B,re.pubKeyObj=h,re}throw"unknown algorithm: "+a},Nt.getPEM=function(a,s,c,h,y,R){var re=$.asn1,q=re.DERObjectIdentifier,ne=re.DERInteger,ae=re.ASN1Util.newObject,le=$.crypto,x=le.DSA,U=le.ECDSA,N=Ze;function X(qe){return ae({seq:[{int:0},{int:{bigint:qe.n}},{int:qe.e},{int:{bigint:qe.d}},{int:{bigint:qe.p}},{int:{bigint:qe.q}},{int:{bigint:qe.dmp1}},{int:{bigint:qe.dmq1}},{int:{bigint:qe.coeff}}]})}function I(qe){return ae({seq:[{int:1},{octstr:{hex:qe.prvKeyHex}},{tag:["a0",!0,{oid:{name:qe.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+qe.pubKeyHex}}]}]})}function ee(qe){return ae({seq:[{int:0},{int:{bigint:qe.p}},{int:{bigint:qe.q}},{int:{bigint:qe.g}},{int:{bigint:qe.y}},{int:{bigint:qe.x}}]})}if((void 0!==N&&a instanceof N||void 0!==x&&a instanceof x||void 0!==U&&a instanceof U)&&1==a.isPublic&&(void 0===s||"PKCS8PUB"==s))return dn(Fe=new(0,re.x509.SubjectPublicKeyInfo)(a).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==s&&void 0!==N&&a instanceof N&&(void 0===c||null==c)&&1==a.isPrivate)return dn(Fe=X(a).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==s&&void 0!==U&&a instanceof U&&(void 0===c||null==c)&&1==a.isPrivate){var se=new q({name:a.curveName}).getEncodedHex(),ce=I(a).getEncodedHex(),Ee="";return(Ee+=dn(se,"EC PARAMETERS"))+dn(ce,"EC PRIVATE KEY")}if("PKCS1PRV"==s&&void 0!==x&&a instanceof x&&(void 0===c||null==c)&&1==a.isPrivate)return dn(Fe=ee(a).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==s&&void 0!==N&&a instanceof N&&void 0!==c&&null!=c&&1==a.isPrivate){var Fe=X(a).getEncodedHex();return void 0===h&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Fe,c,h,R)}if("PKCS5PRV"==s&&void 0!==U&&a instanceof U&&void 0!==c&&null!=c&&1==a.isPrivate)return Fe=I(a).getEncodedHex(),void 0===h&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Fe,c,h,R);if("PKCS5PRV"==s&&void 0!==x&&a instanceof x&&void 0!==c&&null!=c&&1==a.isPrivate)return Fe=ee(a).getEncodedHex(),void 0===h&&(h="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Fe,c,h,R);var $e=function(Qe,Ct){var Wt=Ne(Qe,Ct);return new ae({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Wt.pbkdf2Salt}},{int:Wt.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Wt.encryptionSchemeIV}}]}]}]},{octstr:{hex:Wt.ciphertext}}]}).getEncodedHex()},Ne=function(Qe,Ct){var Wt=he.lib.WordArray.random(8),zt=he.lib.WordArray.random(8),jn=he.PBKDF2(Ct,Wt,{keySize:6,iterations:100}),xn=he.enc.Hex.parse(Qe),Un=he.TripleDES.encrypt(xn,jn,{iv:zt})+"",rn={};return rn.ciphertext=Un,rn.pbkdf2Salt=he.enc.Hex.stringify(Wt),rn.pbkdf2Iter=100,rn.encryptionSchemeAlg="DES-EDE3-CBC",rn.encryptionSchemeIV=he.enc.Hex.stringify(zt),rn};if("PKCS8PRV"==s&&null!=N&&a instanceof N&&1==a.isPrivate){var _t=X(a).getEncodedHex();return Fe=ae({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:_t}}]}).getEncodedHex(),void 0===c||null==c?dn(Fe,"PRIVATE KEY"):dn(ce=$e(Fe,c),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==s&&void 0!==U&&a instanceof U&&1==a.isPrivate)return _t=new ae({seq:[{int:1},{octstr:{hex:a.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+a.pubKeyHex}}]}]}).getEncodedHex(),Fe=ae({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:a.curveName}}]},{octstr:{hex:_t}}]}).getEncodedHex(),void 0===c||null==c?dn(Fe,"PRIVATE KEY"):dn(ce=$e(Fe,c),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==s&&void 0!==x&&a instanceof x&&1==a.isPrivate)return _t=new ne({bigint:a.x}).getEncodedHex(),Fe=ae({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:a.p}},{int:{bigint:a.q}},{int:{bigint:a.g}}]}]},{octstr:{hex:_t}}]}).getEncodedHex(),void 0===c||null==c?dn(Fe,"PRIVATE KEY"):dn(ce=$e(Fe,c),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Nt.getKeyFromCSRPEM=function(a){var s=On(a,"CERTIFICATE REQUEST");return Nt.getKeyFromCSRHex(s)},Nt.getKeyFromCSRHex=function(a){var s=Nt.parseCSRHex(a);return Nt.getKey(s.p8pubkeyhex,null,"pkcs8pub")},Nt.parseCSRHex=function(a){var c=Be.getChildIdx,h=Be.getTLV,y={},R=a;if("30"!=R.substr(0,2))throw"malformed CSR(code:001)";var B=c(R,0);if(B.length<1)throw"malformed CSR(code:002)";if("30"!=R.substr(B[0],2))throw"malformed CSR(code:003)";var re=c(R,B[0]);if(re.length<3)throw"malformed CSR(code:004)";return y.p8pubkeyhex=h(R,re[2]),y},Nt.getKeyID=function(a){var s=Nt,c=Be;"string"==typeof a&&-1!=a.indexOf("BEGIN ")&&(a=s.getKey(a));var h=On(s.getPEM(a)),y=c.getIdxbyList(h,0,[1]),R=c.getV(h,y).substring(2);return $.crypto.Util.hashHex(R,"sha1")},Nt.getJWKFromKey=function(a){var s={};if(a instanceof Ze&&a.isPrivate)return s.kty="RSA",s.n=ut(a.n.toString(16)),s.e=ut(a.e.toString(16)),s.d=ut(a.d.toString(16)),s.p=ut(a.p.toString(16)),s.q=ut(a.q.toString(16)),s.dp=ut(a.dmp1.toString(16)),s.dq=ut(a.dmq1.toString(16)),s.qi=ut(a.coeff.toString(16)),s;if(a instanceof Ze&&a.isPublic)return s.kty="RSA",s.n=ut(a.n.toString(16)),s.e=ut(a.e.toString(16)),s;if(a instanceof $.crypto.ECDSA&&a.isPrivate){if("P-256"!==(h=a.getShortNISTPCurveName())&&"P-384"!==h)throw"unsupported curve name for JWT: "+h;var c=a.getPublicKeyXYHex();return s.kty="EC",s.crv=h,s.x=ut(c.x),s.y=ut(c.y),s.d=ut(a.prvKeyHex),s}if(a instanceof $.crypto.ECDSA&&a.isPublic){var h;if("P-256"!==(h=a.getShortNISTPCurveName())&&"P-384"!==h)throw"unsupported curve name for JWT: "+h;return c=a.getPublicKeyXYHex(),s.kty="EC",s.crv=h,s.x=ut(c.x),s.y=ut(c.y),s}throw"not supported key object"},Ze.getPosArrayOfChildrenFromHex=function(a){return Be.getChildIdx(a,0)},Ze.getHexValueArrayOfChildrenFromHex=function(a){var s,c=Be.getV,h=c(a,(s=Ze.getPosArrayOfChildrenFromHex(a))[0]),y=c(a,s[1]),R=c(a,s[2]),B=c(a,s[3]),re=c(a,s[4]),q=c(a,s[5]),ne=c(a,s[6]),ae=c(a,s[7]),ue=c(a,s[8]);return(s=new Array).push(h,y,R,B,re,q,ne,ae,ue),s},Ze.prototype.readPrivateKeyFromPEMString=function(a){var s=On(a),c=Ze.getHexValueArrayOfChildrenFromHex(s);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},Ze.prototype.readPKCS5PrvKeyHex=function(a){var s=Ze.getHexValueArrayOfChildrenFromHex(a);this.setPrivateEx(s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8])},Ze.prototype.readPKCS8PrvKeyHex=function(a){var s,c,h,y,R,B,re,q,ae=Be.getVbyListEx;if(!1===Be.isASN1HEX(a))throw new Error("not ASN.1 hex string");try{s=ae(a,0,[2,0,1],"02"),c=ae(a,0,[2,0,2],"02"),h=ae(a,0,[2,0,3],"02"),y=ae(a,0,[2,0,4],"02"),R=ae(a,0,[2,0,5],"02"),B=ae(a,0,[2,0,6],"02"),re=ae(a,0,[2,0,7],"02"),q=ae(a,0,[2,0,8],"02")}catch(ue){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(s,c,h,y,R,B,re,q)},Ze.prototype.readPKCS5PubKeyHex=function(a){var s=Be,c=s.getV;if(!1===s.isASN1HEX(a))throw new Error("keyHex is not ASN.1 hex string");var h=s.getChildIdx(a,0);if(2!==h.length||"02"!==a.substr(h[0],2)||"02"!==a.substr(h[1],2))throw new Error("wrong hex for PKCS#5 public key");var y=c(a,h[0]),R=c(a,h[1]);this.setPublic(y,R)},Ze.prototype.readPKCS8PubKeyHex=function(a){var s=Be;if(!1===s.isASN1HEX(a))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==s.getTLVbyListEx(a,0,[0,0]))throw new Error("not PKCS8 RSA public key");var c=s.getTLVbyListEx(a,0,[1,0]);this.readPKCS5PubKeyHex(c)},Ze.prototype.readCertPubKeyHex=function(a,s){var c,h;(c=new jt).readCertHex(a),h=c.getPublicKeyHex(),this.readPKCS8PubKeyHex(h)};var Sr=new RegExp("[^0-9a-f]","gi");function Tr(a,s){for(var c="",h=s/4-a.length,y=0;y<h;y++)c+="0";return c+a}function yi(a,s,c){for(var h="",y=0;h.length<s;)h+=ln(c(Rn(a+String.fromCharCode.apply(String,[(4278190080&y)>>24,(16711680&y)>>16,(65280&y)>>8,255&y])))),y+=1;return h}function fn(a){for(var s in $.crypto.Util.DIGESTINFOHEAD){var c=$.crypto.Util.DIGESTINFOHEAD[s],h=c.length;if(a.substring(0,h)==c)return[s,a.substring(h)]}return[]}function jt(a){var s,c=Be,h=c.getChildIdx,y=c.getV,R=c.getTLV,B=c.getVbyList,re=c.getVbyListEx,q=c.getTLVbyList,ne=c.getTLVbyListEx,ae=c.getIdxbyList,ue=c.getIdxbyListEx,le=c.getVidx,x=c.oidname,U=c.hextooidstr,N=jt,X=On;try{s=$.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(I){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==q(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return re(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var I=ne(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(I)},this.getAlgorithmIdentifierName=function(I){for(var ee in s)if(I===s[ee])return ee;return x(re(I,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return q(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return N.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return q(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return N.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var I=B(this.hex,0,[0,4+this.foffset,0]);return I=I.replace(/(..)/g,"%$1"),decodeURIComponent(I)},this.getNotAfter=function(){var I=B(this.hex,0,[0,4+this.foffset,1]);return I=I.replace(/(..)/g,"%$1"),decodeURIComponent(I)},this.getPublicKeyHex=function(){return c.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return ae(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var I=this.getPublicKeyIdx();return ae(this.hex,I,[1,0],"30")},this.getPublicKey=function(){return Nt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var I=q(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(I)},this.getSignatureValueHex=function(){return B(this.hex,0,[2],"03",!0)},this.verifySignature=function(I){var ee=this.getSignatureAlgorithmField(),se=this.getSignatureValueHex(),ce=q(this.hex,0,[0],"30"),Ee=new $.crypto.Signature({alg:ee});return Ee.init(I),Ee.updateHex(ce),Ee.verify(se)},this.parseExt=function(I){var ee,se,ce;if(void 0===I){if(3!==this.version)return-1;ee=ae(ce=this.hex,0,[0,7,0],"30"),se=h(ce,ee)}else{ce=On(I);var Ee=ae(ce,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=y(ce,Ee))return void(this.aExtInfo=new Array);ee=ae(ce,0,[0,3,0,1,0],"30"),se=h(ce,ee),this.hex=ce}this.aExtInfo=new Array;for(var Fe=0;Fe<se.length;Fe++){var $e={critical:!1},Ne=0;3===h(ce,se[Fe]).length&&($e.critical=!0,Ne=1),$e.oid=c.hextooidstr(B(ce,se[Fe],[0],"06"));var _t=ae(ce,se[Fe],[1+Ne]);$e.vidx=le(ce,_t),this.aExtInfo.push($e)}},this.getExtInfo=function(I){var ee=this.aExtInfo,se=I;if(I.match(/^[0-9.]+$/)||(se=$.asn1.x509.OID.name2oid(I)),""!==se)for(var ce=0;ce<ee.length;ce++)if(ee[ce].oid===se)return ee[ce]},this.getExtBasicConstraints=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("basicConstraints");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"basicConstraints"};if(ee&&(ce.critical=!0),"3000"===I)return ce;if("30030101ff"===I)return ce.cA=!0,ce;if("30060101ff02"===I.substr(0,12)){var Ee=y(I,10),Fe=parseInt(Ee,16);return ce.cA=!0,ce.pathLen=Fe,ce}throw new Error("hExtV parse error: "+I)},this.getExtKeyUsage=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("keyUsage");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"keyUsage"};return ee&&(ce.critical=!0),ce.names=this.getExtKeyUsageString(I).split(","),ce},this.getExtKeyUsageBin=function(I){if(void 0===I){var ee=this.getExtInfo("keyUsage");if(void 0===ee)return"";I=R(this.hex,ee.vidx)}if(8!=I.length&&10!=I.length)throw new Error("malformed key usage value: "+I);var se="000000000000000"+parseInt(I.substr(6),16).toString(2);return 8==I.length&&(se=se.slice(-8)),10==I.length&&(se=se.slice(-16)),""==(se=se.replace(/0+$/,""))&&(se="0"),se},this.getExtKeyUsageString=function(I){for(var ee=this.getExtKeyUsageBin(I),se=new Array,ce=0;ce<ee.length;ce++)"1"==ee.substr(ce,1)&&se.push(jt.KEYUSAGE_NAME[ce]);return se.join(",")},this.getExtSubjectKeyIdentifier=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("subjectKeyIdentifier");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"subjectKeyIdentifier"};ee&&(ce.critical=!0);var Ee=y(I,0);return ce.kid={hex:Ee},ce},this.getExtAuthorityKeyIdentifier=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("authorityKeyIdentifier");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"authorityKeyIdentifier"};ee&&(ce.critical=!0);for(var Ee=h(I,0),Fe=0;Fe<Ee.length;Fe++){var $e=I.substr(Ee[Fe],2);if("80"===$e&&(ce.kid={hex:y(I,Ee[Fe])}),"a1"===$e){var Ne=R(I,Ee[Fe]),_t=this.getGeneralNames(Ne);ce.issuer=_t[0].dn}"82"===$e&&(ce.sn={hex:y(I,Ee[Fe])})}return ce},this.getExtExtKeyUsage=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("extKeyUsage");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"extKeyUsage",array:[]};ee&&(ce.critical=!0);for(var Ee=h(I,0),Fe=0;Fe<Ee.length;Fe++)ce.array.push(x(y(I,Ee[Fe])));return ce},this.getExtExtKeyUsageName=function(){var I=this.getExtInfo("extKeyUsage");if(void 0===I)return I;var ee=new Array,se=R(this.hex,I.vidx);if(""===se)return ee;for(var ce=h(se,0),Ee=0;Ee<ce.length;Ee++)ee.push(x(y(se,ce[Ee])));return ee},this.getExtSubjectAltName=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("subjectAltName");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"subjectAltName",array:[]};return ee&&(ce.critical=!0),ce.array=this.getGeneralNames(I),ce},this.getExtIssuerAltName=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("issuerAltName");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"issuerAltName",array:[]};return ee&&(ce.critical=!0),ce.array=this.getGeneralNames(I),ce},this.getGeneralNames=function(I){for(var ee=h(I,0),se=[],ce=0;ce<ee.length;ce++){var Ee=this.getGeneralName(R(I,ee[ce]));void 0!==Ee&&se.push(Ee)}return se},this.getGeneralName=function(I){var ee=I.substr(0,2),se=y(I,0),ce=ln(se);return"81"==ee?{rfc822:ce}:"82"==ee?{dns:ce}:"86"==ee?{uri:ce}:"87"==ee?{ip:mi(se)}:"a4"==ee?{dn:this.getX500Name(se)}:void 0},this.getExtSubjectAltName2=function(){var I,ee,se,ce=this.getExtInfo("subjectAltName");if(void 0===ce)return ce;for(var Ee=new Array,Fe=R(this.hex,ce.vidx),$e=h(Fe,0),Ne=0;Ne<$e.length;Ne++)se=Fe.substr($e[Ne],2),I=y(Fe,$e[Ne]),"81"===se&&(ee=ct(I),Ee.push(["MAIL",ee])),"82"===se&&(ee=ct(I),Ee.push(["DNS",ee])),"84"===se&&(ee=jt.hex2dn(I,0),Ee.push(["DN",ee])),"86"===se&&(ee=ct(I),Ee.push(["URI",ee])),"87"===se&&(ee=mi(I),Ee.push(["IP",ee]));return Ee},this.getExtCRLDistributionPoints=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("cRLDistributionPoints");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"cRLDistributionPoints",array:[]};ee&&(ce.critical=!0);for(var Ee=h(I,0),Fe=0;Fe<Ee.length;Fe++){var $e=R(I,Ee[Fe]);ce.array.push(this.getDistributionPoint($e))}return ce},this.getDistributionPoint=function(I){for(var ee={},se=h(I,0),ce=0;ce<se.length;ce++){var Ee=I.substr(se[ce],2),Fe=R(I,se[ce]);"a0"==Ee&&(ee.dpname=this.getDistributionPointName(Fe))}return ee},this.getDistributionPointName=function(I){for(var ee={},se=h(I,0),ce=0;ce<se.length;ce++){var Ee=I.substr(se[ce],2),Fe=R(I,se[ce]);"a0"==Ee&&(ee.full=this.getGeneralNames(Fe))}return ee},this.getExtCRLDistributionPointsURI=function(){var I=this.getExtInfo("cRLDistributionPoints");if(void 0===I)return I;for(var ee=new Array,se=h(this.hex,I.vidx),ce=0;ce<se.length;ce++)try{var Ee=ct(B(this.hex,se[ce],[0,0,0],"86"));ee.push(Ee)}catch(Fe){}return ee},this.getExtAIAInfo=function(){var I=this.getExtInfo("authorityInfoAccess");if(void 0===I)return I;for(var ee={ocsp:[],caissuer:[]},se=h(this.hex,I.vidx),ce=0;ce<se.length;ce++){var Ee=B(this.hex,se[ce],[0],"06"),Fe=B(this.hex,se[ce],[1],"86");"2b06010505073001"===Ee&&ee.ocsp.push(ct(Fe)),"2b06010505073002"===Ee&&ee.caissuer.push(ct(Fe))}return ee},this.getExtAuthorityInfoAccess=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("authorityInfoAccess");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"authorityInfoAccess",array:[]};ee&&(ce.critical=!0);for(var Ee=h(I,0),Fe=0;Fe<Ee.length;Fe++){var $e=re(I,Ee[Fe],[0],"06"),Ne=ct(B(I,Ee[Fe],[1],"86"));if("2b06010505073001"==$e)ce.array.push({ocsp:Ne});else{if("2b06010505073002"!=$e)throw new Error("unknown method: "+$e);ce.array.push({caissuer:Ne})}}return ce},this.getExtCertificatePolicies=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("certificatePolicies");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"certificatePolicies",array:[]};ee&&(ce.critical=!0);for(var Ee=h(I,0),Fe=0;Fe<Ee.length;Fe++){var $e=R(I,Ee[Fe]),Ne=this.getPolicyInformation($e);ce.array.push(Ne)}return ce},this.getPolicyInformation=function(I){var ee={},se=B(I,0,[0],"06");ee.policyoid=x(se);var ce=ue(I,0,[1],"30");if(-1!=ce){ee.array=[];for(var Ee=h(I,ce),Fe=0;Fe<Ee.length;Fe++){var $e=R(I,Ee[Fe]),Ne=this.getPolicyQualifierInfo($e);ee.array.push(Ne)}}return ee},this.getPolicyQualifierInfo=function(I){var ee={},se=B(I,0,[0],"06");if("2b06010505070201"===se){var ce=re(I,0,[1],"16");ee.cps=ln(ce)}else if("2b06010505070202"===se){var Ee=q(I,0,[1],"30");ee.unotice=this.getUserNotice(Ee)}return ee},this.getUserNotice=function(I){for(var ee={},se=h(I,0),ce=0;ce<se.length;ce++){var Ee=R(I,se[ce]);"30"!=Ee.substr(0,2)&&(ee.exptext=this.getDisplayText(Ee))}return ee},this.getDisplayText=function(I){var ee={};return ee.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[I.substr(0,2)],ee.str=ln(y(I,0)),ee},this.getExtCRLNumber=function(I,ee){var se={extname:"cRLNumber"};if(ee&&(se.critical=!0),"02"==I.substr(0,2))return se.num={hex:y(I,0)},se;throw new Error("hExtV parse error: "+I)},this.getExtCRLReason=function(I,ee){var se={extname:"cRLReason"};if(ee&&(se.critical=!0),"0a"==I.substr(0,2))return se.code=parseInt(y(I,0),16),se;throw new Error("hExtV parse error: "+I)},this.getExtOcspNonce=function(I,ee){var se={extname:"ocspNonce"};ee&&(se.critical=!0);var ce=y(I,0);return se.hex=ce,se},this.getExtOcspNoCheck=function(I,ee){var se={extname:"ocspNoCheck"};return ee&&(se.critical=!0),se},this.getExtAdobeTimeStamp=function(I,ee){if(void 0===I&&void 0===ee){var se=this.getExtInfo("adobeTimeStamp");if(void 0===se)return;I=R(this.hex,se.vidx),ee=se.critical}var ce={extname:"adobeTimeStamp"};ee&&(ce.critical=!0);var Ee=h(I,0);if(Ee.length>1){var Fe=R(I,Ee[1]),$e=this.getGeneralName(Fe);null!=$e.uri&&(ce.uri=$e.uri)}if(Ee.length>2){var Ne=R(I,Ee[2]);"0101ff"==Ne&&(ce.reqauth=!0),"010100"==Ne&&(ce.reqauth=!1)}return ce},this.getX500NameRule=function(I){for(var ee=null,se=[],ce=0;ce<I.length;ce++)for(var Ee=I[ce],Fe=0;Fe<Ee.length;Fe++)se.push(Ee[Fe]);for(ce=0;ce<se.length;ce++){var $e=se[ce],Ne=$e.ds,qe=$e.type;if("prn"!=Ne&&"utf8"!=Ne&&"ia5"!=Ne)return"mixed";if("ia5"==Ne){if("CN"!=qe)return"mixed";if($.lang.String.isMail($e.value))continue;return"mixed"}if("C"==qe){if("prn"==Ne)continue;return"mixed"}if(null==ee)ee=Ne;else if(ee!==Ne)return"mixed"}return null==ee?"prn":ee},this.getX500Name=function(I){var ee=this.getX500NameArray(I);return{array:ee,str:this.dnarraytostr(ee)}},this.getX500NameArray=function(I){for(var ee=[],se=h(I,0),ce=0;ce<se.length;ce++)ee.push(this.getRDN(R(I,se[ce])));return ee},this.getRDN=function(I){for(var ee=[],se=h(I,0),ce=0;ce<se.length;ce++)ee.push(this.getAttrTypeAndValue(R(I,se[ce])));return ee},this.getAttrTypeAndValue=function(I){var ee={type:null,value:null,ds:null},se=h(I,0),ce=B(I,se[0],[],"06"),Ee=B(I,se[1],[]),Fe=$.asn1.ASN1Util.oidHexToInt(ce);return ee.type=$.asn1.x509.OID.oid2atype(Fe),ee.value=ln(Ee),ee.ds=this.HEX2STAG[I.substr(se[1],2)],ee},this.readCertPEM=function(I){this.readCertHex(X(I))},this.readCertHex=function(I){this.hex=I,this.getVersion();try{ae(this.hex,0,[0,7],"a3"),this.parseExt()}catch(ee){}},this.getParam=function(){var I={};return I.version=this.getVersion(),I.serial={hex:this.getSerialNumberHex()},I.sigalg=this.getSignatureAlgorithmField(),I.issuer=this.getIssuer(),I.notbefore=this.getNotBefore(),I.notafter=this.getNotAfter(),I.subject=this.getSubject(),I.sbjpubkey=dn(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(I.ext=this.getExtParamArray()),I.sighex=this.getSignatureValueHex(),I},this.getExtParamArray=function(I){null==I&&-1!=ue(this.hex,0,[0,"[3]"])&&(I=ne(this.hex,0,[0,"[3]",0],"30"));for(var ee=[],se=h(I,0),ce=0;ce<se.length;ce++){var Ee=R(I,se[ce]),Fe=this.getExtParam(Ee);null!=Fe&&ee.push(Fe)}return ee},this.getExtParam=function(I){var ee=h(I,0).length;if(2!=ee&&3!=ee)throw new Error("wrong number elements in Extension: "+ee+" "+I);var se=U(B(I,0,[0],"06")),ce=!1;3==ee&&"0101ff"==q(I,0,[1])&&(ce=!0);var Ee=q(I,0,[ee-1,0]),Fe=void 0;if("2.5.29.14"==se?Fe=this.getExtSubjectKeyIdentifier(Ee,ce):"2.5.29.15"==se?Fe=this.getExtKeyUsage(Ee,ce):"2.5.29.17"==se?Fe=this.getExtSubjectAltName(Ee,ce):"2.5.29.18"==se?Fe=this.getExtIssuerAltName(Ee,ce):"2.5.29.19"==se?Fe=this.getExtBasicConstraints(Ee,ce):"2.5.29.31"==se?Fe=this.getExtCRLDistributionPoints(Ee,ce):"2.5.29.32"==se?Fe=this.getExtCertificatePolicies(Ee,ce):"2.5.29.35"==se?Fe=this.getExtAuthorityKeyIdentifier(Ee,ce):"2.5.29.37"==se?Fe=this.getExtExtKeyUsage(Ee,ce):"1.3.6.1.5.5.7.1.1"==se?Fe=this.getExtAuthorityInfoAccess(Ee,ce):"2.5.29.20"==se?Fe=this.getExtCRLNumber(Ee,ce):"2.5.29.21"==se?Fe=this.getExtCRLReason(Ee,ce):"1.3.6.1.5.5.7.48.1.2"==se?Fe=this.getExtOcspNonce(Ee,ce):"1.3.6.1.5.5.7.48.1.5"==se?Fe=this.getExtOcspNoCheck(Ee,ce):"1.2.840.113583.1.1.9.1"==se&&(Fe=this.getExtAdobeTimeStamp(Ee,ce)),null!=Fe)return Fe;var $e={extname:se,extn:Ee};return ce&&($e.critical=!0),$e},this.findExt=function(I,ee){for(var se=0;se<I.length;se++)if(I[se].extname==ee)return I[se];return null},this.updateExtCDPFullURI=function(I,ee){var se=this.findExt(I,"cRLDistributionPoints");if(null!=se&&null!=se.array)for(var ce=se.array,Ee=0;Ee<ce.length;Ee++)if(null!=ce[Ee].dpname&&null!=ce[Ee].dpname.full)for(var Fe=ce[Ee].dpname.full,$e=0;$e<Fe.length;$e++){var Ne=Fe[Ee];null!=Ne.uri&&(Ne.uri=ee)}},this.updateExtAIAOCSP=function(I,ee){var se=this.findExt(I,"authorityInfoAccess");if(null!=se&&null!=se.array)for(var ce=se.array,Ee=0;Ee<ce.length;Ee++)null!=ce[Ee].ocsp&&(ce[Ee].ocsp=ee)},this.updateExtAIACAIssuer=function(I,ee){var se=this.findExt(I,"authorityInfoAccess");if(null!=se&&null!=se.array)for(var ce=se.array,Ee=0;Ee<ce.length;Ee++)null!=ce[Ee].caissuer&&(ce[Ee].caissuer=ee)},this.dnarraytostr=function(I){return"/"+I.map(function(ee){return ee.map(function(Ee){return($e=Ee).type+"="+$e.value;var $e}).join("+")}).join("/")},this.getInfo=function(){var I,ee,se,jn,Ee=function(jn){for(var xn="",Un=jn.array,rn=0;rn<Un.length;rn++){var un=Un[rn];if(xn+="    policy oid: "+un.policyoid+"\n",void 0!==un.array)for(var _n=0;_n<un.array.length;_n++){var en=un.array[_n];void 0!==en.cps&&(xn+="    cps: "+en.cps+"\n")}}return xn},Fe=function(jn){for(var xn="",Un=jn.array,rn=0;rn<Un.length;rn++){var un=Un[rn];try{void 0!==un.dpname.full[0].uri&&(xn+="    "+un.dpname.full[0].uri+"\n")}catch(_n){}try{void 0!==un.dname.full[0].dn.hex&&(xn+="    "+jt.hex2dn(un.dpname.full[0].dn.hex)+"\n")}catch(_n){}}return xn},$e=function(jn){for(var xn="",Un=jn.array,rn=0;rn<Un.length;rn++){var un=Un[rn];void 0!==un.caissuer&&(xn+="    caissuer: "+un.caissuer+"\n"),void 0!==un.ocsp&&(xn+="    ocsp: "+un.ocsp+"\n")}return xn};if(I="Basic Fields\n",I+="  serial number: "+this.getSerialNumberHex()+"\n",I+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",I+="  issuer: "+this.getIssuerString()+"\n",I+="  notBefore: "+this.getNotBefore()+"\n",I+="  notAfter: "+this.getNotAfter()+"\n",I+="  subject: "+this.getSubjectString()+"\n",I+="  subject public key info: \n",I+="    key algorithm: "+(ee=this.getPublicKey()).type+"\n","RSA"===ee.type&&(I+="    n="+lt(ee.n.toString(16)).substr(0,16)+"...\n",I+="    e="+lt(ee.e.toString(16))+"\n"),null!=(se=this.aExtInfo)){I+="X509v3 Extensions:\n";for(var Ne=0;Ne<se.length;Ne++){var _t=se[Ne],qe=$.asn1.x509.OID.oid2name(_t.oid);""===qe&&(qe=_t.oid);var Qe="";if(!0===_t.critical&&(Qe="CRITICAL"),I+="  "+qe+" "+Qe+":\n","basicConstraints"===qe){var Ct=this.getExtBasicConstraints();void 0===Ct.cA?I+="    {}\n":(I+="    cA=true",void 0!==Ct.pathLen&&(I+=", pathLen="+Ct.pathLen),I+="\n")}else if("keyUsage"===qe)I+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===qe)I+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===qe){var Wt=this.getExtAuthorityKeyIdentifier();void 0!==Wt.kid&&(I+="    kid="+Wt.kid.hex+"\n")}else"extKeyUsage"===qe?I+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===qe?I+="    "+(jn=this.getExtSubjectAltName(),JSON.stringify(jn.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===qe?I+=Fe(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===qe?I+=$e(this.getExtAuthorityInfoAccess()):"certificatePolicies"===qe&&(I+=Ee(this.getExtCertificatePolicies()))}}return(I+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof a&&(-1!=a.indexOf("-----BEGIN")?this.readCertPEM(a):$.lang.String.isHex(a)&&this.readCertHex(a))}Ze.prototype.sign=function(a,s){var c=function(y){return $.crypto.Util.hashString(y,s)}(a);return this.signWithMessageHash(c,s)},Ze.prototype.signWithMessageHash=function(a,s){var c=yn($.crypto.Util.getPaddedDigestInfoHex(a,s,this.n.bitLength()),16);return Tr(this.doPrivate(c).toString(16),this.n.bitLength())},Ze.prototype.signPSS=function(a,s,c){var R,h=(R=Rn(a),$.crypto.Util.hashHex(R,s));return void 0===c&&(c=-1),this.signWithMessageHashPSS(h,s,c)},Ze.prototype.signWithMessageHashPSS=function(a,s,c){var h,y=ln(a),R=y.length,B=this.n.bitLength()-1,re=Math.ceil(B/8),q=function(I){return $.crypto.Util.hashHex(I,s)};if(-1===c||void 0===c)c=R;else if(-2===c)c=re-R-2;else if(c<-2)throw new Error("invalid salt length");if(re<R+c+2)throw new Error("data too long");var ne="";c>0&&(ne=new Array(c),(new tn).nextBytes(ne),ne=String.fromCharCode.apply(String,ne));var ae=ln(q(Rn("\0\0\0\0\0\0\0\0"+y+ne))),ue=[];for(h=0;h<re-c-R-2;h+=1)ue[h]=0;var le=String.fromCharCode.apply(String,ue)+"\x01"+ne,x=yi(ae,le.length,q),U=[];for(h=0;h<le.length;h+=1)U[h]=le.charCodeAt(h)^x.charCodeAt(h);for(U[0]&=~(65280>>8*re-B&255),h=0;h<R;h++)U.push(ae.charCodeAt(h));return U.push(188),Tr(this.doPrivate(new ye(U)).toString(16),this.n.bitLength())},Ze.prototype.verify=function(a,s){var c=yn(s=(s=s.replace(Sr,"")).replace(/[ \n]+/g,""),16);if(c.bitLength()>this.n.bitLength())return 0;var h=fn(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=h.length&&h[1]==$.crypto.Util.hashString(a,h[0])},Ze.prototype.verifyWithMessageHash=function(a,s){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var c=yn(s,16);if(c.bitLength()>this.n.bitLength())return 0;var h=fn(this.doPublic(c).toString(16).replace(/^1f+00/,""));return 0!=h.length&&h[1]==a},Ze.prototype.verifyPSS=function(a,s,c,h){var B,y=(B=Rn(a),$.crypto.Util.hashHex(B,c));return void 0===h&&(h=-1),this.verifyWithMessageHashPSS(y,s,c,h)},Ze.prototype.verifyWithMessageHashPSS=function(a,s,c,h){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var y,R=new ye(s,16),B=function(se){return $.crypto.Util.hashHex(se,c)},re=ln(a),q=re.length,ne=this.n.bitLength()-1,ae=Math.ceil(ne/8);if(-1===h||void 0===h)h=q;else if(-2===h)h=ae-q-2;else if(h<-2)throw new Error("invalid salt length");if(ae<q+h+2)throw new Error("data too long");var ue=this.doPublic(R).toByteArray();for(y=0;y<ue.length;y+=1)ue[y]&=255;for(;ue.length<ae;)ue.unshift(0);if(188!==ue[ae-1])throw new Error("encoded message does not end in 0xbc");var le=(ue=String.fromCharCode.apply(String,ue)).substr(0,ae-q-1),x=ue.substr(le.length,q),U=65280>>8*ae-ne&255;if(0!=(le.charCodeAt(0)&U))throw new Error("bits beyond keysize not zero");var N=yi(x,le.length,B),X=[];for(y=0;y<le.length;y+=1)X[y]=le.charCodeAt(y)^N.charCodeAt(y);X[0]&=~U;var I=ae-q-h-2;for(y=0;y<I;y+=1)if(0!==X[y])throw new Error("leftmost octets not zero");if(1!==X[I])throw new Error("0x01 marker not found");return x===ln(B(Rn("\0\0\0\0\0\0\0\0"+re+String.fromCharCode.apply(String,X.slice(-h)))))},Ze.SALT_LEN_HLEN=-1,Ze.SALT_LEN_MAX=-2,Ze.SALT_LEN_RECOVER=-2,jt.hex2dn=function(a,s){if(void 0===s&&(s=0),"30"!==a.substr(s,2))throw new Error("malformed DN");for(var c=new Array,h=Be.getChildIdx(a,s),y=0;y<h.length;y++)c.push(jt.hex2rdn(a,h[y]));return"/"+(c=c.map(function(R){return R.replace("/","\\/")})).join("/")},jt.hex2rdn=function(a,s){if(void 0===s&&(s=0),"31"!==a.substr(s,2))throw new Error("malformed RDN");for(var c=new Array,h=Be.getChildIdx(a,s),y=0;y<h.length;y++)c.push(jt.hex2attrTypeValue(a,h[y]));return(c=c.map(function(R){return R.replace("+","\\+")})).join("+")},jt.hex2attrTypeValue=function(a,s){var c=Be,h=c.getV;if(void 0===s&&(s=0),"30"!==a.substr(s,2))throw new Error("malformed attribute type and value");var y=c.getChildIdx(a,s);2!==y.length||a.substr(y[0],2);var R=h(a,y[0]),B=$.asn1.ASN1Util.oidHexToInt(R);return $.asn1.x509.OID.oid2atype(B)+"="+ln(h(a,y[1]))},jt.getPublicKeyFromCertHex=function(a){var s=new jt;return s.readCertHex(a),s.getPublicKey()},jt.getPublicKeyFromCertPEM=function(a){var s=new jt;return s.readCertPEM(a),s.getPublicKey()},jt.getPublicKeyInfoPropOfCertPEM=function(a){var s,c,h=Be.getVbyList,y={algparam:null};return(s=new jt).readCertPEM(a),c=s.getPublicKeyHex(),y.keyhex=h(c,0,[1],"03").substr(2),y.algoid=h(c,0,[0,0],"06"),"2a8648ce3d0201"===y.algoid&&(y.algparam=h(c,0,[0,1],"06")),y},jt.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==$&&$||(P.KJUR=$={}),void 0!==$.jws&&$.jws||($.jws={}),$.jws.JWS=function(){var a=$.jws.JWS.isSafeJSONString;this.parseJWS=function(s,c){if(void 0===this.parsedJWS||!c&&void 0===this.parsedJWS.sigvalH){var h=s.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==h)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var y=h[1],R=h[2],B=h[3],re=y+"."+R;if(this.parsedJWS={},this.parsedJWS.headB64U=y,this.parsedJWS.payloadB64U=R,this.parsedJWS.sigvalB64U=B,this.parsedJWS.si=re,!c){var q=Vt(B),ne=yn(q,16);this.parsedJWS.sigvalH=q,this.parsedJWS.sigvalBI=ne}var ae=an(y),ue=an(R);if(this.parsedJWS.headS=ae,this.parsedJWS.payloadS=ue,!a(ae,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+ae}}},$.jws.JWS.sign=function(a,s,c,h,y){var R,B,re,ne=$.jws.JWS,ae=ne.readSafeJSONString,ue=ne.isSafeJSONString,le=$.crypto,x=le.Mac,U=le.Signature,N=JSON;if("string"!=typeof s&&"object"!=(void 0===s?"undefined":k(s)))throw"spHeader must be JSON string or object: "+s;if("object"==(void 0===s?"undefined":k(s))&&(R=N.stringify(B=s)),"string"==typeof s){if(!ue(R=s))throw"JWS Head is not safe JSON string: "+R;B=ae(R)}if(re=c,"object"==(void 0===c?"undefined":k(c))&&(re=N.stringify(c)),""!=a&&null!=a||void 0===B.alg||(a=B.alg),""!=a&&null!=a&&void 0===B.alg&&(B.alg=a,R=N.stringify(B)),a!==B.alg)throw"alg and sHeader.alg doesn't match: "+a+"!="+B.alg;var X=null;if(void 0===ne.jwsalg2sigalg[a])throw"unsupported alg name: "+a;X=ne.jwsalg2sigalg[a];var I=nt(R)+"."+nt(re),ee="";if("Hmac"==X.substr(0,4)){if(void 0===h)throw"mac key shall be specified for HS* alg";var se=new x({alg:X,prov:"cryptojs",pass:h});se.updateString(I),ee=se.doFinal()}else if(-1!=X.indexOf("withECDSA")){(Ee=new U({alg:X})).init(h,y),Ee.updateString(I);var ce=Ee.sign();ee=$.crypto.ECDSA.asn1SigToConcatSig(ce)}else{var Ee;"none"!=X&&((Ee=new U({alg:X})).init(h,y),Ee.updateString(I),ee=Ee.sign())}return I+"."+ut(ee)},$.jws.JWS.verify=function(a,s,c){var h,R=$.jws.JWS,B=R.readSafeJSONString,re=$.crypto,q=re.ECDSA,ne=re.Mac,ae=re.Signature;void 0!==k(Ze)&&(h=Ze);var ue=a.split(".");if(3!==ue.length)return!1;var X,le=ue[0]+"."+ue[1],x=Vt(ue[2]),U=B(an(ue[0])),N=null;if(void 0===U.alg)throw"algorithm not specified in header";if(X=(N=U.alg).substr(0,2),null!=c&&"[object Array]"===Object.prototype.toString.call(c)&&c.length>0&&-1==(":"+c.join(":")+":").indexOf(":"+N+":"))throw"algorithm '"+N+"' not accepted in the list";if("none"!=N&&null===s)throw"key shall be specified to verify.";if("string"==typeof s&&-1!=s.indexOf("-----BEGIN ")&&(s=Nt.getKey(s)),!("RS"!=X&&"PS"!=X||s instanceof h))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==X&&!(s instanceof q))throw"key shall be a ECDSA obj for ES* algs";var I=null;if(void 0===R.jwsalg2sigalg[U.alg])throw"unsupported alg name: "+N;if("none"==(I=R.jwsalg2sigalg[N]))throw"not supported";if("Hmac"==I.substr(0,4)){if(void 0===s)throw"hexadecimal key shall be specified for HMAC";var ee=new ne({alg:I,pass:s});return ee.updateString(le),x==ee.doFinal()}if(-1!=I.indexOf("withECDSA")){var se,ce=null;try{ce=q.concatSigToASN1Sig(x)}catch(Ee){return!1}return(se=new ae({alg:I})).init(s),se.updateString(le),se.verify(ce)}return(se=new ae({alg:I})).init(s),se.updateString(le),se.verify(x)},$.jws.JWS.parse=function(a){var c,h,y=a.split("."),R={};if(2!=y.length&&3!=y.length)throw"malformed sJWS: wrong number of '.' splitted elements";return c=y[1],3==y.length&&(h=y[2]),R.headerObj=$.jws.JWS.readSafeJSONString(an(y[0])),R.payloadObj=$.jws.JWS.readSafeJSONString(an(c)),R.headerPP=JSON.stringify(R.headerObj,null,"  "),R.payloadPP=null==R.payloadObj?an(c):JSON.stringify(R.payloadObj,null,"  "),void 0!==h&&(R.sigHex=Vt(h)),R},$.jws.JWS.verifyJWT=function(a,s,c){var h=$.jws,y=h.JWS,R=y.readSafeJSONString,B=y.inArray,re=y.includedArray,q=a.split("."),ne=q[0],ae=q[1],ue=(Vt(q[2]),R(an(ne))),le=R(an(ae));if(void 0===ue.alg)return!1;if(void 0===c.alg)throw"acceptField.alg shall be specified";if(!B(ue.alg,c.alg)||void 0!==le.iss&&"object"===k(c.iss)&&!B(le.iss,c.iss)||void 0!==le.sub&&"object"===k(c.sub)&&!B(le.sub,c.sub))return!1;if(void 0!==le.aud&&"object"===k(c.aud))if("string"==typeof le.aud){if(!B(le.aud,c.aud))return!1}else if("object"==k(le.aud)&&!re(le.aud,c.aud))return!1;var x=h.IntDate.getNow();return void 0!==c.verifyAt&&"number"==typeof c.verifyAt&&(x=c.verifyAt),void 0!==c.gracePeriod&&"number"==typeof c.gracePeriod||(c.gracePeriod=0),!(void 0!==le.exp&&"number"==typeof le.exp&&le.exp+c.gracePeriod<x||void 0!==le.nbf&&"number"==typeof le.nbf&&x<le.nbf-c.gracePeriod||void 0!==le.iat&&"number"==typeof le.iat&&x<le.iat-c.gracePeriod||void 0!==le.jti&&void 0!==c.jti&&le.jti!==c.jti||!y.verify(a,s,c.alg))},$.jws.JWS.includedArray=function(a,s){var c=$.jws.JWS.inArray;if(null===a||"object"!==(void 0===a?"undefined":k(a))||"number"!=typeof a.length)return!1;for(var h=0;h<a.length;h++)if(!c(a[h],s))return!1;return!0},$.jws.JWS.inArray=function(a,s){if(null===s||"object"!==(void 0===s?"undefined":k(s))||"number"!=typeof s.length)return!1;for(var c=0;c<s.length;c++)if(s[c]==a)return!0;return!1},$.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},$.jws.JWS.isSafeJSONString=function(a,s,c){var h=null;try{return"object"!=(void 0===(h=$t(a))?"undefined":k(h))||h.constructor===Array?0:(s&&(s[c]=h),1)}catch(y){return 0}},$.jws.JWS.readSafeJSONString=function(a){var s=null;try{return"object"!=(void 0===(s=$t(a))?"undefined":k(s))||s.constructor===Array?null:s}catch(c){return null}},$.jws.JWS.getEncodedSignatureValueFromJWS=function(a){var s=a.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==s)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return s[1]},$.jws.JWS.getJWKthumbprint=function(a){if("RSA"!==a.kty&&"EC"!==a.kty&&"oct"!==a.kty)throw"unsupported algorithm for JWK Thumprint";var s="{";if("RSA"===a.kty){if("string"!=typeof a.n||"string"!=typeof a.e)throw"wrong n and e value for RSA key";s+='"e":"'+a.e+'",',s+='"kty":"'+a.kty+'",',s+='"n":"'+a.n+'"}'}else if("EC"===a.kty){if("string"!=typeof a.crv||"string"!=typeof a.x||"string"!=typeof a.y)throw"wrong crv, x and y value for EC key";s+='"crv":"'+a.crv+'",',s+='"kty":"'+a.kty+'",',s+='"x":"'+a.x+'",',s+='"y":"'+a.y+'"}'}else if("oct"===a.kty){if("string"!=typeof a.k)throw"wrong k value for oct(symmetric) key";s+='"kty":"'+a.kty+'",',s+='"k":"'+a.k+'"}'}var c=Rn(s);return ut($.crypto.Util.hashHex(c,"sha256"))},$.jws.IntDate={},$.jws.IntDate.get=function(a){var s=$.jws.IntDate,c=s.getNow,h=s.getZulu;if("now"==a)return c();if("now + 1hour"==a)return c()+3600;if("now + 1day"==a)return c()+86400;if("now + 1month"==a)return c()+2592e3;if("now + 1year"==a)return c()+31536e3;if(a.match(/Z$/))return h(a);if(a.match(/^[0-9]+$/))return parseInt(a);throw"unsupported format: "+a},$.jws.IntDate.getZulu=function(a){return pi(a)},$.jws.IntDate.getNow=function(){return~~(new Date/1e3)},$.jws.IntDate.intDate2UTCString=function(a){return new Date(1e3*a).toUTCString()},$.jws.IntDate.intDate2Zulu=function(a){var s=new Date(1e3*a);return("0000"+s.getUTCFullYear()).slice(-4)+("00"+(s.getUTCMonth()+1)).slice(-2)+("00"+s.getUTCDate()).slice(-2)+("00"+s.getUTCHours()).slice(-2)+("00"+s.getUTCMinutes()).slice(-2)+("00"+s.getUTCSeconds()).slice(-2)+"Z"},P.SecureRandom=tn,P.rng_seed_time=xe,P.BigInteger=ye,P.RSAKey=Ze,P.EDSA=$.crypto.EDSA,P.DSA=$.crypto.DSA,P.Signature=$.crypto.Signature,P.MessageDigest=$.crypto.MessageDigest,P.Mac=$.crypto.Mac,P.Cipher=$.crypto.Cipher,P.KEYUTIL=Nt,P.ASN1HEX=Be,P.X509=jt,P.CryptoJS=he,P.b64tohex=Oe,P.b64toBA=Ve,P.stoBA=vn,P.BAtos=Lt,P.BAtohex=Nn,P.stohex=nr,P.stob64=function(s){return Pe(nr(s))},P.stob64u=function(s){return yt(Pe(nr(s)))},P.b64utos=function(s){return Lt(Ve(Ir(s)))},P.b64tob64u=yt,P.b64utob64=Ir,P.hex2b64=Pe,P.hextob64u=ut,P.b64utohex=Vt,P.utf8tob64u=nt,P.b64utoutf8=an,P.utf8tob64=function(s){return Pe(Pn(Cr(s)))},P.b64toutf8=function(s){return decodeURIComponent(ir(Oe(s)))},P.utf8tohex=rr,P.hextoutf8=ct,P.hextorstr=ln,P.rstrtohex=Rn,P.hextob64=Qn,P.hextob64nl=Tt,P.b64nltohex=pr,P.hextopem=dn,P.pemtohex=On,P.hextoArrayBuffer=function(s){if(s.length%2!=0)throw"input is not even length";if(null==s.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var c=new ArrayBuffer(s.length/2),h=new DataView(c),y=0;y<s.length/2;y++)h.setUint8(y,parseInt(s.substr(2*y,2),16));return c},P.ArrayBuffertohex=function(s){for(var c="",h=new DataView(s),y=0;y<s.byteLength;y++)c+=("00"+h.getUint8(y).toString(16)).slice(-2);return c},P.zulutomsec=Ar,P.zulutosec=pi,P.zulutodate=function(s){return new Date(Ar(s))},P.datetozulu=function(s,c,h){var y,R=s.getUTCFullYear();if(c){if(R<1950||2049<R)throw"not proper year for UTCTime: "+R;y=(""+R).slice(-2)}else y=("000"+R).slice(-4);if(y+=("0"+(s.getUTCMonth()+1)).slice(-2),y+=("0"+s.getUTCDate()).slice(-2),y+=("0"+s.getUTCHours()).slice(-2),y+=("0"+s.getUTCMinutes()).slice(-2),y+=("0"+s.getUTCSeconds()).slice(-2),h){var B=s.getUTCMilliseconds();0!==B&&(y+="."+(B=(B=("00"+B).slice(-3)).replace(/0+$/g,"")))}return y+"Z"},P.uricmptohex=Pn,P.hextouricmp=ir,P.ipv6tohex=gi,P.hextoipv6=Vr,P.hextoip=mi,P.iptohex=function(s){var c="malformed IP address";if(!(s=s.toLowerCase(s)).match(/^[0-9.]+$/)){if(s.match(/^[0-9a-f:]+$/)&&-1!==s.indexOf(":"))return gi(s);throw c}var h=s.split(".");if(4!==h.length)throw c;var y="";try{for(var R=0;R<4;R++)y+=("0"+parseInt(h[R]).toString(16)).slice(-2);return y}catch(B){throw c}},P.encodeURIComponentAll=Cr,P.newline_toUnix=function(s){return s.replace(/\r\n/gm,"\n")},P.newline_toDos=function(s){return(s=s.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},P.hextoposhex=lt,P.intarystrtohex=function(s){s=(s=(s=s.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return s.split(/,/).map(function(c,h,y){var R=parseInt(c);if(R<0||255<R)throw"integer not in range 0-255";return("00"+R.toString(16)).slice(-2)}).join("")}catch(c){throw"malformed integer array string: "+c}},P.strdiffidx=function(s,c){var h=s.length;s.length>c.length&&(h=c.length);for(var y=0;y<h;y++)if(s.charCodeAt(y)!=c.charCodeAt(y))return y;return s.length!=c.length?h:-1},P.KJUR=$,P.crypto=$.crypto,P.asn1=$.asn1,P.jws=$.jws,P.lang=$.lang}).call(this,F(28).Buffer)},function(Ae,P,F){"use strict";(function(m){var k=F(30),oe=F(31),J=F(32);function b(){return E.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function D(pe,M){if(b()<M)throw new RangeError("Invalid typed array length");return E.TYPED_ARRAY_SUPPORT?(pe=new Uint8Array(M)).__proto__=E.prototype:(null===pe&&(pe=new E(M)),pe.length=M),pe}function E(pe,M,T){if(!(E.TYPED_ARRAY_SUPPORT||this instanceof E))return new E(pe,M,T);if("number"==typeof pe){if("string"==typeof M)throw new Error("If encoding is specified then the first argument must be a string");return L(this,pe)}return O(this,pe,M,T)}function O(pe,M,T,ge){if("number"==typeof M)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&M instanceof ArrayBuffer?function(Se,xe,We,Ge){if(We<0||xe.byteLength<We)throw new RangeError("'offset' is out of bounds");if(xe.byteLength<We+(Ge||0))throw new RangeError("'length' is out of bounds");return xe=void 0===We&&void 0===Ge?new Uint8Array(xe):void 0===Ge?new Uint8Array(xe,We):new Uint8Array(xe,We,Ge),E.TYPED_ARRAY_SUPPORT?(Se=xe).__proto__=E.prototype:Se=Z(Se,xe),Se}(pe,M,T,ge):"string"==typeof M?function(Se,xe,We){if("string"==typeof We&&""!==We||(We="utf8"),!E.isEncoding(We))throw new TypeError('"encoding" must be a valid string encoding');var Ge=0|K(xe,We),pt=(Se=D(Se,Ge)).write(xe,We);return pt!==Ge&&(Se=Se.slice(0,pt)),Se}(pe,M,T):function(Se,xe){if(E.isBuffer(xe)){var We=0|Y(xe.length);return 0===(Se=D(Se,We)).length||xe.copy(Se,0,0,We),Se}if(xe){if("undefined"!=typeof ArrayBuffer&&xe.buffer instanceof ArrayBuffer||"length"in xe)return"number"!=typeof xe.length||(pt=xe.length)!=pt?D(Se,0):Z(Se,xe);if("Buffer"===xe.type&&J(xe.data))return Z(Se,xe.data)}var pt;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(pe,M)}function j(pe){if("number"!=typeof pe)throw new TypeError('"size" argument must be a number');if(pe<0)throw new RangeError('"size" argument must not be negative')}function L(pe,M){if(j(M),pe=D(pe,M<0?0:0|Y(M)),!E.TYPED_ARRAY_SUPPORT)for(var T=0;T<M;++T)pe[T]=0;return pe}function Z(pe,M){var T=M.length<0?0:0|Y(M.length);pe=D(pe,T);for(var ge=0;ge<T;ge+=1)pe[ge]=255&M[ge];return pe}function Y(pe){if(pe>=b())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b().toString(16)+" bytes");return 0|pe}function K(pe,M){if(E.isBuffer(pe))return pe.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(pe)||pe instanceof ArrayBuffer))return pe.byteLength;"string"!=typeof pe&&(pe=""+pe);var T=pe.length;if(0===T)return 0;for(var ge=!1;;)switch(M){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":case void 0:return Xt(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*T;case"hex":return T>>>1;case"base64":return mn(pe).length;default:if(ge)return Xt(pe).length;M=(""+M).toLowerCase(),ge=!0}}function z(pe,M,T){var ge=!1;if((void 0===M||M<0)&&(M=0),M>this.length||((void 0===T||T>this.length)&&(T=this.length),T<=0)||(T>>>=0)<=(M>>>=0))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return tt(this,M,T);case"utf8":case"utf-8":return He(this,M,T);case"ascii":return Et(this,M,T);case"latin1":case"binary":return at(this,M,T);case"base64":return ze(this,M,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,M,T);default:if(ge)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),ge=!0}}function G(pe,M,T){var ge=pe[M];pe[M]=pe[T],pe[T]=ge}function we(pe,M,T,ge,_e){if(0===pe.length)return-1;if("string"==typeof T?(ge=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,isNaN(T)&&(T=_e?0:pe.length-1),T<0&&(T=pe.length+T),T>=pe.length){if(_e)return-1;T=pe.length-1}else if(T<0){if(!_e)return-1;T=0}if("string"==typeof M&&(M=E.from(M,ge)),E.isBuffer(M))return 0===M.length?-1:he(pe,M,T,ge,_e);if("number"==typeof M)return M&=255,E.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?_e?Uint8Array.prototype.indexOf.call(pe,M,T):Uint8Array.prototype.lastIndexOf.call(pe,M,T):he(pe,[M],T,ge,_e);throw new TypeError("val must be string, number or Buffer")}function he(pe,M,T,ge,_e){var Se,xe=1,We=pe.length,Ge=M.length;if(void 0!==ge&&("ucs2"===(ge=String(ge).toLowerCase())||"ucs-2"===ge||"utf16le"===ge||"utf-16le"===ge)){if(pe.length<2||M.length<2)return-1;xe=2,We/=2,Ge/=2,T/=2}function pt(yn,Dn){return 1===xe?yn[Dn]:yn.readUInt16BE(Dn*xe)}if(_e){var wt=-1;for(Se=T;Se<We;Se++)if(pt(pe,Se)===pt(M,-1===wt?0:Se-wt)){if(-1===wt&&(wt=Se),Se-wt+1===Ge)return wt*xe}else-1!==wt&&(Se-=Se-wt),wt=-1}else for(T+Ge>We&&(T=We-Ge),Se=T;Se>=0;Se--){for(var Ft=!0,tn=0;tn<Ge;tn++)if(pt(pe,Se+tn)!==pt(M,tn)){Ft=!1;break}if(Ft)return Se}return-1}function de(pe,M,T,ge){T=Number(T)||0;var _e=pe.length-T;ge?(ge=Number(ge))>_e&&(ge=_e):ge=_e;var Se=M.length;if(Se%2!=0)throw new TypeError("Invalid hex string");ge>Se/2&&(ge=Se/2);for(var xe=0;xe<ge;++xe){var We=parseInt(M.substr(2*xe,2),16);if(isNaN(We))return xe;pe[T+xe]=We}return xe}function ie(pe,M,T,ge){return qt(Xt(M,pe.length-T),pe,T,ge)}function Pe(pe,M,T,ge){return qt(function(Se){for(var xe=[],We=0;We<Se.length;++We)xe.push(255&Se.charCodeAt(We));return xe}(M),pe,T,ge)}function Oe(pe,M,T,ge){return Pe(pe,M,T,ge)}function Ve(pe,M,T,ge){return qt(mn(M),pe,T,ge)}function ye(pe,M,T,ge){return qt(function(Se,xe){for(var We,Ge,wt=[],Ft=0;Ft<Se.length&&!((xe-=2)<0);++Ft)Ge=(We=Se.charCodeAt(Ft))>>8,wt.push(We%256),wt.push(Ge);return wt}(M,pe.length-T),pe,T,ge)}function ze(pe,M,T){return k.fromByteArray(0===M&&T===pe.length?pe:pe.slice(M,T))}function He(pe,M,T){T=Math.min(pe.length,T);for(var ge=[],_e=M;_e<T;){var Se,xe,We,Ge,pt=pe[_e],wt=null,Ft=pt>239?4:pt>223?3:pt>191?2:1;if(_e+Ft<=T)switch(Ft){case 1:pt<128&&(wt=pt);break;case 2:128==(192&(Se=pe[_e+1]))&&(Ge=(31&pt)<<6|63&Se)>127&&(wt=Ge);break;case 3:xe=pe[_e+2],128==(192&(Se=pe[_e+1]))&&128==(192&xe)&&(Ge=(15&pt)<<12|(63&Se)<<6|63&xe)>2047&&(Ge<55296||Ge>57343)&&(wt=Ge);break;case 4:xe=pe[_e+2],We=pe[_e+3],128==(192&(Se=pe[_e+1]))&&128==(192&xe)&&128==(192&We)&&(Ge=(15&pt)<<18|(63&Se)<<12|(63&xe)<<6|63&We)>65535&&Ge<1114112&&(wt=Ge)}null===wt?(wt=65533,Ft=1):wt>65535&&(ge.push((wt-=65536)>>>10&1023|55296),wt=56320|1023&wt),ge.push(wt),_e+=Ft}return function(yn){var Dn=yn.length;if(Dn<=Xe)return String.fromCharCode.apply(String,yn);for(var Ze="",Ht=0;Ht<Dn;)Ze+=String.fromCharCode.apply(String,yn.slice(Ht,Ht+=Xe));return Ze}(ge)}P.Buffer=E,P.SlowBuffer=function(M){return+M!=M&&(M=0),E.alloc(+M)},P.INSPECT_MAX_BYTES=50,E.TYPED_ARRAY_SUPPORT=void 0!==m.TYPED_ARRAY_SUPPORT?m.TYPED_ARRAY_SUPPORT:function(){try{var M=new Uint8Array(1);return M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===M.foo()&&"function"==typeof M.subarray&&0===M.subarray(1,1).byteLength}catch(T){return!1}}(),P.kMaxLength=b(),E.poolSize=8192,E._augment=function(pe){return pe.__proto__=E.prototype,pe},E.from=function(pe,M,T){return O(null,pe,M,T)},E.TYPED_ARRAY_SUPPORT&&(E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0})),E.alloc=function(pe,M,T){return null,xe=M,We=T,j(Se=pe),Se<=0?D(null,Se):void 0!==xe?"string"==typeof We?D(null,Se).fill(xe,We):D(null,Se).fill(xe):D(null,Se);var Se,xe,We},E.allocUnsafe=function(pe){return L(null,pe)},E.allocUnsafeSlow=function(pe){return L(null,pe)},E.isBuffer=function(M){return!(null==M||!M._isBuffer)},E.compare=function(M,T){if(!E.isBuffer(M)||!E.isBuffer(T))throw new TypeError("Arguments must be Buffers");if(M===T)return 0;for(var ge=M.length,_e=T.length,Se=0,xe=Math.min(ge,_e);Se<xe;++Se)if(M[Se]!==T[Se]){ge=M[Se],_e=T[Se];break}return ge<_e?-1:_e<ge?1:0},E.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(M,T){if(!J(M))throw new TypeError('"list" argument must be an Array of Buffers');if(0===M.length)return E.alloc(0);var ge;if(void 0===T)for(T=0,ge=0;ge<M.length;++ge)T+=M[ge].length;var _e=E.allocUnsafe(T),Se=0;for(ge=0;ge<M.length;++ge){var xe=M[ge];if(!E.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(_e,Se),Se+=xe.length}return _e},E.byteLength=K,E.prototype._isBuffer=!0,E.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var T=0;T<M;T+=2)G(this,T,T+1);return this},E.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var T=0;T<M;T+=4)G(this,T,T+3),G(this,T+1,T+2);return this},E.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var T=0;T<M;T+=8)G(this,T,T+7),G(this,T+1,T+6),G(this,T+2,T+5),G(this,T+3,T+4);return this},E.prototype.toString=function(){var M=0|this.length;return 0===M?"":0===arguments.length?He(this,0,M):z.apply(this,arguments)},E.prototype.equals=function(M){if(!E.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||0===E.compare(this,M)},E.prototype.inspect=function(){var M="",T=P.INSPECT_MAX_BYTES;return this.length>0&&(M=this.toString("hex",0,T).match(/.{2}/g).join(" "),this.length>T&&(M+=" ... ")),"<Buffer "+M+">"},E.prototype.compare=function(M,T,ge,_e,Se){if(!E.isBuffer(M))throw new TypeError("Argument must be a Buffer");if(void 0===T&&(T=0),void 0===ge&&(ge=M?M.length:0),void 0===_e&&(_e=0),void 0===Se&&(Se=this.length),T<0||ge>M.length||_e<0||Se>this.length)throw new RangeError("out of range index");if(_e>=Se&&T>=ge)return 0;if(_e>=Se)return-1;if(T>=ge)return 1;if(this===M)return 0;for(var xe=(Se>>>=0)-(_e>>>=0),We=(ge>>>=0)-(T>>>=0),Ge=Math.min(xe,We),pt=this.slice(_e,Se),wt=M.slice(T,ge),Ft=0;Ft<Ge;++Ft)if(pt[Ft]!==wt[Ft]){xe=pt[Ft],We=wt[Ft];break}return xe<We?-1:We<xe?1:0},E.prototype.includes=function(M,T,ge){return-1!==this.indexOf(M,T,ge)},E.prototype.indexOf=function(M,T,ge){return we(this,M,T,ge,!0)},E.prototype.lastIndexOf=function(M,T,ge){return we(this,M,T,ge,!1)},E.prototype.write=function(M,T,ge,_e){if(void 0===T)_e="utf8",ge=this.length,T=0;else if(void 0===ge&&"string"==typeof T)_e=T,ge=this.length,T=0;else{if(!isFinite(T))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");T|=0,isFinite(ge)?(ge|=0,void 0===_e&&(_e="utf8")):(_e=ge,ge=void 0)}var Se=this.length-T;if((void 0===ge||ge>Se)&&(ge=Se),M.length>0&&(ge<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");for(var xe=!1;;)switch(_e){case"hex":return de(this,M,T,ge);case"utf8":case"utf-8":return ie(this,M,T,ge);case"ascii":return Pe(this,M,T,ge);case"latin1":case"binary":return Oe(this,M,T,ge);case"base64":return Ve(this,M,T,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,M,T,ge);default:if(xe)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),xe=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Xe=4096;function Et(pe,M,T){var ge="";T=Math.min(pe.length,T);for(var _e=M;_e<T;++_e)ge+=String.fromCharCode(127&pe[_e]);return ge}function at(pe,M,T){var ge="";T=Math.min(pe.length,T);for(var _e=M;_e<T;++_e)ge+=String.fromCharCode(pe[_e]);return ge}function tt(pe,M,T){var ge=pe.length;(!M||M<0)&&(M=0),(!T||T<0||T>ge)&&(T=ge);for(var _e="",Se=M;Se<T;++Se)_e+=zn(pe[Se]);return _e}function ot(pe,M,T){for(var ge=pe.slice(M,T),_e="",Se=0;Se<ge.length;Se+=2)_e+=String.fromCharCode(ge[Se]+256*ge[Se+1]);return _e}function Re(pe,M,T){if(pe%1!=0||pe<0)throw new RangeError("offset is not uint");if(pe+M>T)throw new RangeError("Trying to access beyond buffer length")}function ht(pe,M,T,ge,_e,Se){if(!E.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>_e||M<Se)throw new RangeError('"value" argument is out of bounds');if(T+ge>pe.length)throw new RangeError("Index out of range")}function At(pe,M,T,ge){M<0&&(M=65535+M+1);for(var _e=0,Se=Math.min(pe.length-T,2);_e<Se;++_e)pe[T+_e]=(M&255<<8*(ge?_e:1-_e))>>>8*(ge?_e:1-_e)}function En(pe,M,T,ge){M<0&&(M=4294967295+M+1);for(var _e=0,Se=Math.min(pe.length-T,4);_e<Se;++_e)pe[T+_e]=M>>>8*(ge?_e:3-_e)&255}function Ut(pe,M,T,ge,_e,Se){if(T+ge>pe.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function Tn(pe,M,T,ge,_e){return _e||Ut(pe,0,T,4),oe.write(pe,M,T,ge,23,4),T+4}function Sn(pe,M,T,ge,_e){return _e||Ut(pe,0,T,8),oe.write(pe,M,T,ge,52,8),T+8}E.prototype.slice=function(M,T){var ge,_e=this.length;if((M=~~M)<0?(M+=_e)<0&&(M=0):M>_e&&(M=_e),(T=void 0===T?_e:~~T)<0?(T+=_e)<0&&(T=0):T>_e&&(T=_e),T<M&&(T=M),E.TYPED_ARRAY_SUPPORT)(ge=this.subarray(M,T)).__proto__=E.prototype;else{var Se=T-M;ge=new E(Se,void 0);for(var xe=0;xe<Se;++xe)ge[xe]=this[xe+M]}return ge},E.prototype.readUIntLE=function(M,T,ge){M|=0,T|=0,ge||Re(M,T,this.length);for(var _e=this[M],Se=1,xe=0;++xe<T&&(Se*=256);)_e+=this[M+xe]*Se;return _e},E.prototype.readUIntBE=function(M,T,ge){M|=0,T|=0,ge||Re(M,T,this.length);for(var _e=this[M+--T],Se=1;T>0&&(Se*=256);)_e+=this[M+--T]*Se;return _e},E.prototype.readUInt8=function(M,T){return T||Re(M,1,this.length),this[M]},E.prototype.readUInt16LE=function(M,T){return T||Re(M,2,this.length),this[M]|this[M+1]<<8},E.prototype.readUInt16BE=function(M,T){return T||Re(M,2,this.length),this[M]<<8|this[M+1]},E.prototype.readUInt32LE=function(M,T){return T||Re(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},E.prototype.readUInt32BE=function(M,T){return T||Re(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},E.prototype.readIntLE=function(M,T,ge){M|=0,T|=0,ge||Re(M,T,this.length);for(var _e=this[M],Se=1,xe=0;++xe<T&&(Se*=256);)_e+=this[M+xe]*Se;return _e>=(Se*=128)&&(_e-=Math.pow(2,8*T)),_e},E.prototype.readIntBE=function(M,T,ge){M|=0,T|=0,ge||Re(M,T,this.length);for(var _e=T,Se=1,xe=this[M+--_e];_e>0&&(Se*=256);)xe+=this[M+--_e]*Se;return xe>=(Se*=128)&&(xe-=Math.pow(2,8*T)),xe},E.prototype.readInt8=function(M,T){return T||Re(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},E.prototype.readInt16LE=function(M,T){T||Re(M,2,this.length);var ge=this[M]|this[M+1]<<8;return 32768&ge?4294901760|ge:ge},E.prototype.readInt16BE=function(M,T){T||Re(M,2,this.length);var ge=this[M+1]|this[M]<<8;return 32768&ge?4294901760|ge:ge},E.prototype.readInt32LE=function(M,T){return T||Re(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},E.prototype.readInt32BE=function(M,T){return T||Re(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},E.prototype.readFloatLE=function(M,T){return T||Re(M,4,this.length),oe.read(this,M,!0,23,4)},E.prototype.readFloatBE=function(M,T){return T||Re(M,4,this.length),oe.read(this,M,!1,23,4)},E.prototype.readDoubleLE=function(M,T){return T||Re(M,8,this.length),oe.read(this,M,!0,52,8)},E.prototype.readDoubleBE=function(M,T){return T||Re(M,8,this.length),oe.read(this,M,!1,52,8)},E.prototype.writeUIntLE=function(M,T,ge,_e){M=+M,T|=0,ge|=0,_e||ht(this,M,T,ge,Math.pow(2,8*ge)-1,0);var Se=1,xe=0;for(this[T]=255&M;++xe<ge&&(Se*=256);)this[T+xe]=M/Se&255;return T+ge},E.prototype.writeUIntBE=function(M,T,ge,_e){M=+M,T|=0,ge|=0,_e||ht(this,M,T,ge,Math.pow(2,8*ge)-1,0);var Se=ge-1,xe=1;for(this[T+Se]=255&M;--Se>=0&&(xe*=256);)this[T+Se]=M/xe&255;return T+ge},E.prototype.writeUInt8=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,1,255,0),E.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),this[T]=255&M,T+1},E.prototype.writeUInt16LE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,2,65535,0),E.TYPED_ARRAY_SUPPORT?(this[T]=255&M,this[T+1]=M>>>8):At(this,M,T,!0),T+2},E.prototype.writeUInt16BE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,2,65535,0),E.TYPED_ARRAY_SUPPORT?(this[T]=M>>>8,this[T+1]=255&M):At(this,M,T,!1),T+2},E.prototype.writeUInt32LE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,4,4294967295,0),E.TYPED_ARRAY_SUPPORT?(this[T+3]=M>>>24,this[T+2]=M>>>16,this[T+1]=M>>>8,this[T]=255&M):En(this,M,T,!0),T+4},E.prototype.writeUInt32BE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,4,4294967295,0),E.TYPED_ARRAY_SUPPORT?(this[T]=M>>>24,this[T+1]=M>>>16,this[T+2]=M>>>8,this[T+3]=255&M):En(this,M,T,!1),T+4},E.prototype.writeIntLE=function(M,T,ge,_e){if(M=+M,T|=0,!_e){var Se=Math.pow(2,8*ge-1);ht(this,M,T,ge,Se-1,-Se)}var xe=0,We=1,Ge=0;for(this[T]=255&M;++xe<ge&&(We*=256);)M<0&&0===Ge&&0!==this[T+xe-1]&&(Ge=1),this[T+xe]=(M/We>>0)-Ge&255;return T+ge},E.prototype.writeIntBE=function(M,T,ge,_e){if(M=+M,T|=0,!_e){var Se=Math.pow(2,8*ge-1);ht(this,M,T,ge,Se-1,-Se)}var xe=ge-1,We=1,Ge=0;for(this[T+xe]=255&M;--xe>=0&&(We*=256);)M<0&&0===Ge&&0!==this[T+xe+1]&&(Ge=1),this[T+xe]=(M/We>>0)-Ge&255;return T+ge},E.prototype.writeInt8=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,1,127,-128),E.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),M<0&&(M=255+M+1),this[T]=255&M,T+1},E.prototype.writeInt16LE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,2,32767,-32768),E.TYPED_ARRAY_SUPPORT?(this[T]=255&M,this[T+1]=M>>>8):At(this,M,T,!0),T+2},E.prototype.writeInt16BE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,2,32767,-32768),E.TYPED_ARRAY_SUPPORT?(this[T]=M>>>8,this[T+1]=255&M):At(this,M,T,!1),T+2},E.prototype.writeInt32LE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,4,2147483647,-2147483648),E.TYPED_ARRAY_SUPPORT?(this[T]=255&M,this[T+1]=M>>>8,this[T+2]=M>>>16,this[T+3]=M>>>24):En(this,M,T,!0),T+4},E.prototype.writeInt32BE=function(M,T,ge){return M=+M,T|=0,ge||ht(this,M,T,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),E.TYPED_ARRAY_SUPPORT?(this[T]=M>>>24,this[T+1]=M>>>16,this[T+2]=M>>>8,this[T+3]=255&M):En(this,M,T,!1),T+4},E.prototype.writeFloatLE=function(M,T,ge){return Tn(this,M,T,!0,ge)},E.prototype.writeFloatBE=function(M,T,ge){return Tn(this,M,T,!1,ge)},E.prototype.writeDoubleLE=function(M,T,ge){return Sn(this,M,T,!0,ge)},E.prototype.writeDoubleBE=function(M,T,ge){return Sn(this,M,T,!1,ge)},E.prototype.copy=function(M,T,ge,_e){if(ge||(ge=0),_e||0===_e||(_e=this.length),T>=M.length&&(T=M.length),T||(T=0),_e>0&&_e<ge&&(_e=ge),_e===ge||0===M.length||0===this.length)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("sourceStart out of bounds");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),M.length-T<_e-ge&&(_e=M.length-T+ge);var Se,xe=_e-ge;if(this===M&&ge<T&&T<_e)for(Se=xe-1;Se>=0;--Se)M[Se+T]=this[Se+ge];else if(xe<1e3||!E.TYPED_ARRAY_SUPPORT)for(Se=0;Se<xe;++Se)M[Se+T]=this[Se+ge];else Uint8Array.prototype.set.call(M,this.subarray(ge,ge+xe),T);return xe},E.prototype.fill=function(M,T,ge,_e){if("string"==typeof M){if("string"==typeof T?(_e=T,T=0,ge=this.length):"string"==typeof ge&&(_e=ge,ge=this.length),1===M.length){var Se=M.charCodeAt(0);Se<256&&(M=Se)}if(void 0!==_e&&"string"!=typeof _e)throw new TypeError("encoding must be a string");if("string"==typeof _e&&!E.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e)}else"number"==typeof M&&(M&=255);if(T<0||this.length<T||this.length<ge)throw new RangeError("Out of range index");if(ge<=T)return this;var xe;if(T>>>=0,ge=void 0===ge?this.length:ge>>>0,M||(M=0),"number"==typeof M)for(xe=T;xe<ge;++xe)this[xe]=M;else{var We=E.isBuffer(M)?M:Xt(new E(M,_e).toString()),Ge=We.length;for(xe=0;xe<ge-T;++xe)this[xe+T]=We[xe%Ge]}return this};var Zn=/[^+\/0-9A-Za-z-_]/g;function zn(pe){return pe<16?"0"+pe.toString(16):pe.toString(16)}function Xt(pe,M){var T;M=M||1/0;for(var ge=pe.length,_e=null,Se=[],xe=0;xe<ge;++xe){if((T=pe.charCodeAt(xe))>55295&&T<57344){if(!_e){if(T>56319){(M-=3)>-1&&Se.push(239,191,189);continue}if(xe+1===ge){(M-=3)>-1&&Se.push(239,191,189);continue}_e=T;continue}if(T<56320){(M-=3)>-1&&Se.push(239,191,189),_e=T;continue}T=65536+(_e-55296<<10|T-56320)}else _e&&(M-=3)>-1&&Se.push(239,191,189);if(_e=null,T<128){if((M-=1)<0)break;Se.push(T)}else if(T<2048){if((M-=2)<0)break;Se.push(T>>6|192,63&T|128)}else if(T<65536){if((M-=3)<0)break;Se.push(T>>12|224,T>>6&63|128,63&T|128)}else{if(!(T<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;Se.push(T>>18|240,T>>12&63|128,T>>6&63|128,63&T|128)}}return Se}function mn(pe){return k.toByteArray(function(T){if((T=(_e=T,_e.trim?_e.trim():_e.replace(/^\s+|\s+$/g,"")).replace(Zn,"")).length<2)return"";for(var _e;T.length%4!=0;)T+="=";return T}(pe))}function qt(pe,M,T,ge){for(var _e=0;_e<ge&&!(_e+T>=M.length||_e>=pe.length);++_e)M[_e+T]=pe[_e];return _e}}).call(this,F(29))},function(Ae,P){var F;F=function(){return this}();try{F=F||new Function("return this")()}catch(m){"object"==typeof window&&(F=window)}Ae.exports=F},function(Ae,P,F){"use strict";P.byteLength=function(L){var Z=E(L),K=Z[1];return 3*(Z[0]+K)/4-K},P.toByteArray=function(L){var Z,Y,Ve,K=E(L),z=K[0],G=K[1],we=new oe(3*(z+(Ve=G))/4-Ve),he=0,de=G>0?z-4:z;for(Y=0;Y<de;Y+=4)Z=k[L.charCodeAt(Y)]<<18|k[L.charCodeAt(Y+1)]<<12|k[L.charCodeAt(Y+2)]<<6|k[L.charCodeAt(Y+3)],we[he++]=Z>>16&255,we[he++]=Z>>8&255,we[he++]=255&Z;return 2===G&&(Z=k[L.charCodeAt(Y)]<<2|k[L.charCodeAt(Y+1)]>>4,we[he++]=255&Z),1===G&&(Z=k[L.charCodeAt(Y)]<<10|k[L.charCodeAt(Y+1)]<<4|k[L.charCodeAt(Y+2)]>>2,we[he++]=Z>>8&255,we[he++]=255&Z),we},P.fromByteArray=function(L){for(var Z,Y=L.length,K=Y%3,z=[],G=16383,we=0,he=Y-K;we<he;we+=G)z.push(O(L,we,we+G>he?he:we+G));return 1===K?z.push(m[(Z=L[Y-1])>>2]+m[Z<<4&63]+"=="):2===K&&z.push(m[(Z=(L[Y-2]<<8)+L[Y-1])>>10]+m[Z>>4&63]+m[Z<<2&63]+"="),z.join("")};for(var m=[],k=[],oe="undefined"!=typeof Uint8Array?Uint8Array:Array,J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,D=J.length;b<D;++b)m[b]=J[b],k[J.charCodeAt(b)]=b;function E(j){var L=j.length;if(L%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Z=j.indexOf("=");return-1===Z&&(Z=L),[Z,Z===L?0:4-Z%4]}function O(j,L,Z){for(var K,z=[],G=L;G<Z;G+=3)z.push(m[(K=(j[G]<<16&16711680)+(j[G+1]<<8&65280)+(255&j[G+2]))>>18&63]+m[K>>12&63]+m[K>>6&63]+m[63&K]);return z.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},function(Ae,P){P.read=function(F,m,k,oe,J){var b,D,E=8*J-oe-1,O=(1<<E)-1,j=O>>1,L=-7,Z=k?J-1:0,Y=k?-1:1,K=F[m+Z];for(Z+=Y,b=K&(1<<-L)-1,K>>=-L,L+=E;L>0;b=256*b+F[m+Z],Z+=Y,L-=8);for(D=b&(1<<-L)-1,b>>=-L,L+=oe;L>0;D=256*D+F[m+Z],Z+=Y,L-=8);if(0===b)b=1-j;else{if(b===O)return D?NaN:1/0*(K?-1:1);D+=Math.pow(2,oe),b-=j}return(K?-1:1)*D*Math.pow(2,b-oe)},P.write=function(F,m,k,oe,J,b){var D,E,O,j=8*b-J-1,L=(1<<j)-1,Z=L>>1,Y=23===J?Math.pow(2,-24)-Math.pow(2,-77):0,K=oe?0:b-1,z=oe?1:-1,G=m<0||0===m&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(E=isNaN(m)?1:0,D=L):(D=Math.floor(Math.log(m)/Math.LN2),m*(O=Math.pow(2,-D))<1&&(D--,O*=2),(m+=D+Z>=1?Y/O:Y*Math.pow(2,1-Z))*O>=2&&(D++,O/=2),D+Z>=L?(E=0,D=L):D+Z>=1?(E=(m*O-1)*Math.pow(2,J),D+=Z):(E=m*Math.pow(2,Z-1)*Math.pow(2,J),D=0));J>=8;F[k+K]=255&E,K+=z,E/=256,J-=8);for(D=D<<J|E,j+=J;j>0;F[k+K]=255&D,K+=z,D/=256,j-=8);F[k+K-z]|=128*G}},function(Ae,P){var F={}.toString;Ae.exports=Array.isArray||function(m){return"[object Array]"==F.call(m)}},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.default=function(oe){var J=oe.jws,b=oe.KeyUtil,D=oe.X509,E=oe.crypto,O=oe.hextob64u,j=oe.b64tohex,L=oe.AllowedSigningAlgs;return function(){function Z(){!function(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")}(this,Z)}return Z.parseJwt=function(K){m.Log.debug("JoseUtil.parseJwt");try{var z=J.JWS.parse(K);return{header:z.headerObj,payload:z.payloadObj}}catch(G){m.Log.error(G)}},Z.validateJwt=function(K,z,G,we,he,de,ie){m.Log.debug("JoseUtil.validateJwt");try{if("RSA"===z.kty)if(z.e&&z.n)z=b.getKey(z);else{if(!z.x5c||!z.x5c.length)return m.Log.error("JoseUtil.validateJwt: RSA key missing key material",z),Promise.reject(new Error("RSA key missing key material"));var Pe=j(z.x5c[0]);z=D.getPublicKeyFromCertHex(Pe)}else{if("EC"!==z.kty)return m.Log.error("JoseUtil.validateJwt: Unsupported key type",z&&z.kty),Promise.reject(new Error(z.kty));if(!(z.crv&&z.x&&z.y))return m.Log.error("JoseUtil.validateJwt: EC key missing key material",z),Promise.reject(new Error("EC key missing key material"));z=b.getKey(z)}return Z._validateJwt(K,z,G,we,he,de,ie)}catch(Oe){return m.Log.error(Oe&&Oe.message||Oe),Promise.reject("JWT validation failed")}},Z.validateJwtAttributes=function(K,z,G,we,he,de){we||(we=0),he||(he=parseInt(Date.now()/1e3));var ie=Z.parseJwt(K).payload;if(!ie.iss)return m.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(ie.iss!==z)return m.Log.error("JoseUtil._validateJwt: Invalid issuer in token",ie.iss),Promise.reject(new Error("Invalid issuer in token: "+ie.iss));if(!ie.aud)return m.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(ie.aud===G||Array.isArray(ie.aud)&&ie.aud.indexOf(G)>=0))return m.Log.error("JoseUtil._validateJwt: Invalid audience in token",ie.aud),Promise.reject(new Error("Invalid audience in token: "+ie.aud));if(ie.azp&&ie.azp!==G)return m.Log.error("JoseUtil._validateJwt: Invalid azp in token",ie.azp),Promise.reject(new Error("Invalid azp in token: "+ie.azp));if(!de){var Pe=he+we,Oe=he-we;if(!ie.iat)return m.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(Pe<ie.iat)return m.Log.error("JoseUtil._validateJwt: iat is in the future",ie.iat),Promise.reject(new Error("iat is in the future: "+ie.iat));if(ie.nbf&&Pe<ie.nbf)return m.Log.error("JoseUtil._validateJwt: nbf is in the future",ie.nbf),Promise.reject(new Error("nbf is in the future: "+ie.nbf));if(!ie.exp)return m.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(ie.exp<Oe)return m.Log.error("JoseUtil._validateJwt: exp is in the past",ie.exp),Promise.reject(new Error("exp is in the past:"+ie.exp))}return Promise.resolve(ie)},Z._validateJwt=function(K,z,G,we,he,de,ie){return Z.validateJwtAttributes(K,G,we,he,de,ie).then(function(Pe){try{return J.JWS.verify(K,z,L)?Pe:(m.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Oe){return m.Log.error(Oe&&Oe.message||Oe),Promise.reject(new Error("signature validation failed"))}})},Z.hashString=function(K,z){try{return E.Util.hashString(K,z)}catch(G){m.Log.error(G)}},Z.hexToBase64Url=function(K){try{return O(K)}catch(z){m.Log.error(z)}},Z}()};var m=F(0);Ae.exports=P.default},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SigninResponse=void 0;var m=function(){function J(b,D){for(var E=0;E<D.length;E++){var O=D[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}return function(b,D,E){return D&&J(b.prototype,D),E&&J(b,E),b}}(),k=F(3);function oe(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}P.SigninResponse=function(){function J(b){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";oe(this,J);var E=k.UrlUtility.parseUrlFragment(b,D);this.error=E.error,this.error_description=E.error_description,this.error_uri=E.error_uri,this.code=E.code,this.state=E.state,this.id_token=E.id_token,this.session_state=E.session_state,this.access_token=E.access_token,this.token_type=E.token_type,this.scope=E.scope,this.profile=void 0,this.expires_in=E.expires_in}return m(J,[{key:"expires_in",get:function(){if(this.expires_at){var D=parseInt(Date.now()/1e3);return this.expires_at-D}},set:function(D){var E=parseInt(D);if("number"==typeof E&&E>0){var O=parseInt(Date.now()/1e3);this.expires_at=O+E}}},{key:"expired",get:function(){var D=this.expires_in;if(void 0!==D)return D<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),J}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SignoutRequest=void 0;var m=F(0),k=F(3),oe=F(9);P.SignoutRequest=function J(b){var D=b.url,E=b.id_token_hint,O=b.post_logout_redirect_uri,j=b.data,L=b.extraQueryParams,Z=b.request_type;if(function(z,G){if(!(z instanceof G))throw new TypeError("Cannot call a class as a function")}(this,J),!D)throw m.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var Y in E&&(D=k.UrlUtility.addQueryParam(D,"id_token_hint",E)),O&&(D=k.UrlUtility.addQueryParam(D,"post_logout_redirect_uri",O),j&&(this.state=new oe.State({data:j,request_type:Z}),D=k.UrlUtility.addQueryParam(D,"state",this.state.id))),L)D=k.UrlUtility.addQueryParam(D,Y,L[Y]);this.url=D}},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SignoutResponse=void 0;var m=F(3);P.SignoutResponse=function k(oe){!function(D,E){if(!(D instanceof E))throw new TypeError("Cannot call a class as a function")}(this,k);var J=m.UrlUtility.parseUrlFragment(oe,"?");this.error=J.error,this.error_description=J.error_description,this.error_uri=J.error_uri,this.state=J.state}},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.InMemoryWebStorage=void 0;var m=function(){function oe(J,b){for(var D=0;D<b.length;D++){var E=b[D];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(J,E.key,E)}}return function(J,b,D){return b&&oe(J.prototype,b),D&&oe(J,D),J}}(),k=F(0);P.InMemoryWebStorage=function(){function oe(){(function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")})(this,oe),this._data={}}return oe.prototype.getItem=function(b){return k.Log.debug("InMemoryWebStorage.getItem",b),this._data[b]},oe.prototype.setItem=function(b,D){k.Log.debug("InMemoryWebStorage.setItem",b),this._data[b]=D},oe.prototype.removeItem=function(b){k.Log.debug("InMemoryWebStorage.removeItem",b),delete this._data[b]},oe.prototype.key=function(b){return Object.getOwnPropertyNames(this._data)[b]},m(oe,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.UserManager=void 0;var m=function(){function G(we,he){for(var de=0;de<he.length;de++){var ie=he[de];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(we,ie.key,ie)}}return function(we,he,de){return he&&G(we.prototype,he),de&&G(we,de),we}}(),k=F(0),oe=F(10),J=F(39),b=F(15),D=F(45),E=F(47),O=F(18),j=F(8),L=F(20),Z=F(11),Y=F(4);function K(G,we){if(!(G instanceof we))throw new TypeError("Cannot call a class as a function")}function z(G,we){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!we||"object"!=typeof we&&"function"!=typeof we?G:we}P.UserManager=function(G){function we(){var he=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},de=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.SilentRenewService,ie=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.SessionMonitor,Pe=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.TokenRevocationClient,Oe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z.TokenClient,Ve=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Y.JoseUtil;K(this,we),he instanceof J.UserManagerSettings||(he=new J.UserManagerSettings(he));var ye=z(this,G.call(this,he));return ye._events=new D.UserManagerEvents(he),ye._silentRenewService=new de(ye),ye.settings.automaticSilentRenew&&(k.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),ye.startSilentRenew()),ye.settings.monitorSession&&(k.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),ye._sessionMonitor=new ie(ye)),ye._tokenRevocationClient=new Pe(ye._settings),ye._tokenClient=new Oe(ye._settings),ye._joseUtil=Ve,ye}return function(de,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);de.prototype=Object.create(ie&&ie.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(de,ie):de.__proto__=ie)}(we,G),we.prototype.getUser=function(){var de=this;return this._loadUser().then(function(ie){return ie?(k.Log.info("UserManager.getUser: user loaded"),de._events.load(ie,!1),ie):(k.Log.info("UserManager.getUser: user not found in storage"),null)})},we.prototype.removeUser=function(){var de=this;return this.storeUser(null).then(function(){k.Log.info("UserManager.removeUser: user removed from storage"),de._events.unload()})},we.prototype.signinRedirect=function(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(de=Object.assign({},de)).request_type="si:r",this._signinStart(de,this._redirectNavigator,{useReplaceToNavigate:de.useReplaceToNavigate}).then(function(){k.Log.info("UserManager.signinRedirect: successful")})},we.prototype.signinRedirectCallback=function(de){return this._signinEnd(de||this._redirectNavigator.url).then(function(ie){return ie.profile&&ie.profile.sub?k.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",ie.profile.sub):k.Log.info("UserManager.signinRedirectCallback: no sub"),ie})},we.prototype.signinPopup=function(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(de=Object.assign({},de)).request_type="si:p";var ie=de.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return ie?(de.redirect_uri=ie,de.display="popup",this._signin(de,this._popupNavigator,{startUrl:ie,popupWindowFeatures:de.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:de.popupWindowTarget||this.settings.popupWindowTarget}).then(function(Pe){return Pe&&(Pe.profile&&Pe.profile.sub?k.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",Pe.profile.sub):k.Log.info("UserManager.signinPopup: no sub")),Pe})):(k.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},we.prototype.signinPopupCallback=function(de){return this._signinCallback(de,this._popupNavigator).then(function(ie){return ie&&(ie.profile&&ie.profile.sub?k.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",ie.profile.sub):k.Log.info("UserManager.signinPopupCallback: no sub")),ie}).catch(function(ie){k.Log.error(ie.message)})},we.prototype.signinSilent=function(){var de=this,ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ie=Object.assign({},ie),this._loadUser().then(function(Pe){return Pe&&Pe.refresh_token?(ie.refresh_token=Pe.refresh_token,de._useRefreshToken(ie)):(ie.request_type="si:s",ie.id_token_hint=ie.id_token_hint||de.settings.includeIdTokenInSilentRenew&&Pe&&Pe.id_token,Pe&&de._settings.validateSubOnSilentRenew&&(k.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",Pe.profile.sub),ie.current_sub=Pe.profile.sub),de._signinSilentIframe(ie))})},we.prototype._useRefreshToken=function(){var de=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(Pe){return Pe?Pe.access_token?de._loadUser().then(function(Oe){if(Oe){var Ve=Promise.resolve();return Pe.id_token&&(Ve=de._validateIdTokenFromTokenRefreshToken(Oe.profile,Pe.id_token)),Ve.then(function(){return k.Log.debug("UserManager._useRefreshToken: refresh token response success"),Oe.id_token=Pe.id_token||Oe.id_token,Oe.access_token=Pe.access_token,Oe.refresh_token=Pe.refresh_token||Oe.refresh_token,Oe.expires_in=Pe.expires_in,de.storeUser(Oe).then(function(){return de._events.load(Oe),Oe})})}return null}):(k.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(k.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},we.prototype._validateIdTokenFromTokenRefreshToken=function(de,ie){var Pe=this;return this._metadataService.getIssuer().then(function(Oe){return Pe.settings.getEpochTime().then(function(Ve){return Pe._joseUtil.validateJwtAttributes(ie,Oe,Pe._settings.client_id,Pe._settings.clockSkew,Ve).then(function(ye){return ye?ye.sub!==de.sub?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ye.auth_time&&ye.auth_time!==de.auth_time?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ye.azp&&ye.azp!==de.azp?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ye.azp&&de.azp?(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(k.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},we.prototype._signinSilentIframe=function(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ie=de.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ie?(de.redirect_uri=ie,de.prompt=de.prompt||"none",this._signin(de,this._iframeNavigator,{startUrl:ie,silentRequestTimeout:de.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Pe){return Pe&&(Pe.profile&&Pe.profile.sub?k.Log.info("UserManager.signinSilent: successful, signed in sub: ",Pe.profile.sub):k.Log.info("UserManager.signinSilent: no sub")),Pe})):(k.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},we.prototype.signinSilentCallback=function(de){return this._signinCallback(de,this._iframeNavigator).then(function(ie){return ie&&(ie.profile&&ie.profile.sub?k.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",ie.profile.sub):k.Log.info("UserManager.signinSilentCallback: no sub")),ie})},we.prototype.signinCallback=function(de){var ie=this;return this.readSigninResponseState(de).then(function(Pe){var Oe=Pe.state;return"si:r"===Oe.request_type?ie.signinRedirectCallback(de):"si:p"===Oe.request_type?ie.signinPopupCallback(de):"si:s"===Oe.request_type?ie.signinSilentCallback(de):Promise.reject(new Error("invalid response_type in state"))})},we.prototype.signoutCallback=function(de,ie){var Pe=this;return this.readSignoutResponseState(de).then(function(Oe){var Ve=Oe.state,ye=Oe.response;return Ve?"so:r"===Ve.request_type?Pe.signoutRedirectCallback(de):"so:p"===Ve.request_type?Pe.signoutPopupCallback(de,ie):Promise.reject(new Error("invalid response_type in state")):ye})},we.prototype.querySessionStatus=function(){var de=this,ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(ie=Object.assign({},ie)).request_type="si:s";var Pe=ie.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Pe?(ie.redirect_uri=Pe,ie.prompt="none",ie.response_type=ie.response_type||this.settings.query_status_response_type,ie.scope=ie.scope||"openid",ie.skipUserInfo=!0,this._signinStart(ie,this._iframeNavigator,{startUrl:Pe,silentRequestTimeout:ie.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Oe){return de.processSigninResponse(Oe.url).then(function(Ve){if(k.Log.debug("UserManager.querySessionStatus: got signin response"),Ve.session_state&&Ve.profile.sub)return k.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",Ve.profile.sub),{session_state:Ve.session_state,sub:Ve.profile.sub,sid:Ve.profile.sid};k.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(Ve){if(Ve.session_state&&de.settings.monitorAnonymousSession&&("login_required"==Ve.message||"consent_required"==Ve.message||"interaction_required"==Ve.message||"account_selection_required"==Ve.message))return k.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:Ve.session_state};throw Ve})})):(k.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},we.prototype._signin=function(de,ie){var Pe=this;return this._signinStart(de,ie,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Ve){return Pe._signinEnd(Ve.url,de)})},we.prototype._signinStart=function(de,ie){var Pe=this,Oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ie.prepare(Oe).then(function(Ve){return k.Log.debug("UserManager._signinStart: got navigator window handle"),Pe.createSigninRequest(de).then(function(ye){return k.Log.debug("UserManager._signinStart: got signin request"),Oe.url=ye.url,Oe.id=ye.state.id,Ve.navigate(Oe)}).catch(function(ye){throw Ve.close&&(k.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),Ve.close()),ye})})},we.prototype._signinEnd=function(de){var ie=this,Pe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(de).then(function(Oe){k.Log.debug("UserManager._signinEnd: got signin response");var Ve=new b.User(Oe);if(Pe.current_sub){if(Pe.current_sub!==Ve.profile.sub)return k.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",Ve.profile.sub),Promise.reject(new Error("login_required"));k.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return ie.storeUser(Ve).then(function(){return k.Log.debug("UserManager._signinEnd: user stored"),ie._events.load(Ve),Ve})})},we.prototype._signinCallback=function(de,ie){k.Log.debug("UserManager._signinCallback");var Pe="query"===this._settings.response_mode||!this._settings.response_mode&&j.SigninRequest.isCode(this._settings.response_type)?"?":"#";return ie.callback(de,void 0,Pe)},we.prototype.signoutRedirect=function(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(de=Object.assign({},de)).request_type="so:r";var ie=de.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return ie&&(de.post_logout_redirect_uri=ie),this._signoutStart(de,this._redirectNavigator,{useReplaceToNavigate:de.useReplaceToNavigate}).then(function(){k.Log.info("UserManager.signoutRedirect: successful")})},we.prototype.signoutRedirectCallback=function(de){return this._signoutEnd(de||this._redirectNavigator.url).then(function(ie){return k.Log.info("UserManager.signoutRedirectCallback: successful"),ie})},we.prototype.signoutPopup=function(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(de=Object.assign({},de)).request_type="so:p";var ie=de.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return de.post_logout_redirect_uri=ie,de.display="popup",de.post_logout_redirect_uri&&(de.state=de.state||{}),this._signout(de,this._popupNavigator,{startUrl:ie,popupWindowFeatures:de.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:de.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){k.Log.info("UserManager.signoutPopup: successful")})},we.prototype.signoutPopupCallback=function(de,ie){return void 0===ie&&"boolean"==typeof de&&(ie=de,de=null),this._popupNavigator.callback(de,ie,"?").then(function(){k.Log.info("UserManager.signoutPopupCallback: successful")})},we.prototype._signout=function(de,ie){var Pe=this;return this._signoutStart(de,ie,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Ve){return Pe._signoutEnd(Ve.url)})},we.prototype._signoutStart=function(){var de=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ie=this,Oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(Oe).then(function(Ve){return k.Log.debug("UserManager._signoutStart: got navigator window handle"),ie._loadUser().then(function(ye){return k.Log.debug("UserManager._signoutStart: loaded current user from storage"),(ie._settings.revokeAccessTokenOnSignout?ie._revokeInternal(ye):Promise.resolve()).then(function(){var ze=de.id_token_hint||ye&&ye.id_token;return ze&&(k.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),de.id_token_hint=ze),ie.removeUser().then(function(){return k.Log.debug("UserManager._signoutStart: user removed, creating signout request"),ie.createSignoutRequest(de).then(function(He){return k.Log.debug("UserManager._signoutStart: got signout request"),Oe.url=He.url,He.state&&(Oe.id=He.state.id),Ve.navigate(Oe)})})})}).catch(function(ye){throw Ve.close&&(k.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),Ve.close()),ye})})},we.prototype._signoutEnd=function(de){return this.processSignoutResponse(de).then(function(ie){return k.Log.debug("UserManager._signoutEnd: got signout response"),ie})},we.prototype.revokeAccessToken=function(){var de=this;return this._loadUser().then(function(ie){return de._revokeInternal(ie,!0).then(function(Pe){if(Pe)return k.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),ie.access_token=null,ie.refresh_token=null,ie.expires_at=null,ie.token_type=null,de.storeUser(ie).then(function(){k.Log.debug("UserManager.revokeAccessToken: user stored"),de._events.load(ie)})})}).then(function(){k.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},we.prototype._revokeInternal=function(de,ie){var Pe=this;if(de){var Ve=de.refresh_token;return this._revokeAccessTokenInternal(de.access_token,ie).then(function(ye){return Pe._revokeRefreshTokenInternal(Ve,ie).then(function(ze){return ye||ze||k.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),ye||ze})})}return Promise.resolve(!1)},we.prototype._revokeAccessTokenInternal=function(de,ie){return!de||de.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(de,ie).then(function(){return!0})},we.prototype._revokeRefreshTokenInternal=function(de,ie){return de?this._tokenRevocationClient.revoke(de,ie,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},we.prototype.startSilentRenew=function(){this._silentRenewService.start()},we.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},we.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(de){return de?(k.Log.debug("UserManager._loadUser: user storageString loaded"),b.User.fromStorageString(de)):(k.Log.debug("UserManager._loadUser: no user storageString"),null)})},we.prototype.storeUser=function(de){if(de){k.Log.debug("UserManager.storeUser: storing user");var ie=de.toStorageString();return this._userStore.set(this._userStoreKey,ie)}return k.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},m(we,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),we}(oe.OidcClient)},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.UserManagerSettings=void 0;var m=function(){function Z(Y,K){for(var z=0;z<K.length;z++){var G=K[z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Y,G.key,G)}}return function(Y,K,z){return K&&Z(Y.prototype,K),z&&Z(Y,z),Y}}(),k=(F(0),F(5)),oe=F(40),J=F(41),b=F(43),D=F(6),E=F(1),O=F(8);function j(Z,Y){if(!(Z instanceof Y))throw new TypeError("Cannot call a class as a function")}function L(Z,Y){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Y||"object"!=typeof Y&&"function"!=typeof Y?Z:Y}P.UserManagerSettings=function(Z){function Y(){var K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},z=K.popup_redirect_uri,G=K.popup_post_logout_redirect_uri,we=K.popupWindowFeatures,he=K.popupWindowTarget,de=K.silent_redirect_uri,ie=K.silentRequestTimeout,Pe=K.automaticSilentRenew,Oe=void 0!==Pe&&Pe,Ve=K.validateSubOnSilentRenew,ye=void 0!==Ve&&Ve,ze=K.includeIdTokenInSilentRenew,He=void 0===ze||ze,Xe=K.monitorSession,Et=void 0===Xe||Xe,at=K.monitorAnonymousSession,tt=void 0!==at&&at,ot=K.checkSessionInterval,Re=void 0===ot?2e3:ot,ht=K.stopCheckSessionOnError,At=void 0===ht||ht,En=K.query_status_response_type,Ut=K.revokeAccessTokenOnSignout,Tn=void 0!==Ut&&Ut,Sn=K.accessTokenExpiringNotificationTime,Zn=void 0===Sn?60:Sn,zn=K.redirectNavigator,Xt=void 0===zn?new oe.RedirectNavigator:zn,mn=K.popupNavigator,qt=void 0===mn?new J.PopupNavigator:mn,pe=K.iframeNavigator,M=void 0===pe?new b.IFrameNavigator:pe,T=K.userStore,ge=void 0===T?new D.WebStorageStateStore({store:E.Global.sessionStorage}):T;j(this,Y);var _e=L(this,Z.call(this,arguments[0]));return _e._popup_redirect_uri=z,_e._popup_post_logout_redirect_uri=G,_e._popupWindowFeatures=we,_e._popupWindowTarget=he,_e._silent_redirect_uri=de,_e._silentRequestTimeout=ie,_e._automaticSilentRenew=Oe,_e._validateSubOnSilentRenew=ye,_e._includeIdTokenInSilentRenew=He,_e._accessTokenExpiringNotificationTime=Zn,_e._monitorSession=Et,_e._monitorAnonymousSession=tt,_e._checkSessionInterval=Re,_e._stopCheckSessionOnError=At,_e._query_status_response_type=En||(arguments[0]&&arguments[0].response_type?O.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),_e._revokeAccessTokenOnSignout=Tn,_e._redirectNavigator=Xt,_e._popupNavigator=qt,_e._iframeNavigator=M,_e._userStore=ge,_e}return function(z,G){if("function"!=typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function, not "+typeof G);z.prototype=Object.create(G&&G.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(z,G):z.__proto__=G)}(Y,Z),m(Y,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),Y}(k.OidcClientSettings)},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.RedirectNavigator=void 0;var m=function(){function oe(J,b){for(var D=0;D<b.length;D++){var E=b[D];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(J,E.key,E)}}return function(J,b,D){return b&&oe(J.prototype,b),D&&oe(J,D),J}}(),k=F(0);P.RedirectNavigator=function(){function oe(){!function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.prototype.prepare=function(){return Promise.resolve(this)},oe.prototype.navigate=function(b){return b&&b.url?(b.useReplaceToNavigate?window.location.replace(b.url):window.location=b.url,Promise.resolve()):(k.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},m(oe,[{key:"url",get:function(){return window.location.href}}]),oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PopupNavigator=void 0;var m=F(0),k=F(42);P.PopupNavigator=function(){function oe(){!function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.prototype.prepare=function(b){var D=new k.PopupWindow(b);return Promise.resolve(D)},oe.prototype.callback=function(b,D,E){m.Log.debug("PopupNavigator.callback");try{return k.PopupWindow.notifyOpener(b,D,E),Promise.resolve()}catch(O){return Promise.reject(O)}},oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PopupWindow=void 0;var m=function(){function J(b,D){for(var E=0;E<D.length;E++){var O=D[E];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}return function(b,D,E){return D&&J(b.prototype,D),E&&J(b,E),b}}(),k=F(0),oe=F(3);P.PopupWindow=function(){function J(b){var D=this;(function(L,Z){if(!(L instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,J),this._promise=new Promise(function(j,L){D._resolve=j,D._reject=L}),this._popup=window.open("",b.popupWindowTarget||"_blank",b.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(k.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return J.prototype.navigate=function(D){return this._popup?D&&D.url?(k.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=D.id,this._id&&(window["popupCallback_"+D.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=D.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},J.prototype._success=function(D){k.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(D)},J.prototype._error=function(D){k.Log.error("PopupWindow.error: ",D),this._cleanup(),this._reject(new Error(D))},J.prototype.close=function(){this._cleanup(!1)},J.prototype._cleanup=function(D){k.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!D&&this._popup.close(),this._popup=null},J.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},J.prototype._callback=function(D,E){this._cleanup(E),D?(k.Log.debug("PopupWindow.callback success"),this._success({url:D})):(k.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},J.notifyOpener=function(D,E,O){if(window.opener){if(D=D||window.location.href){var j=oe.UrlUtility.parseUrlFragment(D,O);if(j.state){var Z=window.opener["popupCallback_"+j.state];Z?(k.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),Z(D,E)):k.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else k.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else k.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},m(J,[{key:"promise",get:function(){return this._promise}}]),J}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.IFrameNavigator=void 0;var m=F(0),k=F(44);P.IFrameNavigator=function(){function oe(){!function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}(this,oe)}return oe.prototype.prepare=function(b){var D=new k.IFrameWindow(b);return Promise.resolve(D)},oe.prototype.callback=function(b){m.Log.debug("IFrameNavigator.callback");try{return k.IFrameWindow.notifyParent(b),Promise.resolve()}catch(D){return Promise.reject(D)}},oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.IFrameWindow=void 0;var m=function(){function oe(J,b){for(var D=0;D<b.length;D++){var E=b[D];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(J,E.key,E)}}return function(J,b,D){return b&&oe(J.prototype,b),D&&oe(J,D),J}}(),k=F(0);P.IFrameWindow=function(){function oe(J){var b=this;(function(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")})(this,oe),this._promise=new Promise(function(D,E){b._resolve=D,b._reject=E}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return oe.prototype.navigate=function(b){if(b&&b.url){var D=b.silentRequestTimeout||1e4;k.Log.debug("IFrameWindow.navigate: Using timeout of:",D),this._timer=window.setTimeout(this._timeout.bind(this),D),this._frame.src=b.url}else this._error("No url provided");return this.promise},oe.prototype._success=function(b){this._cleanup(),k.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(b)},oe.prototype._error=function(b){this._cleanup(),k.Log.error(b),this._reject(new Error(b))},oe.prototype.close=function(){this._cleanup()},oe.prototype._cleanup=function(){this._frame&&(k.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},oe.prototype._timeout=function(){k.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},oe.prototype._message=function(b){if(k.Log.debug("IFrameWindow.message"),this._timer&&b.origin===this._origin&&b.source===this._frame.contentWindow&&"string"==typeof b.data&&(b.data.startsWith("http://")||b.data.startsWith("https://"))){var D=b.data;D?this._success({url:D}):this._error("Invalid response from frame")}},oe.notifyParent=function(b){k.Log.debug("IFrameWindow.notifyParent"),(b=b||window.location.href)&&(k.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(b,location.protocol+"//"+location.host))},m(oe,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),oe}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.UserManagerEvents=void 0;var m=F(0),k=F(16),oe=F(17);P.UserManagerEvents=function(J){function b(D){!function(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")}(this,b);var E=function(j,L){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||"object"!=typeof L&&"function"!=typeof L?j:L}(this,J.call(this,D));return E._userLoaded=new oe.Event("User loaded"),E._userUnloaded=new oe.Event("User unloaded"),E._silentRenewError=new oe.Event("Silent renew error"),E._userSignedIn=new oe.Event("User signed in"),E._userSignedOut=new oe.Event("User signed out"),E._userSessionChanged=new oe.Event("User session changed"),E}return function(E,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(E,O):E.__proto__=O)}(b,J),b.prototype.load=function(E){var O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];m.Log.debug("UserManagerEvents.load"),J.prototype.load.call(this,E),O&&this._userLoaded.raise(E)},b.prototype.unload=function(){m.Log.debug("UserManagerEvents.unload"),J.prototype.unload.call(this),this._userUnloaded.raise()},b.prototype.addUserLoaded=function(E){this._userLoaded.addHandler(E)},b.prototype.removeUserLoaded=function(E){this._userLoaded.removeHandler(E)},b.prototype.addUserUnloaded=function(E){this._userUnloaded.addHandler(E)},b.prototype.removeUserUnloaded=function(E){this._userUnloaded.removeHandler(E)},b.prototype.addSilentRenewError=function(E){this._silentRenewError.addHandler(E)},b.prototype.removeSilentRenewError=function(E){this._silentRenewError.removeHandler(E)},b.prototype._raiseSilentRenewError=function(E){m.Log.debug("UserManagerEvents._raiseSilentRenewError",E.message),this._silentRenewError.raise(E)},b.prototype.addUserSignedIn=function(E){this._userSignedIn.addHandler(E)},b.prototype.removeUserSignedIn=function(E){this._userSignedIn.removeHandler(E)},b.prototype._raiseUserSignedIn=function(){m.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},b.prototype.addUserSignedOut=function(E){this._userSignedOut.addHandler(E)},b.prototype.removeUserSignedOut=function(E){this._userSignedOut.removeHandler(E)},b.prototype._raiseUserSignedOut=function(){m.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},b.prototype.addUserSessionChanged=function(E){this._userSessionChanged.addHandler(E)},b.prototype.removeUserSessionChanged=function(E){this._userSessionChanged.removeHandler(E)},b.prototype._raiseUserSessionChanged=function(){m.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},b}(k.AccessTokenEvents)},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Timer=void 0;var m=function(){function E(O,j){for(var L=0;L<j.length;L++){var Z=j[L];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(O,Z.key,Z)}}return function(O,j,L){return j&&E(O.prototype,j),L&&E(O,L),O}}(),k=F(0),oe=F(1),J=F(17);function b(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function D(E,O){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?E:O}P.Timer=function(E){function O(j){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe.Global.timer,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;b(this,O);var Y=D(this,E.call(this,j));return Y._timer=L,Y._nowFunc=Z||function(){return Date.now()/1e3},Y}return function(L,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);L.prototype=Object.create(Z&&Z.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(L,Z):L.__proto__=Z)}(O,E),O.prototype.init=function(L){L<=0&&(L=1),L=parseInt(L);var Z=this.now+L;if(this.expiration===Z&&this._timerHandle)k.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),k.Log.debug("Timer.init timer "+this._name+" for duration:",L),this._expiration=Z;var Y=5;L<Y&&(Y=L),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*Y)}},O.prototype.cancel=function(){this._timerHandle&&(k.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},O.prototype._callback=function(){k.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),E.prototype.raise.call(this))},m(O,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),O}(J.Event)},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SilentRenewService=void 0;var m=F(0);P.SilentRenewService=function(){function k(oe){(function(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")})(this,k),this._userManager=oe}return k.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(J){}).catch(function(J){m.Log.error("SilentRenewService.start: Error from getUser:",J.message)}))},k.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},k.prototype._tokenExpiring=function(){var J=this;this._userManager.signinSilent().then(function(b){m.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(b){m.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",b.message),J._userManager.events._raiseSilentRenewError(b)})},k}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CordovaPopupNavigator=void 0;var m=F(21);P.CordovaPopupNavigator=function(){function k(){!function(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}(this,k)}return k.prototype.prepare=function(J){var b=new m.CordovaPopupWindow(J);return Promise.resolve(b)},k}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CordovaIFrameNavigator=void 0;var m=F(21);P.CordovaIFrameNavigator=function(){function k(){!function(J,b){if(!(J instanceof b))throw new TypeError("Cannot call a class as a function")}(this,k)}return k.prototype.prepare=function(J){J.popupWindowFeatures="hidden=yes";var b=new m.CordovaPopupWindow(J);return Promise.resolve(b)},k}()},function(Ae,P,F){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Version="1.11.5"}])},574:(It,Ae,P)=>{"use strict";P.d(Ae,{y:()=>L});var F=P(393),k=P(181),oe=P(490),b=P(554),D=P(487);var j=P(494);let L=(()=>{class Y{constructor(z){this._isScalar=!1,z&&(this._subscribe=z)}lift(z){const G=new Y;return G.source=this,G.operator=z,G}subscribe(z,G,we){const{operator:he}=this,de=function(Y,K,z){if(Y){if(Y instanceof F.L)return Y;if(Y[k.b])return Y[k.b]()}return Y||K||z?new F.L(Y,K,z):new F.L(oe.c)}(z,G,we);if(de.add(he?he.call(de,this.source):this.source||j.v.useDeprecatedSynchronousErrorHandling&&!de.syncErrorThrowable?this._subscribe(de):this._trySubscribe(de)),j.v.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable&&(de.syncErrorThrowable=!1,de.syncErrorThrown))throw de.syncErrorValue;return de}_trySubscribe(z){try{return this._subscribe(z)}catch(G){j.v.useDeprecatedSynchronousErrorHandling&&(z.syncErrorThrown=!0,z.syncErrorValue=G),function(Y){for(;Y;){const{closed:K,destination:z,isStopped:G}=Y;if(K||G)return!1;Y=z&&z instanceof F.L?z:null}return!0}(z)?z.error(G):console.warn(G)}}forEach(z,G){return new(G=Z(G))((we,he)=>{let de;de=this.subscribe(ie=>{try{z(ie)}catch(Pe){he(Pe),de&&de.unsubscribe()}},he,we)})}_subscribe(z){const{source:G}=this;return G&&G.subscribe(z)}[b.L](){return this}pipe(...z){return 0===z.length?this:function(Y){return 0===Y.length?D.y:1===Y.length?Y[0]:function(z){return Y.reduce((G,we)=>we(G),z)}}(z)(this)}toPromise(z){return new(z=Z(z))((G,we)=>{let he;this.subscribe(de=>he=de,de=>we(de),()=>G(he))})}}return Y.create=K=>new Y(K),Y})();function Z(Y){if(Y||(Y=j.v.Promise||Promise),!Y)throw new Error("no Promise impl found");return Y}},490:(It,Ae,P)=>{"use strict";P.d(Ae,{c:()=>k});var F=P(494),m=P(449);const k={closed:!0,next(oe){},error(oe){if(F.v.useDeprecatedSynchronousErrorHandling)throw oe;(0,m.z)(oe)},complete(){}}},709:(It,Ae,P)=>{"use strict";P.d(Ae,{xQ:()=>E,Yc:()=>D});var F=P(574),m=P(393),k=P(319),oe=P(971);class J extends k.w{constructor(L,Z){super(),this.subject=L,this.subscriber=Z,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const L=this.subject,Z=L.observers;if(this.subject=null,!Z||0===Z.length||L.isStopped||L.closed)return;const Y=Z.indexOf(this.subscriber);-1!==Y&&Z.splice(Y,1)}}var b=P(181);class D extends m.L{constructor(L){super(L),this.destination=L}}let E=(()=>{class j extends F.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[b.b](){return new D(this)}lift(Z){const Y=new O(this,this);return Y.operator=Z,Y}next(Z){if(this.closed)throw new oe.N;if(!this.isStopped){const{observers:Y}=this,K=Y.length,z=Y.slice();for(let G=0;G<K;G++)z[G].next(Z)}}error(Z){if(this.closed)throw new oe.N;this.hasError=!0,this.thrownError=Z,this.isStopped=!0;const{observers:Y}=this,K=Y.length,z=Y.slice();for(let G=0;G<K;G++)z[G].error(Z);this.observers.length=0}complete(){if(this.closed)throw new oe.N;this.isStopped=!0;const{observers:Z}=this,Y=Z.length,K=Z.slice();for(let z=0;z<Y;z++)K[z].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Z){if(this.closed)throw new oe.N;return super._trySubscribe(Z)}_subscribe(Z){if(this.closed)throw new oe.N;return this.hasError?(Z.error(this.thrownError),k.w.EMPTY):this.isStopped?(Z.complete(),k.w.EMPTY):(this.observers.push(Z),new J(this,Z))}asObservable(){const Z=new F.y;return Z.source=this,Z}}return j.create=(L,Z)=>new O(L,Z),j})();class O extends E{constructor(L,Z){super(),this.destination=L,this.source=Z}next(L){const{destination:Z}=this;Z&&Z.next&&Z.next(L)}error(L){const{destination:Z}=this;Z&&Z.error&&this.destination.error(L)}complete(){const{destination:L}=this;L&&L.complete&&this.destination.complete()}_subscribe(L){const{source:Z}=this;return Z?this.source.subscribe(L):k.w.EMPTY}}},393:(It,Ae,P)=>{"use strict";P.d(Ae,{L:()=>D});var F=P(105),m=P(490),k=P(319),oe=P(181),J=P(494),b=P(449);class D extends k.w{constructor(j,L,Z){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=m.c;break;case 1:if(!j){this.destination=m.c;break}if("object"==typeof j){j instanceof D?(this.syncErrorThrowable=j.syncErrorThrowable,this.destination=j,j.add(this)):(this.syncErrorThrowable=!0,this.destination=new E(this,j));break}default:this.syncErrorThrowable=!0,this.destination=new E(this,j,L,Z)}}[oe.b](){return this}static create(j,L,Z){const Y=new D(j,L,Z);return Y.syncErrorThrowable=!1,Y}next(j){this.isStopped||this._next(j)}error(j){this.isStopped||(this.isStopped=!0,this._error(j))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(j){this.destination.next(j)}_error(j){this.destination.error(j),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:j}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=j,this}}class E extends D{constructor(j,L,Z,Y){super(),this._parentSubscriber=j;let K,z=this;(0,F.m)(L)?K=L:L&&(K=L.next,Z=L.error,Y=L.complete,L!==m.c&&(z=Object.create(L),(0,F.m)(z.unsubscribe)&&this.add(z.unsubscribe.bind(z)),z.unsubscribe=this.unsubscribe.bind(this))),this._context=z,this._next=K,this._error=Z,this._complete=Y}next(j){if(!this.isStopped&&this._next){const{_parentSubscriber:L}=this;J.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?this.__tryOrSetError(L,this._next,j)&&this.unsubscribe():this.__tryOrUnsub(this._next,j)}}error(j){if(!this.isStopped){const{_parentSubscriber:L}=this,{useDeprecatedSynchronousErrorHandling:Z}=J.v;if(this._error)Z&&L.syncErrorThrowable?(this.__tryOrSetError(L,this._error,j),this.unsubscribe()):(this.__tryOrUnsub(this._error,j),this.unsubscribe());else if(L.syncErrorThrowable)Z?(L.syncErrorValue=j,L.syncErrorThrown=!0):(0,b.z)(j),this.unsubscribe();else{if(this.unsubscribe(),Z)throw j;(0,b.z)(j)}}}complete(){if(!this.isStopped){const{_parentSubscriber:j}=this;if(this._complete){const L=()=>this._complete.call(this._context);J.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?(this.__tryOrSetError(j,L),this.unsubscribe()):(this.__tryOrUnsub(L),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(j,L){try{j.call(this._context,L)}catch(Z){if(this.unsubscribe(),J.v.useDeprecatedSynchronousErrorHandling)throw Z;(0,b.z)(Z)}}__tryOrSetError(j,L,Z){if(!J.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{L.call(this._context,Z)}catch(Y){return J.v.useDeprecatedSynchronousErrorHandling?(j.syncErrorValue=Y,j.syncErrorThrown=!0,!0):((0,b.z)(Y),!0)}return!1}_unsubscribe(){const{_parentSubscriber:j}=this;this._context=null,this._parentSubscriber=null,j.unsubscribe()}}},319:(It,Ae,P)=>{"use strict";P.d(Ae,{w:()=>b});var F=P(796),m=P(555),k=P(105);const J=(()=>{function E(O){return Error.call(this),this.message=O?`${O.length} errors occurred during unsubscription:\n${O.map((j,L)=>`${L+1}) ${j.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=O,this}return E.prototype=Object.create(Error.prototype),E})();class b{constructor(O){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,O&&(this._ctorUnsubscribe=!0,this._unsubscribe=O)}unsubscribe(){let O;if(this.closed)return;let{_parentOrParents:j,_ctorUnsubscribe:L,_unsubscribe:Z,_subscriptions:Y}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,j instanceof b)j.remove(this);else if(null!==j)for(let K=0;K<j.length;++K)j[K].remove(this);if((0,k.m)(Z)){L&&(this._unsubscribe=void 0);try{Z.call(this)}catch(K){O=K instanceof J?D(K.errors):[K]}}if((0,F.k)(Y)){let K=-1,z=Y.length;for(;++K<z;){const G=Y[K];if((0,m.K)(G))try{G.unsubscribe()}catch(we){O=O||[],we instanceof J?O=O.concat(D(we.errors)):O.push(we)}}}if(O)throw new J(O)}add(O){let j=O;if(!O)return b.EMPTY;switch(typeof O){case"function":j=new b(O);case"object":if(j===this||j.closed||"function"!=typeof j.unsubscribe)return j;if(this.closed)return j.unsubscribe(),j;if(!(j instanceof b)){const Y=j;j=new b,j._subscriptions=[Y]}break;default:throw new Error("unrecognized teardown "+O+" added to Subscription.")}let{_parentOrParents:L}=j;if(null===L)j._parentOrParents=this;else if(L instanceof b){if(L===this)return j;j._parentOrParents=[L,this]}else{if(-1!==L.indexOf(this))return j;L.push(this)}const Z=this._subscriptions;return null===Z?this._subscriptions=[j]:Z.push(j),j}remove(O){const j=this._subscriptions;if(j){const L=j.indexOf(O);-1!==L&&j.splice(L,1)}}}var E;function D(E){return E.reduce((O,j)=>O.concat(j instanceof J?j.errors:j),[])}b.EMPTY=((E=new b).closed=!0,E)},494:(It,Ae,P)=>{"use strict";P.d(Ae,{v:()=>m});let F=!1;const m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const oe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+oe.stack)}else F&&console.log("RxJS: Back to a better error behavior. Thank you. <3");F=k},get useDeprecatedSynchronousErrorHandling(){return F}}},345:(It,Ae,P)=>{"use strict";P.d(Ae,{IY:()=>oe,Ds:()=>b,ft:()=>E});var F=P(393),m=P(574),k=P(444);class oe extends F.L{constructor(j){super(),this.parent=j}_next(j){this.parent.notifyNext(j)}_error(j){this.parent.notifyError(j),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class b extends F.L{notifyNext(j){this.destination.next(j)}notifyError(j){this.destination.error(j)}notifyComplete(){this.destination.complete()}}function E(O,j){if(j.closed)return;if(O instanceof m.y)return O.subscribe(j);let L;try{L=(0,k.s)(O)(j)}catch(Z){j.error(Z)}return L}},441:(It,Ae,P)=>{"use strict";P.d(Ae,{c:()=>J,N:()=>b});var F=P(709),m=P(574),k=P(319),oe=P(307);class J extends m.y{constructor(L,Z){super(),this.source=L,this.subjectFactory=Z,this._refCount=0,this._isComplete=!1}_subscribe(L){return this.getSubject().subscribe(L)}getSubject(){const L=this._subject;return(!L||L.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let L=this._connection;return L||(this._isComplete=!1,L=this._connection=new k.w,L.add(this.source.subscribe(new D(this.getSubject(),this))),L.closed&&(this._connection=null,L=k.w.EMPTY)),L}refCount(){return(0,oe.x)()(this)}}const b=(()=>{const j=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:j._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}}})();class D extends F.Yc{constructor(L,Z){super(L),this.connectable=Z}_error(L){this._unsubscribe(),super._error(L)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const L=this.connectable;if(L){this.connectable=null;const Z=L._connection;L._refCount=0,L._subject=null,L._connection=null,Z&&Z.unsubscribe()}}}},402:(It,Ae,P)=>{"use strict";P.d(Ae,{D:()=>z});var F=P(574),m=P(444),k=P(319),oe=P(554),D=P(87),E=P(377),L=P(72),Z=P(489);function z(G,we){return we?function(G,we){if(null!=G){if(function(G){return G&&"function"==typeof G[oe.L]}(G))return function(G,we){return new F.y(he=>{const de=new k.w;return de.add(we.schedule(()=>{const ie=G[oe.L]();de.add(ie.subscribe({next(Pe){de.add(we.schedule(()=>he.next(Pe)))},error(Pe){de.add(we.schedule(()=>he.error(Pe)))},complete(){de.add(we.schedule(()=>he.complete()))}}))})),de})}(G,we);if((0,L.t)(G))return function(G,we){return new F.y(he=>{const de=new k.w;return de.add(we.schedule(()=>G.then(ie=>{de.add(we.schedule(()=>{he.next(ie),de.add(we.schedule(()=>he.complete()))}))},ie=>{de.add(we.schedule(()=>he.error(ie)))}))),de})}(G,we);if((0,Z.z)(G))return(0,D.r)(G,we);if(function(G){return G&&"function"==typeof G[E.hZ]}(G)||"string"==typeof G)return function(G,we){if(!G)throw new Error("Iterable cannot be null");return new F.y(he=>{const de=new k.w;let ie;return de.add(()=>{ie&&"function"==typeof ie.return&&ie.return()}),de.add(we.schedule(()=>{ie=G[E.hZ](),de.add(we.schedule(function(){if(he.closed)return;let Pe,Oe;try{const Ve=ie.next();Pe=Ve.value,Oe=Ve.done}catch(Ve){return void he.error(Ve)}Oe?he.complete():(he.next(Pe),this.schedule())}))})),de})}(G,we)}throw new TypeError((null!==G&&typeof G||G)+" is not observable")}(G,we):G instanceof F.y?G:new F.y((0,m.s)(G))}},693:(It,Ae,P)=>{"use strict";P.d(Ae,{n:()=>oe});var F=P(574),m=P(15),k=P(87);function oe(J,b){return b?(0,k.r)(J,b):new F.y((0,m.V)(J))}},2:(It,Ae,P)=>{"use strict";P.d(Ae,{U:()=>m});var F=P(393);function m(J,b){return function(E){if("function"!=typeof J)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return E.lift(new k(J,b))}}class k{constructor(b,D){this.project=b,this.thisArg=D}call(b,D){return D.subscribe(new oe(b,this.project,this.thisArg))}}class oe extends F.L{constructor(b,D,E){super(b),this.project=D,this.count=0,this.thisArg=E||this}_next(b){let D;try{D=this.project.call(this.thisArg,b,this.count++)}catch(E){return void this.destination.error(E)}this.destination.next(D)}}},282:(It,Ae,P)=>{"use strict";P.d(Ae,{J:()=>k});var F=P(773),m=P(487);function k(oe=Number.POSITIVE_INFINITY){return(0,F.zg)(m.y,oe)}},773:(It,Ae,P)=>{"use strict";P.d(Ae,{zg:()=>oe});var F=P(2),m=P(402),k=P(345);function oe(E,O,j=Number.POSITIVE_INFINITY){return"function"==typeof O?L=>L.pipe(oe((Z,Y)=>(0,m.D)(E(Z,Y)).pipe((0,F.U)((K,z)=>O(Z,K,Y,z))),j)):("number"==typeof O&&(j=O),L=>L.lift(new J(E,j)))}class J{constructor(O,j=Number.POSITIVE_INFINITY){this.project=O,this.concurrent=j}call(O,j){return j.subscribe(new b(O,this.project,this.concurrent))}}class b extends k.Ds{constructor(O,j,L=Number.POSITIVE_INFINITY){super(O),this.project=j,this.concurrent=L,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(O){this.active<this.concurrent?this._tryNext(O):this.buffer.push(O)}_tryNext(O){let j;const L=this.index++;try{j=this.project(O,L)}catch(Z){return void this.destination.error(Z)}this.active++,this._innerSub(j)}_innerSub(O){const j=new k.IY(this),L=this.destination;L.add(j);const Z=(0,k.ft)(O,j);Z!==j&&L.add(Z)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(O){this.destination.next(O)}notifyComplete(){const O=this.buffer;this.active--,O.length>0?this._next(O.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},307:(It,Ae,P)=>{"use strict";P.d(Ae,{x:()=>m});var F=P(393);function m(){return function(b){return b.lift(new k(b))}}class k{constructor(b){this.connectable=b}call(b,D){const{connectable:E}=this;E._refCount++;const O=new oe(b,E),j=D.subscribe(O);return O.closed||(O.connection=E.connect()),j}}class oe extends F.L{constructor(b,D){super(b),this.connectable=D}_unsubscribe(){const{connectable:b}=this;if(!b)return void(this.connection=null);this.connectable=null;const D=b._refCount;if(D<=0)return void(this.connection=null);if(b._refCount=D-1,D>1)return void(this.connection=null);const{connection:E}=this,O=b._connection;this.connection=null,O&&(!E||O===E)&&O.unsubscribe()}}},87:(It,Ae,P)=>{"use strict";P.d(Ae,{r:()=>k});var F=P(574),m=P(319);function k(oe,J){return new F.y(b=>{const D=new m.w;let E=0;return D.add(J.schedule(function(){E!==oe.length?(b.next(oe[E++]),b.closed||D.add(this.schedule())):b.complete()})),D})}},377:(It,Ae,P)=>{"use strict";P.d(Ae,{hZ:()=>m});const m="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},554:(It,Ae,P)=>{"use strict";P.d(Ae,{L:()=>F});const F="function"==typeof Symbol&&Symbol.observable||"@@observable"},181:(It,Ae,P)=>{"use strict";P.d(Ae,{b:()=>F});const F="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},971:(It,Ae,P)=>{"use strict";P.d(Ae,{N:()=>m});const m=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},449:(It,Ae,P)=>{"use strict";function F(m){setTimeout(()=>{throw m},0)}P.d(Ae,{z:()=>F})},487:(It,Ae,P)=>{"use strict";function F(m){return m}P.d(Ae,{y:()=>F})},796:(It,Ae,P)=>{"use strict";P.d(Ae,{k:()=>F});const F=Array.isArray||(m=>m&&"number"==typeof m.length)},489:(It,Ae,P)=>{"use strict";P.d(Ae,{z:()=>F});const F=m=>m&&"number"==typeof m.length&&"function"!=typeof m},105:(It,Ae,P)=>{"use strict";function F(m){return"function"==typeof m}P.d(Ae,{m:()=>F})},555:(It,Ae,P)=>{"use strict";function F(m){return null!==m&&"object"==typeof m}P.d(Ae,{K:()=>F})},72:(It,Ae,P)=>{"use strict";function F(m){return!!m&&"function"!=typeof m.subscribe&&"function"==typeof m.then}P.d(Ae,{t:()=>F})},869:(It,Ae,P)=>{"use strict";function F(m){return m&&"function"==typeof m.schedule}P.d(Ae,{K:()=>F})},444:(It,Ae,P)=>{"use strict";P.d(Ae,{s:()=>L});var F=P(15),m=P(449),oe=P(377),b=P(554),E=P(489),O=P(72),j=P(555);const L=Z=>{if(Z&&"function"==typeof Z[b.L])return(Z=>Y=>{const K=Z[b.L]();if("function"!=typeof K.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return K.subscribe(Y)})(Z);if((0,E.z)(Z))return(0,F.V)(Z);if((0,O.t)(Z))return(Z=>Y=>(Z.then(K=>{Y.closed||(Y.next(K),Y.complete())},K=>Y.error(K)).then(null,m.z),Y))(Z);if(Z&&"function"==typeof Z[oe.hZ])return(Z=>Y=>{const K=Z[oe.hZ]();for(;;){let z;try{z=K.next()}catch(G){return Y.error(G),Y}if(z.done){Y.complete();break}if(Y.next(z.value),Y.closed)break}return"function"==typeof K.return&&Y.add(()=>{K.return&&K.return()}),Y})(Z);{const K=`You provided ${(0,j.K)(Z)?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(K)}}},15:(It,Ae,P)=>{"use strict";P.d(Ae,{V:()=>F});const F=m=>k=>{for(let oe=0,J=m.length;oe<J&&!k.closed;oe++)k.next(m[oe]);k.complete()}},782:(It,Ae,P)=>{"use strict";P.d(Ae,{e:()=>J});var F=P(0),k=P(340),oe=P(639);let J=(()=>{class D{constructor(){this.manager=new F.UserManager({authority:k.N.IDENTITY_SERVER,client_id:k.N.CLIENT_ID,redirect_uri:k.N.REDIRECT_URI,post_logout_redirect_uri:k.N.POSTLOGOUT_URI,response_type:k.N.RESPONSE_TYPE,scope:k.N.SCOPE,filterProtocolClaims:!0,loadUserInfo:!0}),this.manager.getUser().then(O=>{this.user=O})}isLoggedIn(){return null!=this.user&&!this.user.expired}getClaims(){return this.user.profile}getAuthorizationHeaderValue(){return`${this.user.token_type} ${this.user.access_token}`}startAuthentication(){return this.manager.signinRedirect()}signOut(){return this.manager.signoutRedirect()}completeAuthentication(){return this.manager.signinRedirectCallback().then(O=>{this.user=O,console.log(this.user)})}}return D.\u0275fac=function(O){return new(O||D)},D.\u0275prov=oe.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()},340:(It,Ae,P)=>{"use strict";P.d(Ae,{N:()=>F});const F={production:!0,IDENTITY_SERVER:"https://spiceopedia-identity.azurewebsites.net/",CLIENT_ID:"spicyui",REDIRECT_URI:"https://spiceopedia.azurewebsites.net/auth-callback",POSTLOGOUT_URI:"https://spiceopedia.azurewebsites.net/logout",RESPONSE_TYPE:"code",SCOPE:"openid profile email role api1.read",WEBAPI_URI:"https://spiceopediaapi.azurewebsites.net/api/"}},233:(It,Ae,P)=>{"use strict";var F=P(583),m=P(639);class k extends F.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends k{static makeCurrent(){(0,F.HT)(new oe)}onAndCancel(U,N,X){return U.addEventListener(N,X,!1),()=>{U.removeEventListener(N,X,!1)}}dispatchEvent(U,N){U.dispatchEvent(N)}remove(U){U.parentNode&&U.parentNode.removeChild(U)}createElement(U,N){return(N=N||this.getDefaultDocument()).createElement(U)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(U){return U.nodeType===Node.ELEMENT_NODE}isShadowRoot(U){return U instanceof DocumentFragment}getGlobalEventTarget(U,N){return"window"===N?window:"document"===N?U:"body"===N?U.body:null}getBaseHref(U){const N=(J=J||document.querySelector("base"),J?J.getAttribute("href"):null);return null==N?null:function(x){D=D||document.createElement("a"),D.setAttribute("href",x);const U=D.pathname;return"/"===U.charAt(0)?U:`/${U}`}(N)}resetBaseElement(){J=null}getUserAgent(){return window.navigator.userAgent}getCookie(U){return(0,F.Mx)(document.cookie,U)}}let D,J=null;const O=new m.OlP("TRANSITION_ID"),L=[{provide:m.ip1,useFactory:function(x,U,N){return()=>{N.get(m.CZH).donePromise.then(()=>{const X=(0,F.q)(),I=U.querySelectorAll(`style[ng-transition="${x}"]`);for(let ee=0;ee<I.length;ee++)X.remove(I[ee])})}},deps:[O,F.K0,m.zs3],multi:!0}];class Z{static init(){(0,m.VLi)(new Z)}addToWindow(U){m.dqk.getAngularTestability=(X,I=!0)=>{const ee=U.findTestabilityInTree(X,I);if(null==ee)throw new Error("Could not find testability for element.");return ee},m.dqk.getAllAngularTestabilities=()=>U.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>U.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(X=>{const I=m.dqk.getAllAngularTestabilities();let ee=I.length,se=!1;const ce=function(Ee){se=se||Ee,ee--,0==ee&&X(se)};I.forEach(function(Ee){Ee.whenStable(ce)})})}findTestabilityInTree(U,N,X){if(null==N)return null;const I=U.getTestability(N);return null!=I?I:X?(0,F.q)().isShadowRoot(N)?this.findTestabilityInTree(U,N.host,!0):this.findTestabilityInTree(U,N.parentElement,!0):null}}let Y=(()=>{class x{build(){return new XMLHttpRequest}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();const at=new m.OlP("EventManagerPlugins");let tt=(()=>{class x{constructor(N,X){this._zone=X,this._eventNameToPlugin=new Map,N.forEach(I=>I.manager=this),this._plugins=N.slice().reverse()}addEventListener(N,X,I){return this._findPluginFor(X).addEventListener(N,X,I)}addGlobalEventListener(N,X,I){return this._findPluginFor(X).addGlobalEventListener(N,X,I)}getZone(){return this._zone}_findPluginFor(N){const X=this._eventNameToPlugin.get(N);if(X)return X;const I=this._plugins;for(let ee=0;ee<I.length;ee++){const se=I[ee];if(se.supports(N))return this._eventNameToPlugin.set(N,se),se}throw new Error(`No event manager plugin found for event ${N}`)}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(at),m.LFG(m.R0b))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();class ot{constructor(U){this._doc=U}addGlobalEventListener(U,N,X){const I=(0,F.q)().getGlobalEventTarget(this._doc,U);if(!I)throw new Error(`Unsupported event target ${I} for event ${N}`);return this.addEventListener(I,N,X)}}let Re=(()=>{class x{constructor(){this._stylesSet=new Set}addStyles(N){const X=new Set;N.forEach(I=>{this._stylesSet.has(I)||(this._stylesSet.add(I),X.add(I))}),this.onStylesAdded(X)}onStylesAdded(N){}getAllStyles(){return Array.from(this._stylesSet)}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})(),ht=(()=>{class x extends Re{constructor(N){super(),this._doc=N,this._hostNodes=new Map,this._hostNodes.set(N.head,[])}_addStylesToHost(N,X,I){N.forEach(ee=>{const se=this._doc.createElement("style");se.textContent=ee,I.push(X.appendChild(se))})}addHost(N){const X=[];this._addStylesToHost(this._stylesSet,N,X),this._hostNodes.set(N,X)}removeHost(N){const X=this._hostNodes.get(N);X&&X.forEach(At),this._hostNodes.delete(N)}onStylesAdded(N){this._hostNodes.forEach((X,I)=>{this._addStylesToHost(N,I,X)})}ngOnDestroy(){this._hostNodes.forEach(N=>N.forEach(At))}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(F.K0))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();function At(x){(0,F.q)().remove(x)}const En={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ut=/%COMP%/g;function qt(x,U,N){for(let X=0;X<U.length;X++){let I=U[X];Array.isArray(I)?qt(x,I,N):(I=I.replace(Ut,x),N.push(I))}return N}function pe(x){return U=>{if("__ngUnwrap__"===U)return x;!1===x(U)&&(U.preventDefault(),U.returnValue=!1)}}let T=(()=>{class x{constructor(N,X,I){this.eventManager=N,this.sharedStylesHost=X,this.appId=I,this.rendererByCompId=new Map,this.defaultRenderer=new ge(N)}createRenderer(N,X){if(!N||!X)return this.defaultRenderer;switch(X.encapsulation){case m.ifc.Emulated:{let I=this.rendererByCompId.get(X.id);return I||(I=new We(this.eventManager,this.sharedStylesHost,X,this.appId),this.rendererByCompId.set(X.id,I)),I.applyToHost(N),I}case 1:case m.ifc.ShadowDom:return new Ge(this.eventManager,this.sharedStylesHost,N,X);default:if(!this.rendererByCompId.has(X.id)){const I=qt(X.id,X.styles,[]);this.sharedStylesHost.addStyles(I),this.rendererByCompId.set(X.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(tt),m.LFG(ht),m.LFG(m.AFp))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();class ge{constructor(U){this.eventManager=U,this.data=Object.create(null)}destroy(){}createElement(U,N){return N?document.createElementNS(En[N]||N,U):document.createElement(U)}createComment(U){return document.createComment(U)}createText(U){return document.createTextNode(U)}appendChild(U,N){U.appendChild(N)}insertBefore(U,N,X){U&&U.insertBefore(N,X)}removeChild(U,N){U&&U.removeChild(N)}selectRootElement(U,N){let X="string"==typeof U?document.querySelector(U):U;if(!X)throw new Error(`The selector "${U}" did not match any elements`);return N||(X.textContent=""),X}parentNode(U){return U.parentNode}nextSibling(U){return U.nextSibling}setAttribute(U,N,X,I){if(I){N=I+":"+N;const ee=En[I];ee?U.setAttributeNS(ee,N,X):U.setAttribute(N,X)}else U.setAttribute(N,X)}removeAttribute(U,N,X){if(X){const I=En[X];I?U.removeAttributeNS(I,N):U.removeAttribute(`${X}:${N}`)}else U.removeAttribute(N)}addClass(U,N){U.classList.add(N)}removeClass(U,N){U.classList.remove(N)}setStyle(U,N,X,I){I&(m.JOm.DashCase|m.JOm.Important)?U.style.setProperty(N,X,I&m.JOm.Important?"important":""):U.style[N]=X}removeStyle(U,N,X){X&m.JOm.DashCase?U.style.removeProperty(N):U.style[N]=""}setProperty(U,N,X){U[N]=X}setValue(U,N){U.nodeValue=N}listen(U,N,X){return"string"==typeof U?this.eventManager.addGlobalEventListener(U,N,pe(X)):this.eventManager.addEventListener(U,N,pe(X))}}class We extends ge{constructor(U,N,X,I){super(U),this.component=X;const ee=qt(I+"-"+X.id,X.styles,[]);N.addStyles(ee),this.contentAttr="_ngcontent-%COMP%".replace(Ut,I+"-"+X.id),this.hostAttr="_nghost-%COMP%".replace(Ut,I+"-"+X.id)}applyToHost(U){super.setAttribute(U,this.hostAttr,"")}createElement(U,N){const X=super.createElement(U,N);return super.setAttribute(X,this.contentAttr,""),X}}class Ge extends ge{constructor(U,N,X,I){super(U),this.sharedStylesHost=N,this.hostEl=X,this.shadowRoot=X.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ee=qt(I.id,I.styles,[]);for(let se=0;se<ee.length;se++){const ce=document.createElement("style");ce.textContent=ee[se],this.shadowRoot.appendChild(ce)}}nodeOrShadowRoot(U){return U===this.hostEl?this.shadowRoot:U}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(U,N){return super.appendChild(this.nodeOrShadowRoot(U),N)}insertBefore(U,N,X){return super.insertBefore(this.nodeOrShadowRoot(U),N,X)}removeChild(U,N){return super.removeChild(this.nodeOrShadowRoot(U),N)}parentNode(U){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(U)))}}let pt=(()=>{class x extends ot{constructor(N){super(N)}supports(N){return!0}addEventListener(N,X,I){return N.addEventListener(X,I,!1),()=>this.removeEventListener(N,X,I)}removeEventListener(N,X,I){return N.removeEventListener(X,I)}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(F.K0))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();const $t=["alt","control","meta","shift"],nt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},an={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nr={alt:x=>x.altKey,control:x=>x.ctrlKey,meta:x=>x.metaKey,shift:x=>x.shiftKey};let yt=(()=>{class x extends ot{constructor(N){super(N)}supports(N){return null!=x.parseEventName(N)}addEventListener(N,X,I){const ee=x.parseEventName(X),se=x.eventCallback(ee.fullKey,I,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,F.q)().onAndCancel(N,ee.domEventName,se))}static parseEventName(N){const X=N.toLowerCase().split("."),I=X.shift();if(0===X.length||"keydown"!==I&&"keyup"!==I)return null;const ee=x._normalizeKey(X.pop());let se="";if($t.forEach(Ee=>{const Fe=X.indexOf(Ee);Fe>-1&&(X.splice(Fe,1),se+=Ee+".")}),se+=ee,0!=X.length||0===ee.length)return null;const ce={};return ce.domEventName=I,ce.fullKey=se,ce}static getEventFullKey(N){let X="",I=function(x){let U=x.key;if(null==U){if(U=x.keyIdentifier,null==U)return"Unidentified";U.startsWith("U+")&&(U=String.fromCharCode(parseInt(U.substring(2),16)),3===x.location&&an.hasOwnProperty(U)&&(U=an[U]))}return nt[U]||U}(N);return I=I.toLowerCase()," "===I?I="space":"."===I&&(I="dot"),$t.forEach(ee=>{ee!=I&&nr[ee](N)&&(X+=ee+".")}),X+=I,X}static eventCallback(N,X,I){return ee=>{x.getEventFullKey(ee)===N&&I.runGuarded(()=>X(ee))}}static _normalizeKey(N){switch(N){case"esc":return"escape";default:return N}}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(F.K0))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac}),x})();const Ar=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:F.bD},{provide:m.g9A,useValue:function(){oe.makeCurrent(),Z.init()},multi:!0},{provide:F.K0,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),pi=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:at,useClass:pt,multi:!0,deps:[F.K0,m.R0b,m.Lbi]},{provide:at,useClass:yt,multi:!0,deps:[F.K0]},[],{provide:T,useClass:T,deps:[tt,ht,m.AFp]},{provide:m.FYo,useExisting:T},{provide:Re,useExisting:ht},{provide:ht,useClass:ht,deps:[F.K0]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:tt,useClass:tt,deps:[at,m.R0b]},{provide:F.JF,useClass:Y,deps:[]},[]];let Pn=(()=>{class x{constructor(N){if(N)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(N){return{ngModule:x,providers:[{provide:m.AFp,useValue:N.appId},{provide:O,useExisting:m.AFp},L]}}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(x,12))},x.\u0275mod=m.oAB({type:x}),x.\u0275inj=m.cJS({providers:pi,imports:[F.ez,m.hGG]}),x})();"undefined"!=typeof window&&window;var Zt=P(353),Gn=P(782);let nn=(()=>{class x{constructor(N){this.authService=N}canActivate(){return!!this.authService.isLoggedIn()||(this.authService.startAuthentication(),!1)}}return x.\u0275fac=function(N){return new(N||x)(m.LFG(Gn.e))},x.\u0275prov=m.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),a=(()=>{class x{constructor(N){this.authService=N}ngOnInit(){}signout(){this.authService.signOut()}}return x.\u0275fac=function(N){return new(N||x)(m.Y36(Gn.e))},x.\u0275cmp=m.Xpm({type:x,selectors:[["app-header"]],decls:18,vars:0,consts:[[1,"navbar","col-lg-12","col-12","p-0","fixed-top","d-flex","flex-row","default-layout-navbar"],[1,"text-center","navbar-brand-wrapper","d-flex","align-items-center","justify-content-center"],["href","index.html",1,"navbar-brand","brand-logo"],["src","../assets/images/logo_old.svg","alt","logo"],["href","index.html",1,"navbar-brand","brand-logo-mini"],["src","../assets/images/logo-mini.svg","alt","logo"],[1,"navbar-menu-wrapper","d-flex","align-items-stretch"],["type","button","data-toggle","minimize",1,"navbar-toggler","navbar-toggler","align-self-center"],[1,"fas","fa-bars"],[1,"navbar-nav","navbar-nav-right"],[1,"nav-item","nav-profile","dropdown"],["href","#","data-toggle","dropdown","id","profileDropdown",1,"nav-link","dropdown-toggle"],["src","http://via.placeholder.com/30x30","alt","profile"],["aria-labelledby","profileDropdown",1,"dropdown-menu","dropdown-menu-right","navbar-dropdown"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],[1,"fas","fa-power-off","text-primary"]],template:function(N,X){1&N&&(m.TgZ(0,"nav",0),m.TgZ(1,"div",1),m.TgZ(2,"a",2),m._UZ(3,"img",3),m.qZA(),m.TgZ(4,"a",4),m._UZ(5,"img",5),m.qZA(),m.qZA(),m.TgZ(6,"div",6),m.TgZ(7,"button",7),m._UZ(8,"span",8),m.qZA(),m.TgZ(9,"ul",9),m.TgZ(10,"li",10),m.TgZ(11,"a",11),m._UZ(12,"img",12),m.qZA(),m.TgZ(13,"div",13),m._UZ(14,"div",14),m.TgZ(15,"a",15),m.NdJ("click",function(){return X.signout()}),m._UZ(16,"i",16),m._uU(17," Logout "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA())},styles:[""]}),x})();const s=function(){return["/dashboard"]},c=function(){return["/taxonomy"]},h=function(){return["/authcallback"]};let y=(()=>{class x{constructor(N){this.authService=N}ngOnInit(){this.userName=this.authService.getClaims().given_name,this.role=this.authService.getClaims().role}}return x.\u0275fac=function(N){return new(N||x)(m.Y36(Gn.e))},x.\u0275cmp=m.Xpm({type:x,selectors:[["app-sidebar"]],decls:31,vars:8,consts:[["id","sidebar",1,"sidebar","sidebar-offcanvas"],[1,"nav"],[1,"nav-item","nav-profile"],[1,"nav-link"],[1,"profile-image"],["src","../assets/images/m_avatar.jpg","alt","image"],[1,"profile-name"],[1,"name"],[1,"designation"],[1,"nav-item","active"],[1,"nav-link",3,"routerLink"],[1,"fa","fa-home","menu-icon"],[1,"menu-title"],[1,"nav-item"],[1,"fa","fa-puzzle-piece","menu-icon"],["href","pages/documentation.html",1,"nav-link"],[1,"far","fa-file-alt","menu-icon"]],template:function(N,X){1&N&&(m.TgZ(0,"nav",0),m.TgZ(1,"ul",1),m.TgZ(2,"li",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m._UZ(5,"img",5),m.qZA(),m.TgZ(6,"div",6),m.TgZ(7,"p",7),m._uU(8),m.qZA(),m.TgZ(9,"p",8),m._uU(10),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"li",9),m.TgZ(12,"a",10),m._UZ(13,"i",11),m.TgZ(14,"span",12),m._uU(15,"Dashboard"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(16,"li",13),m.TgZ(17,"a",10),m._UZ(18,"i",14),m.TgZ(19,"span",12),m._uU(20,"Taxonomy"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"li",13),m.TgZ(22,"a",10),m._UZ(23,"i",14),m.TgZ(24,"span",12),m._uU(25,"Authcallback"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"li",13),m.TgZ(27,"a",15),m._UZ(28,"i",16),m.TgZ(29,"span",12),m._uU(30,"Documentation"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&N&&(m.xp6(8),m.hij(" Welcome ",X.userName," "),m.xp6(2),m.hij(" ",X.role," "),m.xp6(2),m.Q6J("routerLink",m.DdM(5,s)),m.xp6(5),m.Q6J("routerLink",m.DdM(6,c)),m.xp6(5),m.Q6J("routerLink",m.DdM(7,h)))},directives:[Zt.yS],styles:[""]}),x})(),R=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275cmp=m.Xpm({type:x,selectors:[["app-footer"]],decls:10,vars:0,consts:[[1,"footer"],[1,"d-sm-flex","justify-content-center","justify-content-sm-between"],[1,"text-muted","text-center","text-sm-left","d-block","d-sm-inline-block"],["href","#","target","_blank"],[1,"float-none","float-sm-right","d-block","mt-1","mt-sm-0","text-center"],[1,"far","fa-heart","text-danger"]],template:function(N,X){1&N&&(m.TgZ(0,"footer",0),m.TgZ(1,"div",1),m.TgZ(2,"span",2),m._uU(3,"Copyright \xa9 2021 "),m.TgZ(4,"a",3),m._uU(5,"Spiceopedia"),m.qZA(),m._uU(6,". All rights reserved."),m.qZA(),m.TgZ(7,"span",4),m._uU(8,"Hand-crafted & made with "),m._UZ(9,"i",5),m.qZA(),m.qZA(),m.qZA())},styles:[""]}),x})(),B=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275cmp=m.Xpm({type:x,selectors:[["app-main-layout"]],decls:6,vars:0,consts:[[1,"container-fluid","page-body-wrapper",2,"padding-top","70px"],[1,"main-panel"]],template:function(N,X){1&N&&(m._UZ(0,"app-header"),m.TgZ(1,"div",0),m._UZ(2,"app-sidebar"),m.TgZ(3,"div",1),m._UZ(4,"router-outlet"),m.qZA(),m.qZA(),m._UZ(5,"app-footer"))},directives:[a,y,Zt.lC,R],styles:[""]}),x})(),re=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(N){return new(N||x)},x.\u0275cmp=m.Xpm({type:x,selectors:[["app-plain-layout"]],decls:1,vars:0,template:function(N,X){1&N&&m._UZ(0,"router-outlet")},directives:[Zt.lC],styles:[""]}),x})();const q=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"",component:B,children:[{path:"dashboard",loadChildren:()=>P.e(152).then(P.bind(P,152)).then(x=>x.DashboardModule)},{path:"taxonomy",loadChildren:()=>P.e(555).then(P.bind(P,763)).then(x=>x.TaxonomyModule)},{path:"logout",loadChildren:()=>P.e(513).then(P.bind(P,513)).then(x=>x.LogoutModule)}],canActivate:[nn]},{path:"",component:re,children:[{path:"login",loadChildren:"../login/login.module#LoginModule"},{path:"registration",loadChildren:"../registration/registration.module#RegistrationModule"}]},{path:"",component:re,children:[{path:"auth-callback",loadChildren:()=>P.e(464).then(P.bind(P,464)).then(x=>x.AuthCallbackModule)}]}];let ne=(()=>{class x{}return x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=m.oAB({type:x}),x.\u0275inj=m.cJS({imports:[[Zt.Bz.forChild(q)],Zt.Bz]}),x})(),ae=(()=>{class x{}return x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=m.oAB({type:x}),x.\u0275inj=m.cJS({imports:[[F.ez,ne]]}),x})(),ue=(()=>{class x{}return x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=m.oAB({type:x}),x.\u0275inj=m.cJS({providers:[],imports:[[Pn,Zt.Bz.forRoot([]),ae]]}),x})();P(340).N.production&&(0,m.G48)(),Ar().bootstrapModule(ue).catch(x=>console.error(x))}},It=>{It(It.s=233)}]);